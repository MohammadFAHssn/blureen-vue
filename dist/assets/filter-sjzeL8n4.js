import{V as Ve,m as De}from"./VTextField-ChUaU2S8.js";import{au as me,a5 as Q,a9 as Pe,w as j,aa as he,d as T,F as J,s as z,ac as Te,b1 as Oe,a6 as B,a$ as de,r as Y,Y as K,cm as Le,b0 as Fe,a7 as se,c2 as xe,at as Ce,ba as Ae,bW as Be,aM as Ke,Z as Me,a_ as Ee,H as He,b as x,a8 as ae,J as ze,y as oe,aT as $e,ak as Ne,aC as be,bF as ve,aI as ie,bC as Ue,bx as je,cf as we,cg as ke,bD as We,a1 as Se,cn as Ye,bv as Je,ce as Qe,a2 as Xe,aV as Ze,v as Ge,n as q}from"./index-DCB_bfED.js";import{a as qe}from"./form-DqXAVUfE.js";import{g as et,f as tt}from"./VOverlay-BEXuEyWe.js";import{e as lt,m as nt,V as at,a as Ie,c as ot}from"./VList-Ci2HC1UJ.js";import{V as rt}from"./dialog-transition-XxJTDxVB.js";import{V as ut}from"./VMenu-DZ6e33DT.js";import{V as st}from"./VDivider-C8iBtPGI.js";import{V as it}from"./VCheckboxBtn-DtKn4TRP.js";const ct=Q({renderless:Boolean,...Te()},"VVirtualScrollItem"),ft=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ct(),emits:{"update:height":e=>!0},setup(e,n){let{attrs:l,emit:r,slots:o}=n;const{resizeRef:d,contentRect:v}=Pe(void 0,"border");j(()=>{var s;return(s=v.value)==null?void 0:s.height},s=>{s!=null&&r("update:height",s)}),he(()=>{var s,u;return e.renderless?T(J,null,[(s=o.default)==null?void 0:s.call(o,{itemRef:d})]):T("div",z({ref:d,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(u=o.default)==null?void 0:u.call(o)])})}}),dt=-1,vt=1,ce=100,mt=Q({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function ht(e,n){const l=Oe(),r=B(0);de(()=>{r.value=parseFloat(e.itemHeight||0)});const o=B(0),d=B(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),v=B(0),s=B(0),u=Y(),h=Y();let i=0;const{resizeRef:C,contentRect:b}=Pe();de(()=>{C.value=u.value});const m=K(()=>{var t;return u.value===document.documentElement?l.height.value:((t=b.value)==null?void 0:t.height)||parseInt(e.height)||0}),P=K(()=>!!(u.value&&h.value&&m.value&&r.value));let g=Array.from({length:n.value.length}),p=Array.from({length:n.value.length});const y=B(0);let w=-1;function _(t){return g[t]||r.value}const $=Le(()=>{const t=performance.now();p[0]=0;const a=n.value.length;for(let f=1;f<=a-1;f++)p[f]=(p[f-1]||0)+_(f-1);y.value=Math.max(y.value,performance.now()-t)},y),S=j(P,t=>{t&&(S(),i=h.value.offsetTop,$.immediate(),H(),~w&&Ce(()=>{Ae&&window.requestAnimationFrame(()=>{ne(w),w=-1})}))});Fe(()=>{$.clear()});function ee(t,a){const f=g[t],k=r.value;r.value=k?Math.min(r.value,a):a,(f!==a||k!==r.value)&&(g[t]=a,$())}function L(t){t=se(t,0,n.value.length-1);const a=Math.floor(t),f=t%1,k=a+1,A=p[a]||0,c=p[k]||A;return A+(c-A)*f}function E(t){return gt(p,t)}let W=0,N=0,X=0;j(m,(t,a)=>{a&&(H(),t<a&&requestAnimationFrame(()=>{N=0,H()}))});let Z=-1;function te(){if(!u.value||!h.value)return;const t=u.value.scrollTop,a=performance.now();a-X>500?(N=Math.sign(t-W),i=h.value.offsetTop):N=t-W,W=t,X=a,window.clearTimeout(Z),Z=window.setTimeout(U,500),H()}function U(){!u.value||!h.value||(N=0,X=0,window.clearTimeout(Z),H())}let le=-1;function H(){cancelAnimationFrame(le),le=requestAnimationFrame(re)}function re(){if(!u.value||!m.value||!r.value)return;const t=W-i,a=Math.sign(N),f=Math.max(0,t-ce),k=se(E(f),0,n.value.length),A=t+m.value+ce,c=se(E(A)+1,k+1,n.value.length);if((a!==dt||k<o.value)&&(a!==vt||c>d.value)){const M=L(o.value)-L(k),R=L(c)-L(d.value);Math.max(M,R)>ce?(o.value=k,d.value=c):(k<=0&&(o.value=k),c>=n.value.length&&(d.value=c))}v.value=L(o.value),s.value=L(n.value.length)-L(d.value)}function ne(t){const a=L(t);!u.value||t&&!a?w=t:u.value.scrollTop=a}const ue=K(()=>n.value.slice(o.value,d.value).map((t,a)=>{const f=a+o.value;return{raw:t,index:f,key:xe(t,e.itemKey,f)}}));return j(n,()=>{g=Array.from({length:n.value.length}),p=Array.from({length:n.value.length}),$.immediate(),H()},{deep:1}),{calculateVisibleItems:H,containerRef:u,markerRef:h,computedItems:ue,paddingTop:v,paddingBottom:s,scrollToIndex:ne,handleScroll:te,handleScrollend:U,handleItemResize:ee}}function gt(e,n){let l=e.length-1,r=0,o=0,d=null,v=-1;if(e[l]<n)return l;for(;r<=l;)if(o=r+l>>1,d=e[o],d>n)l=o-1;else if(d<n)v=o,r=o+1;else return d===n?o:r;return v}const yt=Q({items:{type:Array,default:()=>[]},renderless:Boolean,...mt(),...Te(),...$e()},"VVirtualScroll"),pt=me()({name:"VVirtualScroll",props:yt(),setup(e,n){let{slots:l}=n;const r=Be("VVirtualScroll"),{dimensionStyles:o}=Ke(e),{calculateVisibleItems:d,containerRef:v,markerRef:s,handleScroll:u,handleScrollend:h,handleItemResize:i,scrollToIndex:C,paddingTop:b,paddingBottom:m,computedItems:P}=ht(e,Me(()=>e.items));return Ee(()=>e.renderless,()=>{function g(){var w,_;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[y]("scroll",u,{passive:!0}),document[y]("scrollend",h)):((w=v.value)==null||w[y]("scroll",u,{passive:!0}),(_=v.value)==null||_[y]("scrollend",h))}He(()=>{v.value=et(r.vnode.el,!0),g(!0)}),Fe(g)}),he(()=>{const g=P.value.map(p=>x(ft,{key:p.key,renderless:e.renderless,"onUpdate:height":y=>i(p.index,y)},{default:y=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:p.raw,index:p.index,...y})}}));return e.renderless?T(J,null,[T("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:ae(b.value)}},null),g,T("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ae(m.value)}},null)]):T("div",{ref:v,class:oe(["v-virtual-scroll",e.class]),onScrollPassive:u,onScrollend:h,style:ze([o.value,e.style])},[T("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:ae(b.value),paddingBottom:ae(m.value)}},[g])])}),{calculateVisibleItems:d,scrollToIndex:C}}});function Vt(e,n){const l=B(!1);let r;function o(s){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function d(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(l.value){const u=j(l,()=>{u(),s()})}else s()})}async function v(s){var i,C;if(s.key==="Tab"&&((i=n.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(s.key))return;const u=(C=e.value)==null?void 0:C.$el;if(!u)return;(s.key==="Home"||s.key==="End")&&u.scrollTo({top:s.key==="Home"?0:u.scrollHeight,behavior:"smooth"}),await d();const h=u.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const b=u.getBoundingClientRect().top;for(const m of h)if(m.getBoundingClientRect().top>=b){m.focus();break}}else{const b=u.getBoundingClientRect().bottom;for(const m of[...h].reverse())if(m.getBoundingClientRect().bottom<=b){m.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const bt=Q({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:We,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...nt({itemChildren:!1})},"Select"),wt=Q({...bt(),...je(De({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ue({transition:{component:rt}})},"VSelect"),_t=me()({name:"VSelect",props:wt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:l}=n;const{t:r}=Ne(),o=Y(),d=Y(),v=Y(),{items:s,transformIn:u,transformOut:h}=lt(e),i=be(e,"modelValue",[],t=>u(t===null?[null]:ve(t)),t=>{const a=h(t);return e.multiple?a:a[0]??null}),C=K(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),b=qe(e),m=K(()=>i.value.map(t=>t.value)),P=B(!1);let g="",p=-1,y;const w=K(()=>e.hideSelected?s.value.filter(t=>!i.value.some(a=>(e.valueComparator||ie)(a,t))):s.value),_=K(()=>e.hideNoData&&!w.value.length||b.isReadonly.value||b.isDisabled.value),$=be(e,"menu"),S=K({get:()=>$.value,set:t=>{var a;$.value&&!t&&((a=d.value)!=null&&a.Î¨openChildren.size)||t&&_.value||($.value=t)}}),ee=Me(()=>S.value?e.closeText:e.openText),L=K(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),E=Y(),W=Vt(E,o);function N(t){e.openOnClear&&(S.value=!0)}function X(){_.value||(S.value=!S.value)}function Z(t){we(t)&&te(t)}function te(t){var V,D,F;if(!t.key||b.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(S.value=!0),["Escape","Tab"].includes(t.key)&&(S.value=!1),t.key==="Home"?(V=E.value)==null||V.focus("first"):t.key==="End"&&((D=E.value)==null||D.focus("last"));const a=1e3;if(!we(t))return;const f=performance.now();f-y>a&&(g="",p=-1),g+=t.key.toLowerCase(),y=f;const k=w.value;function A(){let I=c();return I||g.at(-1)===g.at(-2)&&(g=g.slice(0,-1),I=c(),I)||(p=-1,I=c(),I)?I:(g=t.key.toLowerCase(),c())}function c(){for(let I=p+1;I<k.length;I++){const G=k[I];if(G.title.toLowerCase().startsWith(g))return[G,I]}}const M=A();if(!M)return;const[R,O]=M;p=O,(F=E.value)==null||F.focus(O),e.multiple||(i.value=[R])}function U(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const f=i.value.findIndex(A=>(e.valueComparator||ie)(A.value,t.value)),k=a??!~f;if(~f){const A=k?[...i.value,t]:[...i.value];A.splice(f,1),i.value=A}else k&&(i.value=[...i.value,t])}else{const f=a!==!1;i.value=f?[t]:[],Ce(()=>{S.value=!1})}}function le(t){var a;(a=E.value)!=null&&a.$el.contains(t.relatedTarget)||(S.value=!1)}function H(){var t;e.eager&&((t=v.value)==null||t.calculateVisibleItems())}function re(){var t;P.value&&((t=o.value)==null||t.focus())}function ne(t){P.value=!0}function ue(t){if(t==null)i.value=[];else if(ke(o.value,":autofill")||ke(o.value,":-webkit-autofill")){const a=s.value.find(f=>f.title===t);a&&U(a)}else o.value&&(o.value.value="")}return j(S,()=>{if(!e.hideSelected&&S.value&&i.value.length){const t=w.value.findIndex(a=>i.value.some(f=>(e.valueComparator||ie)(f.value,a.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=v.value)==null||a.scrollToIndex(t))})}}),j(()=>e.items,(t,a)=>{S.value||P.value&&e.hideNoData&&!a.length&&t.length&&(S.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),a=!!(!e.hideNoData||w.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),f=i.value.length>0,k=Ve.filterProps(e),A=f||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return x(Ve,z({ref:o},k,{modelValue:i.value.map(c=>c.props.title).join(", "),"onUpdate:modelValue":ue,focused:P.value,"onUpdate:focused":c=>P.value=c,validationValue:i.externalValue,counterValue:C.value,dirty:f,class:["v-select",{"v-select--active-menu":S.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:A,"onClick:clear":N,"onMousedown:control":X,onBlur:le,onKeydown:te,"aria-label":r(ee.value),title:r(ee.value)}),{...l,default:()=>T(J,null,[x(ut,z({ref:d,modelValue:S.value,"onUpdate:modelValue":c=>S.value=c,activator:"parent",contentClass:"v-select__content",disabled:_.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:H,onAfterLeave:re},L.value),{default:()=>[a&&x(at,z({ref:E,selected:m.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:Z,onFocusin:ne,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},W,e.listProps),{default:()=>{var c,M,R;return[(c=l["prepend-item"])==null?void 0:c.call(l),!w.value.length&&!e.hideNoData&&(((M=l["no-data"])==null?void 0:M.call(l))??x(Ie,{key:"no-data",title:r(e.noDataText)},null)),x(pt,{ref:v,renderless:!0,items:w.value,itemKey:"value"},{default:O=>{var ge,ye,pe;let{item:V,index:D,itemRef:F}=O;const I=Ye(V.props),G=z(V.props,{ref:F,key:V.value,onClick:()=>U(V,null)});return V.type==="divider"?((ge=l.divider)==null?void 0:ge.call(l,{props:V.raw,index:D}))??x(st,z(V.props,{key:`divider-${D}`}),null):V.type==="subheader"?((ye=l.subheader)==null?void 0:ye.call(l,{props:V.raw,index:D}))??x(ot,z(V.props,{key:`subheader-${D}`}),null):((pe=l.item)==null?void 0:pe.call(l,{item:V,index:D,props:G}))??x(Ie,z(G,{role:"option"}),{prepend:Re=>{let{isSelected:_e}=Re;return T(J,null,[e.multiple&&!e.hideSelected?x(it,{key:V.value,modelValue:_e,ripple:!1,tabindex:"-1"},null):void 0,I.prependAvatar&&x(Je,{image:I.prependAvatar},null),I.prependIcon&&x(Se,{icon:I.prependIcon},null)])}})}}),(R=l["append-item"])==null?void 0:R.call(l)]}})]}),i.value.map((c,M)=>{function R(F){F.stopPropagation(),F.preventDefault(),U(c,!1)}const O={"onClick:close":R,onKeydown(F){F.key!=="Enter"&&F.key!==" "||(F.preventDefault(),F.stopPropagation(),R(F))},onMousedown(F){F.preventDefault(),F.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},V=t?!!l.chip:!!l.selection,D=V?Qe(t?l.chip({item:c,index:M,props:O}):l.selection({item:c,index:M})):void 0;if(!(V&&!D))return T("div",{key:c.value,class:"v-select__selection"},[t?l.chip?x(Ze,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[D]}):x(Xe,z({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},O),null):D??T("span",{class:"v-select__selection-text"},[c.title,e.multiple&&M<i.value.length-1&&T("span",{class:"v-select__selection-comma"},[Ge(",")])])])})]),"append-inner":function(){var O,V;for(var c=arguments.length,M=new Array(c),R=0;R<c;R++)M[R]=arguments[R];return T(J,null,[(O=l["append-inner"])==null?void 0:O.call(l,...M),e.menuIcon?x(Se,{class:"v-select__menu-icon",color:(V=o.value)==null?void 0:V.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),tt({isFocused:P,menu:S,select:U},o)}}),kt=(e,n,l)=>{if(e==null||n==null)return-1;if(!n.length)return 0;e=e.toString().toLocaleLowerCase(),n=n.toString().toLocaleLowerCase();const r=[];let o=e.indexOf(n);for(;~o;)r.push([o,o+n.length]),o=e.indexOf(n,o+n.length);return r.length?r:-1};function fe(e,n){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+n.length]]:Array.isArray(e[0])?e:[e]}const Dt=Q({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function St(e,n,l){var s;const r=[],o=(l==null?void 0:l.default)??kt,d=l!=null&&l.filterKeys?ve(l.filterKeys):!1,v=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return r;e:for(let u=0;u<e.length;u++){const[h,i=h]=ve(e[u]),C={},b={};let m=-1;if((n||v>0)&&!(l!=null&&l.noFilter)){if(typeof h=="object"){if(h.type==="divider"||h.type==="subheader")continue;const p=d||Object.keys(i);for(const y of p){const w=xe(i,y),_=(s=l==null?void 0:l.customKeyFilter)==null?void 0:s[y];if(m=_?_(w,n,h):o(w,n,h),m!==-1&&m!==!1)_?C[y]=fe(m,n):b[y]=fe(m,n);else if((l==null?void 0:l.filterMode)==="every")continue e}}else m=o(h,n,h),m!==-1&&m!==!1&&(b.title=fe(m,n));const P=Object.keys(b).length,g=Object.keys(C).length;if(!P&&!g||(l==null?void 0:l.filterMode)==="union"&&g!==v&&!P||(l==null?void 0:l.filterMode)==="intersection"&&(g!==v||!P))continue}r.push({index:u,matches:{...b,...C}})}return r}function Ot(e,n,l,r){const o=B([]),d=B(new Map),v=K(()=>r!=null&&r.transform?q(n).map(u=>[u,r.transform(u)]):q(n));de(()=>{const u=typeof l=="function"?l():q(l),h=typeof u!="string"&&typeof u!="number"?"":String(u),i=St(v.value,h,{customKeyFilter:{...e.customKeyFilter,...q(r==null?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),C=q(n),b=[],m=new Map;i.forEach(P=>{let{index:g,matches:p}=P;const y=C[g];b.push(y),m.set(y.value,p)}),o.value=b,d.value=m});function s(u){return d.value.get(u.value)}return{filteredItems:o,filteredMatches:d,getMatches:s}}function Lt(e,n,l){return l==null||!l.length?n:l.map((r,o)=>{const d=o===0?0:l[o-1][1],v=[T("span",{class:oe(`${e}__unmask`)},[n.slice(d,r[0])]),T("span",{class:oe(`${e}__mask`)},[n.slice(r[0],r[1])])];return o===l.length-1&&v.push(T("span",{class:oe(`${e}__unmask`)},[n.slice(r[1])])),T(J,null,[v])})}export{_t as V,Vt as a,pt as b,bt as c,Lt as h,Dt as m,Ot as u};
