import{bh as t,cI as o,cJ as l,cK as u}from"./index-BQkSm9aJ.js";const n=async()=>{t("accessToken").value=null;const e=t("userData");e.value.role.includes("supplier")?await o.replace({path:"/login-supplier",query:{isRedirectedFromUnauthorizedStatus:!0}}):await o.replace({path:"/login",query:{isRedirectedFromUnauthorizedStatus:!0}}),e.value=null,t("userAbilityRules").value=null},p=l({baseUrl:"http://172.16.12.65:8080/api",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const r=t("accessToken").value;return r&&(e.headers={...e.headers,Authorization:`Bearer ${r}`}),{options:e}},afterFetch(e){const{data:r,response:a}=e;let s=null;try{s=u(r)}catch(c){console.error(c)}return{data:s,response:a}},onFetchError(e){e.response.status===401&&n();let r=null;try{r=u(e.data)}catch(a){console.error(a)}return{error:r}}}});export{p as u};
