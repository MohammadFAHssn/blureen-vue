import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as w}from"./VChip-D3lJj4hY.js";import{c as i,o as l,F as p,h as C,f as k,e as _,t as h,v as N,c4 as A,r as c,Y as E,bY as D,b as u,d as B,m as r}from"./index-CICszNDy.js";import{u as F,A as G,F as I}from"./useAGGridTheme-CS09qq7e.js";import{u as M}from"./useApi-DazJ7zrl.js";import{c as S}from"./createUrl-DBdSN-1y.js";import{V as L}from"./VSnackbar-DfwYf6bB.js";import"./VAvatar-BOZvtgvW.js";import"./VImg-TV0XvCl7.js";import"./index-9rIf2CJL.js";import"./VOverlay-VIOFEwcR.js";const R={},U={class:"d-flex gap-1"};function z(m,n){return l(),i("div",U,[(l(!0),i(p,null,C(m.params.value,(o,a)=>(l(),k(w,{key:a,variant:"outlined",color:a%4===0?"warning":a%4===1?"info":a%4===2?"primary":"secondary"},{default:_(()=>[h(N(o),1)]),_:2},1032,["color"]))),128))])}const T=f(R,[["render",z]]),Y={class:"ag-grid-sec"},$={__name:"list",async setup(m){let n,o;const a=A({hasError:!1,errorMessage:""}),d=c([]),{theme:b}=F(),v=c({filter:!0}),x=c([{headerName:"کد پرسنلی",field:"personnelCode",flex:1},{headerName:"نام",field:"firstName",flex:2},{headerName:"نام خانوادگی",field:"lastName",flex:2},{headerName:"نوع کاربر",field:"roles",flex:3,cellRenderer:T,cellStyle:{display:"flex","align-items":"center"}},{headerName:"شماره تلفن",field:"mobileNumber",flex:2}]),g=E(()=>{var t;return(t=d.value)==null?void 0:t.map(e=>{var s;return{personnelCode:parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(s=e.roles)==null?void 0:s.map(V=>V.name),mobileNumber:e.mobile_number}})}),y=async()=>{try{const{data:t,error:e}=await M(S("/base/user?fields[roles]=name&include=roles"));if(e.value)throw e.value;d.value=t.value.data}catch{a.hasError=!0,a.errorMessage="خطا در دریافت کاربران"}};return[n,o]=D(()=>y()),await n,o(),(t,e)=>(l(),i(p,null,[u(L,{modelValue:r(a).hasError,"onUpdate:modelValue":e[0]||(e[0]=s=>r(a).hasError=s),timeout:2e3,location:"center",variant:"outlined",color:"error"},{default:_(()=>[h(N(r(a).errorMessage),1)]),_:1},8,["modelValue"]),B("section",Y,[u(r(I),{style:{"block-size":"100%","inline-size":"100%"},"column-defs":r(x),"row-data":r(g),"default-col-def":r(v),"enable-rtl":!0,"row-numbers":!0,pagination:!0,"locale-text":r(G),theme:r(b)},null,8,["column-defs","row-data","default-col-def","locale-text","theme"])])],64))}},ee=f($,[["__scopeId","data-v-8d9953d0"]]);export{ee as default};
