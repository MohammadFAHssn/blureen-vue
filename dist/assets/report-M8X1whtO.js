import{r as L}from"./validators-BQd4MaJQ.js";import{r as p,bx as T,H as te,a as Z,c as z,o as D,b as e,d as v,e as i,v as _,x as A,n as a,am as N,a1 as ee,f as F,F as H,i as se,a2 as re,bp as J,bi as B,M as ne,Y as ue,m as K,bz as de,bM as ge,bo as be,h as ve}from"./index-BRcc4XA0.js";import{_ as ae}from"./DialogCloseBtn-BFlzakNo.js";import{$ as U}from"./api-B9aYCsOm.js";import{V as le}from"./VSnackbar-CyP0ExQa.js";import{V as ye}from"./VTable-CU3BKQ09.js";import{V as Ve}from"./VSkeletonLoader-C3ebgbwC.js";import{V as O}from"./VCard-a6caRL8S.js";import{V as Q}from"./VCardText-CK9ceg1n.js";import{V as W}from"./VForm-DLEDyWgD.js";import{V as I}from"./VRow-DuNPxdKR.js";import{V as $}from"./VCol-BtPIBuv3.js";import{V as ie}from"./VSelect-BbFfwrY5.js";import{V as X}from"./VDialog-D6lwnvbS.js";import{V as Ee}from"./VAutocomplete-BMcnnftV.js";import{u as me}from"./useAGGridTheme-MjB1Z1lQ.js";import{u as he}from"./useApi-BCTJBkcI.js";import{c as ke}from"./createUrl-BcIXRpBN.js";import{V as ce}from"./VFab-CRgKAbkJ.js";import{V as fe}from"./VLayout-CSgv0s85.js";import"./helpers-CcX6MmOA.js";import"./index-CvOPxmL5.js";import"./useLogout-C-eg2eyz.js";import"./VOverlay-Cmb_ffnQ.js";import"./createSimpleFunctional-BiP4K-1P.js";/* empty css              */import"./VTextField-BcJf0Rxu.js";import"./autofocus-Bh2WnONs.js";import"./VCounter-CjJtFXu-.js";import"./VField-MsHMmBuK.js";import"./VList-D-2k1QhF.js";import"./VDivider-DM3liG56.js";import"./dialog-transition-DnuBdUzz.js";import"./VMenu-vuKKjGw3.js";import"./VCheckboxBtn-bc6JJRZY.js";import"./filter-CLTelndQ.js";const _e={class:"d-flex justify-end gap-3 mb-3"},De={key:2,class:"text-center"},xe={class:"text-h5 text-center mb-2"},Re={__name:"EligibilityRules",emits:["back"],setup(E,{emit:x}){const S=x,y=p("root"),u=T({hasError:!1,errorMessage:"",isCreateDialogVisible:!1,isEditDialogVisible:!1,isDeleteDialogVisible:!1}),l=T({fetchingEligibilityRules:!0,createEligibilityRule:!1,editEligibilityRule:!1,deleteEligibilityRule:!1}),m=p([]),R=p([]),V=p(null),h=p(),g=p(null),n=p(null);function b(s){u.hasError=!0,u.errorMessage=s}function w(){y.value!=="root"?y.value="root":S("back")}async function j(){l.fetchingEligibilityRules=!0;try{const s=await U("/food/eligibility",{method:"GET"});m.value=(s==null?void 0:s.data.mealReservationEligibilityRules)||[]}catch(s){console.error("Error fetching eligibilitys:",s),b(s.message||"خطا در دریافت محدودیت‌ها")}finally{l.fetchingEligibilityRules=!1}}async function G(){var f;if(!n.value){b("لطفا زمان را انتخاب کنید");return}const s=await((f=h.value)==null?void 0:f.validate());if(!(s==null?void 0:s.valid))return;l.createEligibilityRule=!0;const r=new FormData;r.append("meal_id",g.value),r.append("time",n.value);try{await U("/food/eligibility/",{method:"POST",body:r,onResponseError({response:o}){var M,P;if(u.hasError=!0,(M=o._data)!=null&&M.errors){const Y=Object.values(o._data.errors).flat().join(" | ");u.errorMessage=Y}else u.errorMessage=((P=o._data)==null?void 0:P.message)||"خطا در ایجاد"}}),u.hasError||(u.isCreateDialogVisible=!1,C(),j())}catch(o){console.error(o)}finally{l.createEligibilityRule=!1}}function q(s){V.value=s,n.value=s.time,u.isEditDialogVisible=!0}async function c(){var f;const s=await((f=h.value)==null?void 0:f.validate());if(!(s==null?void 0:s.valid))return;l.editEligibilityRule=!0;const r=new FormData;r.append("time",n.value);try{const M=(await U(`/food/eligibility/${V.value.id}`,{method:"POST",body:r,onResponseError({response:P}){var Y,oe;if(u.hasError=!0,(Y=P._data)!=null&&Y.errors){const pe=Object.values(P._data.errors).flat().join(" | ");u.errorMessage=pe}else u.errorMessage=((oe=P._data)==null?void 0:oe.message)||"خطا در ویرایش"}})).data;!u.hasError&&M&&(m.value=m.value.map(P=>P.id===M.id?M:P),u.isEditDialogVisible=!1,C())}catch(o){console.error(o)}finally{l.editEligibilityRule=!1}}async function k(){l.fetchingMeals=!0;try{const s=await U("/food/meal/get-actives",{method:"GET"});R.value=(s==null?void 0:s.data.meals)||[]}catch(s){console.error("Error fetching meals:",s),b(s.message||"خطا در دریافت وعده‌ها")}finally{l.fetchingMeals=!1}}function C(){g.value=null,n.value=null}function d(s){s||(u.isCreateDialogVisible=!1,u.isEditDialogVisible=!1,C())}return te(async()=>{await Promise.all([k(),j()])}),(s,t)=>{const r=ae,f=Z("PersianDatetimePicker");return D(),z(H,null,[e(le,{modelValue:a(u).hasError,"onUpdate:modelValue":t[0]||(t[0]=o=>a(u).hasError=o),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:i(()=>[_(A(a(u).errorMessage),1)]),_:1},8,["modelValue"]),v("div",null,[e(N,{variant:"text","prepend-icon":"tabler-arrow-right",class:"mb-4",onClick:w},{default:i(()=>[_(A(a(y)==="root"?"گزارش":"صفحه قبل"),1)]),_:1})]),v("div",null,[v("div",_e,[e(N,{color:"primary",onClick:t[1]||(t[1]=o=>{a(u).isCreateDialogVisible=!0})},{default:i(()=>[e(ee,{icon:"tabler-plus",size:"24",style:{cursor:"pointer"}})]),_:1})]),v("div",null,[!a(l).fetchingEligibilityRules&&a(m).length>0?(D(),F(ye,{key:0},{default:i(()=>[t[9]||(t[9]=v("thead",null,[v("tr",null,[v("th",null,"وعده"),v("th",null,"زمان"),v("th",null,"عملیات")])],-1)),v("tbody",null,[(D(!0),z(H,null,se(a(m),o=>(D(),z("tr",{key:o.id},[v("td",null,A(o.meal.name),1),v("td",null,[e(re,{color:"primary"},{default:i(()=>[_(A(o.time),1)]),_:2},1024)]),v("td",null,[e(ee,{icon:"tabler-edit",color:"primary",size:"24",onClick:M=>q(o)},null,8,["onClick"])])]))),128))])]),_:1})):a(l).fetchingEligibilityRules?(D(),F(Ve,{key:1,type:"card"})):(D(),z("div",De,[e(re,{color:"error"},{default:i(()=>[...t[10]||(t[10]=[_(" محدودیتی برای نمایش وجود ندارد ",-1)])]),_:1})]))])]),e(X,{width:s.$vuetify.display.smAndDown?"auto":900,"model-value":a(u).isCreateDialogVisible,"onUpdate:modelValue":d},{default:i(()=>[e(r,{onClick:t[2]||(t[2]=o=>d(!1))}),e(O,null,{default:i(()=>[e(Q,null,{default:i(()=>[t[13]||(t[13]=v("h4",{class:"text-h5 text-center mb-2"}," افزودن محدودیت ",-1)),e(W,{ref_key:"refVForm",ref:h,class:"mt-6","validate-on":"submit lazy",onSubmit:J(G,["prevent"])},{default:i(()=>[e(I,null,{default:i(()=>[e($,{cols:"12",md:"6"},{default:i(()=>[e(ie,{modelValue:a(g),"onUpdate:modelValue":t[3]||(t[3]=o=>B(g)?g.value=o:null),items:a(R),"item-title":"name","item-value":"id",label:"وعده",variant:"outlined",clearable:"",rules:["requiredValidator"in s?s.requiredValidator:a(L)]},null,8,["modelValue","items","rules"])]),_:1}),e($,{cols:"12",md:"6"},{default:i(()=>[e(f,{modelValue:a(n),"onUpdate:modelValue":t[4]||(t[4]=o=>B(n)?n.value=o:null),type:"time"},null,8,["modelValue"])]),_:1}),e($,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:i(()=>[e(N,{type:"submit",disabled:a(l).createEligibilityRule,loading:a(l).createEligibilityRule},{default:i(()=>[...t[11]||(t[11]=[_(" ذخیره ",-1)])]),_:1},8,["disabled","loading"]),e(N,{color:"secondary",variant:"tonal",onClick:t[5]||(t[5]=o=>d(!1))},{default:i(()=>[...t[12]||(t[12]=[_(" انصراف ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(X,{width:s.$vuetify.display.smAndDown?"auto":450,"model-value":a(u).isEditDialogVisible,"onUpdate:modelValue":d},{default:i(()=>[e(r,{onClick:t[6]||(t[6]=o=>d(!1))}),e(O,null,{default:i(()=>[e(Q,null,{default:i(()=>{var o;return[v("h4",xe," ویرایش محدودیت: "+A((o=a(V))==null?void 0:o.meal.name),1),e(W,{ref_key:"refVForm",ref:h,class:"mt-6","validate-on":"submit lazy",onSubmit:J(c,["prevent"])},{default:i(()=>[e(I,null,{default:i(()=>[e($,{cols:"12",md:"12"},{default:i(()=>[e(f,{modelValue:a(n),"onUpdate:modelValue":t[7]||(t[7]=M=>B(n)?n.value=M:null),type:"time"},null,8,["modelValue"])]),_:1}),e($,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:i(()=>[e(N,{type:"submit",disabled:a(l).editEligibilityRule,loading:a(l).editEligibilityRule},{default:i(()=>[...t[14]||(t[14]=[_(" ذخیره ",-1)])]),_:1},8,["disabled","loading"]),e(N,{color:"secondary",variant:"tonal",onClick:t[8]||(t[8]=M=>d(!1))},{default:i(()=>[...t[15]||(t[15]=[_(" انصراف ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]}),_:1})]),_:1})]),_:1},8,["width","model-value"])],64)}}},we={__name:"ExceptionCreateDialog",props:{isDialogVisible:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},meals:{type:Array,required:!0},users:{type:Array,required:!0}},emits:["submit","update:isDialogVisible"],setup(E,{emit:x}){const S=E,y=x,u=p([]),l=p(null),m=p();function R(){var g;(g=m.value)==null||g.validate().then(({valid:n})=>{n&&y("submit",{selectedPersonnels:u.value,selectedMeal:l.value})})}function V(){y("update:isDialogVisible",!1)}function h(g){y("update:isDialogVisible",g)}return(g,n)=>{const b=ae;return D(),F(X,{width:g.$vuetify.display.smAndDown?"auto":900,"model-value":S.isDialogVisible,"onUpdate:modelValue":h},{default:i(()=>[e(b,{onClick:n[0]||(n[0]=w=>h(!1))}),e(O,null,{default:i(()=>[e(Q,null,{default:i(()=>[n[5]||(n[5]=v("h4",{class:"text-h5 text-center mb-2"}," افزودن استثناء ",-1)),e(W,{ref_key:"refVForm",ref:m,class:"mt-6","validate-on":"submit lazy",onSubmit:J(R,["prevent"])},{default:i(()=>[e(I,null,{default:i(()=>[e($,{cols:"12",md:"6"},{default:i(()=>[e(Ee,{modelValue:a(u),"onUpdate:modelValue":n[1]||(n[1]=w=>B(u)?u.value=w:null),items:E.users,"item-title":"fullName","item-value":"id",label:"افراد",multiple:"",chips:"",clearable:"",variant:"outlined",rules:["requiredValidator"in g?g.requiredValidator:a(L)]},null,8,["modelValue","items","rules"])]),_:1}),e($,{cols:"12",md:"6"},{default:i(()=>[e(ie,{modelValue:a(l),"onUpdate:modelValue":n[2]||(n[2]=w=>B(l)?l.value=w:null),items:E.meals,"item-title":"name","item-value":"id",label:"وعده",variant:"outlined",clearable:"",rules:["requiredValidator"in g?g.requiredValidator:a(L)]},null,8,["modelValue","items","rules"])]),_:1}),e($,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:i(()=>[e(N,{type:"submit",disabled:E.loading,loading:E.loading},{default:i(()=>[...n[3]||(n[3]=[_(" ذخیره ",-1)])]),_:1},8,["disabled","loading"]),e(N,{color:"secondary",variant:"tonal",onClick:V},{default:i(()=>[...n[4]||(n[4]=[_(" انصراف ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ce={style:{"block-size":"100%"}},Me={__name:"Exceptions",emits:["back"],setup(E,{emit:x}){const S=x,y=p("root");function u(){y.value!=="root"?y.value="root":S("back")}const l=T({hasError:!1,errorMessage:"",isExceptionCreateDialogVisible:!1}),m=T({fetchingsExceptions:!1,createException:!1,changeStatus:!1});function R(t){l.hasError=!0,l.errorMessage=t}const V=p([]),h=p([]),g=p([]),n=p(null),{theme:b}=me(),w=p([]);function j(t){n.value=t.api,n.value.setGridOption("loading",!0)}const G=p([{headerName:"نام",field:"fullName"},{headerName:"کد پرسنلی",field:"userName"},{headerName:"وعده",field:"mealName"},{headerName:"وضعیت",field:"status",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:t=>t.value===1?"فعال":"غیرفعال"}},{headerName:"عملیات",field:"actions",cellRendererSelector:t=>({component:"Actions",params:{onStatusClick:r=>{w.value=[r],C()}}})}]),q=ue(()=>{var t;return(t=V.value)==null?void 0:t.map(r=>({id:r.id,fullName:r.user.fullName,userName:r.user.username,mealName:r.meal.name,status:r.status,actions:{status:!0}}))});async function c(){var t,r,f;m.fetchingsExceptions=!0,(t=n.value)==null||t.setGridOption("loading",!0);try{const o=await U("/food/exception",{method:"GET"});V.value=((r=o==null?void 0:o.data)==null?void 0:r.mealReservationExceptions)||[]}catch(o){console.error("Error fetching exceptions:",o),l.hasError=!0,l.errorMessage=o.message||"خطا در دریافت پیمانکاران"}finally{m.fetchingsExceptions=!1,(f=n.value)==null||f.setGridOption("loading",!1)}}async function k(t){m.createException=!0;try{await U("/food/exception",{method:"POST",body:{meal_id:t.selectedMeal,users:t.selectedPersonnels},onResponseError({response:r}){var f,o;if(l.hasError=!0,(f=r._data)!=null&&f.errors){const M=Object.values(r._data.errors).flat().join(" | ");l.errorMessage=M}else l.errorMessage=((o=r._data)==null?void 0:o.message)||"خطا در ایجاد استثناء"}}),l.isExceptionCreateDialogVisible=!1}catch(r){console.error(r)}finally{m.createException=!1,c()}}async function C(){const t=w.value[0].data.id;m.changeStatus=!0;try{await U(`/food/exception/status/${t}`,{method:"POST",onResponseError({response:f}){m.changeStatus=!1,l.hasError=!0,l.errorMessage=f._data.message||"خطا در تغییر وضعیت"}});const r=V.value.findIndex(f=>f.id===t);r!==-1&&(V.value[r].status=V.value[r].status===1?0:1)}catch(r){console.error(r)}}async function d(){var t;try{const{data:r,error:f}=await he(ke("/base/user?filter[active]=true"));if(f.value)throw R("خطا در دریافت کاربران"),f.value;(t=r.value)!=null&&t.data&&(h.value=r.value.data.map(o=>({...o,fullName:`${o.first_name} ${o.last_name} - ${o.personnel_code}`})))}catch(r){console.error("Unexpected error fetching users:",r),R("خطای غیرمنتظره در دریافت کاربران")}}async function s(){m.fetchingMeals=!0;try{const t=await U("/food/meal/get-actives",{method:"GET"});g.value=(t==null?void 0:t.data.meals)||[]}catch(t){console.error("Error fetching meals:",t),R(t.message||"خطا در دریافت وعده‌ها")}finally{m.fetchingMeals=!1}}return te(async()=>{await Promise.all([s(),d(),c()])}),(t,r)=>{const f=Z("AgGridVue");return D(),F(fe,{class:"app-layout"},{default:i(()=>[e(le,{modelValue:a(l).hasError,"onUpdate:modelValue":r[0]||(r[0]=o=>a(l).hasError=o),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:i(()=>[_(A(a(l).errorMessage),1)]),_:1},8,["modelValue"]),v("div",null,[e(N,{variant:"text","prepend-icon":"tabler-arrow-right",class:"mb-4",onClick:u},{default:i(()=>[_(A(a(y)==="root"?"گزارش":"صفحه قبل"),1)]),_:1})]),v("section",Ce,[e(f,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":a(G),"row-data":a(q),"enable-rtl":"","row-numbers":"",pagination:"",theme:a(b),onGridReady:j},null,8,["column-defs","row-data","theme"])]),a(l).isExceptionCreateDialogVisible?(D(),F(we,{key:0,"is-dialog-visible":a(l).isExceptionCreateDialogVisible,"onUpdate:isDialogVisible":r[1]||(r[1]=o=>a(l).isExceptionCreateDialogVisible=o),loading:a(m).createException,meals:a(g),users:a(h),onSubmit:k},null,8,["is-dialog-visible","loading","meals","users"])):K("",!0),e(de,null,{default:i(()=>[e(ce,{app:"",icon:"tabler-plus",size:"x-large",onClick:r[2]||(r[2]=o=>a(l).isExceptionCreateDialogVisible=!0)})]),_:1})]),_:1})}}},Ne=ne(Me,[["__scopeId","data-v-b8eb5a29"]]),$e={__name:"ReportGetDialog",props:{isDialogVisible:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},meals:{type:Array,required:!0}},emits:["submit","update:isDialogVisible"],setup(E,{emit:x}){const S=E,y=x,u=T({hasError:!1,errorMessage:""}),l=p([]),m=p(null),R=p();function V(){var n;if(!Array.isArray(l.value)||!l.value[0]||!l.value[1]){u.hasError=!0,u.errorMessage="تاریخ باید به صورت بازه‌ای باشد";return}(n=R.value)==null||n.validate().then(({valid:b})=>{b&&y("submit",{date:l.value,meal:m.value})})}function h(){y("update:isDialogVisible",!1)}function g(n){y("update:isDialogVisible",n)}return(n,b)=>{const w=ae,j=Z("PersianDatetimePicker");return D(),F(X,{width:n.$vuetify.display.smAndDown?"auto":900,"model-value":S.isDialogVisible,"onUpdate:modelValue":g},{default:i(()=>[e(w,{onClick:b[0]||(b[0]=G=>g(!1))}),e(O,null,{default:i(()=>[e(Q,null,{default:i(()=>[b[5]||(b[5]=v("h4",{class:"text-h5 text-center mb-2"}," دریافت گزارش ",-1)),e(W,{ref_key:"refVForm",ref:R,class:"mt-6","validate-on":"submit lazy",onSubmit:J(V,["prevent"])},{default:i(()=>[e(I,null,{default:i(()=>[e($,{cols:"12",md:"6"},{default:i(()=>[e(ie,{modelValue:a(m),"onUpdate:modelValue":b[1]||(b[1]=G=>B(m)?m.value=G:null),items:E.meals,"item-title":"name","item-value":"id",label:"وعده",variant:"outlined",clearable:"",rules:["requiredValidator"in n?n.requiredValidator:a(L)],disabled:E.loading},null,8,["modelValue","items","rules","disabled"])]),_:1}),e($,{cols:"12",md:"6"},{default:i(()=>[e(ge,{error:a(u).hasError,"error-messages":a(u).errorMessage,disabled:E.loading},{default:i(()=>[e(j,{modelValue:a(l),"onUpdate:modelValue":b[2]||(b[2]=G=>B(l)?l.value=G:null),range:"",format:"jYYYY/jMM/jDD",label:"بازه زمانی"},null,8,["modelValue"])]),_:1},8,["error","error-messages","disabled"])]),_:1}),e($,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:i(()=>[e(N,{type:"submit",disabled:E.loading,loading:E.loading},{default:i(()=>[...b[3]||(b[3]=[_(" جستجو ",-1)])]),_:1},8,["disabled","loading"]),e(N,{color:"secondary",variant:"tonal",onClick:h},{default:i(()=>[...b[4]||(b[4]=[_(" انصراف ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Se={style:{"block-size":"100%"}},Ge={__name:"Report",emits:["back"],setup(E,{emit:x}){const S=x,y=p("root");function u(){y.value!=="root"?y.value="root":S("back")}const l=T({hasError:!1,errorMessage:"",isReportGetDialogVisible:!1}),m=T({fetchingReports:!1,fetchingMeals:!1});function R(c){l.hasError=!0,l.errorMessage=c}const V=p([]),h=p([]),g=p(null),{theme:n}=me();function b(c){g.value=c.api,g.value.setGridOption("loading",!1)}const w=p([{headerName:"کد پرسنلی",field:"userName"},{headerName:"نام",field:"fullName"},{headerName:"وعده",field:"mealName"},{headerName:"غذا",field:"foodName"},{headerName:"قیمت",field:"foodPrice"},{headerName:"تاریخ",field:"date"},{headerName:"خروج",field:"checkout"}]),j=ue(()=>(V.value??[]).map(c=>{var k,C,d,s,t,r,f,o;return{id:c.id,userName:((k=c.personnel)==null?void 0:k.username)??"",fullName:`${(((C=c.personnel)==null?void 0:C.first_name)??"").trim()} ${(((d=c.personnel)==null?void 0:d.last_name)??"").trim()}`.trim(),mealName:((t=(s=c.reservation)==null?void 0:s.meal)==null?void 0:t.name)??"",foodName:((r=c.food)==null?void 0:r.name)??"",foodPrice:((f=c.food)==null?void 0:f.price)??"",date:((o=c.reservation)==null?void 0:o.date)??"",checkout:(c==null?void 0:c.check_out_time)??"-"}}));async function G(c){var k,C;m.fetchingReports=!0;try{const d=await U("/food/report",{params:{"date[]":c.date,meal_id:c.meal},method:"GET"});V.value=(d==null?void 0:d.data)||[],l.isReportGetDialogVisible=!1}catch(d){console.error("Error fetching reports:",d);const s=(d==null?void 0:d.data)||((k=d==null?void 0:d.response)==null?void 0:k._data)||((C=d==null?void 0:d.response)==null?void 0:C.data)||null,t=s!=null&&s.errors?Object.values(s.errors).flat().join(`
`):null;R(t||(s==null?void 0:s.message)||(d==null?void 0:d.message)||"خطا در دریافت گزارش")}finally{m.fetchingReports=!1}}async function q(){m.fetchingMeals=!0;try{const c=await U("/food/meal/get-actives",{method:"GET"});h.value=(c==null?void 0:c.data.meals)||[]}catch(c){console.error("Error fetching meals:",c),R(c.message||"خطا در دریافت وعده‌ها")}finally{m.fetchingMeals=!1}}return te(async()=>{await Promise.all([q()])}),(c,k)=>{const C=Z("AgGridVue");return D(),F(fe,{class:"app-layout"},{default:i(()=>[e(le,{modelValue:a(l).hasError,"onUpdate:modelValue":k[0]||(k[0]=d=>a(l).hasError=d),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:i(()=>[_(A(a(l).errorMessage),1)]),_:1},8,["modelValue"]),v("div",null,[e(N,{variant:"text","prepend-icon":"tabler-arrow-right",class:"mb-4",onClick:u},{default:i(()=>[_(A(a(y)==="root"?"گزارش":"صفحه قبل"),1)]),_:1})]),v("section",Se,[e(C,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":a(w),"row-data":a(j),"enable-rtl":"","row-numbers":"",pagination:"",theme:a(n),onGridReady:b},null,8,["column-defs","row-data","theme"])]),a(l).isReportGetDialogVisible?(D(),F($e,{key:0,"is-dialog-visible":a(l).isReportGetDialogVisible,"onUpdate:isDialogVisible":k[1]||(k[1]=d=>a(l).isReportGetDialogVisible=d),loading:a(m).fetchingReports,meals:a(h),onSubmit:G},null,8,["is-dialog-visible","loading","meals"])):K("",!0),e(de,null,{default:i(()=>[e(ce,{app:"",icon:"tabler-search",size:"x-large",onClick:k[2]||(k[2]=d=>a(l).isReportGetDialogVisible=!0)})]),_:1})]),_:1})}}},Ae=ne(Ge,[["__scopeId","data-v-62c43d12"]]),Ue={key:0},Pe={class:"font-weight-medium"},Vt={__name:"report",setup(E){const x=p("root"),S=[{key:"eligibilityRules",label:"محدودیت‌های زمانی",icon:"tabler-clock-hour-4"},{key:"exceptions",label:"استثنائات",icon:"tabler-user-check"},{key:"report",label:"گزارش",icon:"tabler-report-analytics"}],y={eligibilityRules:Re,exceptions:Ne,report:Ae};function u(){x.value="root"}function l(m){x.value=m}return(m,R)=>(D(),z(H,null,[a(x)==="root"?(D(),z("div",Ue,[e(I,{class:"ma-0 pa-0"},{default:i(()=>[(D(),z(H,null,se(S,V=>e($,{key:V.key,cols:"6",sm:"4",md:"3",class:"text-center"},{default:i(()=>[e(O,{class:"pa-4 d-flex flex-column align-center justify-center",variant:"outlined",rounded:"xl",onClick:h=>l(V.key)},{default:i(()=>[e(be,{variant:"tonal",color:"primary",size:"56",class:"mb-2"},{default:i(()=>[e(ee,{icon:V.icon,size:"32"},null,8,["icon"])]),_:2},1024),v("span",Pe,A(V.label),1)]),_:2},1032,["onClick"])]),_:2},1024)),64))]),_:1})])):K("",!0),a(x)!=="root"?(D(),F(ve(y[a(x)]),{key:1,onBack:u},null,32)):K("",!0)],64))}};export{Vt as default};
