import{u as I}from"./useAGGridTheme-Uv4oArTj.js";import{M as R,bx as T,r as H,Y as E,by as l,bB as q,a as J,f as K,o as O,e as P,b as B,d as Q,n as o,v as W,x as X}from"./index-CVMLsVkI.js";import{u as Z}from"./useApi-qXz6GFrn.js";import{c as $}from"./createUrl-NZazOjni.js";import{V as ee}from"./VSnackbar-DaOpr3r1.js";import{V as ae}from"./VLayout-BdQ7_HnB.js";import"./useLogout-7t1ASXSg.js";import"./index-CvOPxmL5.js";import"./VOverlay-BKBJprvI.js";const te={style:{"block-size":"100%"}},re={__name:"list",async setup(le){let m,s;const i=T({hasError:!1,errorMessage:""}),d=H([]),{theme:F}=I(),n=E(()=>{var a;return(a=d.value)==null?void 0:a.map(e=>{var r,t,c,u,p,h,_,Y,v,N,j,D,b,M,y,g,w,V,k,C,x,A,S;return{personnelCode:Number.parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(r=e.roles)==null?void 0:r.map(U=>U.name),active:e.active,nationalCode:(t=e.profile)==null?void 0:t.national_code,gender:(c=e.profile)==null?void 0:c.gender,fatherName:(u=e.profile)==null?void 0:u.father_name,birthPlace:(p=e.profile)==null?void 0:p.birth_place,birthDate:(h=e.profile)!=null&&h.birth_date?l((_=e.profile)==null?void 0:_.birth_date).format("jYYYY-jMM-jDD"):null,mobileNumber:(Y=e.profile)==null?void 0:Y.mobile_number,maritalStatus:(v=e.profile)==null?void 0:v.marital_status,employmentDate:(N=e.profile)!=null&&N.employment_date?l((j=e.profile)==null?void 0:j.employment_date).format("jYYYY-jMM-jDD"):null,startDate:(D=e.profile)!=null&&D.start_date?l((b=e.profile)==null?void 0:b.start_date).format("jYYYY-jMM-jDD"):null,educationLevel:(y=(M=e.profile)==null?void 0:M.education_level)==null?void 0:y.name,workplace:(w=(g=e.profile)==null?void 0:g.workplace)==null?void 0:w.name,workArea:(k=(V=e.profile)==null?void 0:V.work_area)==null?void 0:k.name,costCenter:(x=(C=e.profile)==null?void 0:C.cost_center)==null?void 0:x.name,jobPosition:(S=(A=e.profile)==null?void 0:A.job_position)==null?void 0:S.name}})}),f=[{headerName:"کد پرسنلی",field:"personnelCode"},{headerName:"نام",field:"firstName"},{headerName:"نام خانوادگی",field:"lastName"},{headerName:"نوع کاربر",field:"roles",cellRenderer:"MultiValuedCell",cellStyle:{display:"flex","align-items":"center"}},{headerName:"وضعیت",field:"active",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:a=>a.value===1?"فعال":"غیرفعال"}},{headerName:"کد ملی",field:"nationalCode"},{headerName:"جنسیت",field:"gender"},{headerName:"نام پدر",field:"fatherName"},{headerName:"محل تولد",field:"birthPlace"},{headerName:"تاریخ تولد",field:"birthDate",valueFormatter:a=>a.value?l(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jDD"):null},{headerName:"وضعیت تاهل",field:"maritalStatus"},{headerName:"تاریخ استخدام",field:"employmentDate",valueFormatter:a=>a.value?l(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jDD"):null},{headerName:"تاریخ شروع به کار",field:"startDate",valueFormatter:a=>a.value?l(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jDD"):null},{headerName:"سطح تحصیلات",field:"educationLevel"},{headerName:"محل کار",field:"workplace"},{headerName:"منطقه کاری",field:"workArea"},{headerName:"مرکز هزینه",field:"costCenter"},{headerName:"سمت شغلی",field:"jobPosition"},{headerName:"شماره تلفن همراه",field:"mobileNumber"}];function G(a,e){return e.some(r=>{const t=r[a];return Array.isArray(t)?t.length>0:t!=null&&t!==""})}const z=E(()=>!n.value||n.value.length===0?f:f.filter(a=>G(a.field,n.value)));async function L(){try{const{data:a,error:e}=await Z($("/base/user/details"));if(e.value)throw e.value;d.value=a.value.data}catch(a){console.error("Error fetching users:",a),i.hasError=!0,i.errorMessage=a.message||"خطا در دریافت کاربران"}}return[m,s]=q(()=>L()),await m,s(),(a,e)=>{const r=J("AgGridVue");return O(),K(ae,{class:"app-layout"},{default:P(()=>[B(ee,{modelValue:o(i).hasError,"onUpdate:modelValue":e[0]||(e[0]=t=>o(i).hasError=t),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:P(()=>[W(X(o(i).errorMessage),1)]),_:1},8,["modelValue"]),Q("section",te,[B(r,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":o(z),"row-data":o(n),"enable-rtl":"","row-numbers":"",pagination:"",theme:o(F)},null,8,["column-defs","row-data","theme"])])]),_:1})}}},pe=R(re,[["__scopeId","data-v-e37f5941"]]);export{pe as default};
