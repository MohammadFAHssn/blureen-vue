import{V as W}from"./VCounter-qsWo-RDi.js";import{V as B,m as X}from"./VField-E_86BP7W.js";import{V as D,m as Z}from"./VInput-DcHqf4MH.js";import{u as $}from"./form-BpfsWwaW.js";import{f as ee}from"./forwardRefs-BYSXgJht.js";import{au as te,a5 as ne,cf as M,aC as le,Y as m,r as y,aa as ae,bc as ue,b as C,s as g,d as a,F as h,K as oe,cM as ie,y as se,at as k,bH as re}from"./index-Cv5lpMoC.js";function ce(e){function x(o,c){var n,l;!e.autofocus||!o||(l=(n=c[0].target)==null?void 0:n.focus)==null||l.call(n)}return{onIntersect:x}}const de=["color","file","time","date","datetime-local","week","month"],fe=ne({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Z(),...X()},"VTextField"),he=te()({name:"VTextField",directives:{vIntersect:M},inheritAttrs:!1,props:fe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,x){let{attrs:o,emit:c,slots:n}=x;const l=le(e,"modelValue"),{isFocused:i,focus:F,blur:N}=$(e),{onIntersect:R}=ce(e),T=m(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),E=m(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),P=m(()=>["plain","underlined"].includes(e.variant)),b=y(),I=y(),s=y(),z=m(()=>de.includes(e.type)||e.persistentPlaceholder||i.value||e.active);function _(){i.value||F(),k(()=>{var t;s.value!==document.activeElement&&((t=s.value)==null||t.focus())})}function O(t){c("mousedown:control",t),t.target!==s.value&&(_(),t.preventDefault())}function U(t){c("click:control",t)}function j(t,u){t.stopPropagation(),_(),k(()=>{l.value=null,u(),re(e["onClick:clear"],t)})}function H(t){var d;const u=t.target;if(l.value=u.value,(d=e.modelModifiers)!=null&&d.trim&&["text","search","password","tel","url"].includes(e.type)){const f=[u.selectionStart,u.selectionEnd];k(()=>{u.selectionStart=f[0],u.selectionEnd=f[1]})}}return ae(()=>{const t=!!(n.counter||e.counter!==!1&&e.counter!=null),u=!!(t||n.details),[d,f]=ue(o),{modelValue:ve,...K}=D.filterProps(e),Y=B.filterProps(e);return C(D,g({ref:b,modelValue:l.value,"onUpdate:modelValue":r=>l.value=r,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":P.value},e.class],style:e.style},d,K,{centerAffix:!P.value,focused:i.value}),{...n,default:r=>{let{id:v,isDisabled:S,isDirty:w,isReadonly:q,isValid:G,hasDetails:J,reset:L}=r;return C(B,g({ref:I,onMousedown:O,onClick:U,"onClick:clear":V=>j(V,L),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Y,{id:v.value,active:z.value||w.value,dirty:w.value||e.dirty,disabled:S.value,focused:i.value,details:J.value,error:G.value===!1}),{...n,default:V=>{let{props:{class:A,...Q}}=V;const p=oe(a("input",g({ref:s,value:l.value,onInput:H,autofocus:e.autofocus,readonly:q.value,disabled:S.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:F,onBlur:N},Q,f),null),[[M,{handler:R},null,{once:!0}]]);return a(h,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[a("span",{class:"v-text-field__prefix__text"},[e.prefix])]),n.default?a("div",{class:se(A),"data-no-activator":""},[n.default(),p]):ie(p,{class:A}),e.suffix&&a("span",{class:"v-text-field__suffix"},[a("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:u?r=>{var v;return a(h,null,[(v=n.details)==null?void 0:v.call(n,r),t&&a(h,null,[a("span",null,null),C(W,{active:e.persistentCounter||i.value,value:T.value,max:E.value,disabled:e.disabled},n.counter)])])}:void 0})}),ee({},b,I,s)}});export{he as V,fe as m,ce as u};
