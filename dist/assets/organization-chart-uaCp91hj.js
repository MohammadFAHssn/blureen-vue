import{_ as Mo}from"./AreYouSureDialog-DgAe16uV.js";import{_ as si}from"./DialogCloseBtn-CGLrSZR-.js";import{ax as To,a6 as Do,al as Fo,r as Q,a7 as Lt,aA as Oo,ct as Lo,aF as dr,bU as Io,aq as Po,Z as zo,Y as dt,aw as Wt,w as Dt,aS as pr,cu as Uo,ab as Vo,b as D,d as Rt,a1 as xn,cv as Ho,F as Kt,s as xt,bB as ai,a2 as wn,cw as Xo,J as qo,y as Yo,b3 as jo,v as Vt,aJ as Wo,bg as Jo,cx as Go,cy as gr,cz as Ko,a as Zo,f as li,o as pe,e as H,n as X,am as Me,bL as ui,c as vn,bC as Qo,bv as Se,i as ts,x as _n,bG as es,M as ns,bl as rs,bM as is,H as os}from"./index-Bdnd2A8t.js";import{u as ss}from"./useAGGridTheme-RssNWmiy.js";import{V as Te}from"./VRow-Cblo0ezT.js";import{V as Jt}from"./VCol-DQCttir7.js";import{V as ci,b as as,c as ls}from"./VCard-WE3Ogg5-.js";import{V as hi}from"./VCardText-DwGQfbI3.js";import{V as fi}from"./VDialog-WTesVLfm.js";import{V as us}from"./VForm-De6DOZH1.js";import{V as mr}from"./VAutocomplete-BmT-3BZ3.js";import{u as cs,a as hs,b as fs,m as ds}from"./VSelect-0QXEP2j0.js";import{V as yr,m as ps}from"./VTextField-CNbpIpG9.js";import{u as gs,h as ms,m as ys}from"./filter-B-emP8M1.js";import{e as xs,t as le,V as ws,a as bn,c as vs}from"./VList-BDOZI8bL.js";import{V as _s}from"./VMenu-DRlBVm-S.js";import{V as bs}from"./VDivider-BNnt2dTt.js";import{V as Cs}from"./VCheckboxBtn-C8KPsI0l.js";import{O as Es}from"./constants-DpTqEMCm.js";import{u as Ss}from"./useLogout-DYxf_kHt.js";import{c as As}from"./createUrl-CwPShYg2.js";import{V as ks}from"./VSnackbar-De1DqqFm.js";/* empty css              */import"./createSimpleFunctional-C8k8e6eJ.js";import"./VOverlay-Hxmt-v-P.js";import"./dialog-transition-BpqrP7By.js";import"./autofocus-DGjKENGq.js";import"./VCounter-DOyaYXhs.js";import"./VField-ClLhnF0i.js";const $s=Do({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...ys({filterKeys:["title"]}),...ds({hideNoData:!0,returnObject:!0}),...Jo(ps({modelValue:null,role:"combobox"}),["validationValue","dirty"])},"VCombobox"),Rs=To()({name:"VCombobox",props:$s(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var lr;let{emit:n,slots:r}=e;const{t:i}=Fo(),o=Q(),a=Lt(!1),s=Lt(!0),c=Lt(!1),l=Q(),u=Q(),h=Lt(-1);let f=!1;const{items:g,transformIn:d,transformOut:m}=xs(t),{textColorClasses:v,textColorStyles:_}=Oo(()=>{var S;return(S=o.value)==null?void 0:S.color}),{InputIcon:A}=Lo(t),E=dr(t,"modelValue",[],S=>d(Io(S)),S=>{const L=m(S);return t.multiple?L:L[0]??null}),B=Po(t),N=zo(()=>t.closableChips&&!B.isReadonly.value&&!B.isDisabled.value),$=dt(()=>!!(t.chips||r.chip)),C=dt(()=>$.value||!!r.selection),k=Lt(!t.multiple&&!C.value?((lr=E.value[0])==null?void 0:lr.title)??"":""),M=Lt(null),z=dt({get:()=>k.value,set:async S=>{var L;if(k.value=S??"",S===null||S===""&&!t.multiple&&!C.value?E.value=[]:!t.multiple&&!C.value&&(E.value=[le(t,S)],Wt(()=>{var W;return(W=u.value)==null?void 0:W.scrollToIndex(0)})),S&&t.multiple&&((L=t.delimiters)!=null&&L.length)){const W=sr(S);W.length>1&&(ar(W),k.value="")}S||(h.value=-1),s.value=!S}}),tt=dt(()=>typeof t.counterValue=="function"?t.counterValue(E.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?E.value.length:z.value.length),{filteredItems:q,getMatches:nt}=gs(t,g,()=>M.value??(t.alwaysFilter||!s.value?z.value:"")),y=dt(()=>t.hideSelected&&M.value===null?q.value.filter(S=>!E.value.some(L=>L.value===S.value)):q.value),p=dt(()=>t.hideNoData&&!y.value.length||B.isReadonly.value||B.isDisabled.value),x=dr(t,"menu"),b=dt({get:()=>x.value,set:S=>{var L;x.value&&!S&&((L=l.value)!=null&&L.Î¨openChildren.size)||S&&p.value||(x.value=S)}}),{menuId:R,ariaExpanded:T,ariaControls:F}=cs(t,b);Dt(k,S=>{f?Wt(()=>f=!1):a.value&&!b.value&&(b.value=!0),n("update:search",S)}),Dt(E,S=>{var L;!t.multiple&&!C.value&&(k.value=((L=S[0])==null?void 0:L.title)??"")});const I=dt(()=>E.value.map(S=>S.value)),U=dt(()=>y.value.find(S=>S.type==="item"&&!S.props.disabled)),K=dt(()=>{var L;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&z.value===((L=U.value)==null?void 0:L.title))&&y.value.length>0&&!s.value&&!c.value}),j=Q(),rt=hs(j,o);function gt(S){f=!0,Wt(()=>f=!1),t.openOnClear&&(b.value=!0)}function ut(){p.value||(b.value=!0)}function mt(S){p.value||(a.value&&(S.preventDefault(),S.stopPropagation()),b.value=!b.value)}function ae(S){var L;(gr(S)||S.key==="Backspace")&&((L=o.value)==null||L.focus())}function Eo(S){var J,yt,V,ot;if(Ko(S)||B.isReadonly.value)return;const L=(J=o.value)==null?void 0:J.selectionStart,W=E.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(S.key)&&S.preventDefault(),["Enter","ArrowDown"].includes(S.key)&&(b.value=!0),["Escape"].includes(S.key)&&(b.value=!1),K.value&&["Enter","Tab"].includes(S.key)&&U.value&&!E.value.some(et=>{let{value:jt}=et;return jt===U.value.value})&&bt(U.value),S.key==="ArrowDown"&&K.value&&((yt=j.value)==null||yt.focus("next")),S.key==="Enter"&&z.value&&(bt(le(t,z.value),!0,!0),C.value&&(k.value="")),["Backspace","Delete"].includes(S.key)){if(!t.multiple&&C.value&&E.value.length>0&&!z.value)return bt(E.value[0],!1);if(~h.value){S.preventDefault();const et=h.value;bt(E.value[h.value],!1),h.value=et>=W-1?W-2:et}else S.key==="Backspace"&&!z.value&&(h.value=W-1);return}if(t.multiple)if(S.key==="ArrowLeft"){if(h.value<0&&L&&L>0)return;const et=h.value>-1?h.value-1:W-1;E.value[et]?h.value=et:(h.value=-1,(V=o.value)==null||V.setSelectionRange(z.value.length,z.value.length))}else if(S.key==="ArrowRight"){if(h.value<0)return;const et=h.value+1;E.value[et]?h.value=et:(h.value=-1,(ot=o.value)==null||ot.setSelectionRange(0,0))}else~h.value&&gr(S)&&(h.value=-1)}function So(S){var J;const L=((J=S==null?void 0:S.clipboardData)==null?void 0:J.getData("Text"))??"",W=sr(L);W.length>1&&t.multiple&&(S.preventDefault(),ar(W))}function Ao(){var S;t.eager&&((S=u.value)==null||S.calculateVisibleItems())}function ko(){var S;a.value&&((S=o.value)==null||S.focus()),s.value=!0,M.value=null}function bt(S){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!S||S.props.disabled))if(t.multiple){const J=E.value.findIndex(V=>(t.valueComparator||pr)(V.value,S.value)),yt=L??!~J;if(~J){const V=yt?[...E.value,S]:[...E.value];V.splice(J,1),E.value=V}else yt&&(E.value=[...E.value,S]);t.clearOnSelect&&(z.value="")}else{const J=L!==!1;E.value=J?[S]:[],(!s.value||t.alwaysFilter)&&k.value&&(M.value=k.value),k.value=J&&!C.value?S.title:"",Wt(()=>{b.value=W,s.value=!0})}}function sr(S){const W=[`
`,...t.delimiters??[]].map(Go).join("|");return S.split(new RegExp(`(?:${W})+`))}async function ar(S){for(let L of S)L=L.trim(),L&&(bt(le(t,L)),await Wt())}function $o(S){a.value=!0,setTimeout(()=>{c.value=!0})}function Ro(S){c.value=!1}return Dt(a,(S,L)=>{if(!(S||S===L)&&(h.value=-1,b.value=!1,z.value)){if(t.multiple){bt(le(t,z.value));return}if(!C.value)return;E.value.some(W=>{let{title:J}=W;return J===z.value})?k.value="":bt(le(t,z.value))}}),Dt(b,S=>{if(!t.hideSelected&&S&&E.value.length&&s.value){const L=y.value.findIndex(W=>E.value.some(J=>(t.valueComparator||pr)(J.value,W.value)));Uo&&window.requestAnimationFrame(()=>{var W;L>=0&&((W=u.value)==null||W.scrollToIndex(L))})}S&&(M.value=null)}),Dt(g,(S,L)=>{b.value||a.value&&!L.length&&S.length&&(b.value=!0)}),Vo(()=>{const S=!!(!t.hideNoData||y.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),L=E.value.length>0,W=yr.filterProps(t);return D(yr,xt({ref:o},W,{modelValue:z.value,"onUpdate:modelValue":J=>z.value=J,focused:a.value,"onUpdate:focused":J=>a.value=J,validationValue:E.externalValue,counterValue:tt.value,dirty:L,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!C.value,"v-combobox--selecting-index":h.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:B.isReadonly.value,placeholder:L?void 0:t.placeholder,"onClick:clear":gt,"onMousedown:control":ut,onKeydown:Eo,onPaste:So,"aria-expanded":T.value,"aria-controls":F.value}),{...r,default:J=>{let{id:yt}=J;return Rt(Kt,null,[D(_s,xt({id:R.value,ref:l,modelValue:b.value,"onUpdate:modelValue":V=>b.value=V,activator:"parent",contentClass:"v-combobox__content",disabled:p.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Ao,onAfterLeave:ko},t.menuProps),{default:()=>[S&&D(ws,xt({ref:j,filterable:!0,selected:I.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:V=>V.preventDefault(),selectable:!0,onKeydown:ae,onFocusin:$o,onFocusout:Ro,tabindex:"-1","aria-live":"polite","aria-labelledby":`${yt.value}-label`,"aria-multiselectable":t.multiple,color:t.itemColor??t.color},rt,t.listProps),{default:()=>{var V,ot,et;return[(V=r["prepend-item"])==null?void 0:V.call(r),!y.value.length&&!t.hideNoData&&(((ot=r["no-data"])==null?void 0:ot.call(r))??D(bn,{key:"no-data",title:i(t.noDataText)},null)),D(fs,{ref:u,renderless:!0,items:y.value,itemKey:"value"},{default:jt=>{var cr,hr,fr;let{item:G,index:Ct,itemRef:ct}=jt;const ur=xt(G.props,{ref:ct,key:G.value,active:K.value&&G===U.value?!0:void 0,onClick:()=>bt(G,null),"aria-posinset":Ct+1,"aria-setsize":y.value.length});return G.type==="divider"?((cr=r.divider)==null?void 0:cr.call(r,{props:G.raw,index:Ct}))??D(bs,xt(G.props,{key:`divider-${Ct}`}),null):G.type==="subheader"?((hr=r.subheader)==null?void 0:hr.call(r,{props:G.raw,index:Ct}))??D(vs,xt(G.props,{key:`subheader-${Ct}`}),null):((fr=r.item)==null?void 0:fr.call(r,{item:G,index:Ct,props:ur}))??D(bn,xt(ur,{role:"option"}),{prepend:Ee=>{let{isSelected:Bo}=Ee;return Rt(Kt,null,[t.multiple&&!t.hideSelected?D(Cs,{key:G.value,modelValue:Bo,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:No=>No.preventDefault()},null):void 0,G.props.prependAvatar&&D(ai,{image:G.props.prependAvatar},null),G.props.prependIcon&&D(xn,{icon:G.props.prependIcon},null)])},title:()=>{var Ee;return s.value?G.title:ms("v-combobox",G.title,(Ee=nt(G))==null?void 0:Ee.title)}})}}),(et=r["append-item"])==null?void 0:et.call(r)]}})]}),E.value.map((V,ot)=>{function et(ct){ct.stopPropagation(),ct.preventDefault(),bt(V,!1)}const jt=xt(wn.filterProps(V.props),{"onClick:close":et,onKeydown(ct){ct.key!=="Enter"&&ct.key!==" "||(ct.preventDefault(),ct.stopPropagation(),et(ct))},onMousedown(ct){ct.preventDefault(),ct.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),G=$.value?!!r.chip:!!r.selection,Ct=G?Xo($.value?r.chip({item:V,index:ot,props:jt}):r.selection({item:V,index:ot})):void 0;if(!(G&&!Ct))return Rt("div",{key:V.value,class:Yo(["v-combobox__selection",ot===h.value&&["v-combobox__selection--selected",v.value]]),style:qo(ot===h.value?_.value:{})},[$.value?r.chip?D(jo,{key:"chip-defaults",defaults:{VChip:{closable:N.value,size:"small",text:V.title}}},{default:()=>[Ct]}):D(wn,xt({key:"chip",closable:N.value,size:"small",text:V.title,disabled:V.props.disabled},jt),null):Ct??Rt("span",{class:"v-combobox__selection-text"},[V.title,t.multiple&&ot<E.value.length-1&&Rt("span",{class:"v-combobox__selection-comma"},[Vt(",")])])])})])},"append-inner":function(){var ot,et;for(var J=arguments.length,yt=new Array(J),V=0;V<J;V++)yt[V]=arguments[V];return Rt(Kt,null,[(ot=r["append-inner"])==null?void 0:ot.call(r,...yt),(!t.hideNoData||t.items.length)&&t.menuIcon?D(xn,{class:"v-combobox__menu-icon",color:(et=o.value)==null?void 0:et.fieldIconColor,icon:t.menuIcon,onMousedown:mt,onClick:Ho,"aria-hidden":!0,tabindex:"-1"},null):void 0,t.appendInnerIcon&&D(A,{key:"append-icon",name:"appendInner",color:yt[0].iconColor.value},null)])}})}),Wo({isFocused:a,isPristine:s,menu:b,search:z,selectionIndex:h,filteredItems:q,select:bt},o)}});function Bs(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Ns(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ms(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Ts(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var Ds={value:()=>{}};function qn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new De(n)}function De(t){this._=t}function Fs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}De.prototype=qn.prototype={constructor:De,on:function(t,e){var n=this._,r=Fs(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Os(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=xr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=xr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new De(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Os(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function xr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ds,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Cn="http://www.w3.org/1999/xhtml";const wr={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),wr.hasOwnProperty(e)?{space:wr[e],local:t}:t}function Ls(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cn&&e.documentElement.namespaceURI===Cn?e.createElement(t):e.createElementNS(n,t)}}function Is(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function di(t){var e=Ze(t);return(e.local?Is:Ls)(e)}function Ps(){}function Yn(t){return t==null?Ps:function(){return this.querySelector(t)}}function zs(t){typeof t!="function"&&(t=Yn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new ft(r,this._parents)}function Us(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Vs(){return[]}function pi(t){return t==null?Vs:function(){return this.querySelectorAll(t)}}function Hs(t){return function(){return Us(t.apply(this,arguments))}}function Xs(t){typeof t=="function"?t=Hs(t):t=pi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new ft(r,i)}function gi(t){return function(){return this.matches(t)}}function mi(t){return function(e){return e.matches(t)}}var qs=Array.prototype.find;function Ys(t){return function(){return qs.call(this.children,t)}}function js(){return this.firstElementChild}function Ws(t){return this.select(t==null?js:Ys(typeof t=="function"?t:mi(t)))}var Js=Array.prototype.filter;function Gs(){return Array.from(this.children)}function Ks(t){return function(){return Js.call(this.children,t)}}function Zs(t){return this.selectAll(t==null?Gs:Ks(typeof t=="function"?t:mi(t)))}function Qs(t){typeof t!="function"&&(t=gi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new ft(r,this._parents)}function yi(t){return new Array(t.length)}function ta(){return new ft(this._enter||this._groups.map(yi),this._parents)}function Ve(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ve.prototype={constructor:Ve,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ea(t){return function(){return t}}function na(t,e,n,r,i,o){for(var a=0,s,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ve(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function ra(t,e,n,r,i,o,a){var s,c,l=new Map,u=e.length,h=o.length,f=new Array(u),g;for(s=0;s<u;++s)(c=e[s])&&(f[s]=g=a.call(c,c.__data__,s,e)+"",l.has(g)?i[s]=c:l.set(g,c));for(s=0;s<h;++s)g=a.call(t,o[s],s,o)+"",(c=l.get(g))?(r[s]=c,c.__data__=o[s],l.delete(g)):n[s]=new Ve(t,o[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(f[s])===c&&(i[s]=c)}function ia(t){return t.__data__}function oa(t,e){if(!arguments.length)return Array.from(this,ia);var n=e?ra:na,r=this._parents,i=this._groups;typeof t!="function"&&(t=ea(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],f=h.length,g=sa(t.call(u,u&&u.__data__,l,r)),d=g.length,m=s[l]=new Array(d),v=a[l]=new Array(d),_=c[l]=new Array(f);n(u,h,m,v,_,g,e);for(var A=0,E=0,B,N;A<d;++A)if(B=m[A]){for(A>=E&&(E=A+1);!(N=v[E])&&++E<d;);B._next=N||null}}return a=new ft(a,r),a._enter=s,a._exit=c,a}function sa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aa(){return new ft(this._exit||this._groups.map(yi),this._parents)}function la(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ua(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],h=l.length,f=s[c]=new Array(h),g,d=0;d<h;++d)(g=l[d]||u[d])&&(f[d]=g);for(;c<i;++c)s[c]=n[c];return new ft(s,this._parents)}function ca(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ha(t){t||(t=fa);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new ft(i,this._parents).order()}function fa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function da(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function pa(){return Array.from(this)}function ga(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ma(){let t=0;for(const e of this)++t;return t}function ya(){return!this.node()}function xa(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function wa(t){return function(){this.removeAttribute(t)}}function va(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _a(t,e){return function(){this.setAttribute(t,e)}}function ba(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ca(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ea(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Sa(t,e){var n=Ze(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?va:wa:typeof e=="function"?n.local?Ea:Ca:n.local?ba:_a)(n,e))}function xi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Aa(t){return function(){this.style.removeProperty(t)}}function ka(t,e,n){return function(){this.style.setProperty(t,e,n)}}function $a(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ra(t,e,n){return arguments.length>1?this.each((e==null?Aa:typeof e=="function"?$a:ka)(t,e,n??"")):Qt(this.node(),t)}function Qt(t,e){return t.style.getPropertyValue(e)||xi(t).getComputedStyle(t,null).getPropertyValue(e)}function Ba(t){return function(){delete this[t]}}function Na(t,e){return function(){this[t]=e}}function Ma(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ta(t,e){return arguments.length>1?this.each((e==null?Ba:typeof e=="function"?Ma:Na)(t,e)):this.node()[t]}function wi(t){return t.trim().split(/^|\s+/)}function jn(t){return t.classList||new vi(t)}function vi(t){this._node=t,this._names=wi(t.getAttribute("class")||"")}vi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _i(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function bi(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Da(t){return function(){_i(this,t)}}function Fa(t){return function(){bi(this,t)}}function Oa(t,e){return function(){(e.apply(this,arguments)?_i:bi)(this,t)}}function La(t,e){var n=wi(t+"");if(arguments.length<2){for(var r=jn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Oa:e?Da:Fa)(n,e))}function Ia(){this.textContent=""}function Pa(t){return function(){this.textContent=t}}function za(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ua(t){return arguments.length?this.each(t==null?Ia:(typeof t=="function"?za:Pa)(t)):this.node().textContent}function Va(){this.innerHTML=""}function Ha(t){return function(){this.innerHTML=t}}function Xa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function qa(t){return arguments.length?this.each(t==null?Va:(typeof t=="function"?Xa:Ha)(t)):this.node().innerHTML}function Ya(){this.nextSibling&&this.parentNode.appendChild(this)}function ja(){return this.each(Ya)}function Wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ja(){return this.each(Wa)}function Ga(t){var e=typeof t=="function"?t:di(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ka(){return null}function Za(t,e){var n=typeof t=="function"?t:di(t),r=e==null?Ka:typeof e=="function"?e:Yn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Qa(){var t=this.parentNode;t&&t.removeChild(this)}function tl(){return this.each(Qa)}function el(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function rl(t){return this.select(t?nl:el)}function il(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ol(t){return function(e){t.call(this,e,this.__data__)}}function sl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function al(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function ll(t,e,n){return function(){var r=this.__on,i,o=ol(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ul(t,e,n){var r=sl(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?ll:al,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Ci(t,e,n){var r=xi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function cl(t,e){return function(){return Ci(this,t,e)}}function hl(t,e){return function(){return Ci(this,t,e.apply(this,arguments))}}function fl(t,e){return this.each((typeof e=="function"?hl:cl)(t,e))}function*dl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ei=[null];function ft(t,e){this._groups=t,this._parents=e}function re(){return new ft([[document.documentElement]],Ei)}function pl(){return this}ft.prototype=re.prototype={constructor:ft,select:zs,selectAll:Xs,selectChild:Ws,selectChildren:Zs,filter:Qs,data:oa,enter:ta,exit:aa,join:la,merge:ua,selection:pl,order:ca,sort:ha,call:da,nodes:pa,node:ga,size:ma,empty:ya,each:xa,attr:Sa,style:Ra,property:Ta,classed:La,text:Ua,html:qa,raise:ja,lower:Ja,append:Ga,insert:Za,remove:tl,clone:rl,datum:il,on:ul,dispatch:fl,[Symbol.iterator]:dl};function pt(t){return typeof t=="string"?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],Ei)}function gl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ot(t,e){if(t=gl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const En={capture:!0,passive:!1};function Sn(t){t.preventDefault(),t.stopImmediatePropagation()}function ml(t){var e=t.document.documentElement,n=pt(t).on("dragstart.drag",Sn,En);"onselectstart"in e?n.on("selectstart.drag",Sn,En):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yl(t,e){var n=t.document.documentElement,r=pt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Sn,En),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Wn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Si(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function we(){}var ge=.7,He=1/ge,Zt="\\s*([+-]?\\d+)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xl=/^#([0-9a-f]{3,8})$/,wl=new RegExp(`^rgb\\(${Zt},${Zt},${Zt}\\)$`),vl=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),_l=new RegExp(`^rgba\\(${Zt},${Zt},${Zt},${me}\\)$`),bl=new RegExp(`^rgba\\(${At},${At},${At},${me}\\)$`),Cl=new RegExp(`^hsl\\(${me},${At},${At}\\)$`),El=new RegExp(`^hsla\\(${me},${At},${At},${me}\\)$`),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wn(we,ye,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_r,formatHex:_r,formatHex8:Sl,formatHsl:Al,formatRgb:br,toString:br});function _r(){return this.rgb().formatHex()}function Sl(){return this.rgb().formatHex8()}function Al(){return Ai(this).formatHsl()}function br(){return this.rgb().formatRgb()}function ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Cr(e):n===3?new st(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ae(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wl.exec(t))?new st(e[1],e[2],e[3],1):(e=vl.exec(t))?new st(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_l.exec(t))?Ae(e[1],e[2],e[3],e[4]):(e=bl.exec(t))?Ae(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cl.exec(t))?Ar(e[1],e[2]/100,e[3]/100,1):(e=El.exec(t))?Ar(e[1],e[2]/100,e[3]/100,e[4]):vr.hasOwnProperty(t)?Cr(vr[t]):t==="transparent"?new st(NaN,NaN,NaN,0):null}function Cr(t){return new st(t>>16&255,t>>8&255,t&255,1)}function Ae(t,e,n,r){return r<=0&&(t=e=n=NaN),new st(t,e,n,r)}function kl(t){return t instanceof we||(t=ye(t)),t?(t=t.rgb(),new st(t.r,t.g,t.b,t.opacity)):new st}function An(t,e,n,r){return arguments.length===1?kl(t):new st(t,e,n,r??1)}function st(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Wn(st,An,Si(we,{brighter(t){return t=t==null?He:Math.pow(He,t),new st(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new st(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new st(Ht(this.r),Ht(this.g),Ht(this.b),Xe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Er,formatHex:Er,formatHex8:$l,formatRgb:Sr,toString:Sr}));function Er(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}`}function $l(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}${zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sr(){const t=Xe(this.opacity);return`${t===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${t===1?")":`, ${t})`}`}function Xe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ht(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zt(t){return t=Ht(t),(t<16?"0":"")+t.toString(16)}function Ar(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wt(t,e,n,r)}function Ai(t){if(t instanceof wt)return new wt(t.h,t.s,t.l,t.opacity);if(t instanceof we||(t=ye(t)),!t)return new wt;if(t instanceof wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new wt(a,s,c,t.opacity)}function Rl(t,e,n,r){return arguments.length===1?Ai(t):new wt(t,e,n,r??1)}function wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Wn(wt,Rl,Si(we,{brighter(t){return t=t==null?He:Math.pow(He,t),new wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new st(an(t>=240?t-240:t+120,i,r),an(t,i,r),an(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new wt(kr(this.h),ke(this.s),ke(this.l),Xe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xe(this.opacity);return`${t===1?"hsl(":"hsla("}${kr(this.h)}, ${ke(this.s)*100}%, ${ke(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kr(t){return t=(t||0)%360,t<0?t+360:t}function ke(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ki=t=>()=>t;function Bl(t,e){return function(n){return t+n*e}}function Nl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ml(t){return(t=+t)==1?$i:function(e,n){return n-e?Nl(e,n,t):ki(isNaN(e)?n:e)}}function $i(t,e){var n=e-t;return n?Bl(t,n):ki(isNaN(t)?e:t)}const $r=(function t(e){var n=Ml(e);function r(i,o){var a=n((i=An(i)).r,(o=An(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=$i(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r})(1);function Tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ln=new RegExp(kn.source,"g");function Tl(t){return function(){return t}}function Dl(t){return function(e){return t(e)+""}}function Fl(t,e){var n=kn.lastIndex=ln.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=kn.exec(t))&&(i=ln.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Tt(r,i)})),n=ln.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?Dl(c[0].x):Tl(e):(e=c.length,function(l){for(var u=0,h;u<e;++u)s[(h=c[u]).i]=h.x(l);return s.join("")})}var Rr=180/Math.PI,$n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ri(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Rr,skewX:Math.atan(c)*Rr,scaleX:a,scaleY:s}}var $e;function Ol(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?$n:Ri(e.a,e.b,e.c,e.d,e.e,e.f)}function Ll(t){return t==null||($e||($e=document.createElementNS("http://www.w3.org/2000/svg","g")),$e.setAttribute("transform",t),!(t=$e.transform.baseVal.consolidate()))?$n:(t=t.matrix,Ri(t.a,t.b,t.c,t.d,t.e,t.f))}function Bi(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,h,f,g,d){if(l!==h||u!==f){var m=g.push("translate(",null,e,null,n);d.push({i:m-4,x:Tt(l,h)},{i:m-2,x:Tt(u,f)})}else(h||f)&&g.push("translate("+h+e+f+n)}function a(l,u,h,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Tt(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(l,u,h,f){l!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Tt(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function c(l,u,h,f,g,d){if(l!==h||u!==f){var m=g.push(i(g)+"scale(",null,",",null,")");d.push({i:m-4,x:Tt(l,h)},{i:m-2,x:Tt(u,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(l,u){var h=[],f=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,h,f),a(l.rotate,u.rotate,h,f),s(l.skewX,u.skewX,h,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,f),l=u=null,function(g){for(var d=-1,m=f.length,v;++d<m;)h[(v=f[d]).i]=v.x(g);return h.join("")}}}var Il=Bi(Ol,"px, ","px)","deg)"),Pl=Bi(Ll,", ",")",")"),zl=1e-12;function Br(t){return((t=Math.exp(t))+1/t)/2}function Ul(t){return((t=Math.exp(t))-1/t)/2}function Vl(t){return((t=Math.exp(2*t))-1)/(t+1)}const Hl=(function t(e,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],h=a[1],f=a[2],g=u-s,d=h-c,m=g*g+d*d,v,_;if(m<zl)_=Math.log(f/l)/e,v=function(C){return[s+C*g,c+C*d,l*Math.exp(e*C*_)]};else{var A=Math.sqrt(m),E=(f*f-l*l+r*m)/(2*l*n*A),B=(f*f-l*l-r*m)/(2*f*n*A),N=Math.log(Math.sqrt(E*E+1)-E),$=Math.log(Math.sqrt(B*B+1)-B);_=($-N)/e,v=function(C){var k=C*_,M=Br(N),z=l/(n*A)*(M*Vl(e*k+N)-Ul(N));return[s+z*g,c+z*d,l*M/Br(e*k+N)]}}return v.duration=_*1e3*e/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i})(Math.SQRT2,2,4);var te=0,fe=0,ue=0,Ni=1e3,qe,de,Ye=0,qt=0,Qe=0,xe=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jn(){return qt||(Mi(Xl),qt=xe.now()+Qe)}function Xl(){qt=0}function je(){this._call=this._time=this._next=null}je.prototype=Ti.prototype={constructor:je,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Jn():+n)+(e==null?0:+e),!this._next&&de!==this&&(de?de._next=this:qe=this,de=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function Ti(t,e,n){var r=new je;return r.restart(t,e,n),r}function ql(){Jn(),++te;for(var t=qe,e;t;)(e=qt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--te}function Nr(){qt=(Ye=xe.now())+Qe,te=fe=0;try{ql()}finally{te=0,jl(),qt=0}}function Yl(){var t=xe.now(),e=t-Ye;e>Ni&&(Qe-=e,Ye=t)}function jl(){for(var t,e=qe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);de=t,Rn(r)}function Rn(t){if(!te){fe&&(fe=clearTimeout(fe));var e=t-qt;e>24?(t<1/0&&(fe=setTimeout(Nr,t-xe.now()-Qe)),ue&&(ue=clearInterval(ue))):(ue||(Ye=xe.now(),ue=setInterval(Yl,Ni)),te=1,Mi(Nr))}}function Mr(t,e,n){var r=new je;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Wl=qn("start","end","cancel","interrupt"),Jl=[],Di=0,Tr=1,Bn=2,Fe=3,Dr=4,Nn=5,Oe=6;function tn(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Gl(t,n,{name:e,index:r,group:i,on:Wl,tween:Jl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Di})}function Gn(t,e){var n=vt(t,e);if(n.state>Di)throw new Error("too late; already scheduled");return n}function kt(t,e){var n=vt(t,e);if(n.state>Fe)throw new Error("too late; already running");return n}function vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Gl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ti(o,0,n.time);function o(l){n.state=Tr,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,h,f,g;if(n.state!==Tr)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Fe)return Mr(a);g.state===Dr?(g.state=Oe,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=Oe,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Mr(function(){n.state===Fe&&(n.state=Dr,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Bn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Bn){for(n.state=Fe,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Nn,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===Nn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Oe,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Le(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Bn&&r.state<Nn,r.state=Oe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Kl(t){return this.each(function(){Le(this,t)})}function Zl(t,e){var n,r;return function(){var i=kt(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ql(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=kt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function tu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=vt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Zl:Ql)(n,t,e))}function Kn(t,e,n){var r=t._id;return t.each(function(){var i=kt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return vt(i,r).value[e]}}function Fi(t,e){var n;return(typeof e=="number"?Tt:e instanceof ye?$r:(n=ye(e))?(e=n,$r):Fl)(t,e)}function eu(t){return function(){this.removeAttribute(t)}}function nu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ru(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function iu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function ou(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function su(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function au(t,e){var n=Ze(t),r=n==="transform"?Pl:Fi;return this.attrTween(t,typeof e=="function"?(n.local?su:ou)(n,r,Kn(this,"attr."+t,e)):e==null?(n.local?nu:eu)(n):(n.local?iu:ru)(n,r,e))}function lu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function uu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&uu(t,o)),n}return i._value=e,i}function hu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&lu(t,o)),n}return i._value=e,i}function fu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ze(t);return this.tween(n,(r.local?cu:hu)(r,e))}function du(t,e){return function(){Gn(this,t).delay=+e.apply(this,arguments)}}function pu(t,e){return e=+e,function(){Gn(this,t).delay=e}}function gu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?du:pu)(e,t)):vt(this.node(),e).delay}function mu(t,e){return function(){kt(this,t).duration=+e.apply(this,arguments)}}function yu(t,e){return e=+e,function(){kt(this,t).duration=e}}function xu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mu:yu)(e,t)):vt(this.node(),e).duration}function wu(t,e){if(typeof e!="function")throw new Error;return function(){kt(this,t).ease=e}}function vu(t){var e=this._id;return arguments.length?this.each(wu(e,t)):vt(this.node(),e).ease}function _u(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;kt(this,t).ease=n}}function bu(t){if(typeof t!="function")throw new Error;return this.each(_u(this._id,t))}function Cu(t){typeof t!="function"&&(t=gi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new Nt(r,this._parents,this._name,this._id)}function Eu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],l=n[s],u=c.length,h=a[s]=new Array(u),f,g=0;g<u;++g)(f=c[g]||l[g])&&(h[g]=f);for(;s<r;++s)a[s]=e[s];return new Nt(a,this._parents,this._name,this._id)}function Su(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Au(t,e,n){var r,i,o=Su(e)?Gn:kt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function ku(t,e){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(t):this.each(Au(n,t,e))}function $u(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ru(){return this.on("end.remove",$u(this._id))}function Bu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,h,f=0;f<c;++f)(u=s[f])&&(h=t.call(u,u.__data__,f,s))&&("__data__"in u&&(h.__data__=u.__data__),l[f]=h,tn(l[f],e,n,f,l,vt(u,n)));return new Nt(o,this._parents,e,n)}function Nu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var f=t.call(u,u.__data__,h,c),g,d=vt(u,n),m=0,v=f.length;m<v;++m)(g=f[m])&&tn(g,e,n,m,f,d);o.push(f),a.push(u)}return new Nt(o,a,e,n)}var Mu=re.prototype.constructor;function Tu(){return new Mu(this._groups,this._parents)}function Du(t,e){var n,r,i;return function(){var o=Qt(this,t),a=(this.style.removeProperty(t),Qt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Oi(t){return function(){this.style.removeProperty(t)}}function Fu(t,e,n){var r,i=n+"",o;return function(){var a=Qt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Ou(t,e,n){var r,i,o;return function(){var a=Qt(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Qt(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Lu(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=kt(this,t),l=c.on,u=c.value[o]==null?s||(s=Oi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Iu(t,e,n){var r=(t+="")=="transform"?Il:Fi;return e==null?this.styleTween(t,Du(t,r)).on("end.style."+t,Oi(t)):typeof e=="function"?this.styleTween(t,Ou(t,r,Kn(this,"style."+t,e))).each(Lu(this._id,t)):this.styleTween(t,Fu(t,r,e),n).on("end.style."+t,null)}function Pu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Pu(t,a,n)),r}return o._value=e,o}function Uu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zu(t,e,n??""))}function Vu(t){return function(){this.textContent=t}}function Hu(t){return function(){var e=t(this);this.textContent=e??""}}function Xu(t){return this.tween("text",typeof t=="function"?Hu(Kn(this,"text",t)):Vu(t==null?"":t+""))}function qu(t){return function(e){this.textContent=t.call(this,e)}}function Yu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&qu(i)),e}return r._value=t,r}function ju(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Yu(t))}function Wu(){for(var t=this._name,e=this._id,n=Li(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=vt(c,e);tn(c,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nt(r,this._parents,t,n)}function Ju(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=kt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&o()})}var Gu=0;function Nt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Li(){return++Gu}var $t=re.prototype;Nt.prototype={constructor:Nt,select:Bu,selectAll:Nu,selectChild:$t.selectChild,selectChildren:$t.selectChildren,filter:Cu,merge:Eu,selection:Tu,transition:Wu,call:$t.call,nodes:$t.nodes,node:$t.node,size:$t.size,empty:$t.empty,each:$t.each,on:ku,attr:au,attrTween:fu,style:Iu,styleTween:Uu,text:Xu,textTween:ju,remove:Ru,tween:tu,delay:gu,duration:xu,ease:vu,easeVarying:bu,end:Ju,[Symbol.iterator]:$t[Symbol.iterator]};function Ku(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Zu={time:null,delay:0,duration:250,ease:Ku};function Qu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function tc(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=Li(),(n=Zu).time=Jn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&tn(c,t,e,l,a,n||Qu(c,e));return new Nt(r,this._parents,t,e)}re.prototype.interrupt=Kl;re.prototype.transition=tc;const Mn=Math.PI,Tn=2*Mn,It=1e-6,ec=Tn-It;function Ii(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ii;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ii:nc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,l=i-n,u=a-e,h=s-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>It)if(!(Math.abs(h*c-l*u)>It)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,d=i-s,m=c*c+l*l,v=g*g+d*d,_=Math.sqrt(m),A=Math.sqrt(f),E=o*Math.tan((Mn-Math.acos((m+f-v)/(2*_*A)))/2),B=E/A,N=E/_;Math.abs(B-1)>It&&this._append`L${e+B*u},${n+B*h}`,this._append`A${o},${o},0,0,${+(h*g>u*d)},${this._x1=e+N*c},${this._y1=n+N*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=e+s,u=n+c,h=1^a,f=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>It||Math.abs(this._y1-u)>It)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Tn+Tn),f>ec?this._append`A${r},${r},0,1,${h},${e-s},${n-c}A${r},${r},0,1,${h},${this._x1=l},${this._y1=u}`:f>It&&this._append`A${r},${r},0,${+(f>=Mn)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ic(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function oc(){return this.eachAfter(ic)}function sc(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function ac(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function lc(t,e){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function uc(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function cc(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function hc(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function fc(t){for(var e=this,n=dc(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function dc(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function pc(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function gc(){return Array.from(this)}function mc(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function yc(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*xc(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Pi(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=_c)):e===void 0&&(e=vc);for(var n=new ee(t),r,i=[n],o,a,s,c;r=i.pop();)if((a=e(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new ee(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(zi)}function wc(){return Pi(this).eachBefore(bc)}function vc(t){return t.children}function _c(t){return Array.isArray(t)?t[1]:null}function bc(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function zi(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ee(t){this.data=t,this.depth=this.height=0,this.parent=null}ee.prototype=Pi.prototype={constructor:ee,count:oc,each:sc,eachAfter:lc,eachBefore:ac,find:uc,sum:cc,sort:hc,path:fc,ancestors:pc,descendants:gc,leaves:mc,links:yc,copy:wc,[Symbol.iterator]:xc};function un(t){return t==null?null:Cc(t)}function Cc(t){if(typeof t!="function")throw new Error;return t}var Ec={depth:-1},Fr={},cn={};function Sc(t){return t.id}function Ac(t){return t.parentId}function kc(){var t=Sc,e=Ac,n;function r(i){var o=Array.from(i),a=t,s=e,c,l,u,h,f,g,d,m,v=new Map;if(n!=null){const _=o.map((B,N)=>$c(n(B,N,i))),A=_.map(Or),E=new Set(_).add("");for(const B of A)E.has(B)||(E.add(B),_.push(B),A.push(Or(B)),o.push(cn));a=(B,N)=>_[N],s=(B,N)=>A[N]}for(u=0,c=o.length;u<c;++u)l=o[u],g=o[u]=new ee(l),(d=a(l,u,i))!=null&&(d+="")&&(m=g.id=d,v.set(m,v.has(m)?Fr:g)),(d=s(l,u,i))!=null&&(d+="")&&(g.parent=d);for(u=0;u<c;++u)if(g=o[u],d=g.parent){if(f=v.get(d),!f)throw new Error("missing: "+d);if(f===Fr)throw new Error("ambiguous: "+d);f.children?f.children.push(g):f.children=[g],g.parent=f}else{if(h)throw new Error("multiple roots");h=g}if(!h)throw new Error("no root");if(n!=null){for(;h.data===cn&&h.children.length===1;)h=h.children[0],--c;for(let _=o.length-1;_>=0&&(g=o[_],g.data===cn);--_)g.data=null}if(h.parent=Ec,h.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(zi),h.parent=null,c>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(t=un(i),r):t},r.parentId=function(i){return arguments.length?(e=un(i),r):e},r.path=function(i){return arguments.length?(n=un(i),r):n},r}function $c(t){t=`${t}`;let e=t.length;return Dn(t,e-1)&&!Dn(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Or(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Dn(t,e););return t.slice(0,e)}function Dn(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function Rc(t,e){return t.parent===e.parent?1:2}function hn(t){var e=t.children;return e?e[0]:t.t}function fn(t){var e=t.children;return e?e[e.length-1]:t.t}function Bc(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Nc(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Mc(t,e,n){return t.a.parent===e.parent?t.a:n}function Ie(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ie.prototype=Object.create(ee.prototype);function Tc(t){for(var e=new Ie(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new Ie(o[a],a)),i.parent=n;return(e.parent=new Ie(null,0)).children=[e],e}function Dc(){var t=Rc,e=1,n=1,r=null;function i(l){var u=Tc(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var h=l,f=l,g=l;l.eachBefore(function(A){A.x<h.x&&(h=A),A.x>f.x&&(f=A),A.depth>g.depth&&(g=A)});var d=h===f?1:t(h,f)/2,m=d-h.x,v=e/(f.x+d+m),_=n/(g.depth||1);l.eachBefore(function(A){A.x=(A.x+m)*v,A.y=A.depth*_})}return l}function o(l){var u=l.children,h=l.parent.children,f=l.i?h[l.i-1]:null;if(u){Nc(l);var g=(u[0].z+u[u.length-1].z)/2;f?(l.z=f.z+t(l._,f._),l.m=l.z-g):l.z=g}else f&&(l.z=f.z+t(l._,f._));l.parent.A=s(l,f,l.parent.A||h[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,h){if(u){for(var f=l,g=l,d=u,m=f.parent.children[0],v=f.m,_=g.m,A=d.m,E=m.m,B;d=fn(d),f=hn(f),d&&f;)m=hn(m),g=fn(g),g.a=l,B=d.z+A-f.z-v+t(d._,f._),B>0&&(Bc(Mc(d,l,h),l,B),v+=B,_+=B),A+=d.m,v+=f.m,E+=m.m,_+=g.m;d&&!fn(g)&&(g.t=d,g.m+=A-_),f&&!hn(m)&&(m.t=f,m.m+=v-E,h=l)}return h}function c(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}function Lr(t){return function(){return t}}function Fc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new rc(e)}var Oc=Array.prototype.slice;function Lc(t){return t[0]}function Ic(t){return t[1]}class Pc{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function zc(t){return new Pc(t,!0)}function Uc(t){return t.source}function Vc(t){return t.target}function Hc(t){let e=Uc,n=Vc,r=Lc,i=Ic,o=null,a=null,s=Fc(c);function c(){let l;const u=Oc.call(arguments),h=e.apply(this,u),f=n.apply(this,u);if(o==null&&(a=t(l=s())),a.lineStart(),u[0]=h,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=f,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),l)return a=null,l+""||null}return c.source=function(l){return arguments.length?(e=l,c):e},c.target=function(l){return arguments.length?(n=l,c):n},c.x=function(l){return arguments.length?(r=typeof l=="function"?l:Lr(+l),c):r},c.y=function(l){return arguments.length?(i=typeof l=="function"?l:Lr(+l),c):i},c.context=function(l){return arguments.length?(l==null?o=a=null:a=t(o=l),c):o},c}function Xc(){return Hc(zc)}const Re=t=>()=>t;function qc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Bt(t,e,n){this.k=t,this.x=e,this.y=n}Bt.prototype={constructor:Bt,scale:function(t){return t===1?this:new Bt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Bt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new Bt(1,0,0);Bt.prototype;function dn(t){t.stopImmediatePropagation()}function ce(t){t.preventDefault(),t.stopImmediatePropagation()}function Yc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function jc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ir(){return this.__zoom||Zn}function Wc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Jc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Kc(){var t=Yc,e=jc,n=Gc,r=Wc,i=Jc,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Hl,l=qn("start","zoom","end"),u,h,f,g=500,d=150,m=0,v=10;function _(y){y.property("__zoom",Ir).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",tt).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(y,p,x,b){var R=y.selection?y.selection():y;R.property("__zoom",Ir),y!==R?N(y,p,x,b):R.interrupt().each(function(){$(this,arguments).event(b).start().zoom(null,typeof p=="function"?p.apply(this,arguments):p).end()})},_.scaleBy=function(y,p,x,b){_.scaleTo(y,function(){var R=this.__zoom.k,T=typeof p=="function"?p.apply(this,arguments):p;return R*T},x,b)},_.scaleTo=function(y,p,x,b){_.transform(y,function(){var R=e.apply(this,arguments),T=this.__zoom,F=x==null?B(R):typeof x=="function"?x.apply(this,arguments):x,I=T.invert(F),U=typeof p=="function"?p.apply(this,arguments):p;return n(E(A(T,U),F,I),R,a)},x,b)},_.translateBy=function(y,p,x,b){_.transform(y,function(){return n(this.__zoom.translate(typeof p=="function"?p.apply(this,arguments):p,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),a)},null,b)},_.translateTo=function(y,p,x,b,R){_.transform(y,function(){var T=e.apply(this,arguments),F=this.__zoom,I=b==null?B(T):typeof b=="function"?b.apply(this,arguments):b;return n(Zn.translate(I[0],I[1]).scale(F.k).translate(typeof p=="function"?-p.apply(this,arguments):-p,typeof x=="function"?-x.apply(this,arguments):-x),T,a)},b,R)};function A(y,p){return p=Math.max(o[0],Math.min(o[1],p)),p===y.k?y:new Bt(p,y.x,y.y)}function E(y,p,x){var b=p[0]-x[0]*y.k,R=p[1]-x[1]*y.k;return b===y.x&&R===y.y?y:new Bt(y.k,b,R)}function B(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function N(y,p,x,b){y.on("start.zoom",function(){$(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(b).end()}).tween("zoom",function(){var R=this,T=arguments,F=$(R,T).event(b),I=e.apply(R,T),U=x==null?B(I):typeof x=="function"?x.apply(R,T):x,K=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),j=R.__zoom,rt=typeof p=="function"?p.apply(R,T):p,gt=c(j.invert(U).concat(K/j.k),rt.invert(U).concat(K/rt.k));return function(ut){if(ut===1)ut=rt;else{var mt=gt(ut),ae=K/mt[2];ut=new Bt(ae,U[0]-mt[0]*ae,U[1]-mt[1]*ae)}F.zoom(null,ut)}})}function $(y,p,x){return!x&&y.__zooming||new C(y,p)}function C(y,p){this.that=y,this.args=p,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,p),this.taps=0}C.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,p){return this.mouse&&y!=="mouse"&&(this.mouse[1]=p.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=p.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=p.invert(this.touch1[0])),this.that.__zoom=p,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var p=pt(this.that).datum();l.call(y,this.that,new qc(y,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),p)}};function k(y,...p){if(!t.apply(this,arguments))return;var x=$(this,p).event(y),b=this.__zoom,R=Math.max(o[0],Math.min(o[1],b.k*Math.pow(2,r.apply(this,arguments)))),T=Ot(y);if(x.wheel)(x.mouse[0][0]!==T[0]||x.mouse[0][1]!==T[1])&&(x.mouse[1]=b.invert(x.mouse[0]=T)),clearTimeout(x.wheel);else{if(b.k===R)return;x.mouse=[T,b.invert(T)],Le(this),x.start()}ce(y),x.wheel=setTimeout(F,d),x.zoom("mouse",n(E(A(b,R),x.mouse[0],x.mouse[1]),x.extent,a));function F(){x.wheel=null,x.end()}}function M(y,...p){if(f||!t.apply(this,arguments))return;var x=y.currentTarget,b=$(this,p,!0).event(y),R=pt(y.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",K,!0),T=Ot(y,x),F=y.clientX,I=y.clientY;ml(y.view),dn(y),b.mouse=[T,this.__zoom.invert(T)],Le(this),b.start();function U(j){if(ce(j),!b.moved){var rt=j.clientX-F,gt=j.clientY-I;b.moved=rt*rt+gt*gt>m}b.event(j).zoom("mouse",n(E(b.that.__zoom,b.mouse[0]=Ot(j,x),b.mouse[1]),b.extent,a))}function K(j){R.on("mousemove.zoom mouseup.zoom",null),yl(j.view,b.moved),ce(j),b.event(j).end()}}function z(y,...p){if(t.apply(this,arguments)){var x=this.__zoom,b=Ot(y.changedTouches?y.changedTouches[0]:y,this),R=x.invert(b),T=x.k*(y.shiftKey?.5:2),F=n(E(A(x,T),b,R),e.apply(this,p),a);ce(y),s>0?pt(this).transition().duration(s).call(N,F,b,y):pt(this).call(_.transform,F,b,y)}}function tt(y,...p){if(t.apply(this,arguments)){var x=y.touches,b=x.length,R=$(this,p,y.changedTouches.length===b).event(y),T,F,I,U;for(dn(y),F=0;F<b;++F)I=x[F],U=Ot(I,this),U=[U,this.__zoom.invert(U),I.identifier],R.touch0?!R.touch1&&R.touch0[2]!==U[2]&&(R.touch1=U,R.taps=0):(R.touch0=U,T=!0,R.taps=1+!!u);u&&(u=clearTimeout(u)),T&&(R.taps<2&&(h=U[0],u=setTimeout(function(){u=null},g)),Le(this),R.start())}}function q(y,...p){if(this.__zooming){var x=$(this,p).event(y),b=y.changedTouches,R=b.length,T,F,I,U;for(ce(y),T=0;T<R;++T)F=b[T],I=Ot(F,this),x.touch0&&x.touch0[2]===F.identifier?x.touch0[0]=I:x.touch1&&x.touch1[2]===F.identifier&&(x.touch1[0]=I);if(F=x.that.__zoom,x.touch1){var K=x.touch0[0],j=x.touch0[1],rt=x.touch1[0],gt=x.touch1[1],ut=(ut=rt[0]-K[0])*ut+(ut=rt[1]-K[1])*ut,mt=(mt=gt[0]-j[0])*mt+(mt=gt[1]-j[1])*mt;F=A(F,Math.sqrt(ut/mt)),I=[(K[0]+rt[0])/2,(K[1]+rt[1])/2],U=[(j[0]+gt[0])/2,(j[1]+gt[1])/2]}else if(x.touch0)I=x.touch0[0],U=x.touch0[1];else return;x.zoom("touch",n(E(F,I,U),x.extent,a))}}function nt(y,...p){if(this.__zooming){var x=$(this,p).event(y),b=y.changedTouches,R=b.length,T,F;for(dn(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<R;++T)F=b[T],x.touch0&&x.touch0[2]===F.identifier?delete x.touch0:x.touch1&&x.touch1[2]===F.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(F=Ot(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<v)){var I=pt(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return _.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Re(+y),_):r},_.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Re(!!y),_):t},_.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Re(!!y),_):i},_.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Re([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),_):e},_.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],_):[o[0],o[1]]},_.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(y){return arguments.length?(n=y,_):n},_.duration=function(y){return arguments.length?(s=+y,_):s},_.interpolate=function(y){return arguments.length?(c=y,_):c},_.on=function(){var y=l.on.apply(l,arguments);return y===l?_:y},_.clickDistance=function(y){return arguments.length?(m=(y=+y)*y,_):Math.sqrt(m)},_.tapDistance=function(y){return arguments.length?(v=+y,_):v},_}function Zc(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Qc(){return this.eachAfter(Zc)}function th(t){var e=this,n,r=[e],i,o,a;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)r.push(i[o]);while(r.length);return this}function eh(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function nh(t){for(var e=this,n=[e],r=[],i,o,a;e=n.pop();)if(r.push(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)n.push(i[o]);for(;e=r.pop();)t(e);return this}function rh(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function ih(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function oh(t){for(var e=this,n=sh(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function sh(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function ah(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function lh(){var t=[];return this.each(function(e){t.push(e)}),t}function uh(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ch(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function Qn(t,e){var n=new We(t),r=+t.value&&(n.value=t.value),i,o=[n],a,s,c,l;for(e==null&&(e=fh);i=o.pop();)if(r&&(i.value=+i.data.value),(s=e(i.data))&&(l=s.length))for(i.children=new Array(l),c=l-1;c>=0;--c)o.push(a=i.children[c]=new We(s[c])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(ph)}function hh(){return Qn(this).eachBefore(dh)}function fh(t){return t.children}function dh(t){t.data=t.data.data}function ph(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function We(t){this.data=t,this.depth=this.height=0,this.parent=null}We.prototype=Qn.prototype={constructor:We,count:Qc,each:th,eachAfter:nh,eachBefore:eh,sum:rh,sort:ih,path:oh,ancestors:ah,descendants:lh,leaves:uh,links:ch,copy:hh};const gh="2.1.2",mh={version:gh},{version:yh}=mh,xh=Object.freeze({children:t=>t.children,nodeSize:t=>t.data.size,spacing:0});function tr(t){const e=Object.assign({},xh,t);function n(s){const c=e[s];return typeof c=="function"?c:()=>c}function r(s){const c=a(o(),s,l=>l.children);return c.update(),c.data}function i(){const s=n("nodeSize"),c=n("spacing");return class Ui extends Qn.prototype.constructor{constructor(u){super(u)}copy(){const u=a(this.constructor,this,h=>h.children);return u.each(h=>h.data=h.data.data),u}get size(){return s(this)}spacing(u){return c(this,u)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const u=this.ancestors();return u[u.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((u,h)=>Ui.maxExtents(u,h.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(u,h){return{top:Math.min(u.top,h.top),bottom:Math.max(u.bottom,h.bottom),left:Math.min(u.left,h.left),right:Math.max(u.right,h.right)}}}}function o(){const s=i(),c=n("nodeSize"),l=n("spacing");return class extends s{constructor(u){super(u),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return c(this.data)}spacing(u){return l(this.data,u.data)}get x(){return this.data.x}set x(u){this.data.x=u}get y(){return this.data.y}set y(u){this.data.y=u}update(){return Vi(this),Hi(this),this}}}function a(s,c,l){const u=(h,f)=>{const g=new s(h);Object.assign(g,{parent:f,depth:f===null?0:f.depth+1,height:0,length:1});const d=l(h)||[];return g.children=d.length===0?null:d.map(m=>u(m,g)),g.children&&Object.assign(g,g.children.reduce((m,v)=>({height:Math.max(m.height,v.height+1),length:m.length+v.length}),g)),g};return u(c,null)}return Object.assign(r,{nodeSize(s){return arguments.length?(e.nodeSize=s,r):e.nodeSize},spacing(s){return arguments.length?(e.spacing=s,r):e.spacing},children(s){return arguments.length?(e.children=s,r):e.children},hierarchy(s,c){const l=typeof c>"u"?e.children:c;return a(i(),s,l)},dump(s){const c=n("nodeSize"),l=u=>h=>{const f=u+"  ",g=u+"    ",{x:d,y:m}=h,v=c(h),_=h.children||[],A=_.length===0?" ":`,${f}children: [${g}${_.map(l(g)).join(g)}${f}],${u}`;return`{ size: [${v.join(", ")}],${f}x: ${d}, y: ${m}${A}},`};return l(`
`)(s)}}),r}tr.version=yh;const Vi=(t,e=0)=>(t.y=e,(t.children||[]).reduce((n,r)=>{const[i,o]=n;Vi(r,t.y+t.ySize);const a=(i===0?r.lExt:r.rExt).bottom;i!==0&&vh(t,i,o);const s=$h(a,i,o);return[i+1,s]},[0,null]),wh(t),kh(t),t),Hi=(t,e,n)=>{typeof e>"u"&&(e=-t.relX-t.prelim,n=0);const r=e+t.relX;return t.relX=r+t.prelim-n,t.prelim=0,t.x=n+t.relX,(t.children||[]).forEach(i=>Hi(i,r,t.x)),t},wh=t=>{(t.children||[]).reduce((e,n)=>{const[r,i]=e,o=r+n.shift,a=i+o+n.change;return n.relX+=a,[o,a]},[0,0])},vh=(t,e,n)=>{const r=t.children[e-1],i=t.children[e];let o=r,a=r.relX,s=i,c=i.relX,l=!0;for(;o&&s;){o.bottom>n.lowY&&(n=n.next);const u=a+o.prelim-(c+s.prelim)+o.xSize/2+s.xSize/2+o.spacing(s);(u>0||u<0&&l)&&(c+=u,_h(i,u),bh(t,e,n.index,u)),l=!1;const h=o.bottom,f=s.bottom;h<=f&&(o=Eh(o),o&&(a+=o.relX)),h>=f&&(s=Ch(s),s&&(c+=s.relX))}!o&&s?Sh(t,e,s,c):o&&!s&&Ah(t,e,o,a)},_h=(t,e)=>{t.relX+=e,t.lExtRelX+=e,t.rExtRelX+=e},bh=(t,e,n,r)=>{const i=t.children[e],o=e-n;if(o>1){const a=r/o;t.children[n+1].shift+=a,i.shift-=a,i.change-=r-a}},Ch=t=>t.hasChildren?t.firstChild:t.lThr,Eh=t=>t.hasChildren?t.lastChild:t.rThr,Sh=(t,e,n,r)=>{const i=t.firstChild,o=i.lExt,a=t.children[e];o.lThr=n;const s=r-n.relX-i.lExtRelX;o.relX+=s,o.prelim-=s,i.lExt=a.lExt,i.lExtRelX=a.lExtRelX},Ah=(t,e,n,r)=>{const i=t.children[e],o=i.rExt,a=t.children[e-1];o.rThr=n;const s=r-n.relX-i.rExtRelX;o.relX+=s,o.prelim-=s,i.rExt=a.rExt,i.rExtRelX=a.rExtRelX},kh=t=>{if(t.hasChildren){const e=t.firstChild,n=t.lastChild,r=(e.prelim+e.relX-e.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(t,{prelim:r,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},$h=(t,e,n)=>{for(;n!==null&&t>=n.lowY;)n=n.next;return{lowY:t,index:e,next:n}},Y={selection:re,select:pt,max:Ns,min:Ms,sum:Ts,cumsum:Bs,tree:Dc,stratify:kc,zoom:Kc,zoomIdentity:Zn,linkHorizontal:Xc,flextree:tr};class Rh{constructor(){const e={id:`ID${Math.floor(Math.random()*1e6)}`,firstDraw:!0,ctx:document.createElement("canvas").getContext("2d"),initialExpandLevel:1,nodeDefaultBackground:"none",lastTransform:{x:0,y:0,k:1},allowedNodesCount:{},zoomBehavior:null,generateRoot:null,svgWidth:800,svgHeight:window.innerHeight-100,container:"body",data:null,connections:[],defaultFont:"Helvetica",nodeId:n=>n.nodeId||n.id,parentNodeId:n=>n.parentNodeId||n.parentId,rootMargin:40,nodeWidth:n=>250,nodeHeight:n=>150,neighbourMargin:(n,r)=>80,siblingsMargin:n=>20,childrenMargin:n=>60,compactMarginPair:n=>100,compactMarginBetween:(n=>20),nodeButtonWidth:n=>40,nodeButtonHeight:n=>40,nodeButtonX:n=>-20,nodeButtonY:n=>-20,linkYOffset:30,pagingStep:n=>5,minPagingVisibleNodes:n=>2e3,scaleExtent:[.001,20],duration:400,imageName:"Chart",setActiveNodeCentered:!0,layout:"top",compact:!0,createZoom:n=>Y.zoom(),onZoomStart:n=>{},onZoom:n=>{},onZoomEnd:n=>{},onNodeClick:n=>n,onExpandOrCollapse:n=>n,nodeContent:n=>`<div style="padding:5px;font-size:10px;">Sample Node(id=${n.id}), override using <br/> 
            <code>chart.nodeContent({data}=>{ <br/>
             &nbsp;&nbsp;&nbsp;&nbsp;return '' // Custom HTML <br/>
             })</code>
             <br/> 
             Or check different <a href="https://github.com/bumbeishvili/org-chart#jump-to-examples" target="_blank">layout examples</a>
             </div>`,buttonContent:({node:n,state:r})=>`<div style="border:1px solid #E4E2E9;border-radius:3px;padding:3px;font-size:9px;margin:auto auto;background-color:white"> ${{left:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                          </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,bottom:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                       `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                    `,right:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,top:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                        `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                    `}[r.layout](n.children)}  </div>`,pagingButton:(n,r,i,o)=>{const a=o.pagingStep(n.parent),s=n.parent.data._pagingStep,c=n.parent.data._directSubordinatesPaging-s;return`
                   <div style="margin-top:90px;">
                      <div style="display:flex;width:170px;border-radius:20px;padding:5px 15px; padding-bottom:4px;;background-color:#E5E9F2">
                      <div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg>
                      </div><div style="line-height:2"> Show next ${Math.min(c,a)}  nodes </div></div>
                   </div>
                `},nodeUpdate:function(n,r,i){Y.select(this).select(".node-rect").attr("stroke",o=>o.data._highlighted||o.data._upToTheRootHighlighted?"#E27396":"none").attr("stroke-width",n.data._highlighted||n.data._upToTheRootHighlighted?10:1)},nodeEnter:n=>n,nodeExit:n=>n,linkUpdate:function(n,r,i){Y.select(this).attr("stroke",o=>o.data._upToTheRootHighlighted?"#E27396":"#E4E2E9").attr("stroke-width",o=>o.data._upToTheRootHighlighted?5:1),n.data._upToTheRootHighlighted&&Y.select(this).raise()},hdiagonal:function(n,r,i){const o=n.x,a=n.y,s=r.x,c=r.y;let l=i&&i.x!=null?i.x:o,u=i&&i.y!=null?i.y:a,h=s-o<0?-1:1,f=c-a<0?-1:1,g=35,d=Math.abs(s-o)/2<g?Math.abs(s-o)/2:g;d=Math.abs(c-a)/2<d?Math.abs(c-a)/2:d;let m=Math.abs(s-o)/2-d;return`
                          M ${l} ${u}
                          L ${l} ${a}
                          L ${o} ${a}
                          L ${o+m*h} ${a}
                          C ${o+m*h+d*h} ${a} 
                            ${o+m*h+d*h} ${a} 
                            ${o+m*h+d*h} ${a+d*f}
                          L ${o+m*h+d*h} ${c-d*f} 
                          C ${o+m*h+d*h}  ${c} 
                            ${o+m*h+d*h}  ${c} 
                            ${s-m*h}  ${c}
                          L ${s} ${c}
               `},diagonal:function(n,r,i,o={sy:0}){const a=n.x;let s=n.y;const c=r.x,l=r.y;let u=i&&i.x!=null?i.x:a,h=i&&i.y!=null?i.y:s,f=c-a<0?-1:1,g=l-s<0?-1:1;s+=o.sy;let d=35,m=Math.abs(c-a)/2<d?Math.abs(c-a)/2:d;m=Math.abs(l-s)/2<m?Math.abs(l-s)/2:m;let v=Math.abs(l-s)/2-m,_=Math.abs(c-a)-m*2;return`
                          M ${u} ${h}
                          L ${a} ${h}
                          L ${a} ${s}
                          L ${a} ${s+v*g}
                          C  ${a} ${s+v*g+m*g} ${a} ${s+v*g+m*g} ${a+m*f} ${s+v*g+m*g}
                          L ${a+_*f+m*f} ${s+v*g+m*g}
                          C  ${c}  ${s+v*g+m*g} ${c}  ${s+v*g+m*g} ${c} ${l-v*g}
                          L ${c} ${l}
               `},defs:function(n,r){return`<defs>
                    ${r.map(i=>{const o=this.getTextWidth(i.label,{ctx:n.ctx,fontSize:2,defaultFont:n.defaultFont});return`
                       <marker id="${i.from+"_"+i.to}" refX="${i._source.x<i._target.x?-7:7}" refY="5" markerWidth="500"  markerHeight="500"  orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <rect rx=0.5 width=${i.label?o+3:0} height=3 y=1  fill="#E27396"></rect>
                       <text font-size="2px" x=1 fill="white" y=3>${i.label||""}</text>
                       </marker>

                       <marker id="arrow-${i.from+"_"+i.to}"  markerWidth="500"  markerHeight="500"  refY="2"  refX="1" orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <path transform="translate(0)" d='M0,0 V4 L2,2 Z' fill='#E27396' />
                       </marker>
                    `}).join("")}
                    </defs>
                    `},connectionsUpdate:function(n,r,i){Y.select(this).attr("stroke",o=>"#E27396").attr("stroke-linecap","round").attr("stroke-width",o=>"5").attr("pointer-events","none").attr("marker-start",o=>`url(#${o.from+"_"+o.to})`).attr("marker-end",o=>`url(#arrow-${o.from+"_"+o.to})`)},linkGroupArc:Y.linkHorizontal().x(n=>n.x).y(n=>n.y),layoutBindings:{left:{nodeLeftX:n=>0,nodeRightX:n=>n.width,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x+n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x+n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkCompactXStart:n=>n.x+n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,linkParentX:n=>n.parent.x+n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>n.width,buttonY:n=>n.height/2,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${r},${i}) scale(${o})`,compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n},${r-o/2})`},top:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>0,nodeBottomY:n=>n.height,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y+n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y+n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y+n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y+n.parent.height,buttonX:n=>n.width/2,buttonY:n=>n.height,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${a},${r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s,compactViewIndex:c})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r})`},bottom:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>-n.height,nodeBottomY:n=>0,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y-n.height-n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y-n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y-n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,linkX:n=>n.x,linkY:n=>n.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y-n.parent.height,buttonX:n=>n.width/2,buttonY:n=>0,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartHeight:s})=>`translate(${a},${s-r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{n.y=-n.y},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r-o})`},right:{nodeLeftX:n=>-n.width,nodeRightX:n=>0,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x-n.width-n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x-n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x-n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>0,buttonY:n=>n.height/2,linkCompactXStart:n=>n.x-n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartWidth:s})=>`translate(${s-r},${i}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=-n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i},${r-o/2})`}}};this.getChartState=()=>e,Object.keys(e).forEach(n=>{this[n]=function(r){if(arguments.length)e[n]=r;else return e[n];return this}}),this.initializeEnterExitUpdatePattern()}initializeEnterExitUpdatePattern(){Y.selection.prototype.patternify=function(e){var n=this,r=e.selector,i=e.tag,o=e.data||[r],a=n.selectAll("."+r).data(o,(s,c)=>typeof s=="object"&&s.id?s.id:c);return a.exit().remove(),a=a.enter().append(i).merge(a),a.attr("class",r),a}}getNodeChildren({data:e,children:n,_children:r},i){return i.push(e),n&&n.forEach(o=>{this.getNodeChildren(o,i)}),r&&r.forEach(o=>{this.getNodeChildren(o,i)}),i}initialZoom(e){const n=this.getChartState();return n.lastTransform.k=e,this}render(){const e=this.getChartState();if(!e.data||e.data.length==0)return console.log("ORG CHART - Data is empty"),e.container&&(pt(e.container).select(".nodes-wrapper").remove(),pt(e.container).select(".links-wrapper").remove(),pt(e.container).select(".connections-wrapper").remove()),this;const n=Y.select(e.container),r=n.node().getBoundingClientRect();r.width>0&&(e.svgWidth=r.width);const i={id:`ID${Math.floor(Math.random()*1e6)}`,chartWidth:e.svgWidth,chartHeight:e.svgHeight};if(e.calc=i,i.centerX=i.chartWidth/2,i.centerY=i.chartHeight/2,e.firstDraw){const s={zoom:null};s.zoom=e.createZoom().clickDistance(10).on("start",(c,l)=>e.onZoomStart(c)).on("end",(c,l)=>e.onZoomEnd(c)).on("zoom",(c,l)=>{e.onZoom(c),this.zoomed(c,l)}).scaleExtent(e.scaleExtent),e.zoomBehavior=s.zoom}e.flexTreeLayout=tr({nodeSize:s=>{const c=e.nodeWidth(s),l=e.nodeHeight(s),u=e.siblingsMargin(s),h=e.childrenMargin(s);return e.layoutBindings[e.layout].nodeFlexSize({state:e,node:s,width:c,height:l,siblingsMargin:u,childrenMargin:h})}}).spacing((s,c)=>s.parent==c.parent?0:e.neighbourMargin(s,c)),this.setLayouts({expandNodesFirst:!1});const o=n.patternify({tag:"svg",selector:"svg-chart-container"}).attr("width",e.svgWidth).attr("height",e.svgHeight).attr("font-family",e.defaultFont);e.firstDraw&&o.call(e.zoomBehavior).on("dblclick.zoom",null).attr("cursor","move"),e.svg=o;const a=o.patternify({tag:"g",selector:"chart"});return e.centerG=a.patternify({tag:"g",selector:"center-group"}),e.linksWrapper=e.centerG.patternify({tag:"g",selector:"links-wrapper"}),e.nodesWrapper=e.centerG.patternify({tag:"g",selector:"nodes-wrapper"}),e.connectionsWrapper=e.centerG.patternify({tag:"g",selector:"connections-wrapper"}),e.defsWrapper=o.patternify({tag:"g",selector:"defs-wrapper"}),e.firstDraw&&e.centerG.attr("transform",()=>e.layoutBindings[e.layout].centerTransform({centerX:i.centerX,centerY:i.centerY,scale:e.lastTransform.k,rootMargin:e.rootMargin,root:e.root,chartHeight:i.chartHeight,chartWidth:i.chartWidth})),e.chart=a,this.update(e.root),Y.select(window).on(`resize.${e.id}`,()=>{const s=Y.select(e.container).node().getBoundingClientRect();e.svg.attr("width",s.width)}),e.firstDraw&&(e.firstDraw=!1),this}addNode(e){const n=this.getChartState();if(e&&(n.parentNodeId(e)==null||n.parentNodeId(e)==n.nodeId(e))&&n.data.length==0)return n.data.push(e),this.render(),this;const i=n.generateRoot(n.data).descendants(),o=i.filter(({data:a})=>n.nodeId(a).toString()===n.nodeId(e).toString())[0];return i.filter(({data:a})=>n.nodeId(a).toString()===n.parentNodeId(e).toString())[0],o?(console.log(`ORG CHART - ADD - Node with id "${n.nodeId(e)}" already exists in tree`),this):(e._centered&&!e._expanded&&(e._expanded=!0),n.data.push(e),this.updateNodesState(),this)}removeNode(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s)==e)[0];return o?(o.descendants().forEach(s=>s.data._filteredOut=!0),n.data=n.data.filter(s=>!s._filteredOut),n.data.length==0?this.render():this.updateNodesState.bind(this)(),this):(console.log(`ORG CHART - REMOVE - Node with id "${e}" not found in the tree`),this)}groupBy(e,n,r){const i={};return e.forEach(o=>{const a=n(o);i[a]||(i[a]=[]),i[a].push(o)}),Object.keys(i).forEach(o=>{i[o]=r(i[o])}),Object.entries(i)}calculateCompactFlexDimensions(e){const n=this.getChartState();e.eachBefore(r=>{r.firstCompact=null,r.compactEven=null,r.flexCompactDim=null,r.firstCompactNode=null}),e.eachBefore(r=>{if(r.children&&r.children.length>1){const i=r.children.filter(u=>!u.children);if(i.length<2)return;i.forEach((u,h)=>{h||(u.firstCompact=!0),h%2?u.compactEven=!1:u.compactEven=!0,u.row=Math.floor(h/2)});const o=Y.max(i.filter(u=>u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),a=Y.max(i.filter(u=>!u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),s=Math.max(o,a)*2,c=this.groupBy(i,u=>u.row,u=>Y.max(u,h=>n.layoutBindings[n.layout].compactDimension.sizeRow(h)+n.compactMarginBetween(h))),l=Y.sum(c.map(u=>u[1]));i.forEach(u=>{u.firstCompactNode=i[0],u.firstCompact?u.flexCompactDim=[s+n.compactMarginPair(u),l-n.compactMarginBetween(u)]:u.flexCompactDim=[0,0]}),r.flexCompactDim=null}})}calculateCompactFlexPositions(e){const n=this.getChartState();e.eachBefore(r=>{if(r.children){const i=r.children.filter(u=>u.flexCompactDim),o=i[0];if(!o)return;i.forEach((u,h,f)=>{h==0&&(o.x-=o.flexCompactDim[0]/2),h&h%2-1?u.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(u)/4:h&&(u.x=o.x+o.flexCompactDim[0]*.75+n.compactMarginPair(u)/4)});const a=o.x+o.flexCompactDim[0]*.5;o.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(o)/4;const s=r.x-a;Math.abs(s)<10&&i.forEach(u=>u.x+=s);const c=this.groupBy(i,u=>u.row,u=>Y.max(u,h=>n.layoutBindings[n.layout].compactDimension.sizeRow(h))),l=Y.cumsum(c.map(u=>u[1]+n.compactMarginBetween(u)));i.forEach((u,h)=>{u.row?u.y=o.y+l[u.row-1]:u.y=o.y})}})}update({x0:e,y0:n,x:r=0,y:i=0,width:o,height:a}){const s=this.getChartState();s.calc,s.compact&&this.calculateCompactFlexDimensions(s.root);const c=s.flexTreeLayout(s.root);s.compact&&this.calculateCompactFlexPositions(s.root);const l=c.descendants(),u=c.descendants().slice(1);l.forEach(s.layoutBindings[s.layout].swap);const h=s.connections,f={};s.allNodes.forEach(p=>f[s.nodeId(p.data)]=p);const g={};l.forEach(p=>g[s.nodeId(p.data)]=p),h.forEach(p=>{const x=f[p.from],b=f[p.to];p._source=x,p._target=b});const d=h.filter(p=>g[p.from]&&g[p.to]),m=s.defs.bind(this)(s,d),v=s.defsWrapper.html();m!==v&&s.defsWrapper.html(m);const _=s.linksWrapper.selectAll("path.link").data(u,p=>s.nodeId(p.data)),E=_.enter().insert("path","g").attr("class","link").attr("d",p=>{const x=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),b=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),R={x,y:b};return s.layoutBindings[s.layout].diagonal(R,R,R)}).merge(_);E.attr("fill","none"),this.isEdge()?E.style("display",p=>p.data._pagingButton?"none":"auto"):E.attr("display",p=>p.data._pagingButton?"none":"auto"),E.each(s.linkUpdate),E.transition().duration(s.duration).attr("d",p=>{const x=s.compact&&p.flexCompactDim?{x:s.layoutBindings[s.layout].compactLinkMidX(p,s),y:s.layoutBindings[s.layout].compactLinkMidY(p,s)}:{x:s.layoutBindings[s.layout].linkX(p),y:s.layoutBindings[s.layout].linkY(p)},b={x:s.layoutBindings[s.layout].linkParentX(p),y:s.layoutBindings[s.layout].linkParentY(p)},R=s.compact&&p.flexCompactDim?{x:s.layoutBindings[s.layout].linkCompactXStart(p),y:s.layoutBindings[s.layout].linkCompactYStart(p)}:x;return s.layoutBindings[s.layout].diagonal(x,b,R,{sy:s.linkYOffset})}),_.exit().transition().duration(s.duration).attr("d",p=>{const x=s.layoutBindings[s.layout].linkJoinX({x:r,y:i,width:o,height:a}),b=s.layoutBindings[s.layout].linkJoinY({x:r,y:i,width:o,height:a}),R={x,y:b};return s.layoutBindings[s.layout].diagonal(R,R,null,{sy:s.linkYOffset})}).remove();const B=s.connectionsWrapper.selectAll("path.connection").data(d),$=B.enter().insert("path","g").attr("class","connection").attr("d",p=>{const x=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),b=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),R={x,y:b};return s.layoutBindings[s.layout].diagonal(R,R,null,{sy:s.linkYOffset})}).merge(B);$.attr("fill","none"),$.transition().duration(s.duration).attr("d",p=>{const x=s.layoutBindings[s.layout].linkX({x:p._source.x,y:p._source.y,width:p._source.width,height:p._source.height}),b=s.layoutBindings[s.layout].linkY({x:p._source.x,y:p._source.y,width:p._source.width,height:p._source.height}),R=s.layoutBindings[s.layout].linkJoinX({x:p._target.x,y:p._target.y,width:p._target.width,height:p._target.height}),T=s.layoutBindings[s.layout].linkJoinY({x:p._target.x,y:p._target.y,width:p._target.width,height:p._target.height});return s.linkGroupArc({source:{x,y:b},target:{x:R,y:T}})}),$.each(s.connectionsUpdate),B.exit().transition().duration(s.duration).attr("opacity",0).remove();const C=s.nodesWrapper.selectAll("g.node").data(l,({data:p})=>s.nodeId(p)),k=C.enter().append("g").attr("class","node").attr("transform",p=>{if(p==s.root)return`translate(${e},${n})`;const x=s.layoutBindings[s.layout].nodeJoinX({x:e,y:n,width:o,height:a}),b=s.layoutBindings[s.layout].nodeJoinY({x:e,y:n,width:o,height:a});return`translate(${x},${b})`}).attr("cursor","pointer").on("click.node",(p,x)=>{const{data:b}=x;if(![...p.srcElement.classList].includes("node-button-foreign-object")){if([...p.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(x);return}if(!b._pagingButton){s.onNodeClick(x);return}console.log("event fired, no handlers")}}).on("keydown.node",(p,x)=>{const{data:b}=x;if(p.key==="Enter"||p.key===" "||p.key==="Spacebar"){if([...p.srcElement.classList].includes("node-button-foreign-object"))return;if([...p.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(x);return}(p.key==="Enter"||p.key===" "||p.key==="Spacebar")&&this.onButtonClick(p,x)}});k.each(s.nodeEnter),k.patternify({tag:"rect",selector:"node-rect",data:p=>[p]});const M=k.merge(C).style("font","12px sans-serif");M.patternify({tag:"foreignObject",selector:"node-foreign-object",data:p=>[p]}).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-foreign-object-div",data:p=>[p]}),this.restyleForeignObjectElements();const tt=k.patternify({tag:"g",selector:"node-button-g",data:p=>[p]}).on("click",(p,x)=>this.onButtonClick(p,x)).on("keydown",(p,x)=>{(p.key==="Enter"||p.key===" "||p.key==="Spacebar")&&this.onButtonClick(p,x)});tt.patternify({tag:"rect",selector:"node-button-rect",data:p=>[p]}).attr("opacity",0).attr("pointer-events","all").attr("width",p=>s.nodeButtonWidth(p)).attr("height",p=>s.nodeButtonHeight(p)).attr("x",p=>s.nodeButtonX(p)).attr("y",p=>s.nodeButtonY(p)),tt.patternify({tag:"foreignObject",selector:"node-button-foreign-object",data:p=>[p]}).attr("width",p=>s.nodeButtonWidth(p)).attr("height",p=>s.nodeButtonHeight(p)).attr("x",p=>s.nodeButtonX(p)).attr("y",p=>s.nodeButtonY(p)).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-button-div",data:p=>[p]}).style("pointer-events","none").style("display","flex").style("width","100%").style("height","100%"),M.transition().attr("opacity",0).duration(s.duration).attr("transform",({x:p,y:x,width:b,height:R})=>s.layoutBindings[s.layout].nodeUpdateTransform({x:p,y:x,width:b,height:R})).attr("opacity",1),M.select(".node-rect").attr("width",({width:p})=>p).attr("height",({height:p})=>p).attr("x",({width:p})=>0).attr("y",({height:p})=>0).attr("cursor","pointer").attr("rx",3).attr("fill",s.nodeDefaultBackground),M.select(".node-button-g").attr("transform",({data:p,width:x,height:b})=>{const R=s.layoutBindings[s.layout].buttonX({width:x,height:b}),T=s.layoutBindings[s.layout].buttonY({width:x,height:b});return`translate(${R},${T})`}).attr("display",({data:p})=>p._directSubordinates>0?null:"none").attr("opacity",({data:p,children:x,_children:b})=>p._pagingButton?0:x||b?1:0),M.select(".node-button-foreign-object .node-button-div").html(p=>s.buttonContent({node:p,state:s})),M.select(".node-button-text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",({children:p})=>p?40:26).text(({children:p})=>p?"-":"+").attr("y",this.isEdge()?10:0),M.each(s.nodeUpdate);const q=C.exit();q.each(s.nodeExit);const nt=q.data().reduce((p,x)=>p.depth<x.depth?p:x,{depth:1/0});q.attr("opacity",1).transition().duration(s.duration).attr("transform",p=>{let{x,y:b,width:R,height:T}=nt.parent||{};const F=s.layoutBindings[s.layout].nodeJoinX({x,y:b,width:R,height:T}),I=s.layoutBindings[s.layout].nodeJoinY({x,y:b,width:R,height:T});return`translate(${F},${I})`}).on("end",function(){Y.select(this).remove()}).attr("opacity",0),l.forEach(p=>{p.x0=p.x,p.y0=p.y});const y=s.allNodes.filter(p=>p.data._centered)[0];if(y){let p=[y];y.data._centeredWithDescendants&&(s.compact?p=y.descendants().filter((x,b)=>b<7):p=y.descendants().filter((x,b,R)=>{const T=Math.round(R.length/2),F=2;return R.length%2?b>T-F&&b<T+F-1:b>T-F&&b<T+F})),y.data._centeredWithDescendants=null,y.data._centered=null,this.fit({animate:!0,scale:!1,nodes:p})}}isEdge(){return window.navigator.userAgent.includes("Edge")}hdiagonal(e,n,r,i){return this.getChartState().hdiagonal(e,n,r,i)}diagonal(e,n,r,i){return this.getChartState().diagonal(e,n,r,i)}restyleForeignObjectElements(){const e=this.getChartState();e.svg.selectAll(".node-foreign-object").attr("width",({width:n})=>n).attr("height",({height:n})=>n).attr("x",({width:n})=>0).attr("y",({height:n})=>0),e.svg.selectAll(".node-foreign-object-div").style("width",({width:n})=>`${n}px`).style("height",({height:n})=>`${n}px`).html(function(n,r,i){return n.data._pagingButton?`<div class="paging-button-wrapper"><div style="pointer-events:none">${e.pagingButton(n,r,i,e)}</div></div>`:e.nodeContent.bind(this)(n,r,i,e)})}onButtonClick(e,n){const r=this.getChartState();n.data._pagingButton||(r.setActiveNodeCentered&&(n.data._centered=!0,n.data._centeredWithDescendants=!0),n.children?(n._children=n.children,n.children=null,this.setExpansionFlagToChildren(n,!1)):(n.children=n._children,n._children=null,n.children&&n.children.forEach(({data:i})=>i._expanded=!0)),this.update(n),e.stopPropagation(),r.onExpandOrCollapse(n))}setExpansionFlagToChildren({data:e,children:n,_children:r},i){e._expanded=i,n&&n.forEach(o=>{this.setExpansionFlagToChildren(o,i)}),r&&r.forEach(o=>{this.setExpansionFlagToChildren(o,i)})}expandSomeNodes(e){if(e.data._expanded){let n=e.parent;for(;n&&n._children;)n.children=n._children,n._children=null,n=n.parent}e._children&&e._children.forEach(n=>this.expandSomeNodes(n)),e.children&&e.children.forEach(n=>this.expandSomeNodes(n))}updateNodesState(){const e=this.getChartState();this.setLayouts({expandNodesFirst:!0}),this.update(e.root)}setLayouts({expandNodesFirst:e=!0}){const n=this.getChartState();n.generateRoot=Y.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o)),n.root=n.generateRoot(n.data);const r=n.root.descendants();n.initialExpandLevel>1&&r.length>0&&(r.forEach(o=>{o.depth<=n.initialExpandLevel&&(o.data._expanded=!0)}),n.initialExpandLevel=1);const i={};n.root.descendants().filter(o=>o.children).filter(o=>!o.data._pagingStep).forEach(o=>{o.data._pagingStep=n.minPagingVisibleNodes(o)}),n.root.eachBefore((o,a)=>{o.data._directSubordinatesPaging=o.children?o.children.length:0,o.children&&o.children.forEach((s,c)=>{if(s.data._pagingButton=!1,c>o.data._pagingStep&&(i[s.id]=!0),c===o.data._pagingStep&&o.children.length-1>o.data._pagingStep&&(s.data._pagingButton=!0),i[s.parent.id]&&(i[s.id]=!0),s.data._expanded||s.data._centered||s.data._highlighted||s.data._upToTheRootHighlighted){let l=s;for(;l&&(i[l.id]||l.data._pagingButton);)i[l.id]=!1,l.data._pagingButton&&(l.data._pagingButton=!1,l.parent.children.forEach(u=>{u.data._expanded=!0,i[u.id]=!1})),l=l.parent}})}),n.root=Y.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o))(n.data.filter(o=>i[o.id]!==!0)),n.root.each((o,a,s)=>{let c=o._hierarchyHeight||o.height,l=n.nodeWidth(o),u=n.nodeHeight(o);Object.assign(o,{width:l,height:u,_hierarchyHeight:c})}),n.root.x0=0,n.root.y0=0,n.allNodes=n.root.descendants(),n.allNodes.forEach(o=>{Object.assign(o.data,{_directSubordinates:o.children?o.children.length:0,_totalSubordinates:o.descendants().length-1})}),n.root.children&&(e&&n.root.children.forEach(this.expand),n.root.children.forEach(o=>this.collapse(o)),n.initialExpandLevel==0&&(n.root._children=n.root.children,n.root.children=null),[n.root].forEach(o=>this.expandSomeNodes(o)))}collapse(e){e.children&&(e._children=e.children,e._children.forEach(n=>this.collapse(n)),e.children=null)}expand(e){e._children&&(e.children=e._children,e.children.forEach(n=>this.expand(n)),e._children=null)}zoomed(e,n){const r=this.getChartState(),i=r.chart,o=e.transform;r.lastTransform=o,i.attr("transform",o),this.isEdge()&&this.restyleForeignObjectElements()}zoomTreeBounds({x0:e,x1:n,y0:r,y1:i,params:o={animate:!0,scale:!0,onCompleted:()=>{}}}){const{centerG:a,svgWidth:s,svgHeight:c,svg:l,zoomBehavior:u,duration:h,lastTransform:f}=this.getChartState();let g=Math.min(8,.9/Math.max((n-e)/s,(i-r)/c)),d=Y.zoomIdentity.translate(s/2,c/2);d=d.scale(o.scale?g:f.k),d=d.translate(-(e+n)/2,-(r+i)/2),l.transition().duration(o.animate?h:0).call(u.transform,d),a.transition().duration(o.animate?h:0).attr("transform","translate(0,0)").on("end",function(){o.onCompleted&&o.onCompleted()})}fit({animate:e=!0,nodes:n,scale:r=!0,onCompleted:i=()=>{}}={}){const o=this.getChartState(),{root:a}=o;let s=n||a.descendants();const c=Y.min(s,f=>f.x+o.layoutBindings[o.layout].nodeLeftX(f)),l=Y.max(s,f=>f.x+o.layoutBindings[o.layout].nodeRightX(f)),u=Y.min(s,f=>f.y+o.layoutBindings[o.layout].nodeTopY(f)),h=Y.max(s,f=>f.y+o.layoutBindings[o.layout].nodeBottomY(f));return this.zoomTreeBounds({params:{animate:e,scale:r,onCompleted:i},x0:c-50,x1:l+50,y0:u-50,y1:h+50}),this}loadPagingNodes(e){const n=this.getChartState();e.data._pagingButton=!1;const r=e.parent.data._pagingStep,i=n.pagingStep(e.parent),o=r+i;e.parent.data._pagingStep=o,this.updateNodesState()}setExpanded(e,n=!0){const r=this.getChartState(),i=r.allNodes.filter(({data:o})=>r.nodeId(o)==e)[0];if(!i)return console.log(`ORG CHART - ${n?"EXPAND":"COLLAPSE"} - Node with id (${e})  not found in the tree`),this;if(i.data._expanded=n,n==!1){const o=i.parent||{descendants:()=>[]};o.descendants().filter(s=>s!=o).forEach(s=>s.data._expanded=!1)}return this}setCentered(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s).toString()==e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._centered=!0,o.data._expanded=!0,this):(console.log(`ORG CHART - CENTER - Node with id (${e}) not found in the tree`),this)}setHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._highlighted=!0,o.data._expanded=!0,o.data._centered=!0,this):(console.log(`ORG CHART - HIGHLIGHT - Node with id (${e})  not found in the tree`),this)}setUpToTheRootHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._upToTheRootHighlighted=!0,o.data._expanded=!0,o.ancestors().forEach(s=>s.data._upToTheRootHighlighted=!0),this):(console.log(`ORG CHART - HIGHLIGHTROOT - Node with id (${e}) not found in the tree`),this)}clearHighlighting(){const e=this.getChartState();return e.allNodes.forEach(n=>{n.data._highlighted=!1,n.data._upToTheRootHighlighted=!1}),this.update(e.root),this}fullscreen(e){const n=this.getChartState(),r=Y.select(e||n.container).node();Y.select(document).on("fullscreenchange."+n.id,function(i){(document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement)==r?setTimeout(a=>{n.svg.attr("height",window.innerHeight-40)},500):n.svg.attr("height",n.svgHeight)}),r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.msRequestFullscreen&&r.msRequestFullscreen()}zoomIn(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,1.3)}zoomOut(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,.78)}toDataURL(e,n){var r=new XMLHttpRequest;r.onload=function(){var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.send()}exportImg({full:e=!1,scale:n=3,onLoad:r=a=>a,save:i=!0,backgroundColor:o="#FAFAFA"}={}){const a=this,s=this.getChartState(),{svg:c,root:l}=s;let u=0;const h=c.selectAll("img");let f=h.size();const g=()=>{JSON.parse(JSON.stringify(a.lastTransform()));const d=a.duration();e&&a.fit();const{svg:m}=a.getChartState();setTimeout(v=>{a.downloadImage({node:m.node(),scale:n,isSvg:!1,backgroundColor:o,onAlreadySerialized:_=>{a.update(l)},imageName:s.imageName,onLoad:r,save:i})},e?d+10:0)};f>0?h.each(function(){a.toDataURL(this.src,d=>{this.src=d,++u==f&&g()})}):g()}exportSvg(){const{svg:e,imageName:n}=this.getChartState();return this.downloadImage({imageName:n,node:e.node(),scale:3,isSvg:!0}),this}expandAll(){const{allNodes:e,root:n,data:r}=this.getChartState();return r.forEach(i=>i._expanded=!0),this.render(),this}collapseAll(){const{allNodes:e,root:n}=this.getChartState();return e.forEach(r=>r.data._expanded=!1),this.initialExpandLevel(0),this.render(),this}downloadImage({node:e,scale:n=2,imageName:r="graph",isSvg:i=!1,save:o=!0,backgroundColor:a="#FAFAFA",onAlreadySerialized:s=l=>{},onLoad:c=l=>{}}){const l=e;function u(m,v){var _=document.createElement("a");typeof _.download=="string"?(document.body.appendChild(_),_.download=v,_.href=m,_.click(),document.body.removeChild(_)):location.replace(m)}function h(m){const v="http://www.w3.org/2000/xmlns/",_="http://www.w3.org/1999/xlink",A="http://www.w3.org/2000/svg";m=m.cloneNode(!0);const E=window.location.href+"#",B=document.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,null,!1);for(;B.nextNode();)for(const C of B.currentNode.attributes)C.value.includes(E)&&(C.value=C.value.replace(E,"#"));return m.setAttributeNS(v,"xmlns",A),m.setAttributeNS(v,"xmlns:xlink",_),new XMLSerializer().serializeToString(m)}if(i){let m=h(l);m=`<?xml version="1.0" standalone="no"?>\r
`+m;var d="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(m);u(d,r+".svg"),s();return}const f=n,g=document.createElement("img");g.onload=function(){const m=document.createElement("canvas"),v=l.getBoundingClientRect();m.width=v.width*f,m.height=v.height*f;const _=m.getContext("2d");_.fillStyle=a,_.fillRect(0,0,v.width*f,v.height*f),_.drawImage(g,0,0,v.width*f,v.height*f);let A=m.toDataURL("image/png");c&&c(A),o&&u(A,r+".png")};var d="data:image/svg+xml; charset=utf8, "+encodeURIComponent(h(l));s(),g.src=d}getTextWidth(e,{fontSize:n=14,fontWeight:r=400,defaultFont:i="Helvetice",ctx:o}={}){return o.font=`${r||""} ${n}px ${i} `,o.measureText(e).width}clear(){const e=this.getChartState();Y.select(window).on(`resize.${e.id}`,null),e.svg&&e.svg.selectAll("*").remove()}}function Mt(t){return Array.isArray?Array.isArray(t):Yi(t)==="[object Array]"}function Bh(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Nh(t){return t==null?"":Bh(t)}function St(t){return typeof t=="string"}function Xi(t){return typeof t=="number"}function Mh(t){return t===!0||t===!1||Th(t)&&Yi(t)=="[object Boolean]"}function qi(t){return typeof t=="object"}function Th(t){return qi(t)&&t!==null}function ht(t){return t!=null}function pn(t){return!t.trim().length}function Yi(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Dh="Incorrect 'index' type",Fh=t=>`Invalid value for key ${t}`,Oh=t=>`Pattern length exceeds max of ${t}.`,Lh=t=>`Missing ${t} property in key`,Ih=t=>`Property 'weight' in key '${t}' must be a positive integer`,Pr=Object.prototype.hasOwnProperty;class Ph{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=ji(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ji(t){let e=null,n=null,r=null,i=1,o=null;if(St(t)||Mt(t))r=t,e=zr(t),n=Fn(t);else{if(!Pr.call(t,"name"))throw new Error(Lh("name"));const a=t.name;if(r=a,Pr.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Ih(a));e=zr(a),n=Fn(a),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function zr(t){return Mt(t)?t:t.split(".")}function Fn(t){return Mt(t)?t.join("."):t}function zh(t,e){let n=[],r=!1;const i=(o,a,s)=>{if(ht(o))if(!a[s])n.push(o);else{let c=a[s];const l=o[c];if(!ht(l))return;if(s===a.length-1&&(St(l)||Xi(l)||Mh(l)))n.push(Nh(l));else if(Mt(l)){r=!0;for(let u=0,h=l.length;u<h;u+=1)i(l[u],a,s+1)}else a.length&&i(l,a,s+1)}};return i(t,St(e)?e.split("."):e,0),r?n:n[0]}const Uh={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Vh={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Hh={location:0,threshold:.6,distance:100},Xh={useExtendedSearch:!1,getFn:zh,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var O={...Vh,...Uh,...Hh,...Xh};const qh=/[^ ]+/g;function Yh(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(qh).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),s=parseFloat(Math.round(a*r)/r);return n.set(o,s),s},clear(){n.clear()}}}class er{constructor({getFn:e=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){this.norm=Yh(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,St(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();St(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!ht(e)||pn(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(ht(a)){if(Mt(a)){let s=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(ht(u))if(St(u)&&!pn(u)){let h={v:u,i:l,n:this.norm.get(u)};s.push(h)}else Mt(u)&&u.forEach((h,f)=>{c.push({nestedArrIndex:f,value:h})})}r.$[o]=s}else if(St(a)&&!pn(a)){let s={v:a,n:this.norm.get(a)};r.$[o]=s}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Wi(t,e,{getFn:n=O.getFn,fieldNormWeight:r=O.fieldNormWeight}={}){const i=new er({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(ji)),i.setSources(e),i.create(),i}function jh(t,{getFn:e=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new er({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function Be(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=O.distance,ignoreLocation:o=O.ignoreLocation}={}){const a=e/t.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}function Wh(t=[],e=O.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=t.length;o<a;o+=1){let s=t[o];s&&r===-1?r=o:!s&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const Pt=32;function Jh(t,e,n,{location:r=O.location,distance:i=O.distance,threshold:o=O.threshold,findAllMatches:a=O.findAllMatches,minMatchCharLength:s=O.minMatchCharLength,includeMatches:c=O.includeMatches,ignoreLocation:l=O.ignoreLocation}={}){if(e.length>Pt)throw new Error(Oh(Pt));const u=e.length,h=t.length,f=Math.max(0,Math.min(r,h));let g=o,d=f;const m=s>1||c,v=m?Array(h):[];let _;for(;(_=t.indexOf(e,d))>-1;){let C=Be(e,{currentLocation:_,expectedLocation:f,distance:i,ignoreLocation:l});if(g=Math.min(C,g),d=_+u,m){let k=0;for(;k<u;)v[_+k]=1,k+=1}}d=-1;let A=[],E=1,B=u+h;const N=1<<u-1;for(let C=0;C<u;C+=1){let k=0,M=B;for(;k<M;)Be(e,{errors:C,currentLocation:f+M,expectedLocation:f,distance:i,ignoreLocation:l})<=g?k=M:B=M,M=Math.floor((B-k)/2+k);B=M;let z=Math.max(1,f-M+1),tt=a?h:Math.min(f+M,h)+u,q=Array(tt+2);q[tt+1]=(1<<C)-1;for(let y=tt;y>=z;y-=1){let p=y-1,x=n[t.charAt(p)];if(m&&(v[p]=+!!x),q[y]=(q[y+1]<<1|1)&x,C&&(q[y]|=(A[y+1]|A[y])<<1|1|A[y+1]),q[y]&N&&(E=Be(e,{errors:C,currentLocation:p,expectedLocation:f,distance:i,ignoreLocation:l}),E<=g)){if(g=E,d=p,d<=f)break;z=Math.max(1,2*f-d)}}if(Be(e,{errors:C+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:l})>g)break;A=q}const $={isMatch:d>=0,score:Math.max(.001,E)};if(m){const C=Wh(v,s);C.length?c&&($.indices=C):$.isMatch=!1}return $}function Gh(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const Je=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class Ji{constructor(e,{location:n=O.location,threshold:r=O.threshold,distance:i=O.distance,includeMatches:o=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:s=O.minMatchCharLength,isCaseSensitive:c=O.isCaseSensitive,ignoreDiacritics:l=O.ignoreDiacritics,ignoreLocation:u=O.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u},e=c?e:e.toLowerCase(),e=l?Je(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(g,d)=>{this.chunks.push({pattern:g,alphabet:Gh(g),startIndex:d})},f=this.pattern.length;if(f>Pt){let g=0;const d=f%Pt,m=f-d;for(;g<m;)h(this.pattern.substr(g,Pt),g),g+=Pt;if(d){const v=f-Pt;h(this.pattern.substr(v),v)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?Je(e):e,this.pattern===e){let m={isMatch:!0,score:0};return i&&(m.indices=[[0,e.length-1]]),m}const{location:o,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],f=0,g=!1;this.chunks.forEach(({pattern:m,alphabet:v,startIndex:_})=>{const{isMatch:A,score:E,indices:B}=Jh(e,m,v,{location:o+_,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});A&&(g=!0),f+=E,A&&B&&(h=[...h,...B])});let d={isMatch:g,score:g?f/this.chunks.length:1};return g&&i&&(d.indices=h),d}}class Ft{constructor(e){this.pattern=e}static isMultiMatch(e){return Ur(e,this.multiRegex)}static isSingleMatch(e){return Ur(e,this.singleRegex)}search(){}}function Ur(t,e){const n=t.match(e);return n?n[1]:null}class Kh extends Ft{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Zh extends Ft{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Qh extends Ft{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class tf extends Ft{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ef extends Ft{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class nf extends Ft{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Gi extends Ft{constructor(e,{location:n=O.location,threshold:r=O.threshold,distance:i=O.distance,includeMatches:o=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:s=O.minMatchCharLength,isCaseSensitive:c=O.isCaseSensitive,ignoreDiacritics:l=O.ignoreDiacritics,ignoreLocation:u=O.ignoreLocation}={}){super(e),this._bitapSearch=new Ji(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ki extends Ft{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const On=[Kh,Ki,Qh,tf,nf,ef,Zh,Gi],Vr=On.length,rf=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,of="|";function sf(t,e={}){return t.split(of).map(n=>{let r=n.trim().split(rf).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=r.length;o<a;o+=1){const s=r[o];let c=!1,l=-1;for(;!c&&++l<Vr;){const u=On[l];let h=u.isMultiMatch(s);h&&(i.push(new u(h,e)),c=!0)}if(!c)for(l=-1;++l<Vr;){const u=On[l];let h=u.isSingleMatch(s);if(h){i.push(new u(h,e));break}}}return i})}const af=new Set([Gi.type,Ki.type]);class lf{constructor(e,{isCaseSensitive:n=O.isCaseSensitive,ignoreDiacritics:r=O.ignoreDiacritics,includeMatches:i=O.includeMatches,minMatchCharLength:o=O.minMatchCharLength,ignoreLocation:a=O.ignoreLocation,findAllMatches:s=O.findAllMatches,location:c=O.location,threshold:l=O.threshold,distance:u=O.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:s,ignoreLocation:a,location:c,threshold:l,distance:u},e=n?e:e.toLowerCase(),e=r?Je(e):e,this.pattern=e,this.query=sf(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?Je(e):e;let a=0,s=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];s.length=0,a=0;for(let f=0,g=h.length;f<g;f+=1){const d=h[f],{isMatch:m,indices:v,score:_}=d.search(e);if(m){if(a+=1,c+=_,r){const A=d.constructor.type;af.has(A)?s=[...s,...v]:s.push(v)}}else{c=0,a=0,s.length=0;break}}if(a){let f={isMatch:!0,score:c/a};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const Ln=[];function uf(...t){Ln.push(...t)}function In(t,e){for(let n=0,r=Ln.length;n<r;n+=1){let i=Ln[n];if(i.condition(t,e))return new i(t,e)}return new Ji(t,e)}const Ge={AND:"$and",OR:"$or"},Pn={PATH:"$path",PATTERN:"$val"},zn=t=>!!(t[Ge.AND]||t[Ge.OR]),cf=t=>!!t[Pn.PATH],hf=t=>!Mt(t)&&qi(t)&&!zn(t),Hr=t=>({[Ge.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Zi(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const a=cf(i);if(!a&&o.length>1&&!zn(i))return r(Hr(i));if(hf(i)){const c=a?i[Pn.PATH]:o[0],l=a?i[Pn.PATTERN]:i[c];if(!St(l))throw new Error(Fh(c));const u={keyId:Fn(c),pattern:l};return n&&(u.searcher=In(l,e)),u}let s={children:[],operator:o[0]};return o.forEach(c=>{const l=i[c];Mt(l)&&l.forEach(u=>{s.children.push(r(u))})}),s};return zn(t)||(t=Hr(t)),r(t)}function ff(t,{ignoreFieldNorm:e=O.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:a})=>{const s=i?i.weight:null;r*=Math.pow(a===0&&s?Number.EPSILON:a,(s||1)*(e?1:o))}),n.score=r})}function df(t,e){const n=t.matches;e.matches=[],ht(n)&&n.forEach(r=>{if(!ht(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let a={indices:i,value:o};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function pf(t,e){e.score=t.score}function gf(t,e,{includeMatches:n=O.includeMatches,includeScore:r=O.includeScore}={}){const i=[];return n&&i.push(df),r&&i.push(pf),t.map(o=>{const{idx:a}=o,s={item:e[a],refIndex:a};return i.length&&i.forEach(c=>{c(o,s)}),s})}class ie{constructor(e,n={},r){this.options={...O,...n},this.options.useExtendedSearch,this._keyStore=new Ph(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof er))throw new Error(Dh);this._myIndex=n||Wi(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ht(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:s}=this.options;let c=St(e)?St(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ff(c,{ignoreFieldNorm:s}),o&&c.sort(a),Xi(n)&&n>-1&&(c=c.slice(0,n)),gf(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=In(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:a,n:s})=>{if(!ht(o))return;const{isMatch:c,score:l,indices:u}=n.searchIn(o);c&&i.push({item:o,idx:a,matches:[{score:l,value:o,norm:s,indices:u}]})}),i}_searchLogical(e){const n=Zi(e,this.options),r=(s,c,l)=>{if(!s.children){const{keyId:h,searcher:f}=s,g=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:f});return g&&g.length?[{idx:l,item:c,matches:g}]:[]}const u=[];for(let h=0,f=s.children.length;h<f;h+=1){const g=s.children[h],d=r(g,c,l);if(d.length)u.push(...d);else if(s.operator===Ge.AND)return[]}return u},i=this._myIndex.records,o={},a=[];return i.forEach(({$:s,i:c})=>{if(ht(s)){let l=r(n,s,c);l.length&&(o[c]||(o[c]={idx:c,item:s,matches:[]},a.push(o[c])),l.forEach(({matches:u})=>{o[c].matches.push(...u)}))}}),a}_searchObjectList(e){const n=In(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:s})=>{if(!ht(a))return;let c=[];r.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:n}))}),c.length&&o.push({idx:s,item:a,matches:c})}),o}_findMatches({key:e,value:n,searcher:r}){if(!ht(n))return[];let i=[];if(Mt(n))n.forEach(({v:o,i:a,n:s})=>{if(!ht(o))return;const{isMatch:c,score:l,indices:u}=r.searchIn(o);c&&i.push({score:l,key:e,value:o,idx:a,norm:s,indices:u})});else{const{v:o,n:a}=n,{isMatch:s,score:c,indices:l}=r.searchIn(o);s&&i.push({score:c,key:e,value:o,norm:a,indices:l})}return i}}ie.version="7.1.0";ie.createIndex=Wi;ie.parseIndex=jh;ie.config=O;ie.parseQuery=Zi;uf(lf);const mf={style:{"block-size":"100%"}},yf={__name:"SelectUserDialog",props:{isDialogVisible:{type:Boolean,required:!0},users:{type:Array,required:!0},selectedUsers:{type:Array,required:!0}},emits:["update:isDialogVisible","selectUser"],setup(t,{emit:e}){const n=t,r=e,i=Lt(null),o=Q(null),{theme:a}=ss();function s(d){i.value=d.api,i.value.setGridOption("rowData",u())}const c=Q([{headerName:"ÙØ­Ù Ú©Ø§Ø±",field:"workplace",rowGroup:!0,hide:!0},{headerName:"ÙÙØ·ÙÙ Ú©Ø§Ø±Û",field:"workArea",rowGroup:!0,hide:!0},{headerName:"ÙØ±Ú©Ø² ÙØ²ÛÙÙ",field:"costCenter",rowGroup:!0,hide:!0},{headerName:"Ø³ÙØª Ø´ØºÙÛ",field:"jobPosition",rowGroup:!0,hide:!0},{headerName:"Ú©Ø¯ Ù¾Ø±Ø³ÙÙÛ",field:"personnelCode"},{headerName:"ÙØ§Ù",field:"firstName"},{headerName:"ÙØ§Ù Ø®Ø§ÙÙØ§Ø¯Ú¯Û",field:"lastName"}]),l=Q({mode:"multiRow",enableClickSelection:!0,selectAll:"filtered",groupSelects:"filteredDescendants"});function u(){return n.users.map(d=>{var m,v,_,A,E,B,N,$;return{id:d.id,personnelCode:Number.parseInt(d.personnel_code),firstName:d.first_name,lastName:d.last_name,workplace:(v=(m=d.profile)==null?void 0:m.workplace)==null?void 0:v.name,workArea:(A=(_=d.profile)==null?void 0:_.work_area)==null?void 0:A.name,costCenter:(B=(E=d.profile)==null?void 0:E.cost_center)==null?void 0:B.name,jobPosition:($=(N=d.profile)==null?void 0:N.job_position)==null?void 0:$.name}})}const h=Q({filter:"agGroupColumnFilter"});function f(){r("selectUser",i.value.getSelectedRows().map(d=>Number.parseInt(d.id))),r("update:isDialogVisible",!1)}function g(d){r("update:isDialogVisible",d)}return Dt(()=>n.isDialogVisible,d=>{d&&(o.value={rowSelection:n.selectedUsers.map(m=>String(m.id))})}),(d,m)=>{const v=si,_=Zo("AgGridVue");return pe(),li(fi,{width:d.$vuetify.display.smAndDown?"auto":"90%",height:d.$vuetify.display.smAndDown?"auto":"90%","model-value":n.isDialogVisible,"onUpdate:modelValue":g},{default:H(()=>[D(v,{onClick:m[0]||(m[0]=A=>g(!1))}),D(Te,null,{default:H(()=>[D(Jt,null,{default:H(()=>[D(ci,{style:{"block-size":"100%"},class:"d-flex flex-column"},{default:H(()=>[D(as,{class:"ma-3"},{default:H(()=>[...m[1]||(m[1]=[Vt(" Ø§ÙØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±Ø§Ù ",-1)])]),_:1}),D(hi,null,{default:H(()=>[Rt("section",mf,[D(_,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":X(c),"get-row-id":A=>String(A.data.id),"enable-rtl":"",pagination:"","group-display-type":"multipleColumns","auto-group-column-def":X(h),"cell-selection":"","row-selection":X(l),theme:X(a),"initial-state":X(o),onGridReady:s},null,8,["column-defs","get-row-id","auto-group-column-def","row-selection","theme","initial-state"])])]),_:1}),D(ls,null,{default:H(()=>[D(Me,{color:"primary",onClick:f},{default:H(()=>[...m[2]||(m[2]=[Vt(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","height","model-value"])}}},xf={__name:"AddNodeDialog",props:{isDialogVisible:{type:Boolean,required:!0},orgPositions:{type:Array,required:!0},orgUnits:{type:Array,required:!0},users:{type:Array,required:!0}},emits:["add","update:isDialogVisible"],setup(t,{emit:e}){const n=t,r=e,i="https://blureen.afgc.ir/storage",o=ui({isSelectUserDialogOpen:!1}),a=Q(n.orgUnits),s=Q(null),c=Q(null),l=Q([]),u=Q(""),h=dt(()=>{const N=n.users.map($=>{var C,k,M,z,tt,q,nt,y;return{...$,full_name:g([$.first_name,$.last_name]),work_area_cost_center:g([(k=(C=$.profile)==null?void 0:C.work_area)==null?void 0:k.name,(z=(M=$.profile)==null?void 0:M.cost_center)==null?void 0:z.name]),last_name_work_area_cost_center:g([$.last_name,(q=(tt=$.profile)==null?void 0:tt.work_area)==null?void 0:q.name,(y=(nt=$.profile)==null?void 0:nt.cost_center)==null?void 0:y.name])}});return new ie(N,{keys:[{name:"personnel_code",weight:2},{name:"full_name",weight:1.5},{name:"work_area_cost_center",weight:1.5},{name:"last_name_work_area_cost_center",weight:1.5}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,includeScore:!0,findAllMatches:!0,minMatchCharLength:1})}),f=dt(()=>{var C;const N=(C=u.value)==null?void 0:C.trim();return N?h.value.search(N).map(k=>k.item):n.users});function g(N){return N.filter(Boolean).join(" ").replace(/[\s\u200C]+/g,"")}function d(N){N.key==="Backspace"&&!u.value&&N.stopPropagation()}function m(N){if(typeof N!="string")return;if(!N.trim()){c.value=null;return}const $=a.value.find(C=>toComparisonKey(C.name)===toComparisonKey(N));$&&(c.value=$)}function v(N){l.value=l.value.filter($=>$.id!==N)}function _(N){l.value=n.users.filter($=>N.includes($.id))}function A(){if(typeof c.value=="string"){const N=c.value.trim();c.value={id:crypto.randomUUID(),name:N},a.value.push(c.value)}r("add"),r("update:isDialogVisible",!1)}function E(){r("update:isDialogVisible",!1)}function B(N){r("update:isDialogVisible",N)}return Dt(()=>n.isDialogVisible,N=>{N||(s.value=null,c.value=null,l.value=[],u.value="")}),(N,$)=>{const C=si;return pe(),vn(Kt,null,[D(fi,{width:N.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":B},{default:H(()=>[D(C,{onClick:$[0]||($[0]=k=>B(!1))}),D(ci,{class:"pa-1"},{default:H(()=>[D(hi,null,{default:H(()=>[$[10]||($[10]=Rt("h6",{class:"text-h6 text-center mb-6"}," Ø§ÙØ²ÙØ¯Ù Ú¯Ø±Ù Ø¬Ø¯ÛØ¯ ",-1)),D(us,{onSubmit:Qo(A,["prevent"])},{default:H(()=>[D(Te,null,{default:H(()=>[D(Jt,{cols:"12",md:"6"},{default:H(()=>[D(mr,{modelValue:X(s),"onUpdate:modelValue":$[1]||($[1]=k=>Se(s)?s.value=k:null),label:"Ø³ÙØª",items:n.orgPositions,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),D(Jt,{cols:"12",md:"6"},{default:H(()=>[D(Rs,{modelValue:X(c),"onUpdate:modelValue":[$[2]||($[2]=k=>Se(c)?c.value=k:null),m],label:"ÙØ§Ø­Ø¯",items:X(a),"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),D(Jt,{cols:"12"},{default:H(()=>[D(mr,{modelValue:X(l),"onUpdate:modelValue":$[4]||($[4]=k=>Se(l)?l.value=k:null),search:X(u),"onUpdate:search":$[5]||($[5]=k=>Se(u)?u.value=k:null),multiple:"",items:X(f),"item-title":k=>`${k.first_name} ${k.last_name} (${k.personnel_code})`,clearable:"","item-value":"id",label:"Ú©Ø§Ø±Ø¨Ø±Ø§Ù","no-filter":!0,"return-object":"",onKeydownCapture:d},{selection:H(()=>[...$[7]||($[7]=[])]),item:H(({props:k,item:M})=>{var z,tt,q,nt,y,p,x,b,R,T,F,I,U,K;return[D(bn,xt(k,{"prepend-avatar":`${X(i)}/${(tt=(z=M==null?void 0:M.raw)==null?void 0:z.avatar)==null?void 0:tt.path}`,title:`${(q=M==null?void 0:M.raw)==null?void 0:q.first_name} ${(nt=M==null?void 0:M.raw)==null?void 0:nt.last_name} (${(y=M==null?void 0:M.raw)==null?void 0:y.personnel_code})`,subtitle:`${((b=(x=(p=M==null?void 0:M.raw)==null?void 0:p.profile)==null?void 0:x.work_area)==null?void 0:b.name)||""} ${(F=(T=(R=M==null?void 0:M.raw)==null?void 0:R.profile)==null?void 0:T.work_area)!=null&&F.name?"â":""} ${((K=(U=(I=M==null?void 0:M.raw)==null?void 0:I.profile)==null?void 0:U.cost_center)==null?void 0:K.name)||""}`}),null,16,["prepend-avatar","title","subtitle"])]}),append:H(()=>[D(Me,{variant:"outlined",color:"secondary",class:"border",onClick:$[3]||($[3]=k=>X(o).isSelectUserDialogOpen=!0)},{default:H(()=>[D(xn,{icon:"tabler-users",size:"25"})]),_:1})]),_:1},8,["modelValue","search","items","item-title"])]),_:1})]),_:1}),D(Te,null,{default:H(()=>[D(Jt,{cols:"12"},{default:H(()=>[(pe(!0),vn(Kt,null,ts(X(l),k=>(pe(),li(wn,xt({ref_for:!0},n,{key:k.id,link:"",pill:"",closable:"",variant:"outlined",size:"x-large",class:"ml-3 mb-3","onClick:close":M=>v(k.id)}),{default:H(()=>{var M;return[D(ai,{start:"",size:"40",image:`${X(i)}/${(M=k.avatar)==null?void 0:M.path}`},null,8,["image"]),Vt(" "+_n(k.first_name)+" "+_n(k.last_name),1)]}),_:2},1040,["onClick:close"]))),128))]),_:1})]),_:1}),D(Te,null,{default:H(()=>[D(Jt,{cols:"12",class:"d-flex justify-center gap-4"},{default:H(()=>[D(Me,{type:"submit"},{default:H(()=>[...$[8]||($[8]=[Vt(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1}),D(Me,{color:"secondary",variant:"tonal",onClick:E},{default:H(()=>[...$[9]||($[9]=[Vt(" Ø¨Ø³ØªÙ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),D(yf,{"is-dialog-visible":X(o).isSelectUserDialogOpen,"onUpdate:isDialogVisible":$[6]||($[6]=k=>X(o).isSelectUserDialogOpen=k),users:n.users,"selected-users":X(l),onSelectUser:_},null,8,["is-dialog-visible","users","selected-users"])],64)}}};function wf(t){const e=Es[t.data.orgPositionId]||"rgb(var(--v-theme-on-secondary))";return`
    <div class="org-chart-node" style="width: ${t.width}px; height: ${t.height}px;">
      <!-- Node Card -->
      <div class="org-chart-card">
        <!-- Action Buttons -->
        <div class="org-chart-action-bar">
          <button 
            class="node-action-btn" 
            data-action="edit" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
              <path d="m15 5 4 4"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="add" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14"/>
              <path d="M5 12h14"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="delete" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18"/>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            </svg>
          </button>
        </div>
        <!-- OrgPosition (top) -->
        <div class="org-position" style="background-color: ${e};">
          ${t.data.orgPositionName}
        </div>
        <!-- OrgUnit (middle) -->
        <div class="org-unit">
          ${t.data.orgUnitName}
        </div>
      </div>
    </div>
  `}function Qi(t,e){return function(){return t.apply(e,arguments)}}const{toString:vf}=Object.prototype,{getPrototypeOf:nr}=Object,{iterator:en,toStringTag:to}=Symbol,nn=(t=>e=>{const n=vf.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_t=t=>(t=t.toLowerCase(),e=>nn(e)===t),rn=t=>e=>typeof e===t,{isArray:oe}=Array,ne=rn("undefined");function ve(t){return t!==null&&!ne(t)&&t.constructor!==null&&!ne(t.constructor)&&at(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const eo=_t("ArrayBuffer");function _f(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&eo(t.buffer),e}const bf=rn("string"),at=rn("function"),no=rn("number"),_e=t=>t!==null&&typeof t=="object",Cf=t=>t===!0||t===!1,Pe=t=>{if(nn(t)!=="object")return!1;const e=nr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(to in t)&&!(en in t)},Ef=t=>{if(!_e(t)||ve(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Sf=_t("Date"),Af=_t("File"),kf=_t("Blob"),$f=_t("FileList"),Rf=t=>_e(t)&&at(t.pipe),Bf=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||at(t.append)&&((e=nn(t))==="formdata"||e==="object"&&at(t.toString)&&t.toString()==="[object FormData]"))},Nf=_t("URLSearchParams"),[Mf,Tf,Df,Ff]=["ReadableStream","Request","Response","Headers"].map(_t),Of=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function be(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),oe(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(ve(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function ro(t,e){if(ve(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ut=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,io=t=>!ne(t)&&t!==Ut;function Un(){const{caseless:t,skipUndefined:e}=io(this)&&this||{},n={},r=(i,o)=>{const a=t&&ro(n,o)||o;Pe(n[a])&&Pe(i)?n[a]=Un(n[a],i):Pe(i)?n[a]=Un({},i):oe(i)?n[a]=i.slice():(!e||!ne(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&be(arguments[i],r);return n}const Lf=(t,e,n,{allOwnKeys:r}={})=>(be(e,(i,o)=>{n&&at(i)?t[o]=Qi(i,n):t[o]=i},{allOwnKeys:r}),t),If=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Pf=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},zf=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&nr(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Uf=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Vf=t=>{if(!t)return null;if(oe(t))return t;let e=t.length;if(!no(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Hf=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nr(Uint8Array)),Xf=(t,e)=>{const r=(t&&t[en]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},qf=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Yf=_t("HTMLFormElement"),jf=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Xr=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Wf=_t("RegExp"),oo=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};be(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},Jf=t=>{oo(t,(e,n)=>{if(at(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(at(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Gf=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return oe(t)?r(t):r(String(t).split(e)),n},Kf=()=>{},Zf=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Qf(t){return!!(t&&at(t.append)&&t[to]==="FormData"&&t[en])}const td=t=>{const e=new Array(10),n=(r,i)=>{if(_e(r)){if(e.indexOf(r)>=0)return;if(ve(r))return r;if(!("toJSON"in r)){e[i]=r;const o=oe(r)?[]:{};return be(r,(a,s)=>{const c=n(a,i+1);!ne(c)&&(o[s]=c)}),e[i]=void 0,o}}return r};return n(t,0)},ed=_t("AsyncFunction"),nd=t=>t&&(_e(t)||at(t))&&at(t.then)&&at(t.catch),so=((t,e)=>t?setImmediate:e?((n,r)=>(Ut.addEventListener("message",({source:i,data:o})=>{i===Ut&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ut.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",at(Ut.postMessage)),rd=typeof queueMicrotask<"u"?queueMicrotask.bind(Ut):typeof process<"u"&&process.nextTick||so,id=t=>t!=null&&at(t[en]),w={isArray:oe,isArrayBuffer:eo,isBuffer:ve,isFormData:Bf,isArrayBufferView:_f,isString:bf,isNumber:no,isBoolean:Cf,isObject:_e,isPlainObject:Pe,isEmptyObject:Ef,isReadableStream:Mf,isRequest:Tf,isResponse:Df,isHeaders:Ff,isUndefined:ne,isDate:Sf,isFile:Af,isBlob:kf,isRegExp:Wf,isFunction:at,isStream:Rf,isURLSearchParams:Nf,isTypedArray:Hf,isFileList:$f,forEach:be,merge:Un,extend:Lf,trim:Of,stripBOM:If,inherits:Pf,toFlatObject:zf,kindOf:nn,kindOfTest:_t,endsWith:Uf,toArray:Vf,forEachEntry:Xf,matchAll:qf,isHTMLForm:Yf,hasOwnProperty:Xr,hasOwnProp:Xr,reduceDescriptors:oo,freezeMethods:Jf,toObjectSet:Gf,toCamelCase:jf,noop:Kf,toFiniteNumber:Zf,findKey:ro,global:Ut,isContextDefined:io,isSpecCompliantForm:Qf,toJSONObject:td,isAsyncFn:ed,isThenable:nd,setImmediate:so,asap:rd,isIterable:id};function P(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}w.inherits(P,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});const ao=P.prototype,lo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{lo[t]={value:t}});Object.defineProperties(P,lo);Object.defineProperty(ao,"isAxiosError",{value:!0});P.from=(t,e,n,r,i,o)=>{const a=Object.create(ao);w.toFlatObject(t,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const s=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return P.call(a,s,c,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",o&&Object.assign(a,o),a};const od=null;function Vn(t){return w.isPlainObject(t)||w.isArray(t)}function uo(t){return w.endsWith(t,"[]")?t.slice(0,-2):t}function qr(t,e,n){return t?t.concat(e).map(function(i,o){return i=uo(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function sd(t){return w.isArray(t)&&!t.some(Vn)}const ad=w.toFlatObject(w,{},null,function(e){return/^is[A-Z]/.test(e)});function on(t,e,n){if(!w.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=w.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!w.isUndefined(v[m])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(e);if(!w.isFunction(i))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(w.isDate(d))return d.toISOString();if(w.isBoolean(d))return d.toString();if(!c&&w.isBlob(d))throw new P("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(d)||w.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,m,v){let _=d;if(d&&!v&&typeof d=="object"){if(w.endsWith(m,"{}"))m=r?m:m.slice(0,-2),d=JSON.stringify(d);else if(w.isArray(d)&&sd(d)||(w.isFileList(d)||w.endsWith(m,"[]"))&&(_=w.toArray(d)))return m=uo(m),_.forEach(function(E,B){!(w.isUndefined(E)||E===null)&&e.append(a===!0?qr([m],B,o):a===null?m:m+"[]",l(E))}),!1}return Vn(d)?!0:(e.append(qr(v,m,o),l(d)),!1)}const h=[],f=Object.assign(ad,{defaultVisitor:u,convertValue:l,isVisitable:Vn});function g(d,m){if(!w.isUndefined(d)){if(h.indexOf(d)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(d),w.forEach(d,function(_,A){(!(w.isUndefined(_)||_===null)&&i.call(e,_,w.isString(A)?A.trim():A,m,f))===!0&&g(_,m?m.concat(A):[A])}),h.pop()}}if(!w.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Yr(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rr(t,e){this._pairs=[],t&&on(t,this,e)}const co=rr.prototype;co.append=function(e,n){this._pairs.push([e,n])};co.toString=function(e){const n=e?function(r){return e.call(this,r,Yr)}:Yr;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ld(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ho(t,e,n){if(!e)return t;const r=n&&n.encode||ld;w.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=w.isURLSearchParams(e)?e.toString():new rr(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class jr{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){w.forEach(this.handlers,function(r){r!==null&&e(r)})}}const fo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ud=typeof URLSearchParams<"u"?URLSearchParams:rr,cd=typeof FormData<"u"?FormData:null,hd=typeof Blob<"u"?Blob:null,fd={isBrowser:!0,classes:{URLSearchParams:ud,FormData:cd,Blob:hd},protocols:["http","https","file","blob","url","data"]},ir=typeof window<"u"&&typeof document<"u",Hn=typeof navigator=="object"&&navigator||void 0,dd=ir&&(!Hn||["ReactNative","NativeScript","NS"].indexOf(Hn.product)<0),pd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gd=ir&&window.location.href||"http://localhost",md=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ir,hasStandardBrowserEnv:dd,hasStandardBrowserWebWorkerEnv:pd,navigator:Hn,origin:gd},Symbol.toStringTag,{value:"Module"})),it={...md,...fd};function yd(t,e){return on(t,new it.classes.URLSearchParams,{visitor:function(n,r,i,o){return it.isNode&&w.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function xd(t){return w.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wd(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function po(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&w.isArray(i)?i.length:a,c?(w.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!w.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&w.isArray(i[a])&&(i[a]=wd(i[a])),!s)}if(w.isFormData(t)&&w.isFunction(t.entries)){const n={};return w.forEachEntry(t,(r,i)=>{e(xd(r),i,n,0)}),n}return null}function vd(t,e,n){if(w.isString(t))try{return(e||JSON.parse)(t),w.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ce={transitional:fo,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=w.isObject(e);if(o&&w.isHTMLForm(e)&&(e=new FormData(e)),w.isFormData(e))return i?JSON.stringify(po(e)):e;if(w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e)||w.isReadableStream(e))return e;if(w.isArrayBufferView(e))return e.buffer;if(w.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return yd(e,this.formSerializer).toString();if((s=w.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return on(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),vd(e)):e}],transformResponse:[function(e){const n=this.transitional||Ce.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(w.isResponse(e)||w.isReadableStream(e))return e;if(e&&w.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(a)throw s.name==="SyntaxError"?P.from(s,P.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],t=>{Ce.headers[t]={}});const _d=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bd=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&_d[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Wr=Symbol("internals");function he(t){return t&&String(t).trim().toLowerCase()}function ze(t){return t===!1||t==null?t:w.isArray(t)?t.map(ze):String(t)}function Cd(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Ed=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function gn(t,e,n,r,i){if(w.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!w.isString(e)){if(w.isString(r))return e.indexOf(r)!==-1;if(w.isRegExp(r))return r.test(e)}}function Sd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Ad(t,e){const n=w.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}let lt=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,c,l){const u=he(c);if(!u)throw new Error("header name must be a non-empty string");const h=w.findKey(i,u);(!h||i[h]===void 0||l===!0||l===void 0&&i[h]!==!1)&&(i[h||c]=ze(s))}const a=(s,c)=>w.forEach(s,(l,u)=>o(l,u,c));if(w.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(w.isString(e)&&(e=e.trim())&&!Ed(e))a(bd(e),n);else if(w.isObject(e)&&w.isIterable(e)){let s={},c,l;for(const u of e){if(!w.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?w.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=he(e),e){const r=w.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Cd(i);if(w.isFunction(n))return n.call(this,i,r);if(w.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=he(e),e){const r=w.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||gn(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=he(a),a){const s=w.findKey(r,a);s&&(!n||gn(r,r[s],s,n))&&(delete r[s],i=!0)}}return w.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||gn(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return w.forEach(this,(i,o)=>{const a=w.findKey(r,o);if(a){n[a]=ze(i),delete n[o];return}const s=e?Sd(o):String(o).trim();s!==o&&delete n[o],n[s]=ze(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return w.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&w.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Wr]=this[Wr]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=he(a);r[s]||(Ad(i,a),r[s]=!0)}return w.isArray(e)?e.forEach(o):o(e),this}};lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(lt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});w.freezeMethods(lt);function mn(t,e){const n=this||Ce,r=e||n,i=lt.from(r.headers);let o=r.data;return w.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function go(t){return!!(t&&t.__CANCEL__)}function se(t,e,n){P.call(this,t??"canceled",P.ERR_CANCELED,e,n),this.name="CanceledError"}w.inherits(se,P,{__CANCEL__:!0});function mo(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new P("Request failed with status code "+n.status,[P.ERR_BAD_REQUEST,P.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kd(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function $d(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let h=o,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-a<e)return;const g=u&&l-u;return g?Math.round(f*1e3/g):void 0}}function Rd(t,e){let n=0,r=1e3/e,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t(...l)};return[(...l)=>{const u=Date.now(),h=u-n;h>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-h)))},()=>i&&a(i)]}const Ke=(t,e,n=3)=>{let r=0;const i=$d(50,250);return Rd(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const h={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(h)},n)},Jr=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Gr=t=>(...e)=>w.asap(()=>t(...e)),Bd=it.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,it.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(it.origin),it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent)):()=>!0,Nd=it.hasStandardBrowserEnv?{write(t,e,n,r,i,o,a){if(typeof document>"u")return;const s=[`${t}=${encodeURIComponent(e)}`];w.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),w.isString(r)&&s.push(`path=${r}`),w.isString(i)&&s.push(`domain=${i}`),o===!0&&s.push("secure"),w.isString(a)&&s.push(`SameSite=${a}`),document.cookie=s.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Md(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Td(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yo(t,e,n){let r=!Md(e);return t&&(r||n==!1)?Td(t,e):e}const Kr=t=>t instanceof lt?{...t}:t;function Yt(t,e){e=e||{};const n={};function r(l,u,h,f){return w.isPlainObject(l)&&w.isPlainObject(u)?w.merge.call({caseless:f},l,u):w.isPlainObject(u)?w.merge({},u):w.isArray(u)?u.slice():u}function i(l,u,h,f){if(w.isUndefined(u)){if(!w.isUndefined(l))return r(void 0,l,h,f)}else return r(l,u,h,f)}function o(l,u){if(!w.isUndefined(u))return r(void 0,u)}function a(l,u){if(w.isUndefined(u)){if(!w.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,h){if(h in e)return r(l,u);if(h in t)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,h)=>i(Kr(l),Kr(u),h,!0)};return w.forEach(Object.keys({...t,...e}),function(u){const h=c[u]||i,f=h(t[u],e[u],u);w.isUndefined(f)&&h!==s||(n[u]=f)}),n}const xo=t=>{const e=Yt({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=e;if(e.headers=a=lt.from(a),e.url=ho(yo(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),w.isFormData(n)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(w.isFunction(n.getHeaders)){const c=n.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{l.includes(u.toLowerCase())&&a.set(u,h)})}}if(it.hasStandardBrowserEnv&&(r&&w.isFunction(r)&&(r=r(e)),r||r!==!1&&Bd(e.url))){const c=i&&o&&Nd.read(o);c&&a.set(i,c)}return e},Dd=typeof XMLHttpRequest<"u",Fd=Dd&&function(t){return new Promise(function(n,r){const i=xo(t);let o=i.data;const a=lt.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,h,f,g,d;function m(){g&&g(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function _(){if(!v)return;const E=lt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),N={data:!s||s==="text"||s==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:t,request:v};mo(function(C){n(C),m()},function(C){r(C),m()},N),v=null}"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(r(new P("Request aborted",P.ECONNABORTED,t,v)),v=null)},v.onerror=function(B){const N=B&&B.message?B.message:"Network Error",$=new P(N,P.ERR_NETWORK,t,v);$.event=B||null,r($),v=null},v.ontimeout=function(){let B=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||fo;i.timeoutErrorMessage&&(B=i.timeoutErrorMessage),r(new P(B,N.clarifyTimeoutError?P.ETIMEDOUT:P.ECONNABORTED,t,v)),v=null},o===void 0&&a.setContentType(null),"setRequestHeader"in v&&w.forEach(a.toJSON(),function(B,N){v.setRequestHeader(N,B)}),w.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),s&&s!=="json"&&(v.responseType=i.responseType),l&&([f,d]=Ke(l,!0),v.addEventListener("progress",f)),c&&v.upload&&([h,g]=Ke(c),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(u=E=>{v&&(r(!E||E.type?new se(null,t,v):E),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const A=kd(i.url);if(A&&it.protocols.indexOf(A)===-1){r(new P("Unsupported protocol "+A+":",P.ERR_BAD_REQUEST,t));return}v.send(o||null)})},Od=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof P?u:new se(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,o(new P(`timeout ${e} of ms exceeded`,P.ETIMEDOUT))},e);const s=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),t=null)};t.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>w.asap(s),c}},Ld=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Id=async function*(t,e){for await(const n of Pd(t))yield*Ld(n,e)},Pd=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Zr=(t,e,n,r)=>{const i=Id(t,e);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let h=u.byteLength;if(n){let f=o+=h;n(f)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},Qr=64*1024,{isFunction:Ne}=w,zd=(({Request:t,Response:e})=>({Request:t,Response:e}))(w.global),{ReadableStream:ti,TextEncoder:ei}=w.global,ni=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Ud=t=>{t=w.merge.call({skipUndefined:!0},zd,t);const{fetch:e,Request:n,Response:r}=t,i=e?Ne(e):typeof fetch=="function",o=Ne(n),a=Ne(r);if(!i)return!1;const s=i&&Ne(ti),c=i&&(typeof ei=="function"?(d=>m=>d.encode(m))(new ei):async d=>new Uint8Array(await new n(d).arrayBuffer())),l=o&&s&&ni(()=>{let d=!1;const m=new n(it.origin,{body:new ti,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!m}),u=a&&s&&ni(()=>w.isReadableStream(new r("").body)),h={stream:u&&(d=>d.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!h[d]&&(h[d]=(m,v)=>{let _=m&&m[d];if(_)return _.call(m);throw new P(`Response type '${d}' is not supported`,P.ERR_NOT_SUPPORT,v)})});const f=async d=>{if(d==null)return 0;if(w.isBlob(d))return d.size;if(w.isSpecCompliantForm(d))return(await new n(it.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(w.isArrayBufferView(d)||w.isArrayBuffer(d))return d.byteLength;if(w.isURLSearchParams(d)&&(d=d+""),w.isString(d))return(await c(d)).byteLength},g=async(d,m)=>{const v=w.toFiniteNumber(d.getContentLength());return v??f(m)};return async d=>{let{url:m,method:v,data:_,signal:A,cancelToken:E,timeout:B,onDownloadProgress:N,onUploadProgress:$,responseType:C,headers:k,withCredentials:M="same-origin",fetchOptions:z}=xo(d),tt=e||fetch;C=C?(C+"").toLowerCase():"text";let q=Od([A,E&&E.toAbortSignal()],B),nt=null;const y=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let p;try{if($&&l&&v!=="get"&&v!=="head"&&(p=await g(k,_))!==0){let I=new n(m,{method:"POST",body:_,duplex:"half"}),U;if(w.isFormData(_)&&(U=I.headers.get("content-type"))&&k.setContentType(U),I.body){const[K,j]=Jr(p,Ke(Gr($)));_=Zr(I.body,Qr,K,j)}}w.isString(M)||(M=M?"include":"omit");const x=o&&"credentials"in n.prototype,b={...z,signal:q,method:v.toUpperCase(),headers:k.normalize().toJSON(),body:_,duplex:"half",credentials:x?M:void 0};nt=o&&new n(m,b);let R=await(o?tt(nt,z):tt(m,b));const T=u&&(C==="stream"||C==="response");if(u&&(N||T&&y)){const I={};["status","statusText","headers"].forEach(rt=>{I[rt]=R[rt]});const U=w.toFiniteNumber(R.headers.get("content-length")),[K,j]=N&&Jr(U,Ke(Gr(N),!0))||[];R=new r(Zr(R.body,Qr,K,()=>{j&&j(),y&&y()}),I)}C=C||"text";let F=await h[w.findKey(h,C)||"text"](R,d);return!T&&y&&y(),await new Promise((I,U)=>{mo(I,U,{data:F,headers:lt.from(R.headers),status:R.status,statusText:R.statusText,config:d,request:nt})})}catch(x){throw y&&y(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new P("Network Error",P.ERR_NETWORK,d,nt),{cause:x.cause||x}):P.from(x,x&&x.code,d,nt)}}},Vd=new Map,wo=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,s=a,c,l,u=Vd;for(;s--;)c=o[s],l=u.get(c),l===void 0&&u.set(c,l=s?new Map:Ud(e)),u=l;return l};wo();const or={http:od,xhr:Fd,fetch:{get:wo}};w.forEach(or,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ri=t=>`- ${t}`,Hd=t=>w.isFunction(t)||t===null||t===!1;function Xd(t,e){t=w.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let s;if(i=r,!Hd(r)&&(i=or[(s=String(r)).toLowerCase()],i===void 0))throw new P(`Unknown adapter '${s}'`);if(i&&(w.isFunction(i)||(i=i.get(e))))break;o[s||"#"+a]=i}if(!i){const a=Object.entries(o).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(ri).join(`
`):" "+ri(a[0]):"as no adapter specified";throw new P("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i}const vo={getAdapter:Xd,adapters:or};function yn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new se(null,t)}function ii(t){return yn(t),t.headers=lt.from(t.headers),t.data=mn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),vo.getAdapter(t.adapter||Ce.adapter,t)(t).then(function(r){return yn(t),r.data=mn.call(t,t.transformResponse,r),r.headers=lt.from(r.headers),r},function(r){return go(r)||(yn(t),r&&r.response&&(r.response.data=mn.call(t,t.transformResponse,r.response),r.response.headers=lt.from(r.response.headers))),Promise.reject(r)})}const _o="1.13.2",sn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{sn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const oi={};sn.transitional=function(e,n,r){function i(o,a){return"[Axios v"+_o+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new P(i(a," has been removed"+(n?" in "+n:"")),P.ERR_DEPRECATED);return n&&!oi[a]&&(oi[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};sn.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function qd(t,e,n){if(typeof t!="object")throw new P("options must be an object",P.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],c=s===void 0||a(s,o,t);if(c!==!0)throw new P("option "+o+" must be "+c,P.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new P("Unknown option "+o,P.ERR_BAD_OPTION)}}const Ue={assertOptions:qd,validators:sn},Et=Ue.validators;let Xt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new jr,response:new jr}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Yt(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Ue.assertOptions(r,{silentJSONParsing:Et.transitional(Et.boolean),forcedJSONParsing:Et.transitional(Et.boolean),clarifyTimeoutError:Et.transitional(Et.boolean)},!1),i!=null&&(w.isFunction(i)?n.paramsSerializer={serialize:i}:Ue.assertOptions(i,{encode:Et.function,serialize:Et.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ue.assertOptions(n,{baseUrl:Et.spelling("baseURL"),withXsrfToken:Et.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&w.merge(o.common,o[n.method]);o&&w.forEach(["delete","get","head","post","put","patch","common"],d=>{delete o[d]}),n.headers=lt.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,s.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!c){const d=[ii.bind(this),void 0];for(d.unshift(...s),d.push(...l),f=d.length,u=Promise.resolve(n);h<f;)u=u.then(d[h++],d[h++]);return u}f=s.length;let g=n;for(;h<f;){const d=s[h++],m=s[h++];try{g=d(g)}catch(v){m.call(this,v);break}}try{u=ii.call(this,g)}catch(d){return Promise.reject(d)}for(h=0,f=l.length;h<f;)u=u.then(l[h++],l[h++]);return u}getUri(e){e=Yt(this.defaults,e);const n=yo(e.baseURL,e.url,e.allowAbsoluteUrls);return ho(n,e.params,e.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(e){Xt.prototype[e]=function(n,r){return this.request(Yt(r||{},{method:e,url:n,data:(r||{}).data}))}});w.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(Yt(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Xt.prototype[e]=n(),Xt.prototype[e+"Form"]=n(!0)});let Yd=class bo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new se(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new bo(function(i){e=i}),cancel:e}}};function jd(t){return function(n){return t.apply(null,n)}}function Wd(t){return w.isObject(t)&&t.isAxiosError===!0}const Xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xn).forEach(([t,e])=>{Xn[e]=t});function Co(t){const e=new Xt(t),n=Qi(Xt.prototype.request,e);return w.extend(n,Xt.prototype,e,{allOwnKeys:!0}),w.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Co(Yt(t,i))},n}const Z=Co(Ce);Z.Axios=Xt;Z.CanceledError=se;Z.CancelToken=Yd;Z.isCancel=go;Z.VERSION=_o;Z.toFormData=on;Z.AxiosError=P;Z.Cancel=Z.CanceledError;Z.all=function(e){return Promise.all(e)};Z.spread=jd;Z.isAxiosError=Wd;Z.mergeConfig=Yt;Z.AxiosHeaders=lt;Z.formToJSON=t=>po(w.isHTMLForm(t)?new FormData(t):t);Z.getAdapter=vo.getAdapter;Z.HttpStatusCode=Xn;Z.default=Z;const{Axios:kp,AxiosError:$p,CanceledError:Rp,isCancel:Bp,CancelToken:Np,VERSION:Mp,all:Tp,Cancel:Dp,isAxiosError:Fp,spread:Op,toFormData:Lp,AxiosHeaders:Ip,HttpStatusCode:Pp,formToJSON:zp,getAdapter:Up,mergeConfig:Vp}=Z,Gt=Z.create({baseURL:"/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});Gt.interceptors.request.use(t=>{const e=es("accessToken").value;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Gt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&Ss(),Promise.reject(t)});const Jd={__name:"organization-chart",async setup(t){let e,n;const r=ui({hasError:!1,errorMessage:"",isDeleteNodeDialogOpen:!1,isAddNodeDialogOpen:!1}),i=Q([]),o=Q(null),a=Q(null),s=Q([]),c=Q([]),l=Q([]),u=Q(null),h=rs();Dt(()=>h.current.value.colors,async()=>{a.value&&i.value.length>0&&a.value.render()},{deep:!0});async function f(){await Gt.get("/base/org-chart-node").then(({data:{data:C}})=>{i.value=C.map(k=>({id:k.id,parentId:k.parent_id,orgPositionId:k.org_position.id,orgPositionName:k.org_position.name,orgUnitName:k.org_unit.name,users:k.users}))}).catch(C=>{console.error("Error fetching org chart nodes:",C),r.hasError=!0,r.errorMessage=C.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÚØ§Ø±Øª Ø³Ø§Ø²ÙØ§ÙÛ"})}async function g(){await Gt.get("/base/org-position").then(({data:{data:C}})=>{s.value=C}).catch(C=>{console.error("Error fetching org positions:",C),r.hasError=!0,r.errorMessage=C.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ø³ÙØªâÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function d(){await Gt.get("/base/org-unit").then(({data:{data:C}})=>{c.value=C}).catch(C=>{console.error("Error fetching org units:",C),r.hasError=!0,r.errorMessage=C.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÙØ§Ø­Ø¯ÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function m(){await Gt.get(As("/base/user",{query:{"fields[users]":"id,first_name,last_name,personnel_code","fields[profiles]":"id,user_id,workplace_id,work_area_id,cost_center_id,job_position_id","filter[active]":"1",include:"profile.workplace,profile.workArea,profile.costCenter,profile.jobPosition,avatar"}}).value).then(({data:{data:C}})=>{l.value=C}).catch(C=>{console.error("Error fetching users:",C),r.hasError=!0,r.errorMessage=C.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù"})}function v(){!o.value||i.value.length===0||(a.value=new Rh().container(o.value).data(i.value).nodeWidth(()=>220).nodeHeight(()=>90).childrenMargin(()=>50).compactMarginBetween(()=>35).compactMarginPair(()=>30).neighbourMargin(()=>20).siblingsMargin(()=>30).nodeContent(C=>wf(C)).linkUpdate(function(){pt(this).attr("stroke","rgb(var(--v-theme-secondary))").attr("stroke-opacity",.38).attr("stroke-width",1.5).attr("stroke-linecap","round")}).buttonContent(({node:C})=>`
        <div class="org-expand-btn">
          ${C.children?"â²":"â¼"} ${C.data._directSubordinates||""}
        </div>
      `).render(),_())}function _(){o.value&&o.value.addEventListener("click",C=>{const k=C.target.closest(".node-action-btn");if(!k)return;C.stopPropagation();const M=k.dataset.action,z=k.dataset.nodeId;switch(M){case"edit":A(z);break;case"add":E(z);break;case"delete":N(z);break}})}function A(C){console.log("Edit node:",C)}function E(C){u.value=C,r.isAddNodeDialogOpen=!0}function B(){}function N(C){u.value=C,r.isDeleteNodeDialogOpen=!0}function $(){a.value.removeNode(u.value),r.isDeleteNodeDialogOpen=!1}return f(),g(),d(),[e,n]=is(()=>m()),await e,n(),os(async()=>{await Wt(),v()}),(C,k)=>(pe(),vn(Kt,null,[D(ks,{modelValue:X(r).hasError,"onUpdate:modelValue":k[0]||(k[0]=M=>X(r).hasError=M),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:H(()=>[Vt(_n(X(r).errorMessage),1)]),_:1},8,["modelValue"]),Rt("div",{ref_key:"orgChartRef",ref:o,class:"org-chart-container"},null,512),D(Mo,{"is-dialog-visible":X(r).isDeleteNodeDialogOpen,"onUpdate:isDialogVisible":k[1]||(k[1]=M=>X(r).isDeleteNodeDialogOpen=M),title:"Ø¢ÛØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛÙ ÙÙØ±Ø¯ Ø§Ø·ÙÛÙØ§Ù Ø¯Ø§Ø±ÛØ¯Ø",loading:!1,onConfirm:$},null,8,["is-dialog-visible"]),D(xf,{"is-dialog-visible":X(r).isAddNodeDialogOpen,"onUpdate:isDialogVisible":k[2]||(k[2]=M=>X(r).isAddNodeDialogOpen=M),"org-positions":X(s),"org-units":X(c),users:X(l),onAdd:B},null,8,["is-dialog-visible","org-positions","org-units","users"])],64))}},Hp=ns(Jd,[["__scopeId","data-v-b1fd88de"]]);export{Hp as default};
