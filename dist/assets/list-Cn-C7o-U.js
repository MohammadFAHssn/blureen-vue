import{u as B,V as U}from"./VLayout-B2PDuM3R.js";import{M as I,bL as R,r as A,bM as r,Y as T,c8 as q,a as H,f as J,o as K,e as S,b as P,d as O,n as t,v as Q,x as W}from"./index-B2A7Sa9b.js";import{u as X}from"./useApi-CR0_M8tr.js";import{c as Z}from"./createUrl-3Fsu3BUH.js";import{V as $}from"./VSnackbar-D82GW9Nj.js";import"./useLogout-_1uCg_3h.js";import"./VOverlay-Bn9aD4vk.js";const ee={style:{"block-size":"100%"}},ae={__name:"list",async setup(re){let n,s;const o=R({hasError:!1,errorMessage:""}),m=A([]),{theme:E}=B(),L=A([{headerName:"کد پرسنلی",field:"personnelCode"},{headerName:"نام",field:"firstName"},{headerName:"نام خانوادگی",field:"lastName"},{headerName:"نوع کاربر",field:"roles",cellRenderer:"MultiValuedCell",cellStyle:{display:"flex","align-items":"center"}},{headerName:"وضعیت",field:"active",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:a=>a.value===1?"فعال":"غیرفعال"}},{headerName:"کد ملی",field:"nationalCode"},{headerName:"جنسیت",field:"gender"},{headerName:"نام پدر",field:"fatherName"},{headerName:"محل تولد",field:"birthPlace"},{headerName:"تاریخ تولد",field:"birthDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"وضعیت تاهل",field:"maritalStatus"},{headerName:"تاریخ استخدام",field:"employmentDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"تاریخ شروع به کار",field:"startDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"سطح تحصیلات",field:"educationLevel"},{headerName:"محل کار",field:"workplace"},{headerName:"منطقه کاری",field:"workArea"},{headerName:"مرکز هزینه",field:"costCenter"},{headerName:"سمت شغلی",field:"jobPosition"},{headerName:"شماره تلفن همراه",field:"mobileNumber"}]),F=T(()=>{var a;return(a=m.value)==null?void 0:a.map(e=>{var l,i,d,f,c,p,u,h,_,Y,j,N,v,b,D,M,y,w,g,k,V,C,x;return{personnelCode:Number.parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(l=e.roles)==null?void 0:l.map(z=>z.name),active:e.active,nationalCode:(i=e.profile)==null?void 0:i.national_code,gender:(d=e.profile)==null?void 0:d.gender,fatherName:(f=e.profile)==null?void 0:f.father_name,birthPlace:(c=e.profile)==null?void 0:c.birth_place,birthDate:(p=e.profile)!=null&&p.birth_date?r((u=e.profile)==null?void 0:u.birth_date).format("jYYYY-jMM-jDD"):null,mobileNumber:(h=e.profile)==null?void 0:h.mobile_number,maritalStatus:(_=e.profile)==null?void 0:_.marital_status,employmentDate:(Y=e.profile)!=null&&Y.employment_date?r((j=e.profile)==null?void 0:j.employment_date).format("jYYYY-jMM-jDD"):null,startDate:(N=e.profile)!=null&&N.start_date?r((v=e.profile)==null?void 0:v.start_date).format("jYYYY-jMM-jDD"):null,educationLevel:(D=(b=e.profile)==null?void 0:b.education_level)==null?void 0:D.name,workplace:(y=(M=e.profile)==null?void 0:M.workplace)==null?void 0:y.name,workArea:(g=(w=e.profile)==null?void 0:w.work_area)==null?void 0:g.name,costCenter:(V=(k=e.profile)==null?void 0:k.cost_center)==null?void 0:V.name,jobPosition:(x=(C=e.profile)==null?void 0:C.job_position)==null?void 0:x.name}})});async function G(){try{const{data:a,error:e}=await X(Z("/base/user",{query:{"fields[users]":"id,first_name,last_name,personnel_code,active","fields[roles]":"name",include:"roles,profile.educationLevel,profile.workplace,profile.workArea,profile.costCenter,profile.jobPosition"}}));if(e.value)throw e.value;m.value=a.value.data}catch(a){console.error("Error fetching users:",a),o.hasError=!0,o.errorMessage=a.message||"خطا در دریافت کاربران"}}return[n,s]=q(()=>G()),await n,s(),(a,e)=>{const l=H("AgGridVue");return K(),J(U,{class:"app-layout"},{default:S(()=>[P($,{modelValue:t(o).hasError,"onUpdate:modelValue":e[0]||(e[0]=i=>t(o).hasError=i),timeout:2e3,location:"center",variant:"outlined",color:"error"},{default:S(()=>[Q(W(t(o).errorMessage),1)]),_:1},8,["modelValue"]),O("section",ee,[P(l,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":t(L),"row-data":t(F),"enable-rtl":"","row-numbers":"",pagination:"",theme:t(E)},null,8,["column-defs","row-data","theme"])])]),_:1})}}},de=I(ae,[["__scopeId","data-v-099e28cd"]]);export{de as default};
