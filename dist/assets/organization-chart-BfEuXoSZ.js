import{_ as Ho}from"./AreYouSureDialog-BMBZ1PGu.js";import{r as ae}from"./validators-BQd4MaJQ.js";import{ax as qo,a6 as Yo,al as jo,r as K,a7 as Yt,aA as Wo,da as Jo,aF as $r,bX as Ko,aq as Go,Z as Zo,Y as ft,aw as Wt,w as Ot,aS as Rr,cK as Qo,ab as ts,b as M,d as xt,a1 as Qt,dg as es,F as Xt,s as yt,bB as nr,a2 as Qe,df as ns,J as rs,y as is,b3 as os,v as _t,aJ as ss,bg as as,bT as ls,dd as Br,dm as us,a as xi,f as Ce,o as Dt,e as V,n as P,am as zt,bJ as tn,c as Ee,bC as _i,bv as Ut,i as bi,x as Se,bF as cs,M as fs,bl as hs,bN as ds,H as ps}from"./index-Bih8Z5CY.js";import{_ as rr}from"./DialogCloseBtn-DuB2OPY-.js";import{u as gs}from"./useAGGridTheme-pAzcdrmt.js";import{V as te}from"./VRow-ukbFlE92.js";import{V as Ct}from"./VCol-BeEg2yY7.js";import{V as ir,b as ms,c as ys}from"./VCard-i5qqja4Q.js";import{V as or}from"./VCardText-BJnuPqF7.js";import{V as sr}from"./VDialog-DyuGim28.js";import{V as Ci}from"./VForm-G3siEDvA.js";import{V as en}from"./VAutocomplete-CGknGL3M.js";import{u as vs,a as ws,b as xs,m as _s}from"./VSelect-Dq491hcn.js";import{V as Dr,m as bs}from"./VTextField-CYD358Cb.js";import{u as Cs,h as Es,m as Ss}from"./filter-DyEj_OW3.js";import{e as As,t as ye,V as ks,a as nn,c as $s}from"./VList-CUfm425g.js";import{V as Rs}from"./VMenu-I8ntKfQg.js";import{V as Bs}from"./VDivider-CFiA3I_h.js";import{V as Ds}from"./VCheckboxBtn-BdHqyY5T.js";import{O as Ns}from"./constants-CqCubtRl.js";import{u as Ts}from"./useLogout-g6YhfOQv.js";import{V as Ms}from"./VSnackbar-Cr75HZCl.js";import"./helpers-CcX6MmOA.js";/* empty css              */import"./createSimpleFunctional-Dy8ErcyH.js";import"./VOverlay-DT6RSKjw.js";import"./dialog-transition-CFd3spta.js";import"./autofocus-27_Z_dYH.js";import"./VCounter-PBocUU73.js";import"./VField-Dj9iW8G8.js";const Fs=Yo({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ss({filterKeys:["title"]}),..._s({hideNoData:!0,returnObject:!0}),...as(bs({modelValue:null,role:"combobox"}),["validationValue","dirty"])},"VCombobox"),Ei=qo()({name:"VCombobox",props:Fs(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var Cr;let{emit:n,slots:r}=e;const{t:i}=jo(),o=K(),a=Yt(!1),s=Yt(!0),c=Yt(!1),l=K(),u=K(),f=Yt(-1);let h=!1;const{items:g,transformIn:d,transformOut:m}=As(t),{textColorClasses:w,textColorStyles:C}=Wo(()=>{var R;return(R=o.value)==null?void 0:R.color}),{InputIcon:B}=Jo(t),A=$r(t,"modelValue",[],R=>d(Ko(R)),R=>{const H=m(R);return t.multiple?H:H[0]??null}),b=Go(t),O=Zo(()=>t.closableChips&&!b.isReadonly.value&&!b.isDisabled.value),z=ft(()=>!!(t.chips||r.chip)),_=ft(()=>z.value||!!r.selection),E=Yt(!t.multiple&&!_.value?((Cr=A.value[0])==null?void 0:Cr.title)??"":""),F=Yt(null),k=ft({get:()=>E.value,set:async R=>{var H;if(E.value=R??"",R===null||R===""&&!t.multiple&&!_.value?A.value=[]:!t.multiple&&!_.value&&(A.value=[ye(t,R)],Wt(()=>{var tt;return(tt=u.value)==null?void 0:tt.scrollToIndex(0)})),R&&t.multiple&&((H=t.delimiters)!=null&&H.length)){const tt=_r(R);tt.length>1&&(br(tt),E.value="")}R||(f.value=-1),s.value=!R}}),T=ft(()=>typeof t.counterValue=="function"?t.counterValue(A.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?A.value.length:k.value.length),{filteredItems:W,getMatches:G}=Cs(t,g,()=>F.value??(t.alwaysFilter||!s.value?k.value:"")),y=ft(()=>t.hideSelected&&F.value===null?W.value.filter(R=>!A.value.some(H=>H.value===R.value)):W.value),p=ft(()=>t.hideNoData&&!y.value.length||b.isReadonly.value||b.isDisabled.value),v=$r(t,"menu"),S=ft({get:()=>v.value,set:R=>{var H;v.value&&!R&&((H=l.value)!=null&&H.Î¨openChildren.size)||R&&p.value||(v.value=R)}}),{menuId:N,ariaExpanded:L,ariaControls:I}=vs(t,S);Ot(E,R=>{h?Wt(()=>h=!1):a.value&&!S.value&&(S.value=!0),n("update:search",R)}),Ot(A,R=>{var H;!t.multiple&&!_.value&&(E.value=((H=R[0])==null?void 0:H.title)??"")});const X=ft(()=>A.value.map(R=>R.value)),q=ft(()=>y.value.find(R=>R.type==="item"&&!R.props.disabled)),D=ft(()=>{var H;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&k.value===((H=q.value)==null?void 0:H.title))&&y.value.length>0&&!s.value&&!c.value}),$=K(),Y=ws($,o);function J(R){h=!0,Wt(()=>h=!1),t.openOnClear&&(S.value=!0)}function nt(){p.value||(S.value=!0)}function ot(R){p.value||(a.value&&(R.preventDefault(),R.stopPropagation()),S.value=!S.value)}function at(R){var H;(Br(R)||R.key==="Backspace")&&((H=o.value)==null||H.focus())}function wt(R){var et,bt,Z,ct;if(us(R)||b.isReadonly.value)return;const H=(et=o.value)==null?void 0:et.selectionStart,tt=A.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(R.key)&&R.preventDefault(),["Enter","ArrowDown"].includes(R.key)&&(S.value=!0),["Escape"].includes(R.key)&&(S.value=!1),D.value&&["Enter","Tab"].includes(R.key)&&q.value&&!A.value.some(lt=>{let{value:se}=lt;return se===q.value.value})&&kt(q.value),R.key==="ArrowDown"&&D.value&&((bt=$.value)==null||bt.focus("next")),R.key==="Enter"&&k.value&&(kt(ye(t,k.value),!0,!0),_.value&&(E.value="")),["Backspace","Delete"].includes(R.key)){if(!t.multiple&&_.value&&A.value.length>0&&!k.value)return kt(A.value[0],!1);if(~f.value){R.preventDefault();const lt=f.value;kt(A.value[f.value],!1),f.value=lt>=tt-1?tt-2:lt}else R.key==="Backspace"&&!k.value&&(f.value=tt-1);return}if(t.multiple)if(R.key==="ArrowLeft"){if(f.value<0&&H&&H>0)return;const lt=f.value>-1?f.value-1:tt-1;A.value[lt]?f.value=lt:(f.value=-1,(Z=o.value)==null||Z.setSelectionRange(k.value.length,k.value.length))}else if(R.key==="ArrowRight"){if(f.value<0)return;const lt=f.value+1;A.value[lt]?f.value=lt:(f.value=-1,(ct=o.value)==null||ct.setSelectionRange(0,0))}else~f.value&&Br(R)&&(f.value=-1)}function Oe(R){var et;const H=((et=R==null?void 0:R.clipboardData)==null?void 0:et.getData("Text"))??"",tt=_r(H);tt.length>1&&t.multiple&&(R.preventDefault(),br(tt))}function qt(){var R;t.eager&&((R=u.value)==null||R.calculateVisibleItems())}function Io(){var R;a.value&&((R=o.value)==null||R.focus()),s.value=!0,F.value=null}function kt(R){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!R||R.props.disabled))if(t.multiple){const et=A.value.findIndex(Z=>(t.valueComparator||Rr)(Z.value,R.value)),bt=H??!~et;if(~et){const Z=bt?[...A.value,R]:[...A.value];Z.splice(et,1),A.value=Z}else bt&&(A.value=[...A.value,R]);t.clearOnSelect&&(k.value="")}else{const et=H!==!1;A.value=et?[R]:[],(!s.value||t.alwaysFilter)&&E.value&&(F.value=E.value),E.value=et&&!_.value?R.title:"",Wt(()=>{S.value=tt,s.value=!0})}}function _r(R){const tt=[`
`,...t.delimiters??[]].map(ls).join("|");return R.split(new RegExp(`(?:${tt})+`))}async function br(R){for(let H of R)H=H.trim(),H&&(kt(ye(t,H)),await Wt())}function Po(R){a.value=!0,setTimeout(()=>{c.value=!0})}function Vo(R){c.value=!1}return Ot(a,(R,H)=>{if(!(R||R===H)&&(f.value=-1,S.value=!1,k.value)){if(t.multiple){kt(ye(t,k.value));return}if(!_.value)return;A.value.some(tt=>{let{title:et}=tt;return et===k.value})?E.value="":kt(ye(t,k.value))}}),Ot(S,R=>{if(!t.hideSelected&&R&&A.value.length&&s.value){const H=y.value.findIndex(tt=>A.value.some(et=>(t.valueComparator||Rr)(et.value,tt.value)));Qo&&window.requestAnimationFrame(()=>{var tt;H>=0&&((tt=u.value)==null||tt.scrollToIndex(H))})}R&&(F.value=null)}),Ot(g,(R,H)=>{S.value||a.value&&!H.length&&R.length&&(S.value=!0)}),ts(()=>{const R=!!(!t.hideNoData||y.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),H=A.value.length>0,tt=Dr.filterProps(t);return M(Dr,yt({ref:o},tt,{modelValue:k.value,"onUpdate:modelValue":et=>k.value=et,focused:a.value,"onUpdate:focused":et=>a.value=et,validationValue:A.externalValue,counterValue:T.value,dirty:H,class:["v-combobox",{"v-combobox--active-menu":S.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!_.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:b.isReadonly.value,placeholder:H?void 0:t.placeholder,"onClick:clear":J,"onMousedown:control":nt,onKeydown:wt,onPaste:Oe,"aria-expanded":L.value,"aria-controls":I.value}),{...r,default:et=>{let{id:bt}=et;return xt(Xt,null,[M(Rs,yt({id:N.value,ref:l,modelValue:S.value,"onUpdate:modelValue":Z=>S.value=Z,activator:"parent",contentClass:"v-combobox__content",disabled:p.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:qt,onAfterLeave:Io},t.menuProps),{default:()=>[R&&M(ks,yt({ref:$,filterable:!0,selected:X.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:Z=>Z.preventDefault(),selectable:!0,onKeydown:at,onFocusin:Po,onFocusout:Vo,tabindex:"-1","aria-live":"polite","aria-labelledby":`${bt.value}-label`,"aria-multiselectable":t.multiple,color:t.itemColor??t.color},Y,t.listProps),{default:()=>{var Z,ct,lt;return[(Z=r["prepend-item"])==null?void 0:Z.call(r),!y.value.length&&!t.hideNoData&&(((ct=r["no-data"])==null?void 0:ct.call(r))??M(nn,{key:"no-data",title:i(t.noDataText)},null)),M(xs,{ref:u,renderless:!0,items:y.value,itemKey:"value"},{default:se=>{var Sr,Ar,kr;let{item:rt,index:$t,itemRef:mt}=se;const Er=yt(rt.props,{ref:mt,key:rt.value,active:D.value&&rt===q.value?!0:void 0,onClick:()=>kt(rt,null),"aria-posinset":$t+1,"aria-setsize":y.value.length});return rt.type==="divider"?((Sr=r.divider)==null?void 0:Sr.call(r,{props:rt.raw,index:$t}))??M(Bs,yt(rt.props,{key:`divider-${$t}`}),null):rt.type==="subheader"?((Ar=r.subheader)==null?void 0:Ar.call(r,{props:rt.raw,index:$t}))??M($s,yt(rt.props,{key:`subheader-${$t}`}),null):((kr=r.item)==null?void 0:kr.call(r,{item:rt,index:$t,props:Er}))??M(nn,yt(Er,{role:"option"}),{prepend:Le=>{let{isSelected:Uo}=Le;return xt(Xt,null,[t.multiple&&!t.hideSelected?M(Ds,{key:rt.value,modelValue:Uo,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Xo=>Xo.preventDefault()},null):void 0,rt.props.prependAvatar&&M(nr,{image:rt.props.prependAvatar},null),rt.props.prependIcon&&M(Qt,{icon:rt.props.prependIcon},null)])},title:()=>{var Le;return s.value?rt.title:Es("v-combobox",rt.title,(Le=G(rt))==null?void 0:Le.title)}})}}),(lt=r["append-item"])==null?void 0:lt.call(r)]}})]}),A.value.map((Z,ct)=>{function lt(mt){mt.stopPropagation(),mt.preventDefault(),kt(Z,!1)}const se=yt(Qe.filterProps(Z.props),{"onClick:close":lt,onKeydown(mt){mt.key!=="Enter"&&mt.key!==" "||(mt.preventDefault(),mt.stopPropagation(),lt(mt))},onMousedown(mt){mt.preventDefault(),mt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),rt=z.value?!!r.chip:!!r.selection,$t=rt?ns(z.value?r.chip({item:Z,index:ct,props:se}):r.selection({item:Z,index:ct})):void 0;if(!(rt&&!$t))return xt("div",{key:Z.value,class:is(["v-combobox__selection",ct===f.value&&["v-combobox__selection--selected",w.value]]),style:rs(ct===f.value?C.value:{})},[z.value?r.chip?M(os,{key:"chip-defaults",defaults:{VChip:{closable:O.value,size:"small",text:Z.title}}},{default:()=>[$t]}):M(Qe,yt({key:"chip",closable:O.value,size:"small",text:Z.title,disabled:Z.props.disabled},se),null):$t??xt("span",{class:"v-combobox__selection-text"},[Z.title,t.multiple&&ct<A.value.length-1&&xt("span",{class:"v-combobox__selection-comma"},[_t(",")])])])})])},"append-inner":function(){var ct,lt;for(var et=arguments.length,bt=new Array(et),Z=0;Z<et;Z++)bt[Z]=arguments[Z];return xt(Xt,null,[(ct=r["append-inner"])==null?void 0:ct.call(r,...bt),(!t.hideNoData||t.items.length)&&t.menuIcon?M(Qt,{class:"v-combobox__menu-icon",color:(lt=o.value)==null?void 0:lt.fieldIconColor,icon:t.menuIcon,onMousedown:ot,onClick:es,"aria-hidden":!0,tabindex:"-1"},null):void 0,t.appendInnerIcon&&M(B,{key:"append-icon",name:"appendInner",color:bt[0].iconColor.value},null)])}})}),ss({isFocused:a,isPristine:s,menu:S,search:k,selectionIndex:f,filteredItems:W,select:kt},o)}});function Os(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Ls(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function zs(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Is(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var Ps={value:()=>{}};function pn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qe(n)}function qe(t){this._=t}function Vs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qe.prototype=pn.prototype={constructor:qe,on:function(t,e){var n=this._,r=Vs(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Us(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Nr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Nr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Us(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Nr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ps,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Fn="http://www.w3.org/1999/xhtml";const Tr={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Tr.hasOwnProperty(e)?{space:Tr[e],local:t}:t}function Xs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Fn&&e.documentElement.namespaceURI===Fn?e.createElement(t):e.createElementNS(n,t)}}function Hs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Si(t){var e=gn(t);return(e.local?Hs:Xs)(e)}function qs(){}function ar(t){return t==null?qs:function(){return this.querySelector(t)}}function Ys(t){typeof t!="function"&&(t=ar(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new gt(r,this._parents)}function js(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ws(){return[]}function Ai(t){return t==null?Ws:function(){return this.querySelectorAll(t)}}function Js(t){return function(){return js(t.apply(this,arguments))}}function Ks(t){typeof t=="function"?t=Js(t):t=Ai(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new gt(r,i)}function ki(t){return function(){return this.matches(t)}}function $i(t){return function(e){return e.matches(t)}}var Gs=Array.prototype.find;function Zs(t){return function(){return Gs.call(this.children,t)}}function Qs(){return this.firstElementChild}function ta(t){return this.select(t==null?Qs:Zs(typeof t=="function"?t:$i(t)))}var ea=Array.prototype.filter;function na(){return Array.from(this.children)}function ra(t){return function(){return ea.call(this.children,t)}}function ia(t){return this.selectAll(t==null?na:ra(typeof t=="function"?t:$i(t)))}function oa(t){typeof t!="function"&&(t=ki(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new gt(r,this._parents)}function Ri(t){return new Array(t.length)}function sa(){return new gt(this._enter||this._groups.map(Ri),this._parents)}function rn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}rn.prototype={constructor:rn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function aa(t){return function(){return t}}function la(t,e,n,r,i,o){for(var a=0,s,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new rn(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function ua(t,e,n,r,i,o,a){var s,c,l=new Map,u=e.length,f=o.length,h=new Array(u),g;for(s=0;s<u;++s)(c=e[s])&&(h[s]=g=a.call(c,c.__data__,s,e)+"",l.has(g)?i[s]=c:l.set(g,c));for(s=0;s<f;++s)g=a.call(t,o[s],s,o)+"",(c=l.get(g))?(r[s]=c,c.__data__=o[s],l.delete(g)):n[s]=new rn(t,o[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(h[s])===c&&(i[s]=c)}function ca(t){return t.__data__}function fa(t,e){if(!arguments.length)return Array.from(this,ca);var n=e?ua:la,r=this._parents,i=this._groups;typeof t!="function"&&(t=aa(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,g=ha(t.call(u,u&&u.__data__,l,r)),d=g.length,m=s[l]=new Array(d),w=a[l]=new Array(d),C=c[l]=new Array(h);n(u,f,m,w,C,g,e);for(var B=0,A=0,b,O;B<d;++B)if(b=m[B]){for(B>=A&&(A=B+1);!(O=w[A])&&++A<d;);b._next=O||null}}return a=new gt(a,r),a._enter=s,a._exit=c,a}function ha(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function da(){return new gt(this._exit||this._groups.map(Ri),this._parents)}function pa(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ga(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],f=l.length,h=s[c]=new Array(f),g,d=0;d<f;++d)(g=l[d]||u[d])&&(h[d]=g);for(;c<i;++c)s[c]=n[c];return new gt(s,this._parents)}function ma(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ya(t){t||(t=va);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new gt(i,this._parents).order()}function va(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function wa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xa(){return Array.from(this)}function _a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ba(){let t=0;for(const e of this)++t;return t}function Ca(){return!this.node()}function Ea(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Sa(t){return function(){this.removeAttribute(t)}}function Aa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ka(t,e){return function(){this.setAttribute(t,e)}}function $a(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ra(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ba(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Da(t,e){var n=gn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Aa:Sa:typeof e=="function"?n.local?Ba:Ra:n.local?$a:ka)(n,e))}function Bi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Na(t){return function(){this.style.removeProperty(t)}}function Ta(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ma(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Fa(t,e,n){return arguments.length>1?this.each((e==null?Na:typeof e=="function"?Ma:Ta)(t,e,n??"")):ce(this.node(),t)}function ce(t,e){return t.style.getPropertyValue(e)||Bi(t).getComputedStyle(t,null).getPropertyValue(e)}function Oa(t){return function(){delete this[t]}}function La(t,e){return function(){this[t]=e}}function za(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ia(t,e){return arguments.length>1?this.each((e==null?Oa:typeof e=="function"?za:La)(t,e)):this.node()[t]}function Di(t){return t.trim().split(/^|\s+/)}function lr(t){return t.classList||new Ni(t)}function Ni(t){this._node=t,this._names=Di(t.getAttribute("class")||"")}Ni.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ti(t,e){for(var n=lr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Mi(t,e){for(var n=lr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Pa(t){return function(){Ti(this,t)}}function Va(t){return function(){Mi(this,t)}}function Ua(t,e){return function(){(e.apply(this,arguments)?Ti:Mi)(this,t)}}function Xa(t,e){var n=Di(t+"");if(arguments.length<2){for(var r=lr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ua:e?Pa:Va)(n,e))}function Ha(){this.textContent=""}function qa(t){return function(){this.textContent=t}}function Ya(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ja(t){return arguments.length?this.each(t==null?Ha:(typeof t=="function"?Ya:qa)(t)):this.node().textContent}function Wa(){this.innerHTML=""}function Ja(t){return function(){this.innerHTML=t}}function Ka(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ga(t){return arguments.length?this.each(t==null?Wa:(typeof t=="function"?Ka:Ja)(t)):this.node().innerHTML}function Za(){this.nextSibling&&this.parentNode.appendChild(this)}function Qa(){return this.each(Za)}function tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function el(){return this.each(tl)}function nl(t){var e=typeof t=="function"?t:Si(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function rl(){return null}function il(t,e){var n=typeof t=="function"?t:Si(t),r=e==null?rl:typeof e=="function"?e:ar(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ol(){var t=this.parentNode;t&&t.removeChild(this)}function sl(){return this.each(ol)}function al(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ll(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ul(t){return this.select(t?ll:al)}function cl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function fl(t){return function(e){t.call(this,e,this.__data__)}}function hl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function dl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function pl(t,e,n){return function(){var r=this.__on,i,o=fl(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function gl(t,e,n){var r=hl(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?pl:dl,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Fi(t,e,n){var r=Bi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ml(t,e){return function(){return Fi(this,t,e)}}function yl(t,e){return function(){return Fi(this,t,e.apply(this,arguments))}}function vl(t,e){return this.each((typeof e=="function"?yl:ml)(t,e))}function*wl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Oi=[null];function gt(t,e){this._groups=t,this._parents=e}function pe(){return new gt([[document.documentElement]],Oi)}function xl(){return this}gt.prototype=pe.prototype={constructor:gt,select:Ys,selectAll:Ks,selectChild:ta,selectChildren:ia,filter:oa,data:fa,enter:sa,exit:da,join:pa,merge:ga,selection:xl,order:ma,sort:ya,call:wa,nodes:xa,node:_a,size:ba,empty:Ca,each:Ea,attr:Da,style:Fa,property:Ia,classed:Xa,text:ja,html:Ga,raise:Qa,lower:el,append:nl,insert:il,remove:sl,clone:ul,datum:cl,on:gl,dispatch:vl,[Symbol.iterator]:wl};function it(t){return typeof t=="string"?new gt([[document.querySelector(t)]],[document.documentElement]):new gt([[t]],Oi)}function _l(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ft(t,e){if(t=_l(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function bl(t){return new gt([document.querySelectorAll(t)],[document.documentElement])}const Cl={passive:!1},Ae={capture:!0,passive:!1};function Cn(t){t.stopImmediatePropagation()}function le(t){t.preventDefault(),t.stopImmediatePropagation()}function Li(t){var e=t.document.documentElement,n=it(t).on("dragstart.drag",le,Ae);"onselectstart"in e?n.on("selectstart.drag",le,Ae):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zi(t,e){var n=t.document.documentElement,r=it(t).on("dragstart.drag",null);e&&(r.on("click.drag",le,Ae),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ze=t=>()=>t;function On(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}On.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function El(t){return!t.ctrlKey&&!t.button}function Sl(){return this.parentNode}function Al(t,e){return e??{x:t.x,y:t.y}}function kl(){return navigator.maxTouchPoints||"ontouchstart"in this}function $l(){var t=El,e=Sl,n=Al,r=kl,i={},o=pn("start","drag","end"),a=0,s,c,l,u,f=0;function h(b){b.on("mousedown.drag",g).filter(r).on("touchstart.drag",w).on("touchmove.drag",C,Cl).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(b,O){if(!(u||!t.call(this,b,O))){var z=A(this,e.call(this,b,O),b,O,"mouse");z&&(it(b.view).on("mousemove.drag",d,Ae).on("mouseup.drag",m,Ae),Li(b.view),Cn(b),l=!1,s=b.clientX,c=b.clientY,z("start",b))}}function d(b){if(le(b),!l){var O=b.clientX-s,z=b.clientY-c;l=O*O+z*z>f}i.mouse("drag",b)}function m(b){it(b.view).on("mousemove.drag mouseup.drag",null),zi(b.view,l),le(b),i.mouse("end",b)}function w(b,O){if(t.call(this,b,O)){var z=b.changedTouches,_=e.call(this,b,O),E=z.length,F,k;for(F=0;F<E;++F)(k=A(this,_,b,O,z[F].identifier,z[F]))&&(Cn(b),k("start",b,z[F]))}}function C(b){var O=b.changedTouches,z=O.length,_,E;for(_=0;_<z;++_)(E=i[O[_].identifier])&&(le(b),E("drag",b,O[_]))}function B(b){var O=b.changedTouches,z=O.length,_,E;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),_=0;_<z;++_)(E=i[O[_].identifier])&&(Cn(b),E("end",b,O[_]))}function A(b,O,z,_,E,F){var k=o.copy(),T=Ft(F||z,O),W,G,y;if((y=n.call(b,new On("beforestart",{sourceEvent:z,target:h,identifier:E,active:a,x:T[0],y:T[1],dx:0,dy:0,dispatch:k}),_))!=null)return W=y.x-T[0]||0,G=y.y-T[1]||0,function p(v,S,N){var L=T,I;switch(v){case"start":i[E]=p,I=a++;break;case"end":delete i[E],--a;case"drag":T=Ft(N||S,O),I=a;break}k.call(v,b,new On(v,{sourceEvent:S,subject:y,target:h,identifier:E,active:I,x:T[0]+W,y:T[1]+G,dx:T[0]-L[0],dy:T[1]-L[1],dispatch:k}),_)}}return h.filter=function(b){return arguments.length?(t=typeof b=="function"?b:ze(!!b),h):t},h.container=function(b){return arguments.length?(e=typeof b=="function"?b:ze(b),h):e},h.subject=function(b){return arguments.length?(n=typeof b=="function"?b:ze(b),h):n},h.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:ze(!!b),h):r},h.on=function(){var b=o.on.apply(o,arguments);return b===o?h:b},h.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,h):Math.sqrt(f)},h}function ur(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ii(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function De(){}var ke=.7,on=1/ke,ue="\\s*([+-]?\\d+)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rl=/^#([0-9a-f]{3,8})$/,Bl=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),Dl=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Nl=new RegExp(`^rgba\\(${ue},${ue},${ue},${$e}\\)$`),Tl=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${$e}\\)$`),Ml=new RegExp(`^hsl\\(${$e},${Nt},${Nt}\\)$`),Fl=new RegExp(`^hsla\\(${$e},${Nt},${Nt},${$e}\\)$`),Mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ur(De,Re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fr,formatHex:Fr,formatHex8:Ol,formatHsl:Ll,formatRgb:Or,toString:Or});function Fr(){return this.rgb().formatHex()}function Ol(){return this.rgb().formatHex8()}function Ll(){return Pi(this).formatHsl()}function Or(){return this.rgb().formatRgb()}function Re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Rl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Lr(e):n===3?new ht(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ie(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ie(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bl.exec(t))?new ht(e[1],e[2],e[3],1):(e=Dl.exec(t))?new ht(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nl.exec(t))?Ie(e[1],e[2],e[3],e[4]):(e=Tl.exec(t))?Ie(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ml.exec(t))?Pr(e[1],e[2]/100,e[3]/100,1):(e=Fl.exec(t))?Pr(e[1],e[2]/100,e[3]/100,e[4]):Mr.hasOwnProperty(t)?Lr(Mr[t]):t==="transparent"?new ht(NaN,NaN,NaN,0):null}function Lr(t){return new ht(t>>16&255,t>>8&255,t&255,1)}function Ie(t,e,n,r){return r<=0&&(t=e=n=NaN),new ht(t,e,n,r)}function zl(t){return t instanceof De||(t=Re(t)),t?(t=t.rgb(),new ht(t.r,t.g,t.b,t.opacity)):new ht}function Ln(t,e,n,r){return arguments.length===1?zl(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ur(ht,Ln,Ii(De,{brighter(t){return t=t==null?on:Math.pow(on,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ke:Math.pow(ke,t),new ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ht(ee(this.r),ee(this.g),ee(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zr,formatHex:zr,formatHex8:Il,formatRgb:Ir,toString:Ir}));function zr(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}`}function Il(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}${Gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ir(){const t=sn(this.opacity);return`${t===1?"rgb(":"rgba("}${ee(this.r)}, ${ee(this.g)}, ${ee(this.b)}${t===1?")":`, ${t})`}`}function sn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ee(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gt(t){return t=ee(t),(t<16?"0":"")+t.toString(16)}function Pr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Et(t,e,n,r)}function Pi(t){if(t instanceof Et)return new Et(t.h,t.s,t.l,t.opacity);if(t instanceof De||(t=Re(t)),!t)return new Et;if(t instanceof Et)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Et(a,s,c,t.opacity)}function Pl(t,e,n,r){return arguments.length===1?Pi(t):new Et(t,e,n,r??1)}function Et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ur(Et,Pl,Ii(De,{brighter(t){return t=t==null?on:Math.pow(on,t),new Et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ke:Math.pow(ke,t),new Et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ht(En(t>=240?t-240:t+120,i,r),En(t,i,r),En(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Et(Vr(this.h),Pe(this.s),Pe(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=sn(this.opacity);return`${t===1?"hsl(":"hsla("}${Vr(this.h)}, ${Pe(this.s)*100}%, ${Pe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vr(t){return t=(t||0)%360,t<0?t+360:t}function Pe(t){return Math.max(0,Math.min(1,t||0))}function En(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Vi=t=>()=>t;function Vl(t,e){return function(n){return t+n*e}}function Ul(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xl(t){return(t=+t)==1?Ui:function(e,n){return n-e?Ul(e,n,t):Vi(isNaN(e)?n:e)}}function Ui(t,e){var n=e-t;return n?Vl(t,n):Vi(isNaN(t)?e:t)}const Ur=(function t(e){var n=Xl(e);function r(i,o){var a=n((i=Ln(i)).r,(o=Ln(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Ui(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r})(1);function Vt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(zn.source,"g");function Hl(t){return function(){return t}}function ql(t){return function(e){return t(e)+""}}function Yl(t,e){var n=zn.lastIndex=Sn.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=zn.exec(t))&&(i=Sn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Vt(r,i)})),n=Sn.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?ql(c[0].x):Hl(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}var Xr=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xi(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Xr,skewX:Math.atan(c)*Xr,scaleX:a,scaleY:s}}var Ve;function jl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?In:Xi(e.a,e.b,e.c,e.d,e.e,e.f)}function Wl(t){return t==null||(Ve||(Ve=document.createElementNS("http://www.w3.org/2000/svg","g")),Ve.setAttribute("transform",t),!(t=Ve.transform.baseVal.consolidate()))?In:(t=t.matrix,Xi(t.a,t.b,t.c,t.d,t.e,t.f))}function Hi(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,g,d){if(l!==f||u!==h){var m=g.push("translate(",null,e,null,n);d.push({i:m-4,x:Vt(l,f)},{i:m-2,x:Vt(u,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function a(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,g,d){if(l!==f||u!==h){var m=g.push(i(g)+"scale(",null,",",null,")");d.push({i:m-4,x:Vt(l,f)},{i:m-2,x:Vt(u,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),a(l.rotate,u.rotate,f,h),s(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(g){for(var d=-1,m=h.length,w;++d<m;)f[(w=h[d]).i]=w.x(g);return f.join("")}}}var Jl=Hi(jl,"px, ","px)","deg)"),Kl=Hi(Wl,", ",")",")"),Gl=1e-12;function Hr(t){return((t=Math.exp(t))+1/t)/2}function Zl(t){return((t=Math.exp(t))-1/t)/2}function Ql(t){return((t=Math.exp(2*t))-1)/(t+1)}const tu=(function t(e,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],h=a[2],g=u-s,d=f-c,m=g*g+d*d,w,C;if(m<Gl)C=Math.log(h/l)/e,w=function(_){return[s+_*g,c+_*d,l*Math.exp(e*_*C)]};else{var B=Math.sqrt(m),A=(h*h-l*l+r*m)/(2*l*n*B),b=(h*h-l*l-r*m)/(2*h*n*B),O=Math.log(Math.sqrt(A*A+1)-A),z=Math.log(Math.sqrt(b*b+1)-b);C=(z-O)/e,w=function(_){var E=_*C,F=Hr(O),k=l/(n*B)*(F*Ql(e*E+O)-Zl(O));return[s+k*g,c+k*d,l*F/Hr(e*E+O)]}}return w.duration=C*1e3*e/Math.SQRT2,w}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i})(Math.SQRT2,2,4);var fe=0,_e=0,ve=0,qi=1e3,an,be,ln=0,re=0,mn=0,Be=typeof performance=="object"&&performance.now?performance:Date,Yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cr(){return re||(Yi(eu),re=Be.now()+mn)}function eu(){re=0}function un(){this._call=this._time=this._next=null}un.prototype=ji.prototype={constructor:un,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?cr():+n)+(e==null?0:+e),!this._next&&be!==this&&(be?be._next=this:an=this,be=this),this._call=t,this._time=n,Pn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pn())}};function ji(t,e,n){var r=new un;return r.restart(t,e,n),r}function nu(){cr(),++fe;for(var t=an,e;t;)(e=re-t._time)>=0&&t._call.call(void 0,e),t=t._next;--fe}function qr(){re=(ln=Be.now())+mn,fe=_e=0;try{nu()}finally{fe=0,iu(),re=0}}function ru(){var t=Be.now(),e=t-ln;e>qi&&(mn-=e,ln=t)}function iu(){for(var t,e=an,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:an=n);be=t,Pn(r)}function Pn(t){if(!fe){_e&&(_e=clearTimeout(_e));var e=t-re;e>24?(t<1/0&&(_e=setTimeout(qr,t-Be.now()-mn)),ve&&(ve=clearInterval(ve))):(ve||(ln=Be.now(),ve=setInterval(ru,qi)),fe=1,Yi(qr))}}function Yr(t,e,n){var r=new un;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ou=pn("start","end","cancel","interrupt"),su=[],Wi=0,jr=1,Vn=2,Ye=3,Wr=4,Un=5,je=6;function yn(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;au(t,n,{name:e,index:r,group:i,on:ou,tween:su,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Wi})}function fr(t,e){var n=St(t,e);if(n.state>Wi)throw new Error("too late; already scheduled");return n}function Tt(t,e){var n=St(t,e);if(n.state>Ye)throw new Error("too late; already running");return n}function St(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function au(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ji(o,0,n.time);function o(l){n.state=jr,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,f,h,g;if(n.state!==jr)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Ye)return Yr(a);g.state===Wr?(g.state=je,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=je,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Yr(function(){n.state===Ye&&(n.state=Wr,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Vn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vn){for(n.state=Ye,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Un,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===Un&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=je,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function We(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Vn&&r.state<Un,r.state=je,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function lu(t){return this.each(function(){We(this,t)})}function uu(t,e){var n,r;return function(){var i=Tt(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function cu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Tt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function fu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=St(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?uu:cu)(n,t,e))}function hr(t,e,n){var r=t._id;return t.each(function(){var i=Tt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return St(i,r).value[e]}}function Ji(t,e){var n;return(typeof e=="number"?Vt:e instanceof Re?Ur:(n=Re(e))?(e=n,Ur):Yl)(t,e)}function hu(t){return function(){this.removeAttribute(t)}}function du(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function gu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function mu(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function yu(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function vu(t,e){var n=gn(t),r=n==="transform"?Kl:Ji;return this.attrTween(t,typeof e=="function"?(n.local?yu:mu)(n,r,hr(this,"attr."+t,e)):e==null?(n.local?du:hu)(n):(n.local?gu:pu)(n,r,e))}function wu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _u(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&xu(t,o)),n}return i._value=e,i}function bu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&wu(t,o)),n}return i._value=e,i}function Cu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=gn(t);return this.tween(n,(r.local?_u:bu)(r,e))}function Eu(t,e){return function(){fr(this,t).delay=+e.apply(this,arguments)}}function Su(t,e){return e=+e,function(){fr(this,t).delay=e}}function Au(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Eu:Su)(e,t)):St(this.node(),e).delay}function ku(t,e){return function(){Tt(this,t).duration=+e.apply(this,arguments)}}function $u(t,e){return e=+e,function(){Tt(this,t).duration=e}}function Ru(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ku:$u)(e,t)):St(this.node(),e).duration}function Bu(t,e){if(typeof e!="function")throw new Error;return function(){Tt(this,t).ease=e}}function Du(t){var e=this._id;return arguments.length?this.each(Bu(e,t)):St(this.node(),e).ease}function Nu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Tt(this,t).ease=n}}function Tu(t){if(typeof t!="function")throw new Error;return this.each(Nu(this._id,t))}function Mu(t){typeof t!="function"&&(t=ki(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new It(r,this._parents,this._name,this._id)}function Fu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],l=n[s],u=c.length,f=a[s]=new Array(u),h,g=0;g<u;++g)(h=c[g]||l[g])&&(f[g]=h);for(;s<r;++s)a[s]=e[s];return new It(a,this._parents,this._name,this._id)}function Ou(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Lu(t,e,n){var r,i,o=Ou(e)?fr:Tt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function zu(t,e){var n=this._id;return arguments.length<2?St(this.node(),n).on.on(t):this.each(Lu(n,t,e))}function Iu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Pu(){return this.on("end.remove",Iu(this._id))}function Vu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ar(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,f,h=0;h<c;++h)(u=s[h])&&(f=t.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,yn(l[h],e,n,h,l,St(u,n)));return new It(o,this._parents,e,n)}function Uu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ai(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),g,d=St(u,n),m=0,w=h.length;m<w;++m)(g=h[m])&&yn(g,e,n,m,h,d);o.push(h),a.push(u)}return new It(o,a,e,n)}var Xu=pe.prototype.constructor;function Hu(){return new Xu(this._groups,this._parents)}function qu(t,e){var n,r,i;return function(){var o=ce(this,t),a=(this.style.removeProperty(t),ce(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Ki(t){return function(){this.style.removeProperty(t)}}function Yu(t,e,n){var r,i=n+"",o;return function(){var a=ce(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function ju(t,e,n){var r,i,o;return function(){var a=ce(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),ce(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Wu(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=Tt(this,t),l=c.on,u=c.value[o]==null?s||(s=Ki(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Ju(t,e,n){var r=(t+="")=="transform"?Jl:Ji;return e==null?this.styleTween(t,qu(t,r)).on("end.style."+t,Ki(t)):typeof e=="function"?this.styleTween(t,ju(t,r,hr(this,"style."+t,e))).each(Wu(this._id,t)):this.styleTween(t,Yu(t,r,e),n).on("end.style."+t,null)}function Ku(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Gu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Ku(t,a,n)),r}return o._value=e,o}function Zu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Gu(t,e,n??""))}function Qu(t){return function(){this.textContent=t}}function tc(t){return function(){var e=t(this);this.textContent=e??""}}function ec(t){return this.tween("text",typeof t=="function"?tc(hr(this,"text",t)):Qu(t==null?"":t+""))}function nc(t){return function(e){this.textContent=t.call(this,e)}}function rc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&nc(i)),e}return r._value=t,r}function ic(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,rc(t))}function oc(){for(var t=this._name,e=this._id,n=Gi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=St(c,e);yn(c,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new It(r,this._parents,t,n)}function sc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=Tt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&o()})}var ac=0;function It(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gi(){return++ac}var Mt=pe.prototype;It.prototype={constructor:It,select:Vu,selectAll:Uu,selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:Mu,merge:Fu,selection:Hu,transition:oc,call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:zu,attr:vu,attrTween:Cu,style:Ju,styleTween:Zu,text:ec,textTween:ic,remove:Pu,tween:fu,delay:Au,duration:Ru,ease:Du,easeVarying:Tu,end:sc,[Symbol.iterator]:Mt[Symbol.iterator]};function lc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uc={time:null,delay:0,duration:250,ease:lc};function cc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function fc(t){var e,n;t instanceof It?(e=t._id,t=t._name):(e=Gi(),(n=uc).time=cr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&yn(c,t,e,l,a,n||cc(c,e));return new It(r,this._parents,t,e)}pe.prototype.interrupt=lu;pe.prototype.transition=fc;const Xn=Math.PI,Hn=2*Xn,jt=1e-6,hc=Hn-jt;function Zi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zi;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class pc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zi:dc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,l=i-n,u=a-e,f=s-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>jt)if(!(Math.abs(f*c-l*u)>jt)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,d=i-s,m=c*c+l*l,w=g*g+d*d,C=Math.sqrt(m),B=Math.sqrt(h),A=o*Math.tan((Xn-Math.acos((m+h-w)/(2*C*B)))/2),b=A/B,O=A/C;Math.abs(b-1)>jt&&this._append`L${e+b*u},${n+b*f}`,this._append`A${o},${o},0,0,${+(f*g>u*d)},${this._x1=e+O*c},${this._y1=n+O*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=e+s,u=n+c,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>jt||Math.abs(this._y1-u)>jt)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%Hn+Hn),h>hc?this._append`A${r},${r},0,1,${f},${e-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:h>jt&&this._append`A${r},${r},0,${+(h>=Xn)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function gc(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function mc(){return this.eachAfter(gc)}function yc(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function vc(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function wc(t,e){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function xc(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function _c(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function bc(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Cc(t){for(var e=this,n=Ec(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Ec(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Sc(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ac(){return Array.from(this)}function kc(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function $c(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Rc(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Qi(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Nc)):e===void 0&&(e=Dc);for(var n=new he(t),r,i=[n],o,a,s,c;r=i.pop();)if((a=e(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new he(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(to)}function Bc(){return Qi(this).eachBefore(Tc)}function Dc(t){return t.children}function Nc(t){return Array.isArray(t)?t[1]:null}function Tc(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function to(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function he(t){this.data=t,this.depth=this.height=0,this.parent=null}he.prototype=Qi.prototype={constructor:he,count:mc,each:yc,eachAfter:wc,eachBefore:vc,find:xc,sum:_c,sort:bc,path:Cc,ancestors:Sc,descendants:Ac,leaves:kc,links:$c,copy:Bc,[Symbol.iterator]:Rc};function An(t){return t==null?null:Mc(t)}function Mc(t){if(typeof t!="function")throw new Error;return t}var Fc={depth:-1},Jr={},kn={};function Oc(t){return t.id}function Lc(t){return t.parentId}function zc(){var t=Oc,e=Lc,n;function r(i){var o=Array.from(i),a=t,s=e,c,l,u,f,h,g,d,m,w=new Map;if(n!=null){const C=o.map((b,O)=>Ic(n(b,O,i))),B=C.map(Kr),A=new Set(C).add("");for(const b of B)A.has(b)||(A.add(b),C.push(b),B.push(Kr(b)),o.push(kn));a=(b,O)=>C[O],s=(b,O)=>B[O]}for(u=0,c=o.length;u<c;++u)l=o[u],g=o[u]=new he(l),(d=a(l,u,i))!=null&&(d+="")&&(m=g.id=d,w.set(m,w.has(m)?Jr:g)),(d=s(l,u,i))!=null&&(d+="")&&(g.parent=d);for(u=0;u<c;++u)if(g=o[u],d=g.parent){if(h=w.get(d),!h)throw new Error("missing: "+d);if(h===Jr)throw new Error("ambiguous: "+d);h.children?h.children.push(g):h.children=[g],g.parent=h}else{if(f)throw new Error("multiple roots");f=g}if(!f)throw new Error("no root");if(n!=null){for(;f.data===kn&&f.children.length===1;)f=f.children[0],--c;for(let C=o.length-1;C>=0&&(g=o[C],g.data===kn);--C)g.data=null}if(f.parent=Fc,f.eachBefore(function(C){C.depth=C.parent.depth+1,--c}).eachBefore(to),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=An(i),r):t},r.parentId=function(i){return arguments.length?(e=An(i),r):e},r.path=function(i){return arguments.length?(n=An(i),r):n},r}function Ic(t){t=`${t}`;let e=t.length;return qn(t,e-1)&&!qn(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Kr(t){let e=t.length;if(e<2)return"";for(;--e>1&&!qn(t,e););return t.slice(0,e)}function qn(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function Pc(t,e){return t.parent===e.parent?1:2}function $n(t){var e=t.children;return e?e[0]:t.t}function Rn(t){var e=t.children;return e?e[e.length-1]:t.t}function Vc(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Uc(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Xc(t,e,n){return t.a.parent===e.parent?t.a:n}function Je(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Je.prototype=Object.create(he.prototype);function Hc(t){for(var e=new Je(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new Je(o[a],a)),i.parent=n;return(e.parent=new Je(null,0)).children=[e],e}function qc(){var t=Pc,e=1,n=1,r=null;function i(l){var u=Hc(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,h=l,g=l;l.eachBefore(function(B){B.x<f.x&&(f=B),B.x>h.x&&(h=B),B.depth>g.depth&&(g=B)});var d=f===h?1:t(f,h)/2,m=d-f.x,w=e/(h.x+d+m),C=n/(g.depth||1);l.eachBefore(function(B){B.x=(B.x+m)*w,B.y=B.depth*C})}return l}function o(l){var u=l.children,f=l.parent.children,h=l.i?f[l.i-1]:null;if(u){Uc(l);var g=(u[0].z+u[u.length-1].z)/2;h?(l.z=h.z+t(l._,h._),l.m=l.z-g):l.z=g}else h&&(l.z=h.z+t(l._,h._));l.parent.A=s(l,h,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var h=l,g=l,d=u,m=h.parent.children[0],w=h.m,C=g.m,B=d.m,A=m.m,b;d=Rn(d),h=$n(h),d&&h;)m=$n(m),g=Rn(g),g.a=l,b=d.z+B-h.z-w+t(d._,h._),b>0&&(Vc(Xc(d,l,f),l,b),w+=b,C+=b),B+=d.m,w+=h.m,A+=m.m,C+=g.m;d&&!Rn(g)&&(g.t=d,g.m+=B-C),h&&!$n(m)&&(m.t=h,m.m+=w-A,f=l)}return f}function c(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}function Gr(t){return function(){return t}}function Yc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new pc(e)}var jc=Array.prototype.slice;function Wc(t){return t[0]}function Jc(t){return t[1]}class Kc{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Gc(t){return new Kc(t,!0)}function Zc(t){return t.source}function Qc(t){return t.target}function tf(t){let e=Zc,n=Qc,r=Wc,i=Jc,o=null,a=null,s=Yc(c);function c(){let l;const u=jc.call(arguments),f=e.apply(this,u),h=n.apply(this,u);if(o==null&&(a=t(l=s())),a.lineStart(),u[0]=f,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=h,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),l)return a=null,l+""||null}return c.source=function(l){return arguments.length?(e=l,c):e},c.target=function(l){return arguments.length?(n=l,c):n},c.x=function(l){return arguments.length?(r=typeof l=="function"?l:Gr(+l),c):r},c.y=function(l){return arguments.length?(i=typeof l=="function"?l:Gr(+l),c):i},c.context=function(l){return arguments.length?(l==null?o=a=null:a=t(o=l),c):o},c}function ef(){return tf(Gc)}const Ue=t=>()=>t;function nf(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Lt(t,e,n){this.k=t,this.x=e,this.y=n}Lt.prototype={constructor:Lt,scale:function(t){return t===1?this:new Lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dr=new Lt(1,0,0);Lt.prototype;function Bn(t){t.stopImmediatePropagation()}function we(t){t.preventDefault(),t.stopImmediatePropagation()}function rf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function of(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Zr(){return this.__zoom||dr}function sf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function af(){return navigator.maxTouchPoints||"ontouchstart"in this}function lf(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function uf(){var t=rf,e=of,n=lf,r=sf,i=af,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=tu,l=pn("start","zoom","end"),u,f,h,g=500,d=150,m=0,w=10;function C(y){y.property("__zoom",Zr).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",T).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(y,p,v,S){var N=y.selection?y.selection():y;N.property("__zoom",Zr),y!==N?O(y,p,v,S):N.interrupt().each(function(){z(this,arguments).event(S).start().zoom(null,typeof p=="function"?p.apply(this,arguments):p).end()})},C.scaleBy=function(y,p,v,S){C.scaleTo(y,function(){var N=this.__zoom.k,L=typeof p=="function"?p.apply(this,arguments):p;return N*L},v,S)},C.scaleTo=function(y,p,v,S){C.transform(y,function(){var N=e.apply(this,arguments),L=this.__zoom,I=v==null?b(N):typeof v=="function"?v.apply(this,arguments):v,X=L.invert(I),q=typeof p=="function"?p.apply(this,arguments):p;return n(A(B(L,q),I,X),N,a)},v,S)},C.translateBy=function(y,p,v,S){C.transform(y,function(){return n(this.__zoom.translate(typeof p=="function"?p.apply(this,arguments):p,typeof v=="function"?v.apply(this,arguments):v),e.apply(this,arguments),a)},null,S)},C.translateTo=function(y,p,v,S,N){C.transform(y,function(){var L=e.apply(this,arguments),I=this.__zoom,X=S==null?b(L):typeof S=="function"?S.apply(this,arguments):S;return n(dr.translate(X[0],X[1]).scale(I.k).translate(typeof p=="function"?-p.apply(this,arguments):-p,typeof v=="function"?-v.apply(this,arguments):-v),L,a)},S,N)};function B(y,p){return p=Math.max(o[0],Math.min(o[1],p)),p===y.k?y:new Lt(p,y.x,y.y)}function A(y,p,v){var S=p[0]-v[0]*y.k,N=p[1]-v[1]*y.k;return S===y.x&&N===y.y?y:new Lt(y.k,S,N)}function b(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function O(y,p,v,S){y.on("start.zoom",function(){z(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(S).end()}).tween("zoom",function(){var N=this,L=arguments,I=z(N,L).event(S),X=e.apply(N,L),q=v==null?b(X):typeof v=="function"?v.apply(N,L):v,D=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),$=N.__zoom,Y=typeof p=="function"?p.apply(N,L):p,J=c($.invert(q).concat(D/$.k),Y.invert(q).concat(D/Y.k));return function(nt){if(nt===1)nt=Y;else{var ot=J(nt),at=D/ot[2];nt=new Lt(at,q[0]-ot[0]*at,q[1]-ot[1]*at)}I.zoom(null,nt)}})}function z(y,p,v){return!v&&y.__zooming||new _(y,p)}function _(y,p){this.that=y,this.args=p,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,p),this.taps=0}_.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,p){return this.mouse&&y!=="mouse"&&(this.mouse[1]=p.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=p.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=p.invert(this.touch1[0])),this.that.__zoom=p,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var p=it(this.that).datum();l.call(y,this.that,new nf(y,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:l}),p)}};function E(y,...p){if(!t.apply(this,arguments))return;var v=z(this,p).event(y),S=this.__zoom,N=Math.max(o[0],Math.min(o[1],S.k*Math.pow(2,r.apply(this,arguments)))),L=Ft(y);if(v.wheel)(v.mouse[0][0]!==L[0]||v.mouse[0][1]!==L[1])&&(v.mouse[1]=S.invert(v.mouse[0]=L)),clearTimeout(v.wheel);else{if(S.k===N)return;v.mouse=[L,S.invert(L)],We(this),v.start()}we(y),v.wheel=setTimeout(I,d),v.zoom("mouse",n(A(B(S,N),v.mouse[0],v.mouse[1]),v.extent,a));function I(){v.wheel=null,v.end()}}function F(y,...p){if(h||!t.apply(this,arguments))return;var v=y.currentTarget,S=z(this,p,!0).event(y),N=it(y.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",D,!0),L=Ft(y,v),I=y.clientX,X=y.clientY;Li(y.view),Bn(y),S.mouse=[L,this.__zoom.invert(L)],We(this),S.start();function q($){if(we($),!S.moved){var Y=$.clientX-I,J=$.clientY-X;S.moved=Y*Y+J*J>m}S.event($).zoom("mouse",n(A(S.that.__zoom,S.mouse[0]=Ft($,v),S.mouse[1]),S.extent,a))}function D($){N.on("mousemove.zoom mouseup.zoom",null),zi($.view,S.moved),we($),S.event($).end()}}function k(y,...p){if(t.apply(this,arguments)){var v=this.__zoom,S=Ft(y.changedTouches?y.changedTouches[0]:y,this),N=v.invert(S),L=v.k*(y.shiftKey?.5:2),I=n(A(B(v,L),S,N),e.apply(this,p),a);we(y),s>0?it(this).transition().duration(s).call(O,I,S,y):it(this).call(C.transform,I,S,y)}}function T(y,...p){if(t.apply(this,arguments)){var v=y.touches,S=v.length,N=z(this,p,y.changedTouches.length===S).event(y),L,I,X,q;for(Bn(y),I=0;I<S;++I)X=v[I],q=Ft(X,this),q=[q,this.__zoom.invert(q),X.identifier],N.touch0?!N.touch1&&N.touch0[2]!==q[2]&&(N.touch1=q,N.taps=0):(N.touch0=q,L=!0,N.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(N.taps<2&&(f=q[0],u=setTimeout(function(){u=null},g)),We(this),N.start())}}function W(y,...p){if(this.__zooming){var v=z(this,p).event(y),S=y.changedTouches,N=S.length,L,I,X,q;for(we(y),L=0;L<N;++L)I=S[L],X=Ft(I,this),v.touch0&&v.touch0[2]===I.identifier?v.touch0[0]=X:v.touch1&&v.touch1[2]===I.identifier&&(v.touch1[0]=X);if(I=v.that.__zoom,v.touch1){var D=v.touch0[0],$=v.touch0[1],Y=v.touch1[0],J=v.touch1[1],nt=(nt=Y[0]-D[0])*nt+(nt=Y[1]-D[1])*nt,ot=(ot=J[0]-$[0])*ot+(ot=J[1]-$[1])*ot;I=B(I,Math.sqrt(nt/ot)),X=[(D[0]+Y[0])/2,(D[1]+Y[1])/2],q=[($[0]+J[0])/2,($[1]+J[1])/2]}else if(v.touch0)X=v.touch0[0],q=v.touch0[1];else return;v.zoom("touch",n(A(I,X,q),v.extent,a))}}function G(y,...p){if(this.__zooming){var v=z(this,p).event(y),S=y.changedTouches,N=S.length,L,I;for(Bn(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),L=0;L<N;++L)I=S[L],v.touch0&&v.touch0[2]===I.identifier?delete v.touch0:v.touch1&&v.touch1[2]===I.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(I=Ft(I,this),Math.hypot(f[0]-I[0],f[1]-I[1])<w)){var X=it(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return C.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Ue(+y),C):r},C.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Ue(!!y),C):t},C.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Ue(!!y),C):i},C.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Ue([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),C):e},C.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],C):[o[0],o[1]]},C.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],C):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},C.constrain=function(y){return arguments.length?(n=y,C):n},C.duration=function(y){return arguments.length?(s=+y,C):s},C.interpolate=function(y){return arguments.length?(c=y,C):c},C.on=function(){var y=l.on.apply(l,arguments);return y===l?C:y},C.clickDistance=function(y){return arguments.length?(m=(y=+y)*y,C):Math.sqrt(m)},C.tapDistance=function(y){return arguments.length?(w=+y,C):w},C}function cf(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ff(){return this.eachAfter(cf)}function hf(t){var e=this,n,r=[e],i,o,a;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)r.push(i[o]);while(r.length);return this}function df(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function pf(t){for(var e=this,n=[e],r=[],i,o,a;e=n.pop();)if(r.push(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)n.push(i[o]);for(;e=r.pop();)t(e);return this}function gf(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function mf(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function yf(t){for(var e=this,n=vf(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function vf(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function wf(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function xf(){var t=[];return this.each(function(e){t.push(e)}),t}function _f(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function bf(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function pr(t,e){var n=new cn(t),r=+t.value&&(n.value=t.value),i,o=[n],a,s,c,l;for(e==null&&(e=Ef);i=o.pop();)if(r&&(i.value=+i.data.value),(s=e(i.data))&&(l=s.length))for(i.children=new Array(l),c=l-1;c>=0;--c)o.push(a=i.children[c]=new cn(s[c])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(Af)}function Cf(){return pr(this).eachBefore(Sf)}function Ef(t){return t.children}function Sf(t){t.data=t.data.data}function Af(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function cn(t){this.data=t,this.depth=this.height=0,this.parent=null}cn.prototype=pr.prototype={constructor:cn,count:ff,each:hf,eachAfter:pf,eachBefore:df,sum:gf,sort:mf,path:yf,ancestors:wf,descendants:xf,leaves:_f,links:bf,copy:Cf};const kf="2.1.2",$f={version:kf},{version:Rf}=$f,Bf=Object.freeze({children:t=>t.children,nodeSize:t=>t.data.size,spacing:0});function gr(t){const e=Object.assign({},Bf,t);function n(s){const c=e[s];return typeof c=="function"?c:()=>c}function r(s){const c=a(o(),s,l=>l.children);return c.update(),c.data}function i(){const s=n("nodeSize"),c=n("spacing");return class eo extends pr.prototype.constructor{constructor(u){super(u)}copy(){const u=a(this.constructor,this,f=>f.children);return u.each(f=>f.data=f.data.data),u}get size(){return s(this)}spacing(u){return c(this,u)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const u=this.ancestors();return u[u.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((u,f)=>eo.maxExtents(u,f.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(u,f){return{top:Math.min(u.top,f.top),bottom:Math.max(u.bottom,f.bottom),left:Math.min(u.left,f.left),right:Math.max(u.right,f.right)}}}}function o(){const s=i(),c=n("nodeSize"),l=n("spacing");return class extends s{constructor(u){super(u),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return c(this.data)}spacing(u){return l(this.data,u.data)}get x(){return this.data.x}set x(u){this.data.x=u}get y(){return this.data.y}set y(u){this.data.y=u}update(){return no(this),ro(this),this}}}function a(s,c,l){const u=(f,h)=>{const g=new s(f);Object.assign(g,{parent:h,depth:h===null?0:h.depth+1,height:0,length:1});const d=l(f)||[];return g.children=d.length===0?null:d.map(m=>u(m,g)),g.children&&Object.assign(g,g.children.reduce((m,w)=>({height:Math.max(m.height,w.height+1),length:m.length+w.length}),g)),g};return u(c,null)}return Object.assign(r,{nodeSize(s){return arguments.length?(e.nodeSize=s,r):e.nodeSize},spacing(s){return arguments.length?(e.spacing=s,r):e.spacing},children(s){return arguments.length?(e.children=s,r):e.children},hierarchy(s,c){const l=typeof c>"u"?e.children:c;return a(i(),s,l)},dump(s){const c=n("nodeSize"),l=u=>f=>{const h=u+"  ",g=u+"    ",{x:d,y:m}=f,w=c(f),C=f.children||[],B=C.length===0?" ":`,${h}children: [${g}${C.map(l(g)).join(g)}${h}],${u}`;return`{ size: [${w.join(", ")}],${h}x: ${d}, y: ${m}${B}},`};return l(`
`)(s)}}),r}gr.version=Rf;const no=(t,e=0)=>(t.y=e,(t.children||[]).reduce((n,r)=>{const[i,o]=n;no(r,t.y+t.ySize);const a=(i===0?r.lExt:r.rExt).bottom;i!==0&&Nf(t,i,o);const s=Pf(a,i,o);return[i+1,s]},[0,null]),Df(t),If(t),t),ro=(t,e,n)=>{typeof e>"u"&&(e=-t.relX-t.prelim,n=0);const r=e+t.relX;return t.relX=r+t.prelim-n,t.prelim=0,t.x=n+t.relX,(t.children||[]).forEach(i=>ro(i,r,t.x)),t},Df=t=>{(t.children||[]).reduce((e,n)=>{const[r,i]=e,o=r+n.shift,a=i+o+n.change;return n.relX+=a,[o,a]},[0,0])},Nf=(t,e,n)=>{const r=t.children[e-1],i=t.children[e];let o=r,a=r.relX,s=i,c=i.relX,l=!0;for(;o&&s;){o.bottom>n.lowY&&(n=n.next);const u=a+o.prelim-(c+s.prelim)+o.xSize/2+s.xSize/2+o.spacing(s);(u>0||u<0&&l)&&(c+=u,Tf(i,u),Mf(t,e,n.index,u)),l=!1;const f=o.bottom,h=s.bottom;f<=h&&(o=Of(o),o&&(a+=o.relX)),f>=h&&(s=Ff(s),s&&(c+=s.relX))}!o&&s?Lf(t,e,s,c):o&&!s&&zf(t,e,o,a)},Tf=(t,e)=>{t.relX+=e,t.lExtRelX+=e,t.rExtRelX+=e},Mf=(t,e,n,r)=>{const i=t.children[e],o=e-n;if(o>1){const a=r/o;t.children[n+1].shift+=a,i.shift-=a,i.change-=r-a}},Ff=t=>t.hasChildren?t.firstChild:t.lThr,Of=t=>t.hasChildren?t.lastChild:t.rThr,Lf=(t,e,n,r)=>{const i=t.firstChild,o=i.lExt,a=t.children[e];o.lThr=n;const s=r-n.relX-i.lExtRelX;o.relX+=s,o.prelim-=s,i.lExt=a.lExt,i.lExtRelX=a.lExtRelX},zf=(t,e,n,r)=>{const i=t.children[e],o=i.rExt,a=t.children[e-1];o.rThr=n;const s=r-n.relX-i.rExtRelX;o.relX+=s,o.prelim-=s,i.rExt=a.rExt,i.rExtRelX=a.rExtRelX},If=t=>{if(t.hasChildren){const e=t.firstChild,n=t.lastChild,r=(e.prelim+e.relX-e.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(t,{prelim:r,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},Pf=(t,e,n)=>{for(;n!==null&&t>=n.lowY;)n=n.next;return{lowY:t,index:e,next:n}},Q={selection:pe,select:it,max:Ls,min:zs,sum:Is,cumsum:Os,tree:qc,stratify:zc,zoom:uf,zoomIdentity:dr,linkHorizontal:ef,flextree:gr};class Vf{constructor(){const e={id:`ID${Math.floor(Math.random()*1e6)}`,firstDraw:!0,ctx:document.createElement("canvas").getContext("2d"),initialExpandLevel:1,nodeDefaultBackground:"none",lastTransform:{x:0,y:0,k:1},allowedNodesCount:{},zoomBehavior:null,generateRoot:null,svgWidth:800,svgHeight:window.innerHeight-100,container:"body",data:null,connections:[],defaultFont:"Helvetica",nodeId:n=>n.nodeId||n.id,parentNodeId:n=>n.parentNodeId||n.parentId,rootMargin:40,nodeWidth:n=>250,nodeHeight:n=>150,neighbourMargin:(n,r)=>80,siblingsMargin:n=>20,childrenMargin:n=>60,compactMarginPair:n=>100,compactMarginBetween:(n=>20),nodeButtonWidth:n=>40,nodeButtonHeight:n=>40,nodeButtonX:n=>-20,nodeButtonY:n=>-20,linkYOffset:30,pagingStep:n=>5,minPagingVisibleNodes:n=>2e3,scaleExtent:[.001,20],duration:400,imageName:"Chart",setActiveNodeCentered:!0,layout:"top",compact:!0,createZoom:n=>Q.zoom(),onZoomStart:n=>{},onZoom:n=>{},onZoomEnd:n=>{},onNodeClick:n=>n,onExpandOrCollapse:n=>n,nodeContent:n=>`<div style="padding:5px;font-size:10px;">Sample Node(id=${n.id}), override using <br/> 
            <code>chart.nodeContent({data}=>{ <br/>
             &nbsp;&nbsp;&nbsp;&nbsp;return '' // Custom HTML <br/>
             })</code>
             <br/> 
             Or check different <a href="https://github.com/bumbeishvili/org-chart#jump-to-examples" target="_blank">layout examples</a>
             </div>`,buttonContent:({node:n,state:r})=>`<div style="border:1px solid #E4E2E9;border-radius:3px;padding:3px;font-size:9px;margin:auto auto;background-color:white"> ${{left:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                          </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,bottom:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                       `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                    `,right:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,top:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                        `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                    `}[r.layout](n.children)}  </div>`,pagingButton:(n,r,i,o)=>{const a=o.pagingStep(n.parent),s=n.parent.data._pagingStep,c=n.parent.data._directSubordinatesPaging-s;return`
                   <div style="margin-top:90px;">
                      <div style="display:flex;width:170px;border-radius:20px;padding:5px 15px; padding-bottom:4px;;background-color:#E5E9F2">
                      <div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg>
                      </div><div style="line-height:2"> Show next ${Math.min(c,a)}  nodes </div></div>
                   </div>
                `},nodeUpdate:function(n,r,i){Q.select(this).select(".node-rect").attr("stroke",o=>o.data._highlighted||o.data._upToTheRootHighlighted?"#E27396":"none").attr("stroke-width",n.data._highlighted||n.data._upToTheRootHighlighted?10:1)},nodeEnter:n=>n,nodeExit:n=>n,linkUpdate:function(n,r,i){Q.select(this).attr("stroke",o=>o.data._upToTheRootHighlighted?"#E27396":"#E4E2E9").attr("stroke-width",o=>o.data._upToTheRootHighlighted?5:1),n.data._upToTheRootHighlighted&&Q.select(this).raise()},hdiagonal:function(n,r,i){const o=n.x,a=n.y,s=r.x,c=r.y;let l=i&&i.x!=null?i.x:o,u=i&&i.y!=null?i.y:a,f=s-o<0?-1:1,h=c-a<0?-1:1,g=35,d=Math.abs(s-o)/2<g?Math.abs(s-o)/2:g;d=Math.abs(c-a)/2<d?Math.abs(c-a)/2:d;let m=Math.abs(s-o)/2-d;return`
                          M ${l} ${u}
                          L ${l} ${a}
                          L ${o} ${a}
                          L ${o+m*f} ${a}
                          C ${o+m*f+d*f} ${a} 
                            ${o+m*f+d*f} ${a} 
                            ${o+m*f+d*f} ${a+d*h}
                          L ${o+m*f+d*f} ${c-d*h} 
                          C ${o+m*f+d*f}  ${c} 
                            ${o+m*f+d*f}  ${c} 
                            ${s-m*f}  ${c}
                          L ${s} ${c}
               `},diagonal:function(n,r,i,o={sy:0}){const a=n.x;let s=n.y;const c=r.x,l=r.y;let u=i&&i.x!=null?i.x:a,f=i&&i.y!=null?i.y:s,h=c-a<0?-1:1,g=l-s<0?-1:1;s+=o.sy;let d=35,m=Math.abs(c-a)/2<d?Math.abs(c-a)/2:d;m=Math.abs(l-s)/2<m?Math.abs(l-s)/2:m;let w=Math.abs(l-s)/2-m,C=Math.abs(c-a)-m*2;return`
                          M ${u} ${f}
                          L ${a} ${f}
                          L ${a} ${s}
                          L ${a} ${s+w*g}
                          C  ${a} ${s+w*g+m*g} ${a} ${s+w*g+m*g} ${a+m*h} ${s+w*g+m*g}
                          L ${a+C*h+m*h} ${s+w*g+m*g}
                          C  ${c}  ${s+w*g+m*g} ${c}  ${s+w*g+m*g} ${c} ${l-w*g}
                          L ${c} ${l}
               `},defs:function(n,r){return`<defs>
                    ${r.map(i=>{const o=this.getTextWidth(i.label,{ctx:n.ctx,fontSize:2,defaultFont:n.defaultFont});return`
                       <marker id="${i.from+"_"+i.to}" refX="${i._source.x<i._target.x?-7:7}" refY="5" markerWidth="500"  markerHeight="500"  orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <rect rx=0.5 width=${i.label?o+3:0} height=3 y=1  fill="#E27396"></rect>
                       <text font-size="2px" x=1 fill="white" y=3>${i.label||""}</text>
                       </marker>

                       <marker id="arrow-${i.from+"_"+i.to}"  markerWidth="500"  markerHeight="500"  refY="2"  refX="1" orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <path transform="translate(0)" d='M0,0 V4 L2,2 Z' fill='#E27396' />
                       </marker>
                    `}).join("")}
                    </defs>
                    `},connectionsUpdate:function(n,r,i){Q.select(this).attr("stroke",o=>"#E27396").attr("stroke-linecap","round").attr("stroke-width",o=>"5").attr("pointer-events","none").attr("marker-start",o=>`url(#${o.from+"_"+o.to})`).attr("marker-end",o=>`url(#arrow-${o.from+"_"+o.to})`)},linkGroupArc:Q.linkHorizontal().x(n=>n.x).y(n=>n.y),layoutBindings:{left:{nodeLeftX:n=>0,nodeRightX:n=>n.width,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x+n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x+n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkCompactXStart:n=>n.x+n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,linkParentX:n=>n.parent.x+n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>n.width,buttonY:n=>n.height/2,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${r},${i}) scale(${o})`,compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n},${r-o/2})`},top:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>0,nodeBottomY:n=>n.height,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y+n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y+n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y+n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y+n.parent.height,buttonX:n=>n.width/2,buttonY:n=>n.height,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${a},${r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s,compactViewIndex:c})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r})`},bottom:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>-n.height,nodeBottomY:n=>0,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y-n.height-n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y-n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y-n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,linkX:n=>n.x,linkY:n=>n.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y-n.parent.height,buttonX:n=>n.width/2,buttonY:n=>0,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartHeight:s})=>`translate(${a},${s-r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{n.y=-n.y},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r-o})`},right:{nodeLeftX:n=>-n.width,nodeRightX:n=>0,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x-n.width-n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x-n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x-n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>0,buttonY:n=>n.height/2,linkCompactXStart:n=>n.x-n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartWidth:s})=>`translate(${s-r},${i}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=-n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i},${r-o/2})`}}};this.getChartState=()=>e,Object.keys(e).forEach(n=>{this[n]=function(r){if(arguments.length)e[n]=r;else return e[n];return this}}),this.initializeEnterExitUpdatePattern()}initializeEnterExitUpdatePattern(){Q.selection.prototype.patternify=function(e){var n=this,r=e.selector,i=e.tag,o=e.data||[r],a=n.selectAll("."+r).data(o,(s,c)=>typeof s=="object"&&s.id?s.id:c);return a.exit().remove(),a=a.enter().append(i).merge(a),a.attr("class",r),a}}getNodeChildren({data:e,children:n,_children:r},i){return i.push(e),n&&n.forEach(o=>{this.getNodeChildren(o,i)}),r&&r.forEach(o=>{this.getNodeChildren(o,i)}),i}initialZoom(e){const n=this.getChartState();return n.lastTransform.k=e,this}render(){const e=this.getChartState();if(!e.data||e.data.length==0)return console.log("ORG CHART - Data is empty"),e.container&&(it(e.container).select(".nodes-wrapper").remove(),it(e.container).select(".links-wrapper").remove(),it(e.container).select(".connections-wrapper").remove()),this;const n=Q.select(e.container),r=n.node().getBoundingClientRect();r.width>0&&(e.svgWidth=r.width);const i={id:`ID${Math.floor(Math.random()*1e6)}`,chartWidth:e.svgWidth,chartHeight:e.svgHeight};if(e.calc=i,i.centerX=i.chartWidth/2,i.centerY=i.chartHeight/2,e.firstDraw){const s={zoom:null};s.zoom=e.createZoom().clickDistance(10).on("start",(c,l)=>e.onZoomStart(c)).on("end",(c,l)=>e.onZoomEnd(c)).on("zoom",(c,l)=>{e.onZoom(c),this.zoomed(c,l)}).scaleExtent(e.scaleExtent),e.zoomBehavior=s.zoom}e.flexTreeLayout=gr({nodeSize:s=>{const c=e.nodeWidth(s),l=e.nodeHeight(s),u=e.siblingsMargin(s),f=e.childrenMargin(s);return e.layoutBindings[e.layout].nodeFlexSize({state:e,node:s,width:c,height:l,siblingsMargin:u,childrenMargin:f})}}).spacing((s,c)=>s.parent==c.parent?0:e.neighbourMargin(s,c)),this.setLayouts({expandNodesFirst:!1});const o=n.patternify({tag:"svg",selector:"svg-chart-container"}).attr("width",e.svgWidth).attr("height",e.svgHeight).attr("font-family",e.defaultFont);e.firstDraw&&o.call(e.zoomBehavior).on("dblclick.zoom",null).attr("cursor","move"),e.svg=o;const a=o.patternify({tag:"g",selector:"chart"});return e.centerG=a.patternify({tag:"g",selector:"center-group"}),e.linksWrapper=e.centerG.patternify({tag:"g",selector:"links-wrapper"}),e.nodesWrapper=e.centerG.patternify({tag:"g",selector:"nodes-wrapper"}),e.connectionsWrapper=e.centerG.patternify({tag:"g",selector:"connections-wrapper"}),e.defsWrapper=o.patternify({tag:"g",selector:"defs-wrapper"}),e.firstDraw&&e.centerG.attr("transform",()=>e.layoutBindings[e.layout].centerTransform({centerX:i.centerX,centerY:i.centerY,scale:e.lastTransform.k,rootMargin:e.rootMargin,root:e.root,chartHeight:i.chartHeight,chartWidth:i.chartWidth})),e.chart=a,this.update(e.root),Q.select(window).on(`resize.${e.id}`,()=>{const s=Q.select(e.container).node().getBoundingClientRect();e.svg.attr("width",s.width)}),e.firstDraw&&(e.firstDraw=!1),this}addNode(e){const n=this.getChartState();if(e&&(n.parentNodeId(e)==null||n.parentNodeId(e)==n.nodeId(e))&&n.data.length==0)return n.data.push(e),this.render(),this;const i=n.generateRoot(n.data).descendants(),o=i.filter(({data:a})=>n.nodeId(a).toString()===n.nodeId(e).toString())[0];return i.filter(({data:a})=>n.nodeId(a).toString()===n.parentNodeId(e).toString())[0],o?(console.log(`ORG CHART - ADD - Node with id "${n.nodeId(e)}" already exists in tree`),this):(e._centered&&!e._expanded&&(e._expanded=!0),n.data.push(e),this.updateNodesState(),this)}removeNode(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s)==e)[0];return o?(o.descendants().forEach(s=>s.data._filteredOut=!0),n.data=n.data.filter(s=>!s._filteredOut),n.data.length==0?this.render():this.updateNodesState.bind(this)(),this):(console.log(`ORG CHART - REMOVE - Node with id "${e}" not found in the tree`),this)}groupBy(e,n,r){const i={};return e.forEach(o=>{const a=n(o);i[a]||(i[a]=[]),i[a].push(o)}),Object.keys(i).forEach(o=>{i[o]=r(i[o])}),Object.entries(i)}calculateCompactFlexDimensions(e){const n=this.getChartState();e.eachBefore(r=>{r.firstCompact=null,r.compactEven=null,r.flexCompactDim=null,r.firstCompactNode=null}),e.eachBefore(r=>{if(r.children&&r.children.length>1){const i=r.children.filter(u=>!u.children);if(i.length<2)return;i.forEach((u,f)=>{f||(u.firstCompact=!0),f%2?u.compactEven=!1:u.compactEven=!0,u.row=Math.floor(f/2)});const o=Q.max(i.filter(u=>u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),a=Q.max(i.filter(u=>!u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),s=Math.max(o,a)*2,c=this.groupBy(i,u=>u.row,u=>Q.max(u,f=>n.layoutBindings[n.layout].compactDimension.sizeRow(f)+n.compactMarginBetween(f))),l=Q.sum(c.map(u=>u[1]));i.forEach(u=>{u.firstCompactNode=i[0],u.firstCompact?u.flexCompactDim=[s+n.compactMarginPair(u),l-n.compactMarginBetween(u)]:u.flexCompactDim=[0,0]}),r.flexCompactDim=null}})}calculateCompactFlexPositions(e){const n=this.getChartState();e.eachBefore(r=>{if(r.children){const i=r.children.filter(u=>u.flexCompactDim),o=i[0];if(!o)return;i.forEach((u,f,h)=>{f==0&&(o.x-=o.flexCompactDim[0]/2),f&f%2-1?u.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(u)/4:f&&(u.x=o.x+o.flexCompactDim[0]*.75+n.compactMarginPair(u)/4)});const a=o.x+o.flexCompactDim[0]*.5;o.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(o)/4;const s=r.x-a;Math.abs(s)<10&&i.forEach(u=>u.x+=s);const c=this.groupBy(i,u=>u.row,u=>Q.max(u,f=>n.layoutBindings[n.layout].compactDimension.sizeRow(f))),l=Q.cumsum(c.map(u=>u[1]+n.compactMarginBetween(u)));i.forEach((u,f)=>{u.row?u.y=o.y+l[u.row-1]:u.y=o.y})}})}update({x0:e,y0:n,x:r=0,y:i=0,width:o,height:a}){const s=this.getChartState();s.calc,s.compact&&this.calculateCompactFlexDimensions(s.root);const c=s.flexTreeLayout(s.root);s.compact&&this.calculateCompactFlexPositions(s.root);const l=c.descendants(),u=c.descendants().slice(1);l.forEach(s.layoutBindings[s.layout].swap);const f=s.connections,h={};s.allNodes.forEach(p=>h[s.nodeId(p.data)]=p);const g={};l.forEach(p=>g[s.nodeId(p.data)]=p),f.forEach(p=>{const v=h[p.from],S=h[p.to];p._source=v,p._target=S});const d=f.filter(p=>g[p.from]&&g[p.to]),m=s.defs.bind(this)(s,d),w=s.defsWrapper.html();m!==w&&s.defsWrapper.html(m);const C=s.linksWrapper.selectAll("path.link").data(u,p=>s.nodeId(p.data)),A=C.enter().insert("path","g").attr("class","link").attr("d",p=>{const v=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),S=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),N={x:v,y:S};return s.layoutBindings[s.layout].diagonal(N,N,N)}).merge(C);A.attr("fill","none"),this.isEdge()?A.style("display",p=>p.data._pagingButton?"none":"auto"):A.attr("display",p=>p.data._pagingButton?"none":"auto"),A.each(s.linkUpdate),A.transition().duration(s.duration).attr("d",p=>{const v=s.compact&&p.flexCompactDim?{x:s.layoutBindings[s.layout].compactLinkMidX(p,s),y:s.layoutBindings[s.layout].compactLinkMidY(p,s)}:{x:s.layoutBindings[s.layout].linkX(p),y:s.layoutBindings[s.layout].linkY(p)},S={x:s.layoutBindings[s.layout].linkParentX(p),y:s.layoutBindings[s.layout].linkParentY(p)},N=s.compact&&p.flexCompactDim?{x:s.layoutBindings[s.layout].linkCompactXStart(p),y:s.layoutBindings[s.layout].linkCompactYStart(p)}:v;return s.layoutBindings[s.layout].diagonal(v,S,N,{sy:s.linkYOffset})}),C.exit().transition().duration(s.duration).attr("d",p=>{const v=s.layoutBindings[s.layout].linkJoinX({x:r,y:i,width:o,height:a}),S=s.layoutBindings[s.layout].linkJoinY({x:r,y:i,width:o,height:a}),N={x:v,y:S};return s.layoutBindings[s.layout].diagonal(N,N,null,{sy:s.linkYOffset})}).remove();const b=s.connectionsWrapper.selectAll("path.connection").data(d),z=b.enter().insert("path","g").attr("class","connection").attr("d",p=>{const v=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),S=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),N={x:v,y:S};return s.layoutBindings[s.layout].diagonal(N,N,null,{sy:s.linkYOffset})}).merge(b);z.attr("fill","none"),z.transition().duration(s.duration).attr("d",p=>{const v=s.layoutBindings[s.layout].linkX({x:p._source.x,y:p._source.y,width:p._source.width,height:p._source.height}),S=s.layoutBindings[s.layout].linkY({x:p._source.x,y:p._source.y,width:p._source.width,height:p._source.height}),N=s.layoutBindings[s.layout].linkJoinX({x:p._target.x,y:p._target.y,width:p._target.width,height:p._target.height}),L=s.layoutBindings[s.layout].linkJoinY({x:p._target.x,y:p._target.y,width:p._target.width,height:p._target.height});return s.linkGroupArc({source:{x:v,y:S},target:{x:N,y:L}})}),z.each(s.connectionsUpdate),b.exit().transition().duration(s.duration).attr("opacity",0).remove();const _=s.nodesWrapper.selectAll("g.node").data(l,({data:p})=>s.nodeId(p)),E=_.enter().append("g").attr("class","node").attr("transform",p=>{if(p==s.root)return`translate(${e},${n})`;const v=s.layoutBindings[s.layout].nodeJoinX({x:e,y:n,width:o,height:a}),S=s.layoutBindings[s.layout].nodeJoinY({x:e,y:n,width:o,height:a});return`translate(${v},${S})`}).attr("cursor","pointer").on("click.node",(p,v)=>{const{data:S}=v;if(![...p.srcElement.classList].includes("node-button-foreign-object")){if([...p.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(v);return}if(!S._pagingButton){s.onNodeClick(v);return}console.log("event fired, no handlers")}}).on("keydown.node",(p,v)=>{const{data:S}=v;if(p.key==="Enter"||p.key===" "||p.key==="Spacebar"){if([...p.srcElement.classList].includes("node-button-foreign-object"))return;if([...p.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(v);return}(p.key==="Enter"||p.key===" "||p.key==="Spacebar")&&this.onButtonClick(p,v)}});E.each(s.nodeEnter),E.patternify({tag:"rect",selector:"node-rect",data:p=>[p]});const F=E.merge(_).style("font","12px sans-serif");F.patternify({tag:"foreignObject",selector:"node-foreign-object",data:p=>[p]}).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-foreign-object-div",data:p=>[p]}),this.restyleForeignObjectElements();const T=E.patternify({tag:"g",selector:"node-button-g",data:p=>[p]}).on("click",(p,v)=>this.onButtonClick(p,v)).on("keydown",(p,v)=>{(p.key==="Enter"||p.key===" "||p.key==="Spacebar")&&this.onButtonClick(p,v)});T.patternify({tag:"rect",selector:"node-button-rect",data:p=>[p]}).attr("opacity",0).attr("pointer-events","all").attr("width",p=>s.nodeButtonWidth(p)).attr("height",p=>s.nodeButtonHeight(p)).attr("x",p=>s.nodeButtonX(p)).attr("y",p=>s.nodeButtonY(p)),T.patternify({tag:"foreignObject",selector:"node-button-foreign-object",data:p=>[p]}).attr("width",p=>s.nodeButtonWidth(p)).attr("height",p=>s.nodeButtonHeight(p)).attr("x",p=>s.nodeButtonX(p)).attr("y",p=>s.nodeButtonY(p)).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-button-div",data:p=>[p]}).style("pointer-events","none").style("display","flex").style("width","100%").style("height","100%"),F.transition().attr("opacity",0).duration(s.duration).attr("transform",({x:p,y:v,width:S,height:N})=>s.layoutBindings[s.layout].nodeUpdateTransform({x:p,y:v,width:S,height:N})).attr("opacity",1),F.select(".node-rect").attr("width",({width:p})=>p).attr("height",({height:p})=>p).attr("x",({width:p})=>0).attr("y",({height:p})=>0).attr("cursor","pointer").attr("rx",3).attr("fill",s.nodeDefaultBackground),F.select(".node-button-g").attr("transform",({data:p,width:v,height:S})=>{const N=s.layoutBindings[s.layout].buttonX({width:v,height:S}),L=s.layoutBindings[s.layout].buttonY({width:v,height:S});return`translate(${N},${L})`}).attr("display",({data:p})=>p._directSubordinates>0?null:"none").attr("opacity",({data:p,children:v,_children:S})=>p._pagingButton?0:v||S?1:0),F.select(".node-button-foreign-object .node-button-div").html(p=>s.buttonContent({node:p,state:s})),F.select(".node-button-text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",({children:p})=>p?40:26).text(({children:p})=>p?"-":"+").attr("y",this.isEdge()?10:0),F.each(s.nodeUpdate);const W=_.exit();W.each(s.nodeExit);const G=W.data().reduce((p,v)=>p.depth<v.depth?p:v,{depth:1/0});W.attr("opacity",1).transition().duration(s.duration).attr("transform",p=>{let{x:v,y:S,width:N,height:L}=G.parent||{};const I=s.layoutBindings[s.layout].nodeJoinX({x:v,y:S,width:N,height:L}),X=s.layoutBindings[s.layout].nodeJoinY({x:v,y:S,width:N,height:L});return`translate(${I},${X})`}).on("end",function(){Q.select(this).remove()}).attr("opacity",0),l.forEach(p=>{p.x0=p.x,p.y0=p.y});const y=s.allNodes.filter(p=>p.data._centered)[0];if(y){let p=[y];y.data._centeredWithDescendants&&(s.compact?p=y.descendants().filter((v,S)=>S<7):p=y.descendants().filter((v,S,N)=>{const L=Math.round(N.length/2),I=2;return N.length%2?S>L-I&&S<L+I-1:S>L-I&&S<L+I})),y.data._centeredWithDescendants=null,y.data._centered=null,this.fit({animate:!0,scale:!1,nodes:p})}}isEdge(){return window.navigator.userAgent.includes("Edge")}hdiagonal(e,n,r,i){return this.getChartState().hdiagonal(e,n,r,i)}diagonal(e,n,r,i){return this.getChartState().diagonal(e,n,r,i)}restyleForeignObjectElements(){const e=this.getChartState();e.svg.selectAll(".node-foreign-object").attr("width",({width:n})=>n).attr("height",({height:n})=>n).attr("x",({width:n})=>0).attr("y",({height:n})=>0),e.svg.selectAll(".node-foreign-object-div").style("width",({width:n})=>`${n}px`).style("height",({height:n})=>`${n}px`).html(function(n,r,i){return n.data._pagingButton?`<div class="paging-button-wrapper"><div style="pointer-events:none">${e.pagingButton(n,r,i,e)}</div></div>`:e.nodeContent.bind(this)(n,r,i,e)})}onButtonClick(e,n){const r=this.getChartState();n.data._pagingButton||(r.setActiveNodeCentered&&(n.data._centered=!0,n.data._centeredWithDescendants=!0),n.children?(n._children=n.children,n.children=null,this.setExpansionFlagToChildren(n,!1)):(n.children=n._children,n._children=null,n.children&&n.children.forEach(({data:i})=>i._expanded=!0)),this.update(n),e.stopPropagation(),r.onExpandOrCollapse(n))}setExpansionFlagToChildren({data:e,children:n,_children:r},i){e._expanded=i,n&&n.forEach(o=>{this.setExpansionFlagToChildren(o,i)}),r&&r.forEach(o=>{this.setExpansionFlagToChildren(o,i)})}expandSomeNodes(e){if(e.data._expanded){let n=e.parent;for(;n&&n._children;)n.children=n._children,n._children=null,n=n.parent}e._children&&e._children.forEach(n=>this.expandSomeNodes(n)),e.children&&e.children.forEach(n=>this.expandSomeNodes(n))}updateNodesState(){const e=this.getChartState();this.setLayouts({expandNodesFirst:!0}),this.update(e.root)}setLayouts({expandNodesFirst:e=!0}){const n=this.getChartState();n.generateRoot=Q.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o)),n.root=n.generateRoot(n.data);const r=n.root.descendants();n.initialExpandLevel>1&&r.length>0&&(r.forEach(o=>{o.depth<=n.initialExpandLevel&&(o.data._expanded=!0)}),n.initialExpandLevel=1);const i={};n.root.descendants().filter(o=>o.children).filter(o=>!o.data._pagingStep).forEach(o=>{o.data._pagingStep=n.minPagingVisibleNodes(o)}),n.root.eachBefore((o,a)=>{o.data._directSubordinatesPaging=o.children?o.children.length:0,o.children&&o.children.forEach((s,c)=>{if(s.data._pagingButton=!1,c>o.data._pagingStep&&(i[s.id]=!0),c===o.data._pagingStep&&o.children.length-1>o.data._pagingStep&&(s.data._pagingButton=!0),i[s.parent.id]&&(i[s.id]=!0),s.data._expanded||s.data._centered||s.data._highlighted||s.data._upToTheRootHighlighted){let l=s;for(;l&&(i[l.id]||l.data._pagingButton);)i[l.id]=!1,l.data._pagingButton&&(l.data._pagingButton=!1,l.parent.children.forEach(u=>{u.data._expanded=!0,i[u.id]=!1})),l=l.parent}})}),n.root=Q.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o))(n.data.filter(o=>i[o.id]!==!0)),n.root.each((o,a,s)=>{let c=o._hierarchyHeight||o.height,l=n.nodeWidth(o),u=n.nodeHeight(o);Object.assign(o,{width:l,height:u,_hierarchyHeight:c})}),n.root.x0=0,n.root.y0=0,n.allNodes=n.root.descendants(),n.allNodes.forEach(o=>{Object.assign(o.data,{_directSubordinates:o.children?o.children.length:0,_totalSubordinates:o.descendants().length-1})}),n.root.children&&(e&&n.root.children.forEach(this.expand),n.root.children.forEach(o=>this.collapse(o)),n.initialExpandLevel==0&&(n.root._children=n.root.children,n.root.children=null),[n.root].forEach(o=>this.expandSomeNodes(o)))}collapse(e){e.children&&(e._children=e.children,e._children.forEach(n=>this.collapse(n)),e.children=null)}expand(e){e._children&&(e.children=e._children,e.children.forEach(n=>this.expand(n)),e._children=null)}zoomed(e,n){const r=this.getChartState(),i=r.chart,o=e.transform;r.lastTransform=o,i.attr("transform",o),this.isEdge()&&this.restyleForeignObjectElements()}zoomTreeBounds({x0:e,x1:n,y0:r,y1:i,params:o={animate:!0,scale:!0,onCompleted:()=>{}}}){const{centerG:a,svgWidth:s,svgHeight:c,svg:l,zoomBehavior:u,duration:f,lastTransform:h}=this.getChartState();let g=Math.min(8,.9/Math.max((n-e)/s,(i-r)/c)),d=Q.zoomIdentity.translate(s/2,c/2);d=d.scale(o.scale?g:h.k),d=d.translate(-(e+n)/2,-(r+i)/2),l.transition().duration(o.animate?f:0).call(u.transform,d),a.transition().duration(o.animate?f:0).attr("transform","translate(0,0)").on("end",function(){o.onCompleted&&o.onCompleted()})}fit({animate:e=!0,nodes:n,scale:r=!0,onCompleted:i=()=>{}}={}){const o=this.getChartState(),{root:a}=o;let s=n||a.descendants();const c=Q.min(s,h=>h.x+o.layoutBindings[o.layout].nodeLeftX(h)),l=Q.max(s,h=>h.x+o.layoutBindings[o.layout].nodeRightX(h)),u=Q.min(s,h=>h.y+o.layoutBindings[o.layout].nodeTopY(h)),f=Q.max(s,h=>h.y+o.layoutBindings[o.layout].nodeBottomY(h));return this.zoomTreeBounds({params:{animate:e,scale:r,onCompleted:i},x0:c-50,x1:l+50,y0:u-50,y1:f+50}),this}loadPagingNodes(e){const n=this.getChartState();e.data._pagingButton=!1;const r=e.parent.data._pagingStep,i=n.pagingStep(e.parent),o=r+i;e.parent.data._pagingStep=o,this.updateNodesState()}setExpanded(e,n=!0){const r=this.getChartState(),i=r.allNodes.filter(({data:o})=>r.nodeId(o)==e)[0];if(!i)return console.log(`ORG CHART - ${n?"EXPAND":"COLLAPSE"} - Node with id (${e})  not found in the tree`),this;if(i.data._expanded=n,n==!1){const o=i.parent||{descendants:()=>[]};o.descendants().filter(s=>s!=o).forEach(s=>s.data._expanded=!1)}return this}setCentered(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s).toString()==e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._centered=!0,o.data._expanded=!0,this):(console.log(`ORG CHART - CENTER - Node with id (${e}) not found in the tree`),this)}setHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._highlighted=!0,o.data._expanded=!0,o.data._centered=!0,this):(console.log(`ORG CHART - HIGHLIGHT - Node with id (${e})  not found in the tree`),this)}setUpToTheRootHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._upToTheRootHighlighted=!0,o.data._expanded=!0,o.ancestors().forEach(s=>s.data._upToTheRootHighlighted=!0),this):(console.log(`ORG CHART - HIGHLIGHTROOT - Node with id (${e}) not found in the tree`),this)}clearHighlighting(){const e=this.getChartState();return e.allNodes.forEach(n=>{n.data._highlighted=!1,n.data._upToTheRootHighlighted=!1}),this.update(e.root),this}fullscreen(e){const n=this.getChartState(),r=Q.select(e||n.container).node();Q.select(document).on("fullscreenchange."+n.id,function(i){(document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement)==r?setTimeout(a=>{n.svg.attr("height",window.innerHeight-40)},500):n.svg.attr("height",n.svgHeight)}),r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.msRequestFullscreen&&r.msRequestFullscreen()}zoomIn(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,1.3)}zoomOut(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,.78)}toDataURL(e,n){var r=new XMLHttpRequest;r.onload=function(){var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.send()}exportImg({full:e=!1,scale:n=3,onLoad:r=a=>a,save:i=!0,backgroundColor:o="#FAFAFA"}={}){const a=this,s=this.getChartState(),{svg:c,root:l}=s;let u=0;const f=c.selectAll("img");let h=f.size();const g=()=>{JSON.parse(JSON.stringify(a.lastTransform()));const d=a.duration();e&&a.fit();const{svg:m}=a.getChartState();setTimeout(w=>{a.downloadImage({node:m.node(),scale:n,isSvg:!1,backgroundColor:o,onAlreadySerialized:C=>{a.update(l)},imageName:s.imageName,onLoad:r,save:i})},e?d+10:0)};h>0?f.each(function(){a.toDataURL(this.src,d=>{this.src=d,++u==h&&g()})}):g()}exportSvg(){const{svg:e,imageName:n}=this.getChartState();return this.downloadImage({imageName:n,node:e.node(),scale:3,isSvg:!0}),this}expandAll(){const{allNodes:e,root:n,data:r}=this.getChartState();return r.forEach(i=>i._expanded=!0),this.render(),this}collapseAll(){const{allNodes:e,root:n}=this.getChartState();return e.forEach(r=>r.data._expanded=!1),this.initialExpandLevel(0),this.render(),this}downloadImage({node:e,scale:n=2,imageName:r="graph",isSvg:i=!1,save:o=!0,backgroundColor:a="#FAFAFA",onAlreadySerialized:s=l=>{},onLoad:c=l=>{}}){const l=e;function u(m,w){var C=document.createElement("a");typeof C.download=="string"?(document.body.appendChild(C),C.download=w,C.href=m,C.click(),document.body.removeChild(C)):location.replace(m)}function f(m){const w="http://www.w3.org/2000/xmlns/",C="http://www.w3.org/1999/xlink",B="http://www.w3.org/2000/svg";m=m.cloneNode(!0);const A=window.location.href+"#",b=document.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,null,!1);for(;b.nextNode();)for(const _ of b.currentNode.attributes)_.value.includes(A)&&(_.value=_.value.replace(A,"#"));return m.setAttributeNS(w,"xmlns",B),m.setAttributeNS(w,"xmlns:xlink",C),new XMLSerializer().serializeToString(m)}if(i){let m=f(l);m=`<?xml version="1.0" standalone="no"?>\r
`+m;var d="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(m);u(d,r+".svg"),s();return}const h=n,g=document.createElement("img");g.onload=function(){const m=document.createElement("canvas"),w=l.getBoundingClientRect();m.width=w.width*h,m.height=w.height*h;const C=m.getContext("2d");C.fillStyle=a,C.fillRect(0,0,w.width*h,w.height*h),C.drawImage(g,0,0,w.width*h,w.height*h);let B=m.toDataURL("image/png");c&&c(B),o&&u(B,r+".png")};var d="data:image/svg+xml; charset=utf8, "+encodeURIComponent(f(l));s(),g.src=d}getTextWidth(e,{fontSize:n=14,fontWeight:r=400,defaultFont:i="Helvetice",ctx:o}={}){return o.font=`${r||""} ${n}px ${i} `,o.measureText(e).width}clear(){const e=this.getChartState();Q.select(window).on(`resize.${e.id}`,null),e.svg&&e.svg.selectAll("*").remove()}}function Pt(t){return Array.isArray?Array.isArray(t):so(t)==="[object Array]"}function Uf(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Xf(t){return t==null?"":Uf(t)}function Bt(t){return typeof t=="string"}function io(t){return typeof t=="number"}function Hf(t){return t===!0||t===!1||qf(t)&&so(t)=="[object Boolean]"}function oo(t){return typeof t=="object"}function qf(t){return oo(t)&&t!==null}function vt(t){return t!=null}function Dn(t){return!t.trim().length}function so(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Yf="Incorrect 'index' type",jf=t=>`Invalid value for key ${t}`,Wf=t=>`Pattern length exceeds max of ${t}.`,Jf=t=>`Missing ${t} property in key`,Kf=t=>`Property 'weight' in key '${t}' must be a positive integer`,Qr=Object.prototype.hasOwnProperty;class Gf{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=ao(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ao(t){let e=null,n=null,r=null,i=1,o=null;if(Bt(t)||Pt(t))r=t,e=ti(t),n=Yn(t);else{if(!Qr.call(t,"name"))throw new Error(Jf("name"));const a=t.name;if(r=a,Qr.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Kf(a));e=ti(a),n=Yn(a),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function ti(t){return Pt(t)?t:t.split(".")}function Yn(t){return Pt(t)?t.join("."):t}function Zf(t,e){let n=[],r=!1;const i=(o,a,s)=>{if(vt(o))if(!a[s])n.push(o);else{let c=a[s];const l=o[c];if(!vt(l))return;if(s===a.length-1&&(Bt(l)||io(l)||Hf(l)))n.push(Xf(l));else if(Pt(l)){r=!0;for(let u=0,f=l.length;u<f;u+=1)i(l[u],a,s+1)}else a.length&&i(l,a,s+1)}};return i(t,Bt(e)?e.split("."):e,0),r?n:n[0]}const Qf={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},th={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},eh={location:0,threshold:.6,distance:100},nh={useExtendedSearch:!1,getFn:Zf,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var U={...th,...Qf,...eh,...nh};const rh=/[^ ]+/g;function ih(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(rh).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),s=parseFloat(Math.round(a*r)/r);return n.set(o,s),s},clear(){n.clear()}}}class mr{constructor({getFn:e=U.getFn,fieldNormWeight:n=U.fieldNormWeight}={}){this.norm=ih(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Bt(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Bt(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!vt(e)||Dn(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(vt(a)){if(Pt(a)){let s=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(vt(u))if(Bt(u)&&!Dn(u)){let f={v:u,i:l,n:this.norm.get(u)};s.push(f)}else Pt(u)&&u.forEach((f,h)=>{c.push({nestedArrIndex:h,value:f})})}r.$[o]=s}else if(Bt(a)&&!Dn(a)){let s={v:a,n:this.norm.get(a)};r.$[o]=s}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function lo(t,e,{getFn:n=U.getFn,fieldNormWeight:r=U.fieldNormWeight}={}){const i=new mr({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(ao)),i.setSources(e),i.create(),i}function oh(t,{getFn:e=U.getFn,fieldNormWeight:n=U.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new mr({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function Xe(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=U.distance,ignoreLocation:o=U.ignoreLocation}={}){const a=e/t.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}function sh(t=[],e=U.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=t.length;o<a;o+=1){let s=t[o];s&&r===-1?r=o:!s&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const Jt=32;function ah(t,e,n,{location:r=U.location,distance:i=U.distance,threshold:o=U.threshold,findAllMatches:a=U.findAllMatches,minMatchCharLength:s=U.minMatchCharLength,includeMatches:c=U.includeMatches,ignoreLocation:l=U.ignoreLocation}={}){if(e.length>Jt)throw new Error(Wf(Jt));const u=e.length,f=t.length,h=Math.max(0,Math.min(r,f));let g=o,d=h;const m=s>1||c,w=m?Array(f):[];let C;for(;(C=t.indexOf(e,d))>-1;){let _=Xe(e,{currentLocation:C,expectedLocation:h,distance:i,ignoreLocation:l});if(g=Math.min(_,g),d=C+u,m){let E=0;for(;E<u;)w[C+E]=1,E+=1}}d=-1;let B=[],A=1,b=u+f;const O=1<<u-1;for(let _=0;_<u;_+=1){let E=0,F=b;for(;E<F;)Xe(e,{errors:_,currentLocation:h+F,expectedLocation:h,distance:i,ignoreLocation:l})<=g?E=F:b=F,F=Math.floor((b-E)/2+E);b=F;let k=Math.max(1,h-F+1),T=a?f:Math.min(h+F,f)+u,W=Array(T+2);W[T+1]=(1<<_)-1;for(let y=T;y>=k;y-=1){let p=y-1,v=n[t.charAt(p)];if(m&&(w[p]=+!!v),W[y]=(W[y+1]<<1|1)&v,_&&(W[y]|=(B[y+1]|B[y])<<1|1|B[y+1]),W[y]&O&&(A=Xe(e,{errors:_,currentLocation:p,expectedLocation:h,distance:i,ignoreLocation:l}),A<=g)){if(g=A,d=p,d<=h)break;k=Math.max(1,2*h-d)}}if(Xe(e,{errors:_+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:l})>g)break;B=W}const z={isMatch:d>=0,score:Math.max(.001,A)};if(m){const _=sh(w,s);_.length?c&&(z.indices=_):z.isMatch=!1}return z}function lh(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const fn=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class uo{constructor(e,{location:n=U.location,threshold:r=U.threshold,distance:i=U.distance,includeMatches:o=U.includeMatches,findAllMatches:a=U.findAllMatches,minMatchCharLength:s=U.minMatchCharLength,isCaseSensitive:c=U.isCaseSensitive,ignoreDiacritics:l=U.ignoreDiacritics,ignoreLocation:u=U.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u},e=c?e:e.toLowerCase(),e=l?fn(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const f=(g,d)=>{this.chunks.push({pattern:g,alphabet:lh(g),startIndex:d})},h=this.pattern.length;if(h>Jt){let g=0;const d=h%Jt,m=h-d;for(;g<m;)f(this.pattern.substr(g,Jt),g),g+=Jt;if(d){const w=h-Jt;f(this.pattern.substr(w),w)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?fn(e):e,this.pattern===e){let m={isMatch:!0,score:0};return i&&(m.indices=[[0,e.length-1]]),m}const{location:o,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],h=0,g=!1;this.chunks.forEach(({pattern:m,alphabet:w,startIndex:C})=>{const{isMatch:B,score:A,indices:b}=ah(e,m,w,{location:o+C,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});B&&(g=!0),h+=A,B&&b&&(f=[...f,...b])});let d={isMatch:g,score:g?h/this.chunks.length:1};return g&&i&&(d.indices=f),d}}class Ht{constructor(e){this.pattern=e}static isMultiMatch(e){return ei(e,this.multiRegex)}static isSingleMatch(e){return ei(e,this.singleRegex)}search(){}}function ei(t,e){const n=t.match(e);return n?n[1]:null}class uh extends Ht{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ch extends Ht{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class fh extends Ht{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class hh extends Ht{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class dh extends Ht{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ph extends Ht{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class co extends Ht{constructor(e,{location:n=U.location,threshold:r=U.threshold,distance:i=U.distance,includeMatches:o=U.includeMatches,findAllMatches:a=U.findAllMatches,minMatchCharLength:s=U.minMatchCharLength,isCaseSensitive:c=U.isCaseSensitive,ignoreDiacritics:l=U.ignoreDiacritics,ignoreLocation:u=U.ignoreLocation}={}){super(e),this._bitapSearch=new uo(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class fo extends Ht{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const jn=[uh,fo,fh,hh,ph,dh,ch,co],ni=jn.length,gh=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,mh="|";function yh(t,e={}){return t.split(mh).map(n=>{let r=n.trim().split(gh).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=r.length;o<a;o+=1){const s=r[o];let c=!1,l=-1;for(;!c&&++l<ni;){const u=jn[l];let f=u.isMultiMatch(s);f&&(i.push(new u(f,e)),c=!0)}if(!c)for(l=-1;++l<ni;){const u=jn[l];let f=u.isSingleMatch(s);if(f){i.push(new u(f,e));break}}}return i})}const vh=new Set([co.type,fo.type]);class wh{constructor(e,{isCaseSensitive:n=U.isCaseSensitive,ignoreDiacritics:r=U.ignoreDiacritics,includeMatches:i=U.includeMatches,minMatchCharLength:o=U.minMatchCharLength,ignoreLocation:a=U.ignoreLocation,findAllMatches:s=U.findAllMatches,location:c=U.location,threshold:l=U.threshold,distance:u=U.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:s,ignoreLocation:a,location:c,threshold:l,distance:u},e=n?e:e.toLowerCase(),e=r?fn(e):e,this.pattern=e,this.query=yh(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?fn(e):e;let a=0,s=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];s.length=0,a=0;for(let h=0,g=f.length;h<g;h+=1){const d=f[h],{isMatch:m,indices:w,score:C}=d.search(e);if(m){if(a+=1,c+=C,r){const B=d.constructor.type;vh.has(B)?s=[...s,...w]:s.push(w)}}else{c=0,a=0,s.length=0;break}}if(a){let h={isMatch:!0,score:c/a};return r&&(h.indices=s),h}}return{isMatch:!1,score:1}}}const Wn=[];function xh(...t){Wn.push(...t)}function Jn(t,e){for(let n=0,r=Wn.length;n<r;n+=1){let i=Wn[n];if(i.condition(t,e))return new i(t,e)}return new uo(t,e)}const hn={AND:"$and",OR:"$or"},Kn={PATH:"$path",PATTERN:"$val"},Gn=t=>!!(t[hn.AND]||t[hn.OR]),_h=t=>!!t[Kn.PATH],bh=t=>!Pt(t)&&oo(t)&&!Gn(t),ri=t=>({[hn.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function ho(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const a=_h(i);if(!a&&o.length>1&&!Gn(i))return r(ri(i));if(bh(i)){const c=a?i[Kn.PATH]:o[0],l=a?i[Kn.PATTERN]:i[c];if(!Bt(l))throw new Error(jf(c));const u={keyId:Yn(c),pattern:l};return n&&(u.searcher=Jn(l,e)),u}let s={children:[],operator:o[0]};return o.forEach(c=>{const l=i[c];Pt(l)&&l.forEach(u=>{s.children.push(r(u))})}),s};return Gn(t)||(t=ri(t)),r(t)}function Ch(t,{ignoreFieldNorm:e=U.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:a})=>{const s=i?i.weight:null;r*=Math.pow(a===0&&s?Number.EPSILON:a,(s||1)*(e?1:o))}),n.score=r})}function Eh(t,e){const n=t.matches;e.matches=[],vt(n)&&n.forEach(r=>{if(!vt(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let a={indices:i,value:o};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function Sh(t,e){e.score=t.score}function Ah(t,e,{includeMatches:n=U.includeMatches,includeScore:r=U.includeScore}={}){const i=[];return n&&i.push(Eh),r&&i.push(Sh),t.map(o=>{const{idx:a}=o,s={item:e[a],refIndex:a};return i.length&&i.forEach(c=>{c(o,s)}),s})}class oe{constructor(e,n={},r){this.options={...U,...n},this.options.useExtendedSearch,this._keyStore=new Gf(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof mr))throw new Error(Yf);this._myIndex=n||lo(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){vt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:s}=this.options;let c=Bt(e)?Bt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ch(c,{ignoreFieldNorm:s}),o&&c.sort(a),io(n)&&n>-1&&(c=c.slice(0,n)),Ah(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Jn(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:a,n:s})=>{if(!vt(o))return;const{isMatch:c,score:l,indices:u}=n.searchIn(o);c&&i.push({item:o,idx:a,matches:[{score:l,value:o,norm:s,indices:u}]})}),i}_searchLogical(e){const n=ho(e,this.options),r=(s,c,l)=>{if(!s.children){const{keyId:f,searcher:h}=s,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:h});return g&&g.length?[{idx:l,item:c,matches:g}]:[]}const u=[];for(let f=0,h=s.children.length;f<h;f+=1){const g=s.children[f],d=r(g,c,l);if(d.length)u.push(...d);else if(s.operator===hn.AND)return[]}return u},i=this._myIndex.records,o={},a=[];return i.forEach(({$:s,i:c})=>{if(vt(s)){let l=r(n,s,c);l.length&&(o[c]||(o[c]={idx:c,item:s,matches:[]},a.push(o[c])),l.forEach(({matches:u})=>{o[c].matches.push(...u)}))}}),a}_searchObjectList(e){const n=Jn(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:s})=>{if(!vt(a))return;let c=[];r.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:n}))}),c.length&&o.push({idx:s,item:a,matches:c})}),o}_findMatches({key:e,value:n,searcher:r}){if(!vt(n))return[];let i=[];if(Pt(n))n.forEach(({v:o,i:a,n:s})=>{if(!vt(o))return;const{isMatch:c,score:l,indices:u}=r.searchIn(o);c&&i.push({score:l,key:e,value:o,idx:a,norm:s,indices:u})});else{const{v:o,n:a}=n,{isMatch:s,score:c,indices:l}=r.searchIn(o);s&&i.push({score:c,key:e,value:o,norm:a,indices:l})}return i}}oe.version="7.1.0";oe.createIndex=lo;oe.parseIndex=oh;oe.config=U;oe.parseQuery=ho;xh(wh);const kh={style:{"block-size":"100%"}},po={__name:"SelectUserDialog",props:{isDialogVisible:{type:Boolean,required:!0},users:{type:Array,required:!0},selectedUsers:{type:Array,required:!0}},emits:["update:isDialogVisible","selectUser"],setup(t,{emit:e}){const n=t,r=e,i=Yt(null),o=K(null),{theme:a}=gs();function s(d){i.value=d.api,i.value.setGridOption("rowData",u())}const c=K([{headerName:"ÙØ­Ù Ú©Ø§Ø±",field:"workplace",rowGroup:!0,hide:!0},{headerName:"ÙÙØ·ÙÙ Ú©Ø§Ø±Û",field:"workArea",rowGroup:!0,hide:!0},{headerName:"ÙØ±Ú©Ø² ÙØ²ÛÙÙ",field:"costCenter",rowGroup:!0,hide:!0},{headerName:"Ú©Ø¯ Ù¾Ø±Ø³ÙÙÛ",field:"personnelCode"},{headerName:"ÙØ§Ù",field:"firstName"},{headerName:"ÙØ§Ù Ø®Ø§ÙÙØ§Ø¯Ú¯Û",field:"lastName"},{headerName:"ÙØ¶Ø¹ÛØª",field:"active",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:d=>d.value===1?"ÙØ¹Ø§Ù":"ØºÛØ±ÙØ¹Ø§Ù"}}]),l=K({mode:"multiRow",enableClickSelection:!0,selectAll:"filtered",groupSelects:"filteredDescendants"});function u(){return n.users.map(d=>{var m,w,C,B,A,b;return{id:d.id,personnelCode:Number.parseInt(d.personnel_code),firstName:d.first_name,lastName:d.last_name,workplace:(w=(m=d.profile)==null?void 0:m.workplace)==null?void 0:w.name,workArea:(B=(C=d.profile)==null?void 0:C.work_area)==null?void 0:B.name,costCenter:(b=(A=d.profile)==null?void 0:A.cost_center)==null?void 0:b.name,active:d.active}})}const f=K({filter:"agGroupColumnFilter"});function h(){r("selectUser",i.value.getSelectedRows().map(d=>Number.parseInt(d.id))),r("update:isDialogVisible",!1)}function g(d){r("update:isDialogVisible",d)}return Ot(()=>n.isDialogVisible,d=>{d&&(o.value={rowSelection:n.selectedUsers.map(m=>String(m.id))})}),(d,m)=>{const w=rr,C=xi("AgGridVue");return Dt(),Ce(sr,{width:d.$vuetify.display.smAndDown?"auto":"90%",height:d.$vuetify.display.smAndDown?"auto":"90%","model-value":n.isDialogVisible,"onUpdate:modelValue":g},{default:V(()=>[M(w,{onClick:m[0]||(m[0]=B=>g(!1))}),M(te,null,{default:V(()=>[M(Ct,null,{default:V(()=>[M(ir,{style:{"block-size":"100%"},class:"d-flex flex-column"},{default:V(()=>[M(ms,{class:"ma-3"},{default:V(()=>[...m[1]||(m[1]=[_t(" Ø§ÙØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±Ø§Ù ",-1)])]),_:1}),M(or,null,{default:V(()=>[xt("section",kh,[M(C,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":P(c),"get-row-id":B=>String(B.data.id),"enable-rtl":"",pagination:"","group-display-type":"multipleColumns","auto-group-column-def":P(f),"cell-selection":"","row-selection":P(l),theme:P(a),"initial-state":P(o),onGridReady:s},null,8,["column-defs","get-row-id","auto-group-column-def","row-selection","theme","initial-state"])])]),_:1}),M(ys,null,{default:V(()=>[M(zt,{color:"primary",onClick:h},{default:V(()=>[...m[2]||(m[2]=[_t(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","height","model-value"])}}},$h={__name:"AddNodeDialog",props:{isDialogVisible:{type:Boolean,required:!0},orgPositions:{type:Array,required:!0},orgUnits:{type:Array,required:!0},users:{type:Array,required:!0}},emits:["add","update:isDialogVisible"],setup(t,{emit:e}){const n=t,r=e,i="https://blureen.afgc.ir/storage",o=K(),a=tn({isSelectUserDialogOpen:!1}),s=K(n.orgUnits),c=K(null),l=K(null),u=K([]),f=K(""),h=ft(()=>{const _=n.users.map(E=>{var F,k,T,W,G,y,p,v;return{...E,full_name:d([E.first_name,E.last_name]),work_area_cost_center:d([(k=(F=E.profile)==null?void 0:F.work_area)==null?void 0:k.name,(W=(T=E.profile)==null?void 0:T.cost_center)==null?void 0:W.name]),last_name_work_area_cost_center:d([E.last_name,(y=(G=E.profile)==null?void 0:G.work_area)==null?void 0:y.name,(v=(p=E.profile)==null?void 0:p.cost_center)==null?void 0:v.name])}});return new oe(_,{keys:[{name:"personnel_code",weight:2},{name:"full_name",weight:1.5},{name:"work_area_cost_center",weight:1.5},{name:"last_name_work_area_cost_center",weight:1.5}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,includeScore:!0,findAllMatches:!0,minMatchCharLength:1})}),g=ft(()=>{var F;const _=(F=f.value)==null?void 0:F.trim();return _?h.value.search(_).map(k=>k.item):n.users});function d(_){return _.filter(Boolean).join(" ").replace(/[\s\u200C]+/g,"")}function m(_){return(_||"").toString().replace(/[\s\u200C]+/g,"")}function w(_){_.key==="Backspace"&&!f.value&&_.stopPropagation()}function C(_){if(typeof _!="string")return;if(!_.trim()){l.value=null;return}const E=s.value.find(F=>m(F.name)===m(_));E&&(l.value=E)}function B(_){u.value=u.value.filter(E=>E.id!==_)}function A(_){u.value=n.users.filter(E=>_.includes(E.id))}function b(){var _;(_=o.value)==null||_.validate().then(({valid:E})=>{if(E){if(typeof l.value=="string"){const F=l.value.trim();l.value={id:`${Date.now()}-${Math.random()}`,name:F},s.value.push(l.value)}r("add",{orgPosition:c.value,orgUnit:l.value,users:u.value}),r("update:isDialogVisible",!1)}})}function O(){r("update:isDialogVisible",!1)}function z(_){r("update:isDialogVisible",_)}return Ot(()=>n.isDialogVisible,_=>{_||(c.value=null,l.value=null,u.value=[],f.value="")}),(_,E)=>{const F=rr;return Dt(),Ee(Xt,null,[M(sr,{width:_.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":z},{default:V(()=>[M(F,{onClick:E[0]||(E[0]=k=>z(!1))}),M(ir,{class:"pa-1"},{default:V(()=>[M(or,null,{default:V(()=>[E[10]||(E[10]=xt("h6",{class:"text-h6 text-center mb-6"}," Ø§ÙØ²ÙØ¯Ù Ú¯Ø±Ù Ø¬Ø¯ÛØ¯ ",-1)),M(Ci,{ref_key:"refVForm",ref:o,"validate-on":"submit lazy",onSubmit:_i(b,["prevent"])},{default:V(()=>[M(te,null,{default:V(()=>[M(Ct,{cols:"12",md:"6"},{default:V(()=>[M(en,{modelValue:P(c),"onUpdate:modelValue":E[1]||(E[1]=k=>Ut(c)?c.value=k:null),label:"Ø³ÙØª",items:n.orgPositions,"item-title":"name","item-value":"id","return-object":"",rules:["requiredValidator"in _?_.requiredValidator:P(ae)]},null,8,["modelValue","items","rules"])]),_:1}),M(Ct,{cols:"12",md:"6"},{default:V(()=>[M(Ei,{modelValue:P(l),"onUpdate:modelValue":[E[2]||(E[2]=k=>Ut(l)?l.value=k:null),C],label:"ÙØ§Ø­Ø¯",items:P(s),"item-title":"name","item-value":"id",rules:["requiredValidator"in _?_.requiredValidator:P(ae)]},null,8,["modelValue","items","rules"])]),_:1}),M(Ct,{cols:"12"},{default:V(()=>[M(en,{modelValue:P(u),"onUpdate:modelValue":E[4]||(E[4]=k=>Ut(u)?u.value=k:null),search:P(f),"onUpdate:search":E[5]||(E[5]=k=>Ut(f)?f.value=k:null),multiple:"",items:P(g),"item-title":k=>`${k.first_name} ${k.last_name} (${k.personnel_code})`,clearable:"","item-value":"id",label:"Ú©Ø§Ø±Ø¨Ø±Ø§Ù","no-filter":!0,"return-object":"",rules:["requiredValidator"in _?_.requiredValidator:P(ae)],onKeydownCapture:w},{selection:V(()=>[...E[7]||(E[7]=[])]),item:V(({props:k,item:T})=>{var W,G,y,p,v,S,N,L,I,X,q,D,$,Y;return[M(nn,yt(k,{"prepend-avatar":`${P(i)}/${(G=(W=T==null?void 0:T.raw)==null?void 0:W.avatar)==null?void 0:G.path}`,title:`${(y=T==null?void 0:T.raw)==null?void 0:y.first_name} ${(p=T==null?void 0:T.raw)==null?void 0:p.last_name} (${(v=T==null?void 0:T.raw)==null?void 0:v.personnel_code})`,subtitle:`${((L=(N=(S=T==null?void 0:T.raw)==null?void 0:S.profile)==null?void 0:N.work_area)==null?void 0:L.name)||""} ${(q=(X=(I=T==null?void 0:T.raw)==null?void 0:I.profile)==null?void 0:X.work_area)!=null&&q.name?"â":""} ${((Y=($=(D=T==null?void 0:T.raw)==null?void 0:D.profile)==null?void 0:$.cost_center)==null?void 0:Y.name)||""}`}),null,16,["prepend-avatar","title","subtitle"])]}),append:V(()=>[M(zt,{variant:"outlined",color:"secondary",class:"border",onClick:E[3]||(E[3]=k=>P(a).isSelectUserDialogOpen=!0)},{default:V(()=>[M(Qt,{icon:"tabler-users",size:"25"})]),_:1})]),_:1},8,["modelValue","search","items","item-title","rules"])]),_:1})]),_:1}),M(te,null,{default:V(()=>[M(Ct,{cols:"12",style:{"max-block-size":"50em"},class:"overflow-auto"},{default:V(()=>[(Dt(!0),Ee(Xt,null,bi(P(u),k=>(Dt(),Ce(Qe,yt({ref_for:!0},n,{key:k.id,link:"",pill:"",closable:"",variant:"outlined",size:"x-large",class:"ml-3 mb-3","onClick:close":T=>B(k.id)}),{default:V(()=>{var T;return[M(nr,{start:"",size:"40",image:`${P(i)}/${(T=k.avatar)==null?void 0:T.path}`},null,8,["image"]),_t(" "+Se(k.first_name)+" "+Se(k.last_name),1)]}),_:2},1040,["onClick:close"]))),128))]),_:1})]),_:1}),M(te,null,{default:V(()=>[M(Ct,{cols:"12",class:"d-flex justify-center gap-4"},{default:V(()=>[M(zt,{type:"submit"},{default:V(()=>[...E[8]||(E[8]=[_t(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1}),M(zt,{color:"secondary",variant:"tonal",onClick:O},{default:V(()=>[...E[9]||(E[9]=[_t(" Ø¨Ø³ØªÙ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"]),M(po,{"is-dialog-visible":P(a).isSelectUserDialogOpen,"onUpdate:isDialogVisible":E[6]||(E[6]=k=>P(a).isSelectUserDialogOpen=k),users:n.users,"selected-users":P(u),onSelectUser:A},null,8,["is-dialog-visible","users","selected-users"])],64)}}},Rh={__name:"EditNodeDialog",props:{isDialogVisible:{type:Boolean,required:!0},orgPositions:{type:Array,required:!0},orgUnits:{type:Array,required:!0},users:{type:Array,required:!0},node:{type:Object,required:!1}},emits:["edit","update:isDialogVisible"],setup(t,{emit:e}){const n=t,r=e,i="https://blureen.afgc.ir/storage",o=K(),a=tn({isSelectUserDialogOpen:!1}),s=K(n.orgUnits),c=K(null),l=K(null),u=K([]),f=K(""),h=ft(()=>{const _=n.users.map(E=>{var F,k,T,W,G,y,p,v;return{...E,full_name:d([E.first_name,E.last_name]),work_area_cost_center:d([(k=(F=E.profile)==null?void 0:F.work_area)==null?void 0:k.name,(W=(T=E.profile)==null?void 0:T.cost_center)==null?void 0:W.name]),last_name_work_area_cost_center:d([E.last_name,(y=(G=E.profile)==null?void 0:G.work_area)==null?void 0:y.name,(v=(p=E.profile)==null?void 0:p.cost_center)==null?void 0:v.name])}});return new oe(_,{keys:[{name:"personnel_code",weight:2},{name:"full_name",weight:1.5},{name:"work_area_cost_center",weight:1.5},{name:"last_name_work_area_cost_center",weight:1.5}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,includeScore:!0,findAllMatches:!0,minMatchCharLength:1})}),g=ft(()=>{var F;const _=(F=f.value)==null?void 0:F.trim();return _?h.value.search(_).map(k=>k.item):n.users});function d(_){return _.filter(Boolean).join(" ").replace(/[\s\u200C]+/g,"")}function m(_){return(_||"").toString().replace(/[\s\u200C]+/g,"")}function w(_){_.key==="Backspace"&&!f.value&&_.stopPropagation()}function C(_){if(typeof _!="string")return;if(!_.trim()){l.value=null;return}const E=s.value.find(F=>m(F.name)===m(_));E&&(l.value=E)}function B(_){u.value=u.value.filter(E=>E.id!==_)}function A(_){u.value=n.users.filter(E=>_.includes(E.id))}function b(){var _;(_=o.value)==null||_.validate().then(({valid:E})=>{if(E){if(typeof l.value=="string"){const F=l.value.trim();l.value={id:`${Date.now()}-${Math.random()}`,name:F},s.value.push(l.value)}r("edit",{id:n.node.id,parentId:n.node.parentId,orgPosition:c.value,orgUnit:l.value,users:u.value}),r("update:isDialogVisible",!1)}})}function O(){r("update:isDialogVisible",!1)}function z(_){r("update:isDialogVisible",_)}return Ot(()=>n.isDialogVisible,_=>{_&&(c.value=n.node.orgPosition,l.value=n.node.orgUnit,u.value=n.node.users,f.value="")}),(_,E)=>{const F=rr;return Dt(),Ee(Xt,null,[M(sr,{width:_.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":z},{default:V(()=>[M(F,{onClick:E[0]||(E[0]=k=>z(!1))}),M(ir,{class:"pa-1"},{default:V(()=>[M(or,null,{default:V(()=>[E[10]||(E[10]=xt("h6",{class:"text-h6 text-center mb-6"}," Ø§ÙØ²ÙØ¯Ù Ú¯Ø±Ù Ø¬Ø¯ÛØ¯ ",-1)),M(Ci,{ref_key:"refVForm",ref:o,"validate-on":"submit lazy",onSubmit:_i(b,["prevent"])},{default:V(()=>[M(te,null,{default:V(()=>[M(Ct,{cols:"12",md:"6"},{default:V(()=>[M(en,{modelValue:P(c),"onUpdate:modelValue":E[1]||(E[1]=k=>Ut(c)?c.value=k:null),label:"Ø³ÙØª",items:n.orgPositions,"item-title":"name","item-value":"id","return-object":"",rules:["requiredValidator"in _?_.requiredValidator:P(ae)]},null,8,["modelValue","items","rules"])]),_:1}),M(Ct,{cols:"12",md:"6"},{default:V(()=>[M(Ei,{modelValue:P(l),"onUpdate:modelValue":[E[2]||(E[2]=k=>Ut(l)?l.value=k:null),C],label:"ÙØ§Ø­Ø¯",items:P(s),"item-title":"name","item-value":"id",rules:["requiredValidator"in _?_.requiredValidator:P(ae)]},null,8,["modelValue","items","rules"])]),_:1}),M(Ct,{cols:"12"},{default:V(()=>[M(en,{modelValue:P(u),"onUpdate:modelValue":E[4]||(E[4]=k=>Ut(u)?u.value=k:null),search:P(f),"onUpdate:search":E[5]||(E[5]=k=>Ut(f)?f.value=k:null),multiple:"",items:P(g),"item-title":k=>`${k.first_name} ${k.last_name} (${k.personnel_code})`,clearable:"","item-value":"id",label:"Ú©Ø§Ø±Ø¨Ø±Ø§Ù","no-filter":!0,"return-object":"",rules:["requiredValidator"in _?_.requiredValidator:P(ae)],onKeydownCapture:w},{selection:V(()=>[...E[7]||(E[7]=[])]),item:V(({props:k,item:T})=>{var W,G,y,p,v,S,N,L,I,X,q,D,$,Y;return[M(nn,yt(k,{"prepend-avatar":`${P(i)}/${(G=(W=T==null?void 0:T.raw)==null?void 0:W.avatar)==null?void 0:G.path}`,title:`${(y=T==null?void 0:T.raw)==null?void 0:y.first_name} ${(p=T==null?void 0:T.raw)==null?void 0:p.last_name} (${(v=T==null?void 0:T.raw)==null?void 0:v.personnel_code})`,subtitle:`${((L=(N=(S=T==null?void 0:T.raw)==null?void 0:S.profile)==null?void 0:N.work_area)==null?void 0:L.name)||""} ${(q=(X=(I=T==null?void 0:T.raw)==null?void 0:I.profile)==null?void 0:X.work_area)!=null&&q.name?"â":""} ${((Y=($=(D=T==null?void 0:T.raw)==null?void 0:D.profile)==null?void 0:$.cost_center)==null?void 0:Y.name)||""}`}),null,16,["prepend-avatar","title","subtitle"])]}),append:V(()=>[M(zt,{variant:"outlined",color:"secondary",class:"border",onClick:E[3]||(E[3]=k=>P(a).isSelectUserDialogOpen=!0)},{default:V(()=>[M(Qt,{icon:"tabler-users",size:"25"})]),_:1})]),_:1},8,["modelValue","search","items","item-title","rules"])]),_:1})]),_:1}),M(te,null,{default:V(()=>[M(Ct,{cols:"12",style:{"max-block-size":"50em"},class:"overflow-auto"},{default:V(()=>[(Dt(!0),Ee(Xt,null,bi(P(u),k=>(Dt(),Ce(Qe,yt({ref_for:!0},n,{key:k.id,link:"",pill:"",closable:"",variant:"outlined",size:"x-large",class:"ml-3 mb-3","onClick:close":T=>B(k.id)}),{default:V(()=>{var T;return[M(nr,{start:"",size:"40",image:`${P(i)}/${(T=k.avatar)==null?void 0:T.path}`},null,8,["image"]),_t(" "+Se(k.first_name)+" "+Se(k.last_name),1)]}),_:2},1040,["onClick:close"]))),128))]),_:1})]),_:1}),M(te,null,{default:V(()=>[M(Ct,{cols:"12",class:"d-flex justify-center gap-4"},{default:V(()=>[M(zt,{type:"submit"},{default:V(()=>[...E[8]||(E[8]=[_t(" ÙÛØ±Ø§ÛØ´ ",-1)])]),_:1}),M(zt,{color:"secondary",variant:"tonal",onClick:O},{default:V(()=>[...E[9]||(E[9]=[_t(" Ø¨Ø³ØªÙ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"]),M(po,{"is-dialog-visible":P(a).isSelectUserDialogOpen,"onUpdate:isDialogVisible":E[6]||(E[6]=k=>P(a).isSelectUserDialogOpen=k),users:n.users,"selected-users":P(u),onSelectUser:A},null,8,["is-dialog-visible","users","selected-users"])],64)}}};function Bh(t){const e=Ns[t.data.orgPosition.id]||"rgb(var(--v-theme-on-secondary))";return`
    <div class="org-chart-node" style="width: ${t.width}px; height: ${t.height}px;">
      <!-- Node Card -->
      <div class="org-chart-card">
        <!-- Action Buttons -->
        <div class="org-chart-action-bar">
          <button 
            class="node-action-btn" 
            data-action="edit" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
              <path d="m15 5 4 4"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="add" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14"/>
              <path d="M5 12h14"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="delete" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18"/>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            </svg>
          </button>
        </div>
        <!-- OrgPosition (top) -->
        <div class="org-position" style="background-color: ${e};">
          ${t.data.orgPosition.name}
        </div>
        <!-- OrgUnit (middle) -->
        <div class="org-unit">
          ${t.data.orgUnit.name}
        </div>
      </div>
    </div>
  `}function go(t,e){return function(){return t.apply(e,arguments)}}const{toString:Dh}=Object.prototype,{getPrototypeOf:yr}=Object,{iterator:vn,toStringTag:mo}=Symbol,wn=(t=>e=>{const n=Dh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),At=t=>(t=t.toLowerCase(),e=>wn(e)===t),xn=t=>e=>typeof e===t,{isArray:ge}=Array,de=xn("undefined");function Ne(t){return t!==null&&!de(t)&&t.constructor!==null&&!de(t.constructor)&&dt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yo=At("ArrayBuffer");function Nh(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yo(t.buffer),e}const Th=xn("string"),dt=xn("function"),vo=xn("number"),Te=t=>t!==null&&typeof t=="object",Mh=t=>t===!0||t===!1,Ke=t=>{if(wn(t)!=="object")return!1;const e=yr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mo in t)&&!(vn in t)},Fh=t=>{if(!Te(t)||Ne(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Oh=At("Date"),Lh=At("File"),zh=At("Blob"),Ih=At("FileList"),Ph=t=>Te(t)&&dt(t.pipe),Vh=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||dt(t.append)&&((e=wn(t))==="formdata"||e==="object"&&dt(t.toString)&&t.toString()==="[object FormData]"))},Uh=At("URLSearchParams"),[Xh,Hh,qh,Yh]=["ReadableStream","Request","Response","Headers"].map(At),jh=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Me(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),ge(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Ne(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function wo(t,e){if(Ne(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Zt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xo=t=>!de(t)&&t!==Zt;function Zn(){const{caseless:t,skipUndefined:e}=xo(this)&&this||{},n={},r=(i,o)=>{const a=t&&wo(n,o)||o;Ke(n[a])&&Ke(i)?n[a]=Zn(n[a],i):Ke(i)?n[a]=Zn({},i):ge(i)?n[a]=i.slice():(!e||!de(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Me(arguments[i],r);return n}const Wh=(t,e,n,{allOwnKeys:r}={})=>(Me(e,(i,o)=>{n&&dt(i)?t[o]=go(i,n):t[o]=i},{allOwnKeys:r}),t),Jh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Kh=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Gh=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&yr(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Zh=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Qh=t=>{if(!t)return null;if(ge(t))return t;let e=t.length;if(!vo(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},td=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&yr(Uint8Array)),ed=(t,e)=>{const r=(t&&t[vn]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},nd=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},rd=At("HTMLFormElement"),id=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ii=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),od=At("RegExp"),_o=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Me(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},sd=t=>{_o(t,(e,n)=>{if(dt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(dt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ad=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return ge(t)?r(t):r(String(t).split(e)),n},ld=()=>{},ud=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function cd(t){return!!(t&&dt(t.append)&&t[mo]==="FormData"&&t[vn])}const fd=t=>{const e=new Array(10),n=(r,i)=>{if(Te(r)){if(e.indexOf(r)>=0)return;if(Ne(r))return r;if(!("toJSON"in r)){e[i]=r;const o=ge(r)?[]:{};return Me(r,(a,s)=>{const c=n(a,i+1);!de(c)&&(o[s]=c)}),e[i]=void 0,o}}return r};return n(t,0)},hd=At("AsyncFunction"),dd=t=>t&&(Te(t)||dt(t))&&dt(t.then)&&dt(t.catch),bo=((t,e)=>t?setImmediate:e?((n,r)=>(Zt.addEventListener("message",({source:i,data:o})=>{i===Zt&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Zt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",dt(Zt.postMessage)),pd=typeof queueMicrotask<"u"?queueMicrotask.bind(Zt):typeof process<"u"&&process.nextTick||bo,gd=t=>t!=null&&dt(t[vn]),x={isArray:ge,isArrayBuffer:yo,isBuffer:Ne,isFormData:Vh,isArrayBufferView:Nh,isString:Th,isNumber:vo,isBoolean:Mh,isObject:Te,isPlainObject:Ke,isEmptyObject:Fh,isReadableStream:Xh,isRequest:Hh,isResponse:qh,isHeaders:Yh,isUndefined:de,isDate:Oh,isFile:Lh,isBlob:zh,isRegExp:od,isFunction:dt,isStream:Ph,isURLSearchParams:Uh,isTypedArray:td,isFileList:Ih,forEach:Me,merge:Zn,extend:Wh,trim:jh,stripBOM:Jh,inherits:Kh,toFlatObject:Gh,kindOf:wn,kindOfTest:At,endsWith:Zh,toArray:Qh,forEachEntry:ed,matchAll:nd,isHTMLForm:rd,hasOwnProperty:ii,hasOwnProp:ii,reduceDescriptors:_o,freezeMethods:sd,toObjectSet:ad,toCamelCase:id,noop:ld,toFiniteNumber:ud,findKey:wo,global:Zt,isContextDefined:xo,isSpecCompliantForm:cd,toJSONObject:fd,isAsyncFn:hd,isThenable:dd,setImmediate:bo,asap:pd,isIterable:gd};function j(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}x.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const Co=j.prototype,Eo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Eo[t]={value:t}});Object.defineProperties(j,Eo);Object.defineProperty(Co,"isAxiosError",{value:!0});j.from=(t,e,n,r,i,o)=>{const a=Object.create(Co);x.toFlatObject(t,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const s=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return j.call(a,s,c,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",o&&Object.assign(a,o),a};const md=null;function Qn(t){return x.isPlainObject(t)||x.isArray(t)}function So(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function oi(t,e,n){return t?t.concat(e).map(function(i,o){return i=So(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function yd(t){return x.isArray(t)&&!t.some(Qn)}const vd=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function _n(t,e,n){if(!x.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=x.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!x.isUndefined(w[m])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(i))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(x.isDate(d))return d.toISOString();if(x.isBoolean(d))return d.toString();if(!c&&x.isBlob(d))throw new j("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(d)||x.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,m,w){let C=d;if(d&&!w&&typeof d=="object"){if(x.endsWith(m,"{}"))m=r?m:m.slice(0,-2),d=JSON.stringify(d);else if(x.isArray(d)&&yd(d)||(x.isFileList(d)||x.endsWith(m,"[]"))&&(C=x.toArray(d)))return m=So(m),C.forEach(function(A,b){!(x.isUndefined(A)||A===null)&&e.append(a===!0?oi([m],b,o):a===null?m:m+"[]",l(A))}),!1}return Qn(d)?!0:(e.append(oi(w,m,o),l(d)),!1)}const f=[],h=Object.assign(vd,{defaultVisitor:u,convertValue:l,isVisitable:Qn});function g(d,m){if(!x.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(d),x.forEach(d,function(C,B){(!(x.isUndefined(C)||C===null)&&i.call(e,C,x.isString(B)?B.trim():B,m,h))===!0&&g(C,m?m.concat(B):[B])}),f.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return g(t),e}function si(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function vr(t,e){this._pairs=[],t&&_n(t,this,e)}const Ao=vr.prototype;Ao.append=function(e,n){this._pairs.push([e,n])};Ao.toString=function(e){const n=e?function(r){return e.call(this,r,si)}:si;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function wd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ko(t,e,n){if(!e)return t;const r=n&&n.encode||wd;x.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=x.isURLSearchParams(e)?e.toString():new vr(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class ai{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $o={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xd=typeof URLSearchParams<"u"?URLSearchParams:vr,_d=typeof FormData<"u"?FormData:null,bd=typeof Blob<"u"?Blob:null,Cd={isBrowser:!0,classes:{URLSearchParams:xd,FormData:_d,Blob:bd},protocols:["http","https","file","blob","url","data"]},wr=typeof window<"u"&&typeof document<"u",tr=typeof navigator=="object"&&navigator||void 0,Ed=wr&&(!tr||["ReactNative","NativeScript","NS"].indexOf(tr.product)<0),Sd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ad=wr&&window.location.href||"http://localhost",kd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wr,hasStandardBrowserEnv:Ed,hasStandardBrowserWebWorkerEnv:Sd,navigator:tr,origin:Ad},Symbol.toStringTag,{value:"Module"})),ut={...kd,...Cd};function $d(t,e){return _n(t,new ut.classes.URLSearchParams,{visitor:function(n,r,i,o){return ut.isNode&&x.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function Rd(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Bd(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function Ro(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&x.isArray(i)?i.length:a,c?(x.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!x.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&x.isArray(i[a])&&(i[a]=Bd(i[a])),!s)}if(x.isFormData(t)&&x.isFunction(t.entries)){const n={};return x.forEachEntry(t,(r,i)=>{e(Rd(r),i,n,0)}),n}return null}function Dd(t,e,n){if(x.isString(t))try{return(e||JSON.parse)(t),x.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Fe={transitional:$o,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=x.isObject(e);if(o&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return i?JSON.stringify(Ro(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e)||x.isReadableStream(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $d(e,this.formSerializer).toString();if((s=x.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _n(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),Dd(e)):e}],transformResponse:[function(e){const n=this.transitional||Fe.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(x.isResponse(e)||x.isReadableStream(e))return e;if(e&&x.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(a)throw s.name==="SyntaxError"?j.from(s,j.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ut.classes.FormData,Blob:ut.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],t=>{Fe.headers[t]={}});const Nd=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Td=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&Nd[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},li=Symbol("internals");function xe(t){return t&&String(t).trim().toLowerCase()}function Ge(t){return t===!1||t==null?t:x.isArray(t)?t.map(Ge):String(t)}function Md(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Fd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Nn(t,e,n,r,i){if(x.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!x.isString(e)){if(x.isString(r))return e.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(e)}}function Od(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Ld(t,e){const n=x.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}let pt=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,c,l){const u=xe(c);if(!u)throw new Error("header name must be a non-empty string");const f=x.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Ge(s))}const a=(s,c)=>x.forEach(s,(l,u)=>o(l,u,c));if(x.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(x.isString(e)&&(e=e.trim())&&!Fd(e))a(Td(e),n);else if(x.isObject(e)&&x.isIterable(e)){let s={},c,l;for(const u of e){if(!x.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?x.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=xe(e),e){const r=x.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Md(i);if(x.isFunction(n))return n.call(this,i,r);if(x.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xe(e),e){const r=x.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Nn(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=xe(a),a){const s=x.findKey(r,a);s&&(!n||Nn(r,r[s],s,n))&&(delete r[s],i=!0)}}return x.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||Nn(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return x.forEach(this,(i,o)=>{const a=x.findKey(r,o);if(a){n[a]=Ge(i),delete n[o];return}const s=e?Od(o):String(o).trim();s!==o&&delete n[o],n[s]=Ge(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return x.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&x.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[li]=this[li]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=xe(a);r[s]||(Ld(i,a),r[s]=!0)}return x.isArray(e)?e.forEach(o):o(e),this}};pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(pt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});x.freezeMethods(pt);function Tn(t,e){const n=this||Fe,r=e||n,i=pt.from(r.headers);let o=r.data;return x.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function Bo(t){return!!(t&&t.__CANCEL__)}function me(t,e,n){j.call(this,t??"canceled",j.ERR_CANCELED,e,n),this.name="CanceledError"}x.inherits(me,j,{__CANCEL__:!0});function Do(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new j("Request failed with status code "+n.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zd(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Id(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let f=o,h=0;for(;f!==i;)h+=n[f++],f=f%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-a<e)return;const g=u&&l-u;return g?Math.round(h*1e3/g):void 0}}function Pd(t,e){let n=0,r=1e3/e,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t(...l)};return[(...l)=>{const u=Date.now(),f=u-n;f>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-f)))},()=>i&&a(i)]}const dn=(t,e,n=3)=>{let r=0;const i=Id(50,250);return Pd(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const f={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(f)},n)},ui=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},ci=t=>(...e)=>x.asap(()=>t(...e)),Vd=ut.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ut.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ut.origin),ut.navigator&&/(msie|trident)/i.test(ut.navigator.userAgent)):()=>!0,Ud=ut.hasStandardBrowserEnv?{write(t,e,n,r,i,o,a){if(typeof document>"u")return;const s=[`${t}=${encodeURIComponent(e)}`];x.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),x.isString(r)&&s.push(`path=${r}`),x.isString(i)&&s.push(`domain=${i}`),o===!0&&s.push("secure"),x.isString(a)&&s.push(`SameSite=${a}`),document.cookie=s.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Xd(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Hd(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function No(t,e,n){let r=!Xd(e);return t&&(r||n==!1)?Hd(t,e):e}const fi=t=>t instanceof pt?{...t}:t;function ie(t,e){e=e||{};const n={};function r(l,u,f,h){return x.isPlainObject(l)&&x.isPlainObject(u)?x.merge.call({caseless:h},l,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function i(l,u,f,h){if(x.isUndefined(u)){if(!x.isUndefined(l))return r(void 0,l,f,h)}else return r(l,u,f,h)}function o(l,u){if(!x.isUndefined(u))return r(void 0,u)}function a(l,u){if(x.isUndefined(u)){if(!x.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,f){if(f in e)return r(l,u);if(f in t)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,f)=>i(fi(l),fi(u),f,!0)};return x.forEach(Object.keys({...t,...e}),function(u){const f=c[u]||i,h=f(t[u],e[u],u);x.isUndefined(h)&&f!==s||(n[u]=h)}),n}const To=t=>{const e=ie({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=e;if(e.headers=a=pt.from(a),e.url=ko(No(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),x.isFormData(n)){if(ut.hasStandardBrowserEnv||ut.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(x.isFunction(n.getHeaders)){const c=n.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{l.includes(u.toLowerCase())&&a.set(u,f)})}}if(ut.hasStandardBrowserEnv&&(r&&x.isFunction(r)&&(r=r(e)),r||r!==!1&&Vd(e.url))){const c=i&&o&&Ud.read(o);c&&a.set(i,c)}return e},qd=typeof XMLHttpRequest<"u",Yd=qd&&function(t){return new Promise(function(n,r){const i=To(t);let o=i.data;const a=pt.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,f,h,g,d;function m(){g&&g(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function C(){if(!w)return;const A=pt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),O={data:!s||s==="text"||s==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:A,config:t,request:w};Do(function(_){n(_),m()},function(_){r(_),m()},O),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(r(new j("Request aborted",j.ECONNABORTED,t,w)),w=null)},w.onerror=function(b){const O=b&&b.message?b.message:"Network Error",z=new j(O,j.ERR_NETWORK,t,w);z.event=b||null,r(z),w=null},w.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||$o;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),r(new j(b,O.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,w)),w=null},o===void 0&&a.setContentType(null),"setRequestHeader"in w&&x.forEach(a.toJSON(),function(b,O){w.setRequestHeader(O,b)}),x.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),s&&s!=="json"&&(w.responseType=i.responseType),l&&([h,d]=dn(l,!0),w.addEventListener("progress",h)),c&&w.upload&&([f,g]=dn(c),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(u=A=>{w&&(r(!A||A.type?new me(null,t,w):A),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const B=zd(i.url);if(B&&ut.protocols.indexOf(B)===-1){r(new j("Unsupported protocol "+B+":",j.ERR_BAD_REQUEST,t));return}w.send(o||null)})},jd=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof j?u:new me(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,o(new j(`timeout ${e} of ms exceeded`,j.ETIMEDOUT))},e);const s=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),t=null)};t.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>x.asap(s),c}},Wd=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Jd=async function*(t,e){for await(const n of Kd(t))yield*Wd(n,e)},Kd=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},hi=(t,e,n,r)=>{const i=Jd(t,e);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let f=u.byteLength;if(n){let h=o+=f;n(h)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},di=64*1024,{isFunction:He}=x,Gd=(({Request:t,Response:e})=>({Request:t,Response:e}))(x.global),{ReadableStream:pi,TextEncoder:gi}=x.global,mi=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Zd=t=>{t=x.merge.call({skipUndefined:!0},Gd,t);const{fetch:e,Request:n,Response:r}=t,i=e?He(e):typeof fetch=="function",o=He(n),a=He(r);if(!i)return!1;const s=i&&He(pi),c=i&&(typeof gi=="function"?(d=>m=>d.encode(m))(new gi):async d=>new Uint8Array(await new n(d).arrayBuffer())),l=o&&s&&mi(()=>{let d=!1;const m=new n(ut.origin,{body:new pi,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!m}),u=a&&s&&mi(()=>x.isReadableStream(new r("").body)),f={stream:u&&(d=>d.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!f[d]&&(f[d]=(m,w)=>{let C=m&&m[d];if(C)return C.call(m);throw new j(`Response type '${d}' is not supported`,j.ERR_NOT_SUPPORT,w)})});const h=async d=>{if(d==null)return 0;if(x.isBlob(d))return d.size;if(x.isSpecCompliantForm(d))return(await new n(ut.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(x.isArrayBufferView(d)||x.isArrayBuffer(d))return d.byteLength;if(x.isURLSearchParams(d)&&(d=d+""),x.isString(d))return(await c(d)).byteLength},g=async(d,m)=>{const w=x.toFiniteNumber(d.getContentLength());return w??h(m)};return async d=>{let{url:m,method:w,data:C,signal:B,cancelToken:A,timeout:b,onDownloadProgress:O,onUploadProgress:z,responseType:_,headers:E,withCredentials:F="same-origin",fetchOptions:k}=To(d),T=e||fetch;_=_?(_+"").toLowerCase():"text";let W=jd([B,A&&A.toAbortSignal()],b),G=null;const y=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let p;try{if(z&&l&&w!=="get"&&w!=="head"&&(p=await g(E,C))!==0){let X=new n(m,{method:"POST",body:C,duplex:"half"}),q;if(x.isFormData(C)&&(q=X.headers.get("content-type"))&&E.setContentType(q),X.body){const[D,$]=ui(p,dn(ci(z)));C=hi(X.body,di,D,$)}}x.isString(F)||(F=F?"include":"omit");const v=o&&"credentials"in n.prototype,S={...k,signal:W,method:w.toUpperCase(),headers:E.normalize().toJSON(),body:C,duplex:"half",credentials:v?F:void 0};G=o&&new n(m,S);let N=await(o?T(G,k):T(m,S));const L=u&&(_==="stream"||_==="response");if(u&&(O||L&&y)){const X={};["status","statusText","headers"].forEach(Y=>{X[Y]=N[Y]});const q=x.toFiniteNumber(N.headers.get("content-length")),[D,$]=O&&ui(q,dn(ci(O),!0))||[];N=new r(hi(N.body,di,D,()=>{$&&$(),y&&y()}),X)}_=_||"text";let I=await f[x.findKey(f,_)||"text"](N,d);return!L&&y&&y(),await new Promise((X,q)=>{Do(X,q,{data:I,headers:pt.from(N.headers),status:N.status,statusText:N.statusText,config:d,request:G})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new j("Network Error",j.ERR_NETWORK,d,G),{cause:v.cause||v}):j.from(v,v&&v.code,d,G)}}},Qd=new Map,Mo=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,s=a,c,l,u=Qd;for(;s--;)c=o[s],l=u.get(c),l===void 0&&u.set(c,l=s?new Map:Zd(e)),u=l;return l};Mo();const xr={http:md,xhr:Yd,fetch:{get:Mo}};x.forEach(xr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const yi=t=>`- ${t}`,tp=t=>x.isFunction(t)||t===null||t===!1;function ep(t,e){t=x.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let s;if(i=r,!tp(r)&&(i=xr[(s=String(r)).toLowerCase()],i===void 0))throw new j(`Unknown adapter '${s}'`);if(i&&(x.isFunction(i)||(i=i.get(e))))break;o[s||"#"+a]=i}if(!i){const a=Object.entries(o).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(yi).join(`
`):" "+yi(a[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i}const Fo={getAdapter:ep,adapters:xr};function Mn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new me(null,t)}function vi(t){return Mn(t),t.headers=pt.from(t.headers),t.data=Tn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Fo.getAdapter(t.adapter||Fe.adapter,t)(t).then(function(r){return Mn(t),r.data=Tn.call(t,t.transformResponse,r),r.headers=pt.from(r.headers),r},function(r){return Bo(r)||(Mn(t),r&&r.response&&(r.response.data=Tn.call(t,t.transformResponse,r.response),r.response.headers=pt.from(r.response.headers))),Promise.reject(r)})}const Oo="1.13.2",bn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{bn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const wi={};bn.transitional=function(e,n,r){function i(o,a){return"[Axios v"+Oo+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new j(i(a," has been removed"+(n?" in "+n:"")),j.ERR_DEPRECATED);return n&&!wi[a]&&(wi[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};bn.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function np(t,e,n){if(typeof t!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],c=s===void 0||a(s,o,t);if(c!==!0)throw new j("option "+o+" must be "+c,j.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new j("Unknown option "+o,j.ERR_BAD_OPTION)}}const Ze={assertOptions:np,validators:bn},Rt=Ze.validators;let ne=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ai,response:new ai}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ie(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Ze.assertOptions(r,{silentJSONParsing:Rt.transitional(Rt.boolean),forcedJSONParsing:Rt.transitional(Rt.boolean),clarifyTimeoutError:Rt.transitional(Rt.boolean)},!1),i!=null&&(x.isFunction(i)?n.paramsSerializer={serialize:i}:Ze.assertOptions(i,{encode:Rt.function,serialize:Rt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ze.assertOptions(n,{baseUrl:Rt.spelling("baseURL"),withXsrfToken:Rt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&x.merge(o.common,o[n.method]);o&&x.forEach(["delete","get","head","post","put","patch","common"],d=>{delete o[d]}),n.headers=pt.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,s.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!c){const d=[vi.bind(this),void 0];for(d.unshift(...s),d.push(...l),h=d.length,u=Promise.resolve(n);f<h;)u=u.then(d[f++],d[f++]);return u}h=s.length;let g=n;for(;f<h;){const d=s[f++],m=s[f++];try{g=d(g)}catch(w){m.call(this,w);break}}try{u=vi.call(this,g)}catch(d){return Promise.reject(d)}for(f=0,h=l.length;f<h;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=ie(this.defaults,e);const n=No(e.baseURL,e.url,e.allowAbsoluteUrls);return ko(n,e.params,e.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(e){ne.prototype[e]=function(n,r){return this.request(ie(r||{},{method:e,url:n,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(ie(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ne.prototype[e]=n(),ne.prototype[e+"Form"]=n(!0)});let rp=class Lo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new me(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Lo(function(i){e=i}),cancel:e}}};function ip(t){return function(n){return t.apply(null,n)}}function op(t){return x.isObject(t)&&t.isAxiosError===!0}const er={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(er).forEach(([t,e])=>{er[e]=t});function zo(t){const e=new ne(t),n=go(ne.prototype.request,e);return x.extend(n,ne.prototype,e,{allOwnKeys:!0}),x.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return zo(ie(t,i))},n}const st=zo(Fe);st.Axios=ne;st.CanceledError=me;st.CancelToken=rp;st.isCancel=Bo;st.VERSION=Oo;st.toFormData=_n;st.AxiosError=j;st.Cancel=st.CanceledError;st.all=function(e){return Promise.all(e)};st.spread=ip;st.isAxiosError=op;st.mergeConfig=ie;st.AxiosHeaders=pt;st.formToJSON=t=>Ro(x.isHTMLForm(t)?new FormData(t):t);st.getAdapter=Fo.getAdapter;st.HttpStatusCode=er;st.default=st;const{Axios:Vp,AxiosError:Up,CanceledError:Xp,isCancel:Hp,CancelToken:qp,VERSION:Yp,all:jp,Cancel:Wp,isAxiosError:Jp,spread:Kp,toFormData:Gp,AxiosHeaders:Zp,HttpStatusCode:Qp,formToJSON:tg,getAdapter:eg,mergeConfig:ng}=st,Kt=st.create({baseURL:"/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});Kt.interceptors.request.use(t=>{const e=cs("accessToken").value;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Kt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&Ts(),Promise.reject(t)});const sp={class:"d-flex flex-column justify-space-between"},ap={class:"org-chart-controls"},lp={__name:"organization-chart",async setup(t){let e,n;const r=tn({hasError:!1,errorMessage:"",isDeleteNodeDialogOpen:!1,isAddNodeDialogOpen:!1,isEditNodeDialogOpen:!1}),i=tn({updateOrganizationChart:!1}),o=K([]),a=K(null),s=K(null),c=K([]),l=K([]),u=K([]),f=K(null),h=K(null),g=K(!1),d=K(null),m=K(null),w=K(0),C=K(0),B=K(!1),A=hs();Ot(()=>A.current.value.colors,async()=>{s.value&&o.value.length>0&&s.value.render()},{deep:!0});async function b(){await Kt.get("/base/org-chart-node").then(({data:{data:D}})=>{o.value=D.map($=>({id:$.id,parentId:$.parent_id,orgPosition:$.org_position,orgUnit:$.org_unit,users:$.users}))}).catch(D=>{console.error("Error fetching org chart nodes:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÚØ§Ø±Øª Ø³Ø§Ø²ÙØ§ÙÛ"})}async function O(){await Kt.get("/base/org-position").then(({data:{data:D}})=>{c.value=D.sort(($,Y)=>$.level-Y.level)}).catch(D=>{console.error("Error fetching org positions:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ø³ÙØªâÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function z(){await Kt.get("/base/org-unit").then(({data:{data:D}})=>{l.value=D}).catch(D=>{console.error("Error fetching org units:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÙØ§Ø­Ø¯ÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function _(){await Kt.get("/base/user/details").then(({data:{data:D}})=>{u.value=D}).catch(D=>{console.error("Error fetching users:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù"})}async function E(){i.updateOrganizationChart=!0;const D=s.value.getChartState();o.value=D.allNodes.map($=>$.data),await Kt.put("/base/org-chart-node/update",{orgChartNodes:o.value}).then(()=>{q()}).catch($=>{console.error("Error updating organization chart:",$),r.hasError=!0,r.errorMessage=$.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±ÙØ²Ø±Ø³Ø§ÙÛ ÚØ§Ø±Øª Ø³Ø§Ø²ÙØ§ÙÛ"}).finally(()=>{i.updateOrganizationChart=!1})}function F(){!a.value||o.value.length===0||(s.value=new Vf().container(a.value).data(o.value).nodeWidth(()=>220).nodeHeight(()=>90).childrenMargin(()=>50).compactMarginBetween(()=>35).compactMarginPair(()=>30).neighbourMargin(()=>20).siblingsMargin(()=>30).nodeContent(D=>Bh(D)).linkUpdate(function(){it(this).attr("stroke","rgb(var(--v-theme-secondary))").attr("stroke-opacity",.38).attr("stroke-width",1.5).attr("stroke-linecap","round")}).buttonContent(({node:D})=>`
        <div class="org-expand-btn">
          ${D.children?"â²":"â¼"} ${D.data._directSubordinates||""}
        </div>
      `).nodeEnter(function(){it(this).call($l().filter(function(){return g.value&&this.classList.contains("draggable")}).on("start",function(D,$){S(this,D,$)}).on("drag",function(D){N(this,D)}).on("end",function(D){L(this,D)}))}).nodeUpdate(function(D){D.parent?it(this).classed("draggable",!0):it(this).classed("draggable",!1),it(this).classed("droppable",!0)}).render(),k())}function k(){a.value&&a.value.addEventListener("click",D=>{const $=D.target.closest(".node-action-btn");if(!$)return;D.stopPropagation();const Y=$.dataset.action,J=$.dataset.nodeId;switch(Y){case"edit":T(J);break;case"add":G(J);break;case"delete":p(J);break}})}function T(D){const Y=s.value.getChartState().allNodes.find(J=>String(J.data.id)===String(D));h.value=Y.data,r.isEditNodeDialogOpen=!0}function W({id:D,parentId:$,orgPosition:Y,orgUnit:J,users:nt}){o.value=o.value.filter(ot=>String(ot.id)!==String(D)),o.value.push({id:D,parentId:$,orgPosition:Y,orgUnit:J,users:nt}),s.value.data(o.value).render()}function G(D){f.value=D,r.isAddNodeDialogOpen=!0}function y({orgPosition:D,orgUnit:$,users:Y}){s.value.addNode({id:`${Date.now()}-${Math.random()}`,parentId:f.value,orgPosition:D,orgUnit:$,users:Y})}function p(D){f.value=D,r.isDeleteNodeDialogOpen=!0}function v(){s.value.removeNode(f.value),r.isDeleteNodeDialogOpen=!1}function S(D,$,Y){d.value=Y;const nt=$.subject.width/2,ot=$.x-nt;w.value=ot,C.value=Number.parseFloat($.y),B.value=!0,it(D).classed("dragging",!0)}function N(D,$){if(!d.value)return;const Y=s.value.getChartState(),J=it(D);if(B.value){B.value=!1,a.value.classList.add("dragging-active"),J.raise();const at=$.subject.descendants(),wt=[...at||[],$.subject],Oe=at.filter(qt=>qt.data.id!==$.subject.data.id);Y.linksWrapper.selectAll("path.link").data(wt,qt=>Y.nodeId(qt)).remove(),Oe&&Y.nodesWrapper.selectAll("g.node").data(Oe,qt=>Y.nodeId(qt)).remove()}m.value=null;const nt={width:$.subject.width,height:$.subject.height,left:$.x,right:$.x+$.subject.width,top:$.y,bottom:$.y+$.subject.height,midX:$.x+$.subject.width/2,midY:$.y+$.subject.height/2},ot=bl("g.node:not(.dragging)");ot.select("rect").attr("fill","none"),ot.filter(function(at){const wt={left:at.x,right:at.x+at.width,top:at.y,bottom:at.y+at.height};if(nt.midX>wt.left&&nt.midX<wt.right&&nt.midY>wt.top&&nt.midY<wt.bottom&&this.classList.contains("droppable"))return m.value=at,at}).select("rect").attr("fill","rgba(var(--v-theme-success), 0.2)"),w.value+=Number.parseFloat($.dx),C.value+=Number.parseFloat($.dy),J.attr("transform",`translate(${w.value},${C.value})`)}function L(D,$){var ot,at;if((ot=a.value)==null||ot.classList.remove("dragging-active"),!d.value)return;if(it(D).classed("dragging",!1),!m.value){s.value.render();return}if(((at=$.subject.parent)==null?void 0:at.data.id)===m.value.data.id){s.value.render();return}if($.subject.descendants().some(wt=>wt.data.id===m.value.data.id)){s.value.render();return}it(D).remove();const J=s.value.getChartState().data,nt=J==null?void 0:J.find(wt=>String(wt.id)===String($.subject.data.id));nt.parentId=m.value.data.id,m.value=null,d.value=null,s.value.render()}function I(){var D;g.value=!0,(D=a.value)==null||D.classList.add("drag-enabled")}function X(){var D;g.value=!1,(D=a.value)==null||D.classList.remove("drag-enabled")}async function q(){b(),await z(),await Wt(),F()}return b(),O(),z(),[e,n]=ds(()=>_()),await e,n(),ps(async()=>{await Wt(),F()}),(D,$)=>{const Y=xi("IconBtn");return Dt(),Ee(Xt,null,[M(Ms,{modelValue:P(r).hasError,"onUpdate:modelValue":$[0]||($[0]=J=>P(r).hasError=J),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:V(()=>[_t(Se(P(r).errorMessage),1)]),_:1},8,["modelValue"]),xt("div",sp,[xt("div",ap,[P(g)?(Dt(),Ce(zt,{key:1,color:"success",variant:"tonal",onClick:X},{default:V(()=>[M(Qt,{start:"",icon:"tabler-check"}),$[5]||($[5]=_t(" ØªØ§ÛÛØ¯ ",-1))]),_:1})):(Dt(),Ce(zt,{key:0,color:"secondary",variant:"tonal",onClick:I},{default:V(()=>[M(Qt,{start:"",icon:"tabler-arrows-move"}),$[4]||($[4]=_t(" Ø³Ø§Ø²ÙØ§ÙØ¯ÙÛ ",-1))]),_:1}))]),xt("div",{ref_key:"orgChartRef",ref:a,class:"org-chart-container"},null,512),M(Y,{size:"x-large",variant:"elevated",color:"primary",loading:P(i).updateOrganizationChart,onClick:E},{default:V(()=>[M(Qt,{icon:"tabler-device-floppy",size:"35"})]),_:1},8,["loading"])]),M(Ho,{"is-dialog-visible":P(r).isDeleteNodeDialogOpen,"onUpdate:isDialogVisible":$[1]||($[1]=J=>P(r).isDeleteNodeDialogOpen=J),title:"Ø¢ÛØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛÙ ÙÙØ±Ø¯ Ø§Ø·ÙÛÙØ§Ù Ø¯Ø§Ø±ÛØ¯Ø",loading:!1,onConfirm:v},null,8,["is-dialog-visible"]),M($h,{"is-dialog-visible":P(r).isAddNodeDialogOpen,"onUpdate:isDialogVisible":$[2]||($[2]=J=>P(r).isAddNodeDialogOpen=J),"org-positions":P(c),"org-units":P(l),users:P(u),onAdd:y},null,8,["is-dialog-visible","org-positions","org-units","users"]),M(Rh,{"is-dialog-visible":P(r).isEditNodeDialogOpen,"onUpdate:isDialogVisible":$[3]||($[3]=J=>P(r).isEditNodeDialogOpen=J),"org-positions":P(c),"org-units":P(l),users:P(u),node:P(h),onEdit:W},null,8,["is-dialog-visible","org-positions","org-units","users","node"])],64)}}},rg=fs(lp,[["__scopeId","data-v-cfdf6a74"]]);export{rg as default};
