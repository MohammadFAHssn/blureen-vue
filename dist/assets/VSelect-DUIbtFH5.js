import{V as Ve,m as Oe}from"./VTextField-b7dtbHCX.js";import{aw as me,a6 as X,aa as Ce,w as Y,ab as pe,d as x,F as le,s as M,ad as Ae,ba as Me,a7 as j,b8 as be,r as Q,Y as H,dd as He,b9 as De,a8 as de,cc as Ne,av as Re,cN as Be,b$ as ze,aU as Ke,Z as ie,b7 as Ue,H as $e,b as I,a9 as re,J as qe,y as je,a$ as We,al as Fe,bC as Ye,bZ as we,aE as ke,bT as Ze,aq as Je,aQ as fe,aH as Qe,bH as Xe,bf as Ge,dc as Se,cT as Pe,aK as et,a1 as Te,de as tt,bA as lt,a2 as Ie,db as at,b1 as nt,v as ot}from"./index-BvJigIpw.js";import{u as ut}from"./autofocus-Bac-bm5h.js";import{e as rt,m as it,V as st,a as xe,c as ct}from"./VList-_95QQQYI.js";import{V as dt}from"./dialog-transition-E-LjJdU_.js";import{V as ft}from"./VMenu-Br-DDD0p.js";import{h as vt}from"./VOverlay-B0GUTohQ.js";import{V as mt}from"./VDivider-DGUo17xS.js";import{V as pt}from"./VCheckboxBtn-BQSQp2Wh.js";const ht=X({renderless:Boolean,...Ae()},"VVirtualScrollItem"),gt=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ht(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:d,slots:n}=s;const{resizeRef:v,contentRect:p}=Ce(void 0,"border");Y(()=>{var a;return(a=p.value)==null?void 0:a.height},a=>{a!=null&&d("update:height",a)}),pe(()=>{var a,c;return e.renderless?x(le,null,[(a=n.default)==null?void 0:a.call(n,{itemRef:v})]):x("div",M({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(c=n.default)==null?void 0:c.call(n)])})}}),yt=-1,Vt=1,ve=100,bt=X({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function wt(e,s){const l=Me(),d=j(0);be(()=>{d.value=parseFloat(e.itemHeight||0)});const n=j(0),v=j(Math.ceil((parseInt(e.height)||l.height.value)/(d.value||16))||1),p=j(0),a=j(0),c=Q(),P=Q();let i=0;const{resizeRef:U,contentRect:D}=Ce();be(()=>{U.value=c.value});const T=H(()=>{var o;return c.value===document.documentElement?l.height.value:((o=D.value)==null?void 0:o.height)||parseInt(e.height)||0}),Z=H(()=>!!(c.value&&P.value&&T.value&&d.value));let g=Array.from({length:s.value.length}),m=Array.from({length:s.value.length});const b=j(0);let C=-1;function E(o){return g[o]||d.value}const $=He(()=>{const o=performance.now();m[0]=0;const f=s.value.length;for(let w=1;w<=f;w++)m[w]=(m[w-1]||0)+E(w-1);b.value=Math.max(b.value,performance.now()-o)},b),G=Y(Z,o=>{o&&(G(),i=P.value.offsetTop,$.immediate(),N(),~C&&Re(()=>{Be&&window.requestAnimationFrame(()=>{W(C),C=-1})}))});De(()=>{$.clear()});function y(o,f){const w=g[o],A=d.value;d.value=A?Math.min(d.value,f):f,(w!==f||A!==d.value)&&(g[o]=f,$())}function L(o){o=de(o,0,s.value.length);const f=Math.floor(o),w=o%1,A=f+1,t=m[f]||0,u=m[A]||t;return t+(u-t)*w}function ae(o){return kt(m,o)}let J=0,q=0,ee=0;Y(T,(o,f)=>{f&&(N(),o<f&&requestAnimationFrame(()=>{q=0,N()}))});let _=-1;function se(){if(!c.value||!P.value)return;const o=c.value.scrollTop,f=performance.now();f-ee>500?(q=Math.sign(o-J),i=P.value.offsetTop):q=o-J,J=o,ee=f,window.clearTimeout(_),_=window.setTimeout(ne,500),N()}function ne(){!c.value||!P.value||(q=0,ee=0,window.clearTimeout(_),N())}let oe=-1;function N(){cancelAnimationFrame(oe),oe=requestAnimationFrame(ue)}function ue(){if(!c.value||!T.value||!d.value)return;const o=J-i,f=Math.sign(q),w=Math.max(0,o-ve),A=de(ae(w),0,s.value.length),t=o+T.value+ve,u=de(ae(t)+1,A+1,s.value.length);if((f!==yt||A<n.value)&&(f!==Vt||u>v.value)){const k=L(n.value)-L(A),z=L(u)-L(v.value);Math.max(k,z)>ve?(n.value=A,v.value=u):(A<=0&&(n.value=A),u>=s.value.length&&(v.value=u))}p.value=L(n.value),a.value=L(s.value.length)-L(v.value)}function W(o){const f=L(o);!c.value||o&&!f?C=o:c.value.scrollTop=f}const ce=H(()=>s.value.slice(n.value,v.value).map((o,f)=>{const w=f+n.value;return{raw:o,index:w,key:Ne(o,e.itemKey,w)}}));return Y(s,()=>{g=Array.from({length:s.value.length}),m=Array.from({length:s.value.length}),$.immediate(),N()},{deep:1}),{calculateVisibleItems:N,containerRef:c,markerRef:P,computedItems:ce,paddingTop:p,paddingBottom:a,scrollToIndex:W,handleScroll:se,handleScrollend:ne,handleItemResize:y}}function kt(e,s){let l=e.length-1,d=0,n=0,v=null,p=-1;if(e[l]<s)return l;for(;d<=l;)if(n=d+l>>1,v=e[n],v>s)l=n-1;else if(v<s)p=n,d=n+1;else return v===s?n:d;return p}const St=X({items:{type:Array,default:()=>[]},renderless:Boolean,...bt(),...Ae(),...We()},"VVirtualScroll"),Pt=me()({name:"VVirtualScroll",props:St(),setup(e,s){let{slots:l}=s;const d=ze("VVirtualScroll"),{dimensionStyles:n}=Ke(e),{calculateVisibleItems:v,containerRef:p,markerRef:a,handleScroll:c,handleScrollend:P,handleItemResize:i,scrollToIndex:U,paddingTop:D,paddingBottom:T,computedItems:Z}=wt(e,ie(()=>e.items));return Ue(()=>e.renderless,()=>{function g(){var C,E;const b=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[b]("scroll",c,{passive:!0}),document[b]("scrollend",P)):((C=p.value)==null||C[b]("scroll",c,{passive:!0}),(E=p.value)==null||E[b]("scrollend",P))}$e(()=>{p.value=vt(d.vnode.el,!0),g(!0)}),De(g)}),pe(()=>{const g=Z.value.map(m=>I(gt,{key:m.key,renderless:e.renderless,"onUpdate:height":b=>i(m.index,b)},{default:b=>{var C;return(C=l.default)==null?void 0:C.call(l,{item:m.raw,index:m.index,...b})}}));return e.renderless?x(le,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:re(D.value)}},null),g,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:re(T.value)}},null)]):x("div",{ref:p,class:je(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:P,style:qe([n.value,e.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:re(D.value),paddingBottom:re(T.value)}},[g])])}),{calculateVisibleItems:v,scrollToIndex:U}}});function Tt(e,s){const l=j(!1);let d;function n(a){cancelAnimationFrame(d),l.value=!0,d=requestAnimationFrame(()=>{d=requestAnimationFrame(()=>{l.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const c=Y(l,()=>{c(),a()})}else a()})}async function p(a){var i,U;if(a.key==="Tab"&&((i=s.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const c=(U=e.value)==null?void 0:U.$el;if(!c)return;(a.key==="Home"||a.key==="End")&&c.scrollTo({top:a.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await v();const P=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const D=c.getBoundingClientRect().top;for(const T of P)if(T.getBoundingClientRect().top>=D){T.focus();break}}else{const D=c.getBoundingClientRect().bottom;for(const T of[...P].reverse())if(T.getBoundingClientRect().bottom<=D){T.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const It=X({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function xt(e,s){const{t:l}=Fe(),d=Ye(),n=H(()=>`menu-${d}`),v=ie(()=>we(s)),p=ie(()=>n.value),a=ie(()=>l(we(s)?e.closeText:e.openText));return{menuId:n,ariaExpanded:v,ariaControls:p,ariaLabel:a}}const Ct=X({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:et,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...It(),...it({itemChildren:!1})},"Select"),At=X({...Ct(),...Ge(Oe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Xe({transition:{component:dt}})},"VSelect"),Ht=me()({name:"VSelect",props:At(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:d}=Fe(),n=Q(),v=Q(),p=Q(),{items:a,transformIn:c,transformOut:P}=rt(e),i=ke(e,"modelValue",[],t=>c(t===null?[null]:Ze(t)),t=>{const u=P(t);return e.multiple?u:u[0]??null}),U=H(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),D=Je(e),T=ut(e),Z=H(()=>i.value.map(t=>t.value)),g=j(!1);let m="",b=-1,C;const E=H(()=>e.hideSelected?a.value.filter(t=>!i.value.some(u=>(e.valueComparator||fe)(u,t))):a.value),$=H(()=>e.hideNoData&&!E.value.length||D.isReadonly.value||D.isDisabled.value),G=ke(e,"menu"),y=H({get:()=>G.value,set:t=>{var u;G.value&&!t&&((u=v.value)!=null&&u.Î¨openChildren.size)||t&&$.value||(G.value=t)}}),{menuId:L,ariaExpanded:ae,ariaControls:J,ariaLabel:q}=xt(e,y),ee=H(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),_=Q(),se=Tt(_,n);function ne(t){e.openOnClear&&(y.value=!0)}function oe(){$.value||(y.value=!y.value)}function N(t){Se(t)&&ue(t)}function ue(t){var h,F,S;if(!t.key||D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(y.value=!0),["Escape","Tab"].includes(t.key)&&(y.value=!1),t.key==="Home"?(h=_.value)==null||h.focus("first"):t.key==="End"&&((F=_.value)==null||F.focus("last"));const u=1e3;if(!Se(t))return;const k=performance.now();k-C>u&&(m="",b=-1),m+=t.key.toLowerCase(),C=k;const z=E.value;function K(){let V=r();return V||m.at(-1)===m.at(-2)&&(m=m.slice(0,-1),V=r(),V)||(b=-1,V=r(),V)?V:(m=t.key.toLowerCase(),r())}function r(){for(let V=b+1;V<z.length;V++){const te=z[V];if(te.title.toLowerCase().startsWith(m))return[te,V]}}const R=K();if(!R)return;const[B,O]=R;b=O,(S=_.value)==null||S.focus(O),e.multiple||(i.value=[B])}function W(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const k=i.value.findIndex(K=>(e.valueComparator||fe)(K.value,t.value)),z=u??!~k;if(~k){const K=z?[...i.value,t]:[...i.value];K.splice(k,1),i.value=K}else z&&(i.value=[...i.value,t])}else{const k=u!==!1;i.value=k?[t]:[],Re(()=>{y.value=!1})}}function ce(t){var u;(u=_.value)!=null&&u.$el.contains(t.relatedTarget)||(y.value=!1)}function o(){var t;e.eager&&((t=p.value)==null||t.calculateVisibleItems())}function f(){var t;g.value&&((t=n.value)==null||t.focus())}function w(t){g.value=!0}function A(t){if(t==null)i.value=[];else if(Pe(n.value,":autofill")||Pe(n.value,":-webkit-autofill")){const u=a.value.find(k=>k.title===t);u&&W(u)}else n.value&&(n.value.value="")}return Y(y,()=>{if(!e.hideSelected&&y.value&&i.value.length){const t=E.value.findIndex(u=>i.value.some(k=>(e.valueComparator||fe)(k.value,u.value)));Be&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var u;t>=0&&((u=p.value)==null||u.scrollToIndex(t))})}}),Y(a,(t,u)=>{y.value||g.value&&e.hideNoData&&!u.length&&t.length&&(y.value=!0)}),pe(()=>{const t=!!(e.chips||l.chip),u=!!(!e.hideNoData||E.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),k=i.value.length>0,z=Ve.filterProps(e),K=k||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(Ve,M({ref:n},z,{modelValue:i.value.map(r=>r.props.title).join(", "),name:void 0,"onUpdate:modelValue":A,focused:g.value,"onUpdate:focused":r=>g.value=r,validationValue:i.externalValue,counterValue:U.value,dirty:k,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:K,"onClick:clear":ne,"onMousedown:control":oe,onBlur:ce,onKeydown:ue,"aria-expanded":ae.value,"aria-controls":J.value,"aria-label":q.value,title:q.value}),{...l,default:()=>x(le,null,[x("select",{hidden:!0,multiple:e.multiple,name:T.fieldName.value},[a.value.map(r=>x("option",{key:r.value,value:r.value,selected:Z.value.includes(r.value)},null))]),I(ft,M({id:L.value,ref:v,modelValue:y.value,"onUpdate:modelValue":r=>y.value=r,activator:"parent",contentClass:"v-select__content",disabled:$.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:o,onAfterLeave:f},ee.value),{default:()=>[u&&I(st,M({ref:_,selected:Z.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:N,onFocusin:w,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},se,e.listProps),{default:()=>{var r,R,B;return[(r=l["prepend-item"])==null?void 0:r.call(l),!E.value.length&&!e.hideNoData&&(((R=l["no-data"])==null?void 0:R.call(l))??I(xe,{key:"no-data",title:d(e.noDataText)},null)),I(Pt,{ref:p,renderless:!0,items:E.value,itemKey:"value"},{default:O=>{var he,ge,ye;let{item:h,index:F,itemRef:S}=O;const V=tt(h.props),te=M(h.props,{ref:S,key:h.value,onClick:()=>W(h,null)});return h.type==="divider"?((he=l.divider)==null?void 0:he.call(l,{props:h.raw,index:F}))??I(mt,M(h.props,{key:`divider-${F}`}),null):h.type==="subheader"?((ge=l.subheader)==null?void 0:ge.call(l,{props:h.raw,index:F}))??I(ct,M(h.props,{key:`subheader-${F}`}),null):((ye=l.item)==null?void 0:ye.call(l,{item:h,index:F,props:te}))??I(xe,M(te,{role:"option"}),{prepend:Ee=>{let{isSelected:Le}=Ee;return x(le,null,[e.multiple&&!e.hideSelected?I(pt,{key:h.value,modelValue:Le,ripple:!1,tabindex:"-1",onClick:_e=>_e.preventDefault()},null):void 0,V.prependAvatar&&I(lt,{image:V.prependAvatar},null),V.prependIcon&&I(Te,{icon:V.prependIcon},null)])}})}}),(B=l["append-item"])==null?void 0:B.call(l)]}})]}),i.value.map((r,R)=>{function B(S){S.stopPropagation(),S.preventDefault(),W(r,!1)}const O=M(Ie.filterProps(r.props),{"onClick:close":B,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),B(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),h=t?!!l.chip:!!l.selection,F=h?at(t?l.chip({item:r,index:R,props:O}):l.selection({item:r,index:R})):void 0;if(!(h&&!F))return x("div",{key:r.value,class:"v-select__selection"},[t?l.chip?I(nt,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:r.title}}},{default:()=>[F]}):I(Ie,M({key:"chip",closable:e.closableChips,size:"small",text:r.title,disabled:r.props.disabled},O),null):F??x("span",{class:"v-select__selection-text"},[r.title,e.multiple&&R<i.value.length-1&&x("span",{class:"v-select__selection-comma"},[ot(",")])])])})]),"append-inner":function(){var O,h;for(var r=arguments.length,R=new Array(r),B=0;B<r;B++)R[B]=arguments[B];return x(le,null,[(O=l["append-inner"])==null?void 0:O.call(l,...R),e.menuIcon?I(Te,{class:"v-select__menu-icon",color:(h=n.value)==null?void 0:h.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Qe({isFocused:g,menu:y,select:W},n)}});export{Ht as V,Tt as a,Pt as b,Ct as m,xt as u};
