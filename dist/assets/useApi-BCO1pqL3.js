import{bh as a,cI as o,cJ as l,cK as u}from"./index-BzAndqZf.js";const n=async()=>{a("accessToken").value=null;const e=a("userData");e.value.role.includes("supplier")?await o.replace({path:"/login-supplier",query:{isRedirectedFromUnauthorizedStatus:!0}}):await o.replace({path:"/login",query:{isRedirectedFromUnauthorizedStatus:!0}}),e.value=null,a("userAbilityRules").value=null},p=l({baseUrl:"/api",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const r=a("accessToken").value;return r&&(e.headers={...e.headers,Authorization:`Bearer ${r}`}),{options:e}},afterFetch(e){const{data:r,response:t}=e;let s=null;try{s=u(r)}catch(c){console.error(c)}return{data:s,response:t}},onFetchError(e){e.response.status===401&&n();let r=null;try{r=u(e.data)}catch(t){console.error(t)}return{error:r}}}});export{p as u};
