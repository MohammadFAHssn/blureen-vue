import{u as h,V as b}from"./VLayout-CVS1ilaN.js";import{u as N}from"./useApi-DHCG5lZC.js";import{c as x}from"./createUrl-9fJanOzt.js";import{M as V,bJ as y,r as m,Y as v,c9 as g,a as w,f as C,o as k,e as c,b as d,d as A,n as r,v as E,x as M}from"./index-COPkHrml.js";import{V as G}from"./VSnackbar-DhYVrv6i.js";import"./useLogout-B6AVQfwl.js";import"./VOverlay-Cff_k3O7.js";const S={style:{"block-size":"100%"}},z={__name:"list",async setup(B){let l,n;const o=y({hasError:!1,errorMessage:""}),i=m([]),{theme:u}=h(),f=m([{headerName:"کد پرسنلی",field:"personnelCode",flex:1},{headerName:"نام",field:"firstName",flex:2},{headerName:"نام خانوادگی",field:"lastName",flex:2},{headerName:"نوع کاربر",field:"roles",flex:3,cellRenderer:"MultiValuedCell",cellStyle:{display:"flex","align-items":"center"}},{headerName:"شماره تلفن",field:"mobileNumber",flex:2}]),p=v(()=>{var a;return(a=i.value)==null?void 0:a.map(e=>{var t;return{personnelCode:Number.parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(t=e.roles)==null?void 0:t.map(s=>s.name),mobileNumber:e.mobile_number}})});async function _(){try{const{data:a,error:e}=await N(x("/base/user?fields[roles]=name&include=roles"));if(e.value)throw e.value;i.value=a.value.data}catch(a){console.error("Error fetching users:",a),o.hasError=!0,o.errorMessage="خطا در دریافت کاربران"}}return[l,n]=g(()=>_()),await l,n(),(a,e)=>{const t=w("AgGridVue");return k(),C(b,{class:"app-layout"},{default:c(()=>[d(G,{modelValue:r(o).hasError,"onUpdate:modelValue":e[0]||(e[0]=s=>r(o).hasError=s),timeout:2e3,location:"center",variant:"outlined",color:"error"},{default:c(()=>[E(M(r(o).errorMessage),1)]),_:1},8,["modelValue"]),A("section",S,[d(t,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":r(f),"row-data":r(p),"enable-rtl":"","row-numbers":"",pagination:"",theme:r(u)},null,8,["column-defs","row-data","theme"])])]),_:1})}}},Y=V(z,[["__scopeId","data-v-e62c2935"]]);export{Y as default};
