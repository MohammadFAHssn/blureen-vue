import{_ as Po}from"./AreYouSureDialog-BSqtLnNS.js";import{r as re}from"./validators-BQd4MaJQ.js";import{ax as Io,a6 as Vo,al as Uo,r as J,a7 as Ut,aA as Ho,da as Xo,aF as br,bX as qo,aq as Yo,Z as jo,Y as st,aw as Xt,w as Dt,aS as Cr,cK as Wo,ab as Jo,b as B,d as At,a1 as ve,dg as Go,F as zt,s as ht,bB as Wn,a2 as Ye,df as Ko,J as Zo,y as Qo,b3 as ts,v as $t,aJ as es,bg as ns,bT as rs,dd as Er,dm as is,a as pi,f as Jn,o as Pt,e as I,n as F,am as Jt,bJ as je,c as xe,bC as gi,bv as Lt,i as mi,x as _e,bF as os,M as ss,bl as as,bN as ls,H as us}from"./index-R5XC2zxM.js";import{_ as Gn}from"./DialogCloseBtn-C5otr7-l.js";import{u as cs}from"./useAGGridTheme-BeBChKzA.js";import{V as Gt}from"./VRow-CpItaJSS.js";import{V as vt}from"./VCol-CYTsFGTJ.js";import{V as Kn,b as fs,c as hs}from"./VCard-K9BHVGCI.js";import{V as Zn}from"./VCardText-Bg1XIWD6.js";import{V as Qn}from"./VDialog-Dv2sGniz.js";import{V as yi}from"./VForm-BeXbpVwW.js";import{V as We}from"./VAutocomplete-D44Ml0GV.js";import{u as ds,a as ps,b as gs,m as ms}from"./VSelect-DZeI5SDT.js";import{V as Sr,m as ys}from"./VTextField-5FVMriH1.js";import{u as ws,h as vs,m as xs}from"./filter-Bc-52ZuV.js";import{e as _s,t as de,V as bs,a as Je,c as Cs}from"./VList-BsUmbijy.js";import{V as Es}from"./VMenu-Cx0kP_Eg.js";import{V as Ss}from"./VDivider-C2_wMXZu.js";import{V as As}from"./VCheckboxBtn-D0M2RlAV.js";import{O as ks}from"./constants-BT0yq7SM.js";import{u as $s}from"./useLogout-ItYmr0pI.js";import{c as Rs}from"./createUrl-ngzyMJW3.js";import{V as Bs}from"./VSnackbar-CzOWhY_q.js";import"./helpers-CcX6MmOA.js";/* empty css              */import"./createSimpleFunctional-7Cpngkv3.js";import"./VOverlay-HZsPw1vt.js";import"./dialog-transition-UrFuyb7g.js";import"./autofocus-YmYg6huJ.js";import"./VCounter-CWDOCVw6.js";import"./VField-CncBcq7p.js";const Ns=Vo({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...xs({filterKeys:["title"]}),...ms({hideNoData:!0,returnObject:!0}),...ns(ys({modelValue:null,role:"combobox"}),["validationValue","dirty"])},"VCombobox"),wi=Io()({name:"VCombobox",props:Ns(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var yr;let{emit:n,slots:r}=e;const{t:i}=Uo(),o=J(),a=Ut(!1),s=Ut(!0),c=Ut(!1),l=J(),u=J(),f=Ut(-1);let d=!1;const{items:g,transformIn:p,transformOut:y}=_s(t),{textColorClasses:v,textColorStyles:_}=Ho(()=>{var k;return(k=o.value)==null?void 0:k.color}),{InputIcon:$}=Xo(t),S=br(t,"modelValue",[],k=>p(qo(k)),k=>{const X=y(k);return t.multiple?X:X[0]??null}),N=Yo(t),P=jo(()=>t.closableChips&&!N.isReadonly.value&&!N.isDisabled.value),H=st(()=>!!(t.chips||r.chip)),b=st(()=>H.value||!!r.selection),C=Ut(!t.multiple&&!b.value?((yr=S.value[0])==null?void 0:yr.title)??"":""),O=Ut(null),A=st({get:()=>C.value,set:async k=>{var X;if(C.value=k??"",k===null||k===""&&!t.multiple&&!b.value?S.value=[]:!t.multiple&&!b.value&&(S.value=[de(t,k)],Xt(()=>{var K;return(K=u.value)==null?void 0:K.scrollToIndex(0)})),k&&t.multiple&&((X=t.delimiters)!=null&&X.length)){const K=gr(k);K.length>1&&(mr(K),C.value="")}k||(f.value=-1),s.value=!k}}),M=st(()=>typeof t.counterValue=="function"?t.counterValue(S.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?S.value.length:A.value.length),{filteredItems:D,getMatches:L}=ws(t,g,()=>O.value??(t.alwaysFilter||!s.value?A.value:"")),m=st(()=>t.hideSelected&&O.value===null?D.value.filter(k=>!S.value.some(X=>X.value===k.value)):D.value),h=st(()=>t.hideNoData&&!m.value.length||N.isReadonly.value||N.isDisabled.value),w=br(t,"menu"),E=st({get:()=>w.value,set:k=>{var X;w.value&&!k&&((X=l.value)!=null&&X.Î¨openChildren.size)||k&&h.value||(w.value=k)}}),{menuId:R,ariaExpanded:T,ariaControls:z}=ds(t,E);Dt(C,k=>{d?Xt(()=>d=!1):a.value&&!E.value&&(E.value=!0),n("update:search",k)}),Dt(S,k=>{var X;!t.multiple&&!b.value&&(C.value=((X=k[0])==null?void 0:X.title)??"")});const U=st(()=>S.value.map(k=>k.value)),Y=st(()=>m.value.find(k=>k.type==="item"&&!k.props.disabled)),Q=st(()=>{var X;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&A.value===((X=Y.value)==null?void 0:X.title))&&m.value.length>0&&!s.value&&!c.value}),j=J(),tt=ps(j,o);function mt(k){d=!0,Xt(()=>d=!1),t.openOnClear&&(E.value=!0)}function ct(){h.value||(E.value=!0)}function yt(k){h.value||(a.value&&(k.preventDefault(),k.stopPropagation()),E.value=!E.value)}function he(k){var X;(Er(k)||k.key==="Backspace")&&((X=o.value)==null||X.focus())}function No(k){var Z,wt,W,ot;if(is(k)||N.isReadonly.value)return;const X=(Z=o.value)==null?void 0:Z.selectionStart,K=S.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(k.key)&&k.preventDefault(),["Enter","ArrowDown"].includes(k.key)&&(E.value=!0),["Escape"].includes(k.key)&&(E.value=!1),Q.value&&["Enter","Tab"].includes(k.key)&&Y.value&&!S.value.some(rt=>{let{value:ne}=rt;return ne===Y.value.value})&&Ct(Y.value),k.key==="ArrowDown"&&Q.value&&((wt=j.value)==null||wt.focus("next")),k.key==="Enter"&&A.value&&(Ct(de(t,A.value),!0,!0),b.value&&(C.value="")),["Backspace","Delete"].includes(k.key)){if(!t.multiple&&b.value&&S.value.length>0&&!A.value)return Ct(S.value[0],!1);if(~f.value){k.preventDefault();const rt=f.value;Ct(S.value[f.value],!1),f.value=rt>=K-1?K-2:rt}else k.key==="Backspace"&&!A.value&&(f.value=K-1);return}if(t.multiple)if(k.key==="ArrowLeft"){if(f.value<0&&X&&X>0)return;const rt=f.value>-1?f.value-1:K-1;S.value[rt]?f.value=rt:(f.value=-1,(W=o.value)==null||W.setSelectionRange(A.value.length,A.value.length))}else if(k.key==="ArrowRight"){if(f.value<0)return;const rt=f.value+1;S.value[rt]?f.value=rt:(f.value=-1,(ot=o.value)==null||ot.setSelectionRange(0,0))}else~f.value&&Er(k)&&(f.value=-1)}function Do(k){var Z;const X=((Z=k==null?void 0:k.clipboardData)==null?void 0:Z.getData("Text"))??"",K=gr(X);K.length>1&&t.multiple&&(k.preventDefault(),mr(K))}function Mo(){var k;t.eager&&((k=u.value)==null||k.calculateVisibleItems())}function To(){var k;a.value&&((k=o.value)==null||k.focus()),s.value=!0,O.value=null}function Ct(k){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!k||k.props.disabled))if(t.multiple){const Z=S.value.findIndex(W=>(t.valueComparator||Cr)(W.value,k.value)),wt=X??!~Z;if(~Z){const W=wt?[...S.value,k]:[...S.value];W.splice(Z,1),S.value=W}else wt&&(S.value=[...S.value,k]);t.clearOnSelect&&(A.value="")}else{const Z=X!==!1;S.value=Z?[k]:[],(!s.value||t.alwaysFilter)&&C.value&&(O.value=C.value),C.value=Z&&!b.value?k.title:"",Xt(()=>{E.value=K,s.value=!0})}}function gr(k){const K=[`
`,...t.delimiters??[]].map(rs).join("|");return k.split(new RegExp(`(?:${K})+`))}async function mr(k){for(let X of k)X=X.trim(),X&&(Ct(de(t,X)),await Xt())}function Oo(k){a.value=!0,setTimeout(()=>{c.value=!0})}function Fo(k){c.value=!1}return Dt(a,(k,X)=>{if(!(k||k===X)&&(f.value=-1,E.value=!1,A.value)){if(t.multiple){Ct(de(t,A.value));return}if(!b.value)return;S.value.some(K=>{let{title:Z}=K;return Z===A.value})?C.value="":Ct(de(t,A.value))}}),Dt(E,k=>{if(!t.hideSelected&&k&&S.value.length&&s.value){const X=m.value.findIndex(K=>S.value.some(Z=>(t.valueComparator||Cr)(Z.value,K.value)));Wo&&window.requestAnimationFrame(()=>{var K;X>=0&&((K=u.value)==null||K.scrollToIndex(X))})}k&&(O.value=null)}),Dt(g,(k,X)=>{E.value||a.value&&!X.length&&k.length&&(E.value=!0)}),Jo(()=>{const k=!!(!t.hideNoData||m.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),X=S.value.length>0,K=Sr.filterProps(t);return B(Sr,ht({ref:o},K,{modelValue:A.value,"onUpdate:modelValue":Z=>A.value=Z,focused:a.value,"onUpdate:focused":Z=>a.value=Z,validationValue:S.externalValue,counterValue:M.value,dirty:X,class:["v-combobox",{"v-combobox--active-menu":E.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!b.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:N.isReadonly.value,placeholder:X?void 0:t.placeholder,"onClick:clear":mt,"onMousedown:control":ct,onKeydown:No,onPaste:Do,"aria-expanded":T.value,"aria-controls":z.value}),{...r,default:Z=>{let{id:wt}=Z;return At(zt,null,[B(Es,ht({id:R.value,ref:l,modelValue:E.value,"onUpdate:modelValue":W=>E.value=W,activator:"parent",contentClass:"v-combobox__content",disabled:h.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Mo,onAfterLeave:To},t.menuProps),{default:()=>[k&&B(bs,ht({ref:j,filterable:!0,selected:U.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:W=>W.preventDefault(),selectable:!0,onKeydown:he,onFocusin:Oo,onFocusout:Fo,tabindex:"-1","aria-live":"polite","aria-labelledby":`${wt.value}-label`,"aria-multiselectable":t.multiple,color:t.itemColor??t.color},tt,t.listProps),{default:()=>{var W,ot,rt;return[(W=r["prepend-item"])==null?void 0:W.call(r),!m.value.length&&!t.hideNoData&&(((ot=r["no-data"])==null?void 0:ot.call(r))??B(Je,{key:"no-data",title:i(t.noDataText)},null)),B(gs,{ref:u,renderless:!0,items:m.value,itemKey:"value"},{default:ne=>{var vr,xr,_r;let{item:et,index:Et,itemRef:ft}=ne;const wr=ht(et.props,{ref:ft,key:et.value,active:Q.value&&et===Y.value?!0:void 0,onClick:()=>Ct(et,null),"aria-posinset":Et+1,"aria-setsize":m.value.length});return et.type==="divider"?((vr=r.divider)==null?void 0:vr.call(r,{props:et.raw,index:Et}))??B(Ss,ht(et.props,{key:`divider-${Et}`}),null):et.type==="subheader"?((xr=r.subheader)==null?void 0:xr.call(r,{props:et.raw,index:Et}))??B(Cs,ht(et.props,{key:`subheader-${Et}`}),null):((_r=r.item)==null?void 0:_r.call(r,{item:et,index:Et,props:wr}))??B(Je,ht(wr,{role:"option"}),{prepend:Ne=>{let{isSelected:Lo}=Ne;return At(zt,null,[t.multiple&&!t.hideSelected?B(As,{key:et.value,modelValue:Lo,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:zo=>zo.preventDefault()},null):void 0,et.props.prependAvatar&&B(Wn,{image:et.props.prependAvatar},null),et.props.prependIcon&&B(ve,{icon:et.props.prependIcon},null)])},title:()=>{var Ne;return s.value?et.title:vs("v-combobox",et.title,(Ne=L(et))==null?void 0:Ne.title)}})}}),(rt=r["append-item"])==null?void 0:rt.call(r)]}})]}),S.value.map((W,ot)=>{function rt(ft){ft.stopPropagation(),ft.preventDefault(),Ct(W,!1)}const ne=ht(Ye.filterProps(W.props),{"onClick:close":rt,onKeydown(ft){ft.key!=="Enter"&&ft.key!==" "||(ft.preventDefault(),ft.stopPropagation(),rt(ft))},onMousedown(ft){ft.preventDefault(),ft.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),et=H.value?!!r.chip:!!r.selection,Et=et?Ko(H.value?r.chip({item:W,index:ot,props:ne}):r.selection({item:W,index:ot})):void 0;if(!(et&&!Et))return At("div",{key:W.value,class:Qo(["v-combobox__selection",ot===f.value&&["v-combobox__selection--selected",v.value]]),style:Zo(ot===f.value?_.value:{})},[H.value?r.chip?B(ts,{key:"chip-defaults",defaults:{VChip:{closable:P.value,size:"small",text:W.title}}},{default:()=>[Et]}):B(Ye,ht({key:"chip",closable:P.value,size:"small",text:W.title,disabled:W.props.disabled},ne),null):Et??At("span",{class:"v-combobox__selection-text"},[W.title,t.multiple&&ot<S.value.length-1&&At("span",{class:"v-combobox__selection-comma"},[$t(",")])])])})])},"append-inner":function(){var ot,rt;for(var Z=arguments.length,wt=new Array(Z),W=0;W<Z;W++)wt[W]=arguments[W];return At(zt,null,[(ot=r["append-inner"])==null?void 0:ot.call(r,...wt),(!t.hideNoData||t.items.length)&&t.menuIcon?B(ve,{class:"v-combobox__menu-icon",color:(rt=o.value)==null?void 0:rt.fieldIconColor,icon:t.menuIcon,onMousedown:yt,onClick:Go,"aria-hidden":!0,tabindex:"-1"},null):void 0,t.appendInnerIcon&&B($,{key:"append-icon",name:"appendInner",color:wt[0].iconColor.value},null)])}})}),es({isFocused:a,isPristine:s,menu:E,search:A,selectionIndex:f,filteredItems:D,select:Ct},o)}});function Ds(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Ms(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ts(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Os(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var Fs={value:()=>{}};function tr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ze(n)}function ze(t){this._=t}function Ls(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ze.prototype=tr.prototype={constructor:ze,on:function(t,e){var n=this._,r=Ls(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=zs(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Ar(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ar(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ze(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function zs(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ar(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Fs,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var An="http://www.w3.org/1999/xhtml";const kr={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),kr.hasOwnProperty(e)?{space:kr[e],local:t}:t}function Ps(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===An&&e.documentElement.namespaceURI===An?e.createElement(t):e.createElementNS(n,t)}}function Is(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function vi(t){var e=an(t);return(e.local?Is:Ps)(e)}function Vs(){}function er(t){return t==null?Vs:function(){return this.querySelector(t)}}function Us(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new pt(r,this._parents)}function Hs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Xs(){return[]}function xi(t){return t==null?Xs:function(){return this.querySelectorAll(t)}}function qs(t){return function(){return Hs(t.apply(this,arguments))}}function Ys(t){typeof t=="function"?t=qs(t):t=xi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new pt(r,i)}function _i(t){return function(){return this.matches(t)}}function bi(t){return function(e){return e.matches(t)}}var js=Array.prototype.find;function Ws(t){return function(){return js.call(this.children,t)}}function Js(){return this.firstElementChild}function Gs(t){return this.select(t==null?Js:Ws(typeof t=="function"?t:bi(t)))}var Ks=Array.prototype.filter;function Zs(){return Array.from(this.children)}function Qs(t){return function(){return Ks.call(this.children,t)}}function ta(t){return this.selectAll(t==null?Zs:Qs(typeof t=="function"?t:bi(t)))}function ea(t){typeof t!="function"&&(t=_i(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new pt(r,this._parents)}function Ci(t){return new Array(t.length)}function na(){return new pt(this._enter||this._groups.map(Ci),this._parents)}function Ge(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ge.prototype={constructor:Ge,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ra(t){return function(){return t}}function ia(t,e,n,r,i,o){for(var a=0,s,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ge(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function oa(t,e,n,r,i,o,a){var s,c,l=new Map,u=e.length,f=o.length,d=new Array(u),g;for(s=0;s<u;++s)(c=e[s])&&(d[s]=g=a.call(c,c.__data__,s,e)+"",l.has(g)?i[s]=c:l.set(g,c));for(s=0;s<f;++s)g=a.call(t,o[s],s,o)+"",(c=l.get(g))?(r[s]=c,c.__data__=o[s],l.delete(g)):n[s]=new Ge(t,o[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(d[s])===c&&(i[s]=c)}function sa(t){return t.__data__}function aa(t,e){if(!arguments.length)return Array.from(this,sa);var n=e?oa:ia,r=this._parents,i=this._groups;typeof t!="function"&&(t=ra(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],d=f.length,g=la(t.call(u,u&&u.__data__,l,r)),p=g.length,y=s[l]=new Array(p),v=a[l]=new Array(p),_=c[l]=new Array(d);n(u,f,y,v,_,g,e);for(var $=0,S=0,N,P;$<p;++$)if(N=y[$]){for($>=S&&(S=$+1);!(P=v[S])&&++S<p;);N._next=P||null}}return a=new pt(a,r),a._enter=s,a._exit=c,a}function la(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ua(){return new pt(this._exit||this._groups.map(Ci),this._parents)}function ca(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function fa(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],f=l.length,d=s[c]=new Array(f),g,p=0;p<f;++p)(g=l[p]||u[p])&&(d[p]=g);for(;c<i;++c)s[c]=n[c];return new pt(s,this._parents)}function ha(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function da(t){t||(t=pa);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new pt(i,this._parents).order()}function pa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ga(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ma(){return Array.from(this)}function ya(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function wa(){let t=0;for(const e of this)++t;return t}function va(){return!this.node()}function xa(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function _a(t){return function(){this.removeAttribute(t)}}function ba(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ca(t,e){return function(){this.setAttribute(t,e)}}function Ea(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Sa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Aa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ka(t,e){var n=an(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ba:_a:typeof e=="function"?n.local?Aa:Sa:n.local?Ea:Ca)(n,e))}function Ei(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $a(t){return function(){this.style.removeProperty(t)}}function Ra(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ba(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Na(t,e,n){return arguments.length>1?this.each((e==null?$a:typeof e=="function"?Ba:Ra)(t,e,n??"")):oe(this.node(),t)}function oe(t,e){return t.style.getPropertyValue(e)||Ei(t).getComputedStyle(t,null).getPropertyValue(e)}function Da(t){return function(){delete this[t]}}function Ma(t,e){return function(){this[t]=e}}function Ta(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Oa(t,e){return arguments.length>1?this.each((e==null?Da:typeof e=="function"?Ta:Ma)(t,e)):this.node()[t]}function Si(t){return t.trim().split(/^|\s+/)}function nr(t){return t.classList||new Ai(t)}function Ai(t){this._node=t,this._names=Si(t.getAttribute("class")||"")}Ai.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ki(t,e){for(var n=nr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $i(t,e){for(var n=nr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Fa(t){return function(){ki(this,t)}}function La(t){return function(){$i(this,t)}}function za(t,e){return function(){(e.apply(this,arguments)?ki:$i)(this,t)}}function Pa(t,e){var n=Si(t+"");if(arguments.length<2){for(var r=nr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?za:e?Fa:La)(n,e))}function Ia(){this.textContent=""}function Va(t){return function(){this.textContent=t}}function Ua(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ha(t){return arguments.length?this.each(t==null?Ia:(typeof t=="function"?Ua:Va)(t)):this.node().textContent}function Xa(){this.innerHTML=""}function qa(t){return function(){this.innerHTML=t}}function Ya(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ja(t){return arguments.length?this.each(t==null?Xa:(typeof t=="function"?Ya:qa)(t)):this.node().innerHTML}function Wa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ja(){return this.each(Wa)}function Ga(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ka(){return this.each(Ga)}function Za(t){var e=typeof t=="function"?t:vi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qa(){return null}function tl(t,e){var n=typeof t=="function"?t:vi(t),r=e==null?Qa:typeof e=="function"?e:er(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function el(){var t=this.parentNode;t&&t.removeChild(this)}function nl(){return this.each(el)}function rl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function il(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ol(t){return this.select(t?il:rl)}function sl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function al(t){return function(e){t.call(this,e,this.__data__)}}function ll(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ul(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function cl(t,e,n){return function(){var r=this.__on,i,o=al(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function fl(t,e,n){var r=ll(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?cl:ul,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Ri(t,e,n){var r=Ei(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hl(t,e){return function(){return Ri(this,t,e)}}function dl(t,e){return function(){return Ri(this,t,e.apply(this,arguments))}}function pl(t,e){return this.each((typeof e=="function"?dl:hl)(t,e))}function*gl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Bi=[null];function pt(t,e){this._groups=t,this._parents=e}function ue(){return new pt([[document.documentElement]],Bi)}function ml(){return this}pt.prototype=ue.prototype={constructor:pt,select:Us,selectAll:Ys,selectChild:Gs,selectChildren:ta,filter:ea,data:aa,enter:na,exit:ua,join:ca,merge:fa,selection:ml,order:ha,sort:da,call:ga,nodes:ma,node:ya,size:wa,empty:va,each:xa,attr:ka,style:Na,property:Oa,classed:Pa,text:Ha,html:ja,raise:Ja,lower:Ka,append:Za,insert:tl,remove:nl,clone:ol,datum:sl,on:fl,dispatch:pl,[Symbol.iterator]:gl};function gt(t){return typeof t=="string"?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],Bi)}function yl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Vt(t,e){if(t=yl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const kn={capture:!0,passive:!1};function $n(t){t.preventDefault(),t.stopImmediatePropagation()}function wl(t){var e=t.document.documentElement,n=gt(t).on("dragstart.drag",$n,kn);"onselectstart"in e?n.on("selectstart.drag",$n,kn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function vl(t,e){var n=t.document.documentElement,r=gt(t).on("dragstart.drag",null);e&&(r.on("click.drag",$n,kn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function rr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ni(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ae(){}var be=.7,Ke=1/be,ie="\\s*([+-]?\\d+)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xl=/^#([0-9a-f]{3,8})$/,_l=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),bl=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),Cl=new RegExp(`^rgba\\(${ie},${ie},${ie},${Ce}\\)$`),El=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${Ce}\\)$`),Sl=new RegExp(`^hsl\\(${Ce},${Rt},${Rt}\\)$`),Al=new RegExp(`^hsla\\(${Ce},${Rt},${Rt},${Ce}\\)$`),$r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rr(Ae,Ee,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rr,formatHex:Rr,formatHex8:kl,formatHsl:$l,formatRgb:Br,toString:Br});function Rr(){return this.rgb().formatHex()}function kl(){return this.rgb().formatHex8()}function $l(){return Di(this).formatHsl()}function Br(){return this.rgb().formatRgb()}function Ee(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nr(e):n===3?new at(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?De(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?De(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_l.exec(t))?new at(e[1],e[2],e[3],1):(e=bl.exec(t))?new at(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cl.exec(t))?De(e[1],e[2],e[3],e[4]):(e=El.exec(t))?De(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sl.exec(t))?Tr(e[1],e[2]/100,e[3]/100,1):(e=Al.exec(t))?Tr(e[1],e[2]/100,e[3]/100,e[4]):$r.hasOwnProperty(t)?Nr($r[t]):t==="transparent"?new at(NaN,NaN,NaN,0):null}function Nr(t){return new at(t>>16&255,t>>8&255,t&255,1)}function De(t,e,n,r){return r<=0&&(t=e=n=NaN),new at(t,e,n,r)}function Rl(t){return t instanceof Ae||(t=Ee(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function Rn(t,e,n,r){return arguments.length===1?Rl(t):new at(t,e,n,r??1)}function at(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rr(at,Rn,Ni(Ae,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?be:Math.pow(be,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(Kt(this.r),Kt(this.g),Kt(this.b),Ze(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dr,formatHex:Dr,formatHex8:Bl,formatRgb:Mr,toString:Mr}));function Dr(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}`}function Bl(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}${jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mr(){const t=Ze(this.opacity);return`${t===1?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${t===1?")":`, ${t})`}`}function Ze(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jt(t){return t=Kt(t),(t<16?"0":"")+t.toString(16)}function Tr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xt(t,e,n,r)}function Di(t){if(t instanceof xt)return new xt(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=Ee(t)),!t)return new xt;if(t instanceof xt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new xt(a,s,c,t.opacity)}function Nl(t,e,n,r){return arguments.length===1?Di(t):new xt(t,e,n,r??1)}function xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rr(xt,Nl,Ni(Ae,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new xt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?be:Math.pow(be,t),new xt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new at(gn(t>=240?t-240:t+120,i,r),gn(t,i,r),gn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xt(Or(this.h),Me(this.s),Me(this.l),Ze(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ze(this.opacity);return`${t===1?"hsl(":"hsla("}${Or(this.h)}, ${Me(this.s)*100}%, ${Me(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Or(t){return t=(t||0)%360,t<0?t+360:t}function Me(t){return Math.max(0,Math.min(1,t||0))}function gn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Mi=t=>()=>t;function Dl(t,e){return function(n){return t+n*e}}function Ml(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Tl(t){return(t=+t)==1?Ti:function(e,n){return n-e?Ml(e,n,t):Mi(isNaN(e)?n:e)}}function Ti(t,e){var n=e-t;return n?Dl(t,n):Mi(isNaN(t)?e:t)}const Fr=(function t(e){var n=Tl(e);function r(i,o){var a=n((i=Rn(i)).r,(o=Rn(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Ti(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r})(1);function Ft(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mn=new RegExp(Bn.source,"g");function Ol(t){return function(){return t}}function Fl(t){return function(e){return t(e)+""}}function Ll(t,e){var n=Bn.lastIndex=mn.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Bn.exec(t))&&(i=mn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Ft(r,i)})),n=mn.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?Fl(c[0].x):Ol(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}var Lr=180/Math.PI,Nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oi(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Lr,skewX:Math.atan(c)*Lr,scaleX:a,scaleY:s}}var Te;function zl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Nn:Oi(e.a,e.b,e.c,e.d,e.e,e.f)}function Pl(t){return t==null||(Te||(Te=document.createElementNS("http://www.w3.org/2000/svg","g")),Te.setAttribute("transform",t),!(t=Te.transform.baseVal.consolidate()))?Nn:(t=t.matrix,Oi(t.a,t.b,t.c,t.d,t.e,t.f))}function Fi(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,g,p){if(l!==f||u!==d){var y=g.push("translate(",null,e,null,n);p.push({i:y-4,x:Ft(l,f)},{i:y-2,x:Ft(u,d)})}else(f||d)&&g.push("translate("+f+e+d+n)}function a(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ft(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ft(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,g,p){if(l!==f||u!==d){var y=g.push(i(g)+"scale(",null,",",null,")");p.push({i:y-4,x:Ft(l,f)},{i:y-2,x:Ft(u,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),a(l.rotate,u.rotate,f,d),s(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(g){for(var p=-1,y=d.length,v;++p<y;)f[(v=d[p]).i]=v.x(g);return f.join("")}}}var Il=Fi(zl,"px, ","px)","deg)"),Vl=Fi(Pl,", ",")",")"),Ul=1e-12;function zr(t){return((t=Math.exp(t))+1/t)/2}function Hl(t){return((t=Math.exp(t))-1/t)/2}function Xl(t){return((t=Math.exp(2*t))-1)/(t+1)}const ql=(function t(e,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],f=a[1],d=a[2],g=u-s,p=f-c,y=g*g+p*p,v,_;if(y<Ul)_=Math.log(d/l)/e,v=function(b){return[s+b*g,c+b*p,l*Math.exp(e*b*_)]};else{var $=Math.sqrt(y),S=(d*d-l*l+r*y)/(2*l*n*$),N=(d*d-l*l-r*y)/(2*d*n*$),P=Math.log(Math.sqrt(S*S+1)-S),H=Math.log(Math.sqrt(N*N+1)-N);_=(H-P)/e,v=function(b){var C=b*_,O=zr(P),A=l/(n*$)*(O*Xl(e*C+P)-Hl(P));return[s+A*g,c+A*p,l*O/zr(e*C+P)]}}return v.duration=_*1e3*e/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i})(Math.SQRT2,2,4);var se=0,ye=0,pe=0,Li=1e3,Qe,we,tn=0,Qt=0,ln=0,Se=typeof performance=="object"&&performance.now?performance:Date,zi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ir(){return Qt||(zi(Yl),Qt=Se.now()+ln)}function Yl(){Qt=0}function en(){this._call=this._time=this._next=null}en.prototype=Pi.prototype={constructor:en,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ir():+n)+(e==null?0:+e),!this._next&&we!==this&&(we?we._next=this:Qe=this,we=this),this._call=t,this._time=n,Dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dn())}};function Pi(t,e,n){var r=new en;return r.restart(t,e,n),r}function jl(){ir(),++se;for(var t=Qe,e;t;)(e=Qt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--se}function Pr(){Qt=(tn=Se.now())+ln,se=ye=0;try{jl()}finally{se=0,Jl(),Qt=0}}function Wl(){var t=Se.now(),e=t-tn;e>Li&&(ln-=e,tn=t)}function Jl(){for(var t,e=Qe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qe=n);we=t,Dn(r)}function Dn(t){if(!se){ye&&(ye=clearTimeout(ye));var e=t-Qt;e>24?(t<1/0&&(ye=setTimeout(Pr,t-Se.now()-ln)),pe&&(pe=clearInterval(pe))):(pe||(tn=Se.now(),pe=setInterval(Wl,Li)),se=1,zi(Pr))}}function Ir(t,e,n){var r=new en;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Gl=tr("start","end","cancel","interrupt"),Kl=[],Ii=0,Vr=1,Mn=2,Pe=3,Ur=4,Tn=5,Ie=6;function un(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Zl(t,n,{name:e,index:r,group:i,on:Gl,tween:Kl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ii})}function or(t,e){var n=_t(t,e);if(n.state>Ii)throw new Error("too late; already scheduled");return n}function Bt(t,e){var n=_t(t,e);if(n.state>Pe)throw new Error("too late; already running");return n}function _t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Pi(o,0,n.time);function o(l){n.state=Vr,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,f,d,g;if(n.state!==Vr)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Pe)return Ir(a);g.state===Ur?(g.state=Ie,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=Ie,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Ir(function(){n.state===Pe&&(n.state=Ur,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Mn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Mn){for(n.state=Pe,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Tn,1),f=-1,d=i.length;++f<d;)i[f].call(t,u);n.state===Tn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ie,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Ve(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Mn&&r.state<Tn,r.state=Ie,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Ql(t){return this.each(function(){Ve(this,t)})}function tu(t,e){var n,r;return function(){var i=Bt(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function eu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Bt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function nu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=_t(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?tu:eu)(n,t,e))}function sr(t,e,n){var r=t._id;return t.each(function(){var i=Bt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return _t(i,r).value[e]}}function Vi(t,e){var n;return(typeof e=="number"?Ft:e instanceof Ee?Fr:(n=Ee(e))?(e=n,Fr):Ll)(t,e)}function ru(t){return function(){this.removeAttribute(t)}}function iu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ou(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function su(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function au(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function lu(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function uu(t,e){var n=an(t),r=n==="transform"?Vl:Vi;return this.attrTween(t,typeof e=="function"?(n.local?lu:au)(n,r,sr(this,"attr."+t,e)):e==null?(n.local?iu:ru)(n):(n.local?su:ou)(n,r,e))}function cu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&fu(t,o)),n}return i._value=e,i}function du(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&cu(t,o)),n}return i._value=e,i}function pu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=an(t);return this.tween(n,(r.local?hu:du)(r,e))}function gu(t,e){return function(){or(this,t).delay=+e.apply(this,arguments)}}function mu(t,e){return e=+e,function(){or(this,t).delay=e}}function yu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gu:mu)(e,t)):_t(this.node(),e).delay}function wu(t,e){return function(){Bt(this,t).duration=+e.apply(this,arguments)}}function vu(t,e){return e=+e,function(){Bt(this,t).duration=e}}function xu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?wu:vu)(e,t)):_t(this.node(),e).duration}function _u(t,e){if(typeof e!="function")throw new Error;return function(){Bt(this,t).ease=e}}function bu(t){var e=this._id;return arguments.length?this.each(_u(e,t)):_t(this.node(),e).ease}function Cu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Bt(this,t).ease=n}}function Eu(t){if(typeof t!="function")throw new Error;return this.each(Cu(this._id,t))}function Su(t){typeof t!="function"&&(t=_i(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new Tt(r,this._parents,this._name,this._id)}function Au(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],l=n[s],u=c.length,f=a[s]=new Array(u),d,g=0;g<u;++g)(d=c[g]||l[g])&&(f[g]=d);for(;s<r;++s)a[s]=e[s];return new Tt(a,this._parents,this._name,this._id)}function ku(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $u(t,e,n){var r,i,o=ku(e)?or:Bt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Ru(t,e){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(t):this.each($u(n,t,e))}function Bu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Nu(){return this.on("end.remove",Bu(this._id))}function Du(t){var e=this._name,n=this._id;typeof t!="function"&&(t=er(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,f,d=0;d<c;++d)(u=s[d])&&(f=t.call(u,u.__data__,d,s))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,un(l[d],e,n,d,l,_t(u,n)));return new Tt(o,this._parents,e,n)}function Mu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=t.call(u,u.__data__,f,c),g,p=_t(u,n),y=0,v=d.length;y<v;++y)(g=d[y])&&un(g,e,n,y,d,p);o.push(d),a.push(u)}return new Tt(o,a,e,n)}var Tu=ue.prototype.constructor;function Ou(){return new Tu(this._groups,this._parents)}function Fu(t,e){var n,r,i;return function(){var o=oe(this,t),a=(this.style.removeProperty(t),oe(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Ui(t){return function(){this.style.removeProperty(t)}}function Lu(t,e,n){var r,i=n+"",o;return function(){var a=oe(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function zu(t,e,n){var r,i,o;return function(){var a=oe(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),oe(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Pu(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=Bt(this,t),l=c.on,u=c.value[o]==null?s||(s=Ui(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Iu(t,e,n){var r=(t+="")=="transform"?Il:Vi;return e==null?this.styleTween(t,Fu(t,r)).on("end.style."+t,Ui(t)):typeof e=="function"?this.styleTween(t,zu(t,r,sr(this,"style."+t,e))).each(Pu(this._id,t)):this.styleTween(t,Lu(t,r,e),n).on("end.style."+t,null)}function Vu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Uu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Vu(t,a,n)),r}return o._value=e,o}function Hu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Uu(t,e,n??""))}function Xu(t){return function(){this.textContent=t}}function qu(t){return function(){var e=t(this);this.textContent=e??""}}function Yu(t){return this.tween("text",typeof t=="function"?qu(sr(this,"text",t)):Xu(t==null?"":t+""))}function ju(t){return function(e){this.textContent=t.call(this,e)}}function Wu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ju(i)),e}return r._value=t,r}function Ju(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wu(t))}function Gu(){for(var t=this._name,e=this._id,n=Hi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=_t(c,e);un(c,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Tt(r,this._parents,t,n)}function Ku(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=Bt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&o()})}var Zu=0;function Tt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Hi(){return++Zu}var Nt=ue.prototype;Tt.prototype={constructor:Tt,select:Du,selectAll:Mu,selectChild:Nt.selectChild,selectChildren:Nt.selectChildren,filter:Su,merge:Au,selection:Ou,transition:Gu,call:Nt.call,nodes:Nt.nodes,node:Nt.node,size:Nt.size,empty:Nt.empty,each:Nt.each,on:Ru,attr:uu,attrTween:pu,style:Iu,styleTween:Hu,text:Yu,textTween:Ju,remove:Nu,tween:nu,delay:yu,duration:xu,ease:bu,easeVarying:Eu,end:Ku,[Symbol.iterator]:Nt[Symbol.iterator]};function Qu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tc={time:null,delay:0,duration:250,ease:Qu};function ec(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nc(t){var e,n;t instanceof Tt?(e=t._id,t=t._name):(e=Hi(),(n=tc).time=ir(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&un(c,t,e,l,a,n||ec(c,e));return new Tt(r,this._parents,t,e)}ue.prototype.interrupt=Ql;ue.prototype.transition=nc;const On=Math.PI,Fn=2*On,Ht=1e-6,rc=Fn-Ht;function Xi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ic(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xi;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class oc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xi:ic(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,l=i-n,u=a-e,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Ht)if(!(Math.abs(f*c-l*u)>Ht)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,p=i-s,y=c*c+l*l,v=g*g+p*p,_=Math.sqrt(y),$=Math.sqrt(d),S=o*Math.tan((On-Math.acos((y+d-v)/(2*_*$)))/2),N=S/$,P=S/_;Math.abs(N-1)>Ht&&this._append`L${e+N*u},${n+N*f}`,this._append`A${o},${o},0,0,${+(f*g>u*p)},${this._x1=e+P*c},${this._y1=n+P*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=e+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Ht||Math.abs(this._y1-u)>Ht)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%Fn+Fn),d>rc?this._append`A${r},${r},0,1,${f},${e-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>Ht&&this._append`A${r},${r},0,${+(d>=On)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function sc(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ac(){return this.eachAfter(sc)}function lc(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function uc(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function cc(t,e){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function fc(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function hc(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function dc(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function pc(t){for(var e=this,n=gc(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function gc(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function mc(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function yc(){return Array.from(this)}function wc(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function vc(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*xc(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function qi(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Cc)):e===void 0&&(e=bc);for(var n=new ae(t),r,i=[n],o,a,s,c;r=i.pop();)if((a=e(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new ae(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Yi)}function _c(){return qi(this).eachBefore(Ec)}function bc(t){return t.children}function Cc(t){return Array.isArray(t)?t[1]:null}function Ec(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Yi(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ae(t){this.data=t,this.depth=this.height=0,this.parent=null}ae.prototype=qi.prototype={constructor:ae,count:ac,each:lc,eachAfter:cc,eachBefore:uc,find:fc,sum:hc,sort:dc,path:pc,ancestors:mc,descendants:yc,leaves:wc,links:vc,copy:_c,[Symbol.iterator]:xc};function yn(t){return t==null?null:Sc(t)}function Sc(t){if(typeof t!="function")throw new Error;return t}var Ac={depth:-1},Hr={},wn={};function kc(t){return t.id}function $c(t){return t.parentId}function Rc(){var t=kc,e=$c,n;function r(i){var o=Array.from(i),a=t,s=e,c,l,u,f,d,g,p,y,v=new Map;if(n!=null){const _=o.map((N,P)=>Bc(n(N,P,i))),$=_.map(Xr),S=new Set(_).add("");for(const N of $)S.has(N)||(S.add(N),_.push(N),$.push(Xr(N)),o.push(wn));a=(N,P)=>_[P],s=(N,P)=>$[P]}for(u=0,c=o.length;u<c;++u)l=o[u],g=o[u]=new ae(l),(p=a(l,u,i))!=null&&(p+="")&&(y=g.id=p,v.set(y,v.has(y)?Hr:g)),(p=s(l,u,i))!=null&&(p+="")&&(g.parent=p);for(u=0;u<c;++u)if(g=o[u],p=g.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===Hr)throw new Error("ambiguous: "+p);d.children?d.children.push(g):d.children=[g],g.parent=d}else{if(f)throw new Error("multiple roots");f=g}if(!f)throw new Error("no root");if(n!=null){for(;f.data===wn&&f.children.length===1;)f=f.children[0],--c;for(let _=o.length-1;_>=0&&(g=o[_],g.data===wn);--_)g.data=null}if(f.parent=Ac,f.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(Yi),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=yn(i),r):t},r.parentId=function(i){return arguments.length?(e=yn(i),r):e},r.path=function(i){return arguments.length?(n=yn(i),r):n},r}function Bc(t){t=`${t}`;let e=t.length;return Ln(t,e-1)&&!Ln(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Xr(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Ln(t,e););return t.slice(0,e)}function Ln(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function Nc(t,e){return t.parent===e.parent?1:2}function vn(t){var e=t.children;return e?e[0]:t.t}function xn(t){var e=t.children;return e?e[e.length-1]:t.t}function Dc(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Mc(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Tc(t,e,n){return t.a.parent===e.parent?t.a:n}function Ue(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ue.prototype=Object.create(ae.prototype);function Oc(t){for(var e=new Ue(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new Ue(o[a],a)),i.parent=n;return(e.parent=new Ue(null,0)).children=[e],e}function Fc(){var t=Nc,e=1,n=1,r=null;function i(l){var u=Oc(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,g=l;l.eachBefore(function($){$.x<f.x&&(f=$),$.x>d.x&&(d=$),$.depth>g.depth&&(g=$)});var p=f===d?1:t(f,d)/2,y=p-f.x,v=e/(d.x+p+y),_=n/(g.depth||1);l.eachBefore(function($){$.x=($.x+y)*v,$.y=$.depth*_})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){Mc(l);var g=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+t(l._,d._),l.m=l.z-g):l.z=g}else d&&(l.z=d.z+t(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,g=l,p=u,y=d.parent.children[0],v=d.m,_=g.m,$=p.m,S=y.m,N;p=xn(p),d=vn(d),p&&d;)y=vn(y),g=xn(g),g.a=l,N=p.z+$-d.z-v+t(p._,d._),N>0&&(Dc(Tc(p,l,f),l,N),v+=N,_+=N),$+=p.m,v+=d.m,S+=y.m,_+=g.m;p&&!xn(g)&&(g.t=p,g.m+=$-_),d&&!vn(y)&&(y.t=d,y.m+=v-S,f=l)}return f}function c(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}function qr(t){return function(){return t}}function Lc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new oc(e)}var zc=Array.prototype.slice;function Pc(t){return t[0]}function Ic(t){return t[1]}class Vc{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Uc(t){return new Vc(t,!0)}function Hc(t){return t.source}function Xc(t){return t.target}function qc(t){let e=Hc,n=Xc,r=Pc,i=Ic,o=null,a=null,s=Lc(c);function c(){let l;const u=zc.call(arguments),f=e.apply(this,u),d=n.apply(this,u);if(o==null&&(a=t(l=s())),a.lineStart(),u[0]=f,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=d,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),l)return a=null,l+""||null}return c.source=function(l){return arguments.length?(e=l,c):e},c.target=function(l){return arguments.length?(n=l,c):n},c.x=function(l){return arguments.length?(r=typeof l=="function"?l:qr(+l),c):r},c.y=function(l){return arguments.length?(i=typeof l=="function"?l:qr(+l),c):i},c.context=function(l){return arguments.length?(l==null?o=a=null:a=t(o=l),c):o},c}function Yc(){return qc(Uc)}const Oe=t=>()=>t;function jc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Mt(t,e,n){this.k=t,this.x=e,this.y=n}Mt.prototype={constructor:Mt,scale:function(t){return t===1?this:new Mt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Mt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ar=new Mt(1,0,0);Mt.prototype;function _n(t){t.stopImmediatePropagation()}function ge(t){t.preventDefault(),t.stopImmediatePropagation()}function Wc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Jc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Yr(){return this.__zoom||ar}function Gc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Kc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Qc(){var t=Wc,e=Jc,n=Zc,r=Gc,i=Kc,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=ql,l=tr("start","zoom","end"),u,f,d,g=500,p=150,y=0,v=10;function _(m){m.property("__zoom",Yr).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(m,h,w,E){var R=m.selection?m.selection():m;R.property("__zoom",Yr),m!==R?P(m,h,w,E):R.interrupt().each(function(){H(this,arguments).event(E).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},_.scaleBy=function(m,h,w,E){_.scaleTo(m,function(){var R=this.__zoom.k,T=typeof h=="function"?h.apply(this,arguments):h;return R*T},w,E)},_.scaleTo=function(m,h,w,E){_.transform(m,function(){var R=e.apply(this,arguments),T=this.__zoom,z=w==null?N(R):typeof w=="function"?w.apply(this,arguments):w,U=T.invert(z),Y=typeof h=="function"?h.apply(this,arguments):h;return n(S($(T,Y),z,U),R,a)},w,E)},_.translateBy=function(m,h,w,E){_.transform(m,function(){return n(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),a)},null,E)},_.translateTo=function(m,h,w,E,R){_.transform(m,function(){var T=e.apply(this,arguments),z=this.__zoom,U=E==null?N(T):typeof E=="function"?E.apply(this,arguments):E;return n(ar.translate(U[0],U[1]).scale(z.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof w=="function"?-w.apply(this,arguments):-w),T,a)},E,R)};function $(m,h){return h=Math.max(o[0],Math.min(o[1],h)),h===m.k?m:new Mt(h,m.x,m.y)}function S(m,h,w){var E=h[0]-w[0]*m.k,R=h[1]-w[1]*m.k;return E===m.x&&R===m.y?m:new Mt(m.k,E,R)}function N(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function P(m,h,w,E){m.on("start.zoom",function(){H(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(E).end()}).tween("zoom",function(){var R=this,T=arguments,z=H(R,T).event(E),U=e.apply(R,T),Y=w==null?N(U):typeof w=="function"?w.apply(R,T):w,Q=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),j=R.__zoom,tt=typeof h=="function"?h.apply(R,T):h,mt=c(j.invert(Y).concat(Q/j.k),tt.invert(Y).concat(Q/tt.k));return function(ct){if(ct===1)ct=tt;else{var yt=mt(ct),he=Q/yt[2];ct=new Mt(he,Y[0]-yt[0]*he,Y[1]-yt[1]*he)}z.zoom(null,ct)}})}function H(m,h,w){return!w&&m.__zooming||new b(m,h)}function b(m,h){this.that=m,this.args=h,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,h),this.taps=0}b.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,h){return this.mouse&&m!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var h=gt(this.that).datum();l.call(m,this.that,new jc(m,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),h)}};function C(m,...h){if(!t.apply(this,arguments))return;var w=H(this,h).event(m),E=this.__zoom,R=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,r.apply(this,arguments)))),T=Vt(m);if(w.wheel)(w.mouse[0][0]!==T[0]||w.mouse[0][1]!==T[1])&&(w.mouse[1]=E.invert(w.mouse[0]=T)),clearTimeout(w.wheel);else{if(E.k===R)return;w.mouse=[T,E.invert(T)],Ve(this),w.start()}ge(m),w.wheel=setTimeout(z,p),w.zoom("mouse",n(S($(E,R),w.mouse[0],w.mouse[1]),w.extent,a));function z(){w.wheel=null,w.end()}}function O(m,...h){if(d||!t.apply(this,arguments))return;var w=m.currentTarget,E=H(this,h,!0).event(m),R=gt(m.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",Q,!0),T=Vt(m,w),z=m.clientX,U=m.clientY;wl(m.view),_n(m),E.mouse=[T,this.__zoom.invert(T)],Ve(this),E.start();function Y(j){if(ge(j),!E.moved){var tt=j.clientX-z,mt=j.clientY-U;E.moved=tt*tt+mt*mt>y}E.event(j).zoom("mouse",n(S(E.that.__zoom,E.mouse[0]=Vt(j,w),E.mouse[1]),E.extent,a))}function Q(j){R.on("mousemove.zoom mouseup.zoom",null),vl(j.view,E.moved),ge(j),E.event(j).end()}}function A(m,...h){if(t.apply(this,arguments)){var w=this.__zoom,E=Vt(m.changedTouches?m.changedTouches[0]:m,this),R=w.invert(E),T=w.k*(m.shiftKey?.5:2),z=n(S($(w,T),E,R),e.apply(this,h),a);ge(m),s>0?gt(this).transition().duration(s).call(P,z,E,m):gt(this).call(_.transform,z,E,m)}}function M(m,...h){if(t.apply(this,arguments)){var w=m.touches,E=w.length,R=H(this,h,m.changedTouches.length===E).event(m),T,z,U,Y;for(_n(m),z=0;z<E;++z)U=w[z],Y=Vt(U,this),Y=[Y,this.__zoom.invert(Y),U.identifier],R.touch0?!R.touch1&&R.touch0[2]!==Y[2]&&(R.touch1=Y,R.taps=0):(R.touch0=Y,T=!0,R.taps=1+!!u);u&&(u=clearTimeout(u)),T&&(R.taps<2&&(f=Y[0],u=setTimeout(function(){u=null},g)),Ve(this),R.start())}}function D(m,...h){if(this.__zooming){var w=H(this,h).event(m),E=m.changedTouches,R=E.length,T,z,U,Y;for(ge(m),T=0;T<R;++T)z=E[T],U=Vt(z,this),w.touch0&&w.touch0[2]===z.identifier?w.touch0[0]=U:w.touch1&&w.touch1[2]===z.identifier&&(w.touch1[0]=U);if(z=w.that.__zoom,w.touch1){var Q=w.touch0[0],j=w.touch0[1],tt=w.touch1[0],mt=w.touch1[1],ct=(ct=tt[0]-Q[0])*ct+(ct=tt[1]-Q[1])*ct,yt=(yt=mt[0]-j[0])*yt+(yt=mt[1]-j[1])*yt;z=$(z,Math.sqrt(ct/yt)),U=[(Q[0]+tt[0])/2,(Q[1]+tt[1])/2],Y=[(j[0]+mt[0])/2,(j[1]+mt[1])/2]}else if(w.touch0)U=w.touch0[0],Y=w.touch0[1];else return;w.zoom("touch",n(S(z,U,Y),w.extent,a))}}function L(m,...h){if(this.__zooming){var w=H(this,h).event(m),E=m.changedTouches,R=E.length,T,z;for(_n(m),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),T=0;T<R;++T)z=E[T],w.touch0&&w.touch0[2]===z.identifier?delete w.touch0:w.touch1&&w.touch1[2]===z.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(z=Vt(z,this),Math.hypot(f[0]-z[0],f[1]-z[1])<v)){var U=gt(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return _.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:Oe(+m),_):r},_.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Oe(!!m),_):t},_.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Oe(!!m),_):i},_.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Oe([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),_):e},_.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],_):[o[0],o[1]]},_.translateExtent=function(m){return arguments.length?(a[0][0]=+m[0][0],a[1][0]=+m[1][0],a[0][1]=+m[0][1],a[1][1]=+m[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(m){return arguments.length?(n=m,_):n},_.duration=function(m){return arguments.length?(s=+m,_):s},_.interpolate=function(m){return arguments.length?(c=m,_):c},_.on=function(){var m=l.on.apply(l,arguments);return m===l?_:m},_.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,_):Math.sqrt(y)},_.tapDistance=function(m){return arguments.length?(v=+m,_):v},_}function tf(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ef(){return this.eachAfter(tf)}function nf(t){var e=this,n,r=[e],i,o,a;do for(n=r.reverse(),r=[];e=n.pop();)if(t(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)r.push(i[o]);while(r.length);return this}function rf(t){for(var e=this,n=[e],r,i;e=n.pop();)if(t(e),r=e.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function of(t){for(var e=this,n=[e],r=[],i,o,a;e=n.pop();)if(r.push(e),i=e.children,i)for(o=0,a=i.length;o<a;++o)n.push(i[o]);for(;e=r.pop();)t(e);return this}function sf(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function af(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function lf(t){for(var e=this,n=uf(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function uf(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function cf(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function ff(){var t=[];return this.each(function(e){t.push(e)}),t}function hf(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function df(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function lr(t,e){var n=new nn(t),r=+t.value&&(n.value=t.value),i,o=[n],a,s,c,l;for(e==null&&(e=gf);i=o.pop();)if(r&&(i.value=+i.data.value),(s=e(i.data))&&(l=s.length))for(i.children=new Array(l),c=l-1;c>=0;--c)o.push(a=i.children[c]=new nn(s[c])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(yf)}function pf(){return lr(this).eachBefore(mf)}function gf(t){return t.children}function mf(t){t.data=t.data.data}function yf(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function nn(t){this.data=t,this.depth=this.height=0,this.parent=null}nn.prototype=lr.prototype={constructor:nn,count:ef,each:nf,eachAfter:of,eachBefore:rf,sum:sf,sort:af,path:lf,ancestors:cf,descendants:ff,leaves:hf,links:df,copy:pf};const wf="2.1.2",vf={version:wf},{version:xf}=vf,_f=Object.freeze({children:t=>t.children,nodeSize:t=>t.data.size,spacing:0});function ur(t){const e=Object.assign({},_f,t);function n(s){const c=e[s];return typeof c=="function"?c:()=>c}function r(s){const c=a(o(),s,l=>l.children);return c.update(),c.data}function i(){const s=n("nodeSize"),c=n("spacing");return class ji extends lr.prototype.constructor{constructor(u){super(u)}copy(){const u=a(this.constructor,this,f=>f.children);return u.each(f=>f.data=f.data.data),u}get size(){return s(this)}spacing(u){return c(this,u)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const u=this.ancestors();return u[u.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((u,f)=>ji.maxExtents(u,f.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(u,f){return{top:Math.min(u.top,f.top),bottom:Math.max(u.bottom,f.bottom),left:Math.min(u.left,f.left),right:Math.max(u.right,f.right)}}}}function o(){const s=i(),c=n("nodeSize"),l=n("spacing");return class extends s{constructor(u){super(u),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return c(this.data)}spacing(u){return l(this.data,u.data)}get x(){return this.data.x}set x(u){this.data.x=u}get y(){return this.data.y}set y(u){this.data.y=u}update(){return Wi(this),Ji(this),this}}}function a(s,c,l){const u=(f,d)=>{const g=new s(f);Object.assign(g,{parent:d,depth:d===null?0:d.depth+1,height:0,length:1});const p=l(f)||[];return g.children=p.length===0?null:p.map(y=>u(y,g)),g.children&&Object.assign(g,g.children.reduce((y,v)=>({height:Math.max(y.height,v.height+1),length:y.length+v.length}),g)),g};return u(c,null)}return Object.assign(r,{nodeSize(s){return arguments.length?(e.nodeSize=s,r):e.nodeSize},spacing(s){return arguments.length?(e.spacing=s,r):e.spacing},children(s){return arguments.length?(e.children=s,r):e.children},hierarchy(s,c){const l=typeof c>"u"?e.children:c;return a(i(),s,l)},dump(s){const c=n("nodeSize"),l=u=>f=>{const d=u+"  ",g=u+"    ",{x:p,y}=f,v=c(f),_=f.children||[],$=_.length===0?" ":`,${d}children: [${g}${_.map(l(g)).join(g)}${d}],${u}`;return`{ size: [${v.join(", ")}],${d}x: ${p}, y: ${y}${$}},`};return l(`
`)(s)}}),r}ur.version=xf;const Wi=(t,e=0)=>(t.y=e,(t.children||[]).reduce((n,r)=>{const[i,o]=n;Wi(r,t.y+t.ySize);const a=(i===0?r.lExt:r.rExt).bottom;i!==0&&Cf(t,i,o);const s=Nf(a,i,o);return[i+1,s]},[0,null]),bf(t),Bf(t),t),Ji=(t,e,n)=>{typeof e>"u"&&(e=-t.relX-t.prelim,n=0);const r=e+t.relX;return t.relX=r+t.prelim-n,t.prelim=0,t.x=n+t.relX,(t.children||[]).forEach(i=>Ji(i,r,t.x)),t},bf=t=>{(t.children||[]).reduce((e,n)=>{const[r,i]=e,o=r+n.shift,a=i+o+n.change;return n.relX+=a,[o,a]},[0,0])},Cf=(t,e,n)=>{const r=t.children[e-1],i=t.children[e];let o=r,a=r.relX,s=i,c=i.relX,l=!0;for(;o&&s;){o.bottom>n.lowY&&(n=n.next);const u=a+o.prelim-(c+s.prelim)+o.xSize/2+s.xSize/2+o.spacing(s);(u>0||u<0&&l)&&(c+=u,Ef(i,u),Sf(t,e,n.index,u)),l=!1;const f=o.bottom,d=s.bottom;f<=d&&(o=kf(o),o&&(a+=o.relX)),f>=d&&(s=Af(s),s&&(c+=s.relX))}!o&&s?$f(t,e,s,c):o&&!s&&Rf(t,e,o,a)},Ef=(t,e)=>{t.relX+=e,t.lExtRelX+=e,t.rExtRelX+=e},Sf=(t,e,n,r)=>{const i=t.children[e],o=e-n;if(o>1){const a=r/o;t.children[n+1].shift+=a,i.shift-=a,i.change-=r-a}},Af=t=>t.hasChildren?t.firstChild:t.lThr,kf=t=>t.hasChildren?t.lastChild:t.rThr,$f=(t,e,n,r)=>{const i=t.firstChild,o=i.lExt,a=t.children[e];o.lThr=n;const s=r-n.relX-i.lExtRelX;o.relX+=s,o.prelim-=s,i.lExt=a.lExt,i.lExtRelX=a.lExtRelX},Rf=(t,e,n,r)=>{const i=t.children[e],o=i.rExt,a=t.children[e-1];o.rThr=n;const s=r-n.relX-i.rExtRelX;o.relX+=s,o.prelim-=s,i.rExt=a.rExt,i.rExtRelX=a.rExtRelX},Bf=t=>{if(t.hasChildren){const e=t.firstChild,n=t.lastChild,r=(e.prelim+e.relX-e.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(t,{prelim:r,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},Nf=(t,e,n)=>{for(;n!==null&&t>=n.lowY;)n=n.next;return{lowY:t,index:e,next:n}},G={selection:ue,select:gt,max:Ms,min:Ts,sum:Os,cumsum:Ds,tree:Fc,stratify:Rc,zoom:Qc,zoomIdentity:ar,linkHorizontal:Yc,flextree:ur};class Df{constructor(){const e={id:`ID${Math.floor(Math.random()*1e6)}`,firstDraw:!0,ctx:document.createElement("canvas").getContext("2d"),initialExpandLevel:1,nodeDefaultBackground:"none",lastTransform:{x:0,y:0,k:1},allowedNodesCount:{},zoomBehavior:null,generateRoot:null,svgWidth:800,svgHeight:window.innerHeight-100,container:"body",data:null,connections:[],defaultFont:"Helvetica",nodeId:n=>n.nodeId||n.id,parentNodeId:n=>n.parentNodeId||n.parentId,rootMargin:40,nodeWidth:n=>250,nodeHeight:n=>150,neighbourMargin:(n,r)=>80,siblingsMargin:n=>20,childrenMargin:n=>60,compactMarginPair:n=>100,compactMarginBetween:(n=>20),nodeButtonWidth:n=>40,nodeButtonHeight:n=>40,nodeButtonX:n=>-20,nodeButtonY:n=>-20,linkYOffset:30,pagingStep:n=>5,minPagingVisibleNodes:n=>2e3,scaleExtent:[.001,20],duration:400,imageName:"Chart",setActiveNodeCentered:!0,layout:"top",compact:!0,createZoom:n=>G.zoom(),onZoomStart:n=>{},onZoom:n=>{},onZoomEnd:n=>{},onNodeClick:n=>n,onExpandOrCollapse:n=>n,nodeContent:n=>`<div style="padding:5px;font-size:10px;">Sample Node(id=${n.id}), override using <br/> 
            <code>chart.nodeContent({data}=>{ <br/>
             &nbsp;&nbsp;&nbsp;&nbsp;return '' // Custom HTML <br/>
             })</code>
             <br/> 
             Or check different <a href="https://github.com/bumbeishvili/org-chart#jump-to-examples" target="_blank">layout examples</a>
             </div>`,buttonContent:({node:n,state:r})=>`<div style="border:1px solid #E4E2E9;border-radius:3px;padding:3px;font-size:9px;margin:auto auto;background-color:white"> ${{left:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                          </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,bottom:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                       `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="margin-left:1px;color:#716E7B" >${n.data._directSubordinatesPaging} </span></div>
                    `,right:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z" fill="#716E7B" stroke="#716E7B"/>
                       </svg></span><span style="color:#716E7B">${n.data._directSubordinatesPaging} </span></div>`,top:o=>o?`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                        `:`<div style="display:flex;"><span style="align-items:center;display:flex;"><svg width="8" height="8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z" fill="#716E7B" stroke="#716E7B"/>
                        </svg></span><span style="margin-left:1px;color:#716E7B">${n.data._directSubordinatesPaging} </span></div>
                    `}[r.layout](n.children)}  </div>`,pagingButton:(n,r,i,o)=>{const a=o.pagingStep(n.parent),s=n.parent.data._pagingStep,c=n.parent.data._directSubordinatesPaging-s;return`
                   <div style="margin-top:90px;">
                      <div style="display:flex;width:170px;border-radius:20px;padding:5px 15px; padding-bottom:4px;;background-color:#E5E9F2">
                      <div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z" fill="#716E7B" stroke="#716E7B"/>
                      </svg>
                      </div><div style="line-height:2"> Show next ${Math.min(c,a)}  nodes </div></div>
                   </div>
                `},nodeUpdate:function(n,r,i){G.select(this).select(".node-rect").attr("stroke",o=>o.data._highlighted||o.data._upToTheRootHighlighted?"#E27396":"none").attr("stroke-width",n.data._highlighted||n.data._upToTheRootHighlighted?10:1)},nodeEnter:n=>n,nodeExit:n=>n,linkUpdate:function(n,r,i){G.select(this).attr("stroke",o=>o.data._upToTheRootHighlighted?"#E27396":"#E4E2E9").attr("stroke-width",o=>o.data._upToTheRootHighlighted?5:1),n.data._upToTheRootHighlighted&&G.select(this).raise()},hdiagonal:function(n,r,i){const o=n.x,a=n.y,s=r.x,c=r.y;let l=i&&i.x!=null?i.x:o,u=i&&i.y!=null?i.y:a,f=s-o<0?-1:1,d=c-a<0?-1:1,g=35,p=Math.abs(s-o)/2<g?Math.abs(s-o)/2:g;p=Math.abs(c-a)/2<p?Math.abs(c-a)/2:p;let y=Math.abs(s-o)/2-p;return`
                          M ${l} ${u}
                          L ${l} ${a}
                          L ${o} ${a}
                          L ${o+y*f} ${a}
                          C ${o+y*f+p*f} ${a} 
                            ${o+y*f+p*f} ${a} 
                            ${o+y*f+p*f} ${a+p*d}
                          L ${o+y*f+p*f} ${c-p*d} 
                          C ${o+y*f+p*f}  ${c} 
                            ${o+y*f+p*f}  ${c} 
                            ${s-y*f}  ${c}
                          L ${s} ${c}
               `},diagonal:function(n,r,i,o={sy:0}){const a=n.x;let s=n.y;const c=r.x,l=r.y;let u=i&&i.x!=null?i.x:a,f=i&&i.y!=null?i.y:s,d=c-a<0?-1:1,g=l-s<0?-1:1;s+=o.sy;let p=35,y=Math.abs(c-a)/2<p?Math.abs(c-a)/2:p;y=Math.abs(l-s)/2<y?Math.abs(l-s)/2:y;let v=Math.abs(l-s)/2-y,_=Math.abs(c-a)-y*2;return`
                          M ${u} ${f}
                          L ${a} ${f}
                          L ${a} ${s}
                          L ${a} ${s+v*g}
                          C  ${a} ${s+v*g+y*g} ${a} ${s+v*g+y*g} ${a+y*d} ${s+v*g+y*g}
                          L ${a+_*d+y*d} ${s+v*g+y*g}
                          C  ${c}  ${s+v*g+y*g} ${c}  ${s+v*g+y*g} ${c} ${l-v*g}
                          L ${c} ${l}
               `},defs:function(n,r){return`<defs>
                    ${r.map(i=>{const o=this.getTextWidth(i.label,{ctx:n.ctx,fontSize:2,defaultFont:n.defaultFont});return`
                       <marker id="${i.from+"_"+i.to}" refX="${i._source.x<i._target.x?-7:7}" refY="5" markerWidth="500"  markerHeight="500"  orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <rect rx=0.5 width=${i.label?o+3:0} height=3 y=1  fill="#E27396"></rect>
                       <text font-size="2px" x=1 fill="white" y=3>${i.label||""}</text>
                       </marker>

                       <marker id="arrow-${i.from+"_"+i.to}"  markerWidth="500"  markerHeight="500"  refY="2"  refX="1" orient="${i._source.x<i._target.x?"auto":"auto-start-reverse"}" >
                       <path transform="translate(0)" d='M0,0 V4 L2,2 Z' fill='#E27396' />
                       </marker>
                    `}).join("")}
                    </defs>
                    `},connectionsUpdate:function(n,r,i){G.select(this).attr("stroke",o=>"#E27396").attr("stroke-linecap","round").attr("stroke-width",o=>"5").attr("pointer-events","none").attr("marker-start",o=>`url(#${o.from+"_"+o.to})`).attr("marker-end",o=>`url(#arrow-${o.from+"_"+o.to})`)},linkGroupArc:G.linkHorizontal().x(n=>n.x).y(n=>n.y),layoutBindings:{left:{nodeLeftX:n=>0,nodeRightX:n=>n.width,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x+n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x+n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkCompactXStart:n=>n.x+n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,linkParentX:n=>n.parent.x+n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>n.width,buttonY:n=>n.height/2,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${r},${i}) scale(${o})`,compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n},${r-o/2})`},top:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>0,nodeBottomY:n=>n.height,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y+n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y+n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y+n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y+n.parent.height,buttonX:n=>n.width/2,buttonY:n=>n.height,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a})=>`translate(${a},${r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s,compactViewIndex:c})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r})`},bottom:{nodeLeftX:n=>-n.width/2,nodeRightX:n=>n.width/2,nodeTopY:n=>-n.height,nodeBottomY:n=>0,nodeJoinX:n=>n.x-n.width/2,nodeJoinY:n=>n.y-n.height-n.height,linkJoinX:n=>n.x,linkJoinY:n=>n.y-n.height,linkCompactXStart:n=>n.x+(n.compactEven?n.width/2:-n.width/2),linkCompactYStart:n=>n.y-n.height/2,compactLinkMidX:(n,r)=>n.firstCompactNode.x+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,compactLinkMidY:n=>n.firstCompactNode.y,linkX:n=>n.x,linkY:n=>n.y,compactDimension:{sizeColumn:n=>n.width,sizeRow:n=>n.height,reverse:n=>n},linkParentX:n=>n.parent.x,linkParentY:n=>n.parent.y-n.parent.height,buttonX:n=>n.width/2,buttonY:n=>0,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartHeight:s})=>`translate(${a},${s-r}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[r+i,n+o],zoomTransform:({centerX:n,scale:r})=>`translate(${n},0}) scale(${r})`,diagonal:this.diagonal.bind(this),swap:n=>{n.y=-n.y},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i/2},${r-o})`},right:{nodeLeftX:n=>-n.width,nodeRightX:n=>0,nodeTopY:n=>-n.height/2,nodeBottomY:n=>n.height/2,nodeJoinX:n=>n.x-n.width-n.width,nodeJoinY:n=>n.y-n.height/2,linkJoinX:n=>n.x-n.width,linkJoinY:n=>n.y,linkX:n=>n.x,linkY:n=>n.y,linkParentX:n=>n.parent.x-n.parent.width,linkParentY:n=>n.parent.y,buttonX:n=>0,buttonY:n=>n.height/2,linkCompactXStart:n=>n.x-n.width/2,linkCompactYStart:n=>n.y+(n.compactEven?n.height/2:-n.height/2),compactLinkMidX:(n,r)=>n.firstCompactNode.x,compactLinkMidY:(n,r)=>n.firstCompactNode.y+n.firstCompactNode.flexCompactDim[0]/4+r.compactMarginPair(n)/4,centerTransform:({root:n,rootMargin:r,centerY:i,scale:o,centerX:a,chartWidth:s})=>`translate(${s-r},${i}) scale(${o})`,nodeFlexSize:({height:n,width:r,siblingsMargin:i,childrenMargin:o,state:a,node:s})=>a.compact&&s.flexCompactDim?[s.flexCompactDim[0],s.flexCompactDim[1]]:[n+i,r+o],compactDimension:{sizeColumn:n=>n.height,sizeRow:n=>n.width,reverse:n=>n.slice().reverse()},zoomTransform:({centerY:n,scale:r})=>`translate(0,${n}) scale(${r})`,diagonal:this.hdiagonal.bind(this),swap:n=>{const r=n.x;n.x=-n.y,n.y=r},nodeUpdateTransform:({x:n,y:r,width:i,height:o})=>`translate(${n-i},${r-o/2})`}}};this.getChartState=()=>e,Object.keys(e).forEach(n=>{this[n]=function(r){if(arguments.length)e[n]=r;else return e[n];return this}}),this.initializeEnterExitUpdatePattern()}initializeEnterExitUpdatePattern(){G.selection.prototype.patternify=function(e){var n=this,r=e.selector,i=e.tag,o=e.data||[r],a=n.selectAll("."+r).data(o,(s,c)=>typeof s=="object"&&s.id?s.id:c);return a.exit().remove(),a=a.enter().append(i).merge(a),a.attr("class",r),a}}getNodeChildren({data:e,children:n,_children:r},i){return i.push(e),n&&n.forEach(o=>{this.getNodeChildren(o,i)}),r&&r.forEach(o=>{this.getNodeChildren(o,i)}),i}initialZoom(e){const n=this.getChartState();return n.lastTransform.k=e,this}render(){const e=this.getChartState();if(!e.data||e.data.length==0)return console.log("ORG CHART - Data is empty"),e.container&&(gt(e.container).select(".nodes-wrapper").remove(),gt(e.container).select(".links-wrapper").remove(),gt(e.container).select(".connections-wrapper").remove()),this;const n=G.select(e.container),r=n.node().getBoundingClientRect();r.width>0&&(e.svgWidth=r.width);const i={id:`ID${Math.floor(Math.random()*1e6)}`,chartWidth:e.svgWidth,chartHeight:e.svgHeight};if(e.calc=i,i.centerX=i.chartWidth/2,i.centerY=i.chartHeight/2,e.firstDraw){const s={zoom:null};s.zoom=e.createZoom().clickDistance(10).on("start",(c,l)=>e.onZoomStart(c)).on("end",(c,l)=>e.onZoomEnd(c)).on("zoom",(c,l)=>{e.onZoom(c),this.zoomed(c,l)}).scaleExtent(e.scaleExtent),e.zoomBehavior=s.zoom}e.flexTreeLayout=ur({nodeSize:s=>{const c=e.nodeWidth(s),l=e.nodeHeight(s),u=e.siblingsMargin(s),f=e.childrenMargin(s);return e.layoutBindings[e.layout].nodeFlexSize({state:e,node:s,width:c,height:l,siblingsMargin:u,childrenMargin:f})}}).spacing((s,c)=>s.parent==c.parent?0:e.neighbourMargin(s,c)),this.setLayouts({expandNodesFirst:!1});const o=n.patternify({tag:"svg",selector:"svg-chart-container"}).attr("width",e.svgWidth).attr("height",e.svgHeight).attr("font-family",e.defaultFont);e.firstDraw&&o.call(e.zoomBehavior).on("dblclick.zoom",null).attr("cursor","move"),e.svg=o;const a=o.patternify({tag:"g",selector:"chart"});return e.centerG=a.patternify({tag:"g",selector:"center-group"}),e.linksWrapper=e.centerG.patternify({tag:"g",selector:"links-wrapper"}),e.nodesWrapper=e.centerG.patternify({tag:"g",selector:"nodes-wrapper"}),e.connectionsWrapper=e.centerG.patternify({tag:"g",selector:"connections-wrapper"}),e.defsWrapper=o.patternify({tag:"g",selector:"defs-wrapper"}),e.firstDraw&&e.centerG.attr("transform",()=>e.layoutBindings[e.layout].centerTransform({centerX:i.centerX,centerY:i.centerY,scale:e.lastTransform.k,rootMargin:e.rootMargin,root:e.root,chartHeight:i.chartHeight,chartWidth:i.chartWidth})),e.chart=a,this.update(e.root),G.select(window).on(`resize.${e.id}`,()=>{const s=G.select(e.container).node().getBoundingClientRect();e.svg.attr("width",s.width)}),e.firstDraw&&(e.firstDraw=!1),this}addNode(e){const n=this.getChartState();if(e&&(n.parentNodeId(e)==null||n.parentNodeId(e)==n.nodeId(e))&&n.data.length==0)return n.data.push(e),this.render(),this;const i=n.generateRoot(n.data).descendants(),o=i.filter(({data:a})=>n.nodeId(a).toString()===n.nodeId(e).toString())[0];return i.filter(({data:a})=>n.nodeId(a).toString()===n.parentNodeId(e).toString())[0],o?(console.log(`ORG CHART - ADD - Node with id "${n.nodeId(e)}" already exists in tree`),this):(e._centered&&!e._expanded&&(e._expanded=!0),n.data.push(e),this.updateNodesState(),this)}removeNode(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s)==e)[0];return o?(o.descendants().forEach(s=>s.data._filteredOut=!0),n.data=n.data.filter(s=>!s._filteredOut),n.data.length==0?this.render():this.updateNodesState.bind(this)(),this):(console.log(`ORG CHART - REMOVE - Node with id "${e}" not found in the tree`),this)}groupBy(e,n,r){const i={};return e.forEach(o=>{const a=n(o);i[a]||(i[a]=[]),i[a].push(o)}),Object.keys(i).forEach(o=>{i[o]=r(i[o])}),Object.entries(i)}calculateCompactFlexDimensions(e){const n=this.getChartState();e.eachBefore(r=>{r.firstCompact=null,r.compactEven=null,r.flexCompactDim=null,r.firstCompactNode=null}),e.eachBefore(r=>{if(r.children&&r.children.length>1){const i=r.children.filter(u=>!u.children);if(i.length<2)return;i.forEach((u,f)=>{f||(u.firstCompact=!0),f%2?u.compactEven=!1:u.compactEven=!0,u.row=Math.floor(f/2)});const o=G.max(i.filter(u=>u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),a=G.max(i.filter(u=>!u.compactEven),n.layoutBindings[n.layout].compactDimension.sizeColumn),s=Math.max(o,a)*2,c=this.groupBy(i,u=>u.row,u=>G.max(u,f=>n.layoutBindings[n.layout].compactDimension.sizeRow(f)+n.compactMarginBetween(f))),l=G.sum(c.map(u=>u[1]));i.forEach(u=>{u.firstCompactNode=i[0],u.firstCompact?u.flexCompactDim=[s+n.compactMarginPair(u),l-n.compactMarginBetween(u)]:u.flexCompactDim=[0,0]}),r.flexCompactDim=null}})}calculateCompactFlexPositions(e){const n=this.getChartState();e.eachBefore(r=>{if(r.children){const i=r.children.filter(u=>u.flexCompactDim),o=i[0];if(!o)return;i.forEach((u,f,d)=>{f==0&&(o.x-=o.flexCompactDim[0]/2),f&f%2-1?u.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(u)/4:f&&(u.x=o.x+o.flexCompactDim[0]*.75+n.compactMarginPair(u)/4)});const a=o.x+o.flexCompactDim[0]*.5;o.x=o.x+o.flexCompactDim[0]*.25-n.compactMarginPair(o)/4;const s=r.x-a;Math.abs(s)<10&&i.forEach(u=>u.x+=s);const c=this.groupBy(i,u=>u.row,u=>G.max(u,f=>n.layoutBindings[n.layout].compactDimension.sizeRow(f))),l=G.cumsum(c.map(u=>u[1]+n.compactMarginBetween(u)));i.forEach((u,f)=>{u.row?u.y=o.y+l[u.row-1]:u.y=o.y})}})}update({x0:e,y0:n,x:r=0,y:i=0,width:o,height:a}){const s=this.getChartState();s.calc,s.compact&&this.calculateCompactFlexDimensions(s.root);const c=s.flexTreeLayout(s.root);s.compact&&this.calculateCompactFlexPositions(s.root);const l=c.descendants(),u=c.descendants().slice(1);l.forEach(s.layoutBindings[s.layout].swap);const f=s.connections,d={};s.allNodes.forEach(h=>d[s.nodeId(h.data)]=h);const g={};l.forEach(h=>g[s.nodeId(h.data)]=h),f.forEach(h=>{const w=d[h.from],E=d[h.to];h._source=w,h._target=E});const p=f.filter(h=>g[h.from]&&g[h.to]),y=s.defs.bind(this)(s,p),v=s.defsWrapper.html();y!==v&&s.defsWrapper.html(y);const _=s.linksWrapper.selectAll("path.link").data(u,h=>s.nodeId(h.data)),S=_.enter().insert("path","g").attr("class","link").attr("d",h=>{const w=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),E=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),R={x:w,y:E};return s.layoutBindings[s.layout].diagonal(R,R,R)}).merge(_);S.attr("fill","none"),this.isEdge()?S.style("display",h=>h.data._pagingButton?"none":"auto"):S.attr("display",h=>h.data._pagingButton?"none":"auto"),S.each(s.linkUpdate),S.transition().duration(s.duration).attr("d",h=>{const w=s.compact&&h.flexCompactDim?{x:s.layoutBindings[s.layout].compactLinkMidX(h,s),y:s.layoutBindings[s.layout].compactLinkMidY(h,s)}:{x:s.layoutBindings[s.layout].linkX(h),y:s.layoutBindings[s.layout].linkY(h)},E={x:s.layoutBindings[s.layout].linkParentX(h),y:s.layoutBindings[s.layout].linkParentY(h)},R=s.compact&&h.flexCompactDim?{x:s.layoutBindings[s.layout].linkCompactXStart(h),y:s.layoutBindings[s.layout].linkCompactYStart(h)}:w;return s.layoutBindings[s.layout].diagonal(w,E,R,{sy:s.linkYOffset})}),_.exit().transition().duration(s.duration).attr("d",h=>{const w=s.layoutBindings[s.layout].linkJoinX({x:r,y:i,width:o,height:a}),E=s.layoutBindings[s.layout].linkJoinY({x:r,y:i,width:o,height:a}),R={x:w,y:E};return s.layoutBindings[s.layout].diagonal(R,R,null,{sy:s.linkYOffset})}).remove();const N=s.connectionsWrapper.selectAll("path.connection").data(p),H=N.enter().insert("path","g").attr("class","connection").attr("d",h=>{const w=s.layoutBindings[s.layout].linkJoinX({x:e,y:n,width:o,height:a}),E=s.layoutBindings[s.layout].linkJoinY({x:e,y:n,width:o,height:a}),R={x:w,y:E};return s.layoutBindings[s.layout].diagonal(R,R,null,{sy:s.linkYOffset})}).merge(N);H.attr("fill","none"),H.transition().duration(s.duration).attr("d",h=>{const w=s.layoutBindings[s.layout].linkX({x:h._source.x,y:h._source.y,width:h._source.width,height:h._source.height}),E=s.layoutBindings[s.layout].linkY({x:h._source.x,y:h._source.y,width:h._source.width,height:h._source.height}),R=s.layoutBindings[s.layout].linkJoinX({x:h._target.x,y:h._target.y,width:h._target.width,height:h._target.height}),T=s.layoutBindings[s.layout].linkJoinY({x:h._target.x,y:h._target.y,width:h._target.width,height:h._target.height});return s.linkGroupArc({source:{x:w,y:E},target:{x:R,y:T}})}),H.each(s.connectionsUpdate),N.exit().transition().duration(s.duration).attr("opacity",0).remove();const b=s.nodesWrapper.selectAll("g.node").data(l,({data:h})=>s.nodeId(h)),C=b.enter().append("g").attr("class","node").attr("transform",h=>{if(h==s.root)return`translate(${e},${n})`;const w=s.layoutBindings[s.layout].nodeJoinX({x:e,y:n,width:o,height:a}),E=s.layoutBindings[s.layout].nodeJoinY({x:e,y:n,width:o,height:a});return`translate(${w},${E})`}).attr("cursor","pointer").on("click.node",(h,w)=>{const{data:E}=w;if(![...h.srcElement.classList].includes("node-button-foreign-object")){if([...h.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(w);return}if(!E._pagingButton){s.onNodeClick(w);return}console.log("event fired, no handlers")}}).on("keydown.node",(h,w)=>{const{data:E}=w;if(h.key==="Enter"||h.key===" "||h.key==="Spacebar"){if([...h.srcElement.classList].includes("node-button-foreign-object"))return;if([...h.srcElement.classList].includes("paging-button-wrapper")){this.loadPagingNodes(w);return}(h.key==="Enter"||h.key===" "||h.key==="Spacebar")&&this.onButtonClick(h,w)}});C.each(s.nodeEnter),C.patternify({tag:"rect",selector:"node-rect",data:h=>[h]});const O=C.merge(b).style("font","12px sans-serif");O.patternify({tag:"foreignObject",selector:"node-foreign-object",data:h=>[h]}).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-foreign-object-div",data:h=>[h]}),this.restyleForeignObjectElements();const M=C.patternify({tag:"g",selector:"node-button-g",data:h=>[h]}).on("click",(h,w)=>this.onButtonClick(h,w)).on("keydown",(h,w)=>{(h.key==="Enter"||h.key===" "||h.key==="Spacebar")&&this.onButtonClick(h,w)});M.patternify({tag:"rect",selector:"node-button-rect",data:h=>[h]}).attr("opacity",0).attr("pointer-events","all").attr("width",h=>s.nodeButtonWidth(h)).attr("height",h=>s.nodeButtonHeight(h)).attr("x",h=>s.nodeButtonX(h)).attr("y",h=>s.nodeButtonY(h)),M.patternify({tag:"foreignObject",selector:"node-button-foreign-object",data:h=>[h]}).attr("width",h=>s.nodeButtonWidth(h)).attr("height",h=>s.nodeButtonHeight(h)).attr("x",h=>s.nodeButtonX(h)).attr("y",h=>s.nodeButtonY(h)).style("overflow","visible").patternify({tag:"xhtml:div",selector:"node-button-div",data:h=>[h]}).style("pointer-events","none").style("display","flex").style("width","100%").style("height","100%"),O.transition().attr("opacity",0).duration(s.duration).attr("transform",({x:h,y:w,width:E,height:R})=>s.layoutBindings[s.layout].nodeUpdateTransform({x:h,y:w,width:E,height:R})).attr("opacity",1),O.select(".node-rect").attr("width",({width:h})=>h).attr("height",({height:h})=>h).attr("x",({width:h})=>0).attr("y",({height:h})=>0).attr("cursor","pointer").attr("rx",3).attr("fill",s.nodeDefaultBackground),O.select(".node-button-g").attr("transform",({data:h,width:w,height:E})=>{const R=s.layoutBindings[s.layout].buttonX({width:w,height:E}),T=s.layoutBindings[s.layout].buttonY({width:w,height:E});return`translate(${R},${T})`}).attr("display",({data:h})=>h._directSubordinates>0?null:"none").attr("opacity",({data:h,children:w,_children:E})=>h._pagingButton?0:w||E?1:0),O.select(".node-button-foreign-object .node-button-div").html(h=>s.buttonContent({node:h,state:s})),O.select(".node-button-text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",({children:h})=>h?40:26).text(({children:h})=>h?"-":"+").attr("y",this.isEdge()?10:0),O.each(s.nodeUpdate);const D=b.exit();D.each(s.nodeExit);const L=D.data().reduce((h,w)=>h.depth<w.depth?h:w,{depth:1/0});D.attr("opacity",1).transition().duration(s.duration).attr("transform",h=>{let{x:w,y:E,width:R,height:T}=L.parent||{};const z=s.layoutBindings[s.layout].nodeJoinX({x:w,y:E,width:R,height:T}),U=s.layoutBindings[s.layout].nodeJoinY({x:w,y:E,width:R,height:T});return`translate(${z},${U})`}).on("end",function(){G.select(this).remove()}).attr("opacity",0),l.forEach(h=>{h.x0=h.x,h.y0=h.y});const m=s.allNodes.filter(h=>h.data._centered)[0];if(m){let h=[m];m.data._centeredWithDescendants&&(s.compact?h=m.descendants().filter((w,E)=>E<7):h=m.descendants().filter((w,E,R)=>{const T=Math.round(R.length/2),z=2;return R.length%2?E>T-z&&E<T+z-1:E>T-z&&E<T+z})),m.data._centeredWithDescendants=null,m.data._centered=null,this.fit({animate:!0,scale:!1,nodes:h})}}isEdge(){return window.navigator.userAgent.includes("Edge")}hdiagonal(e,n,r,i){return this.getChartState().hdiagonal(e,n,r,i)}diagonal(e,n,r,i){return this.getChartState().diagonal(e,n,r,i)}restyleForeignObjectElements(){const e=this.getChartState();e.svg.selectAll(".node-foreign-object").attr("width",({width:n})=>n).attr("height",({height:n})=>n).attr("x",({width:n})=>0).attr("y",({height:n})=>0),e.svg.selectAll(".node-foreign-object-div").style("width",({width:n})=>`${n}px`).style("height",({height:n})=>`${n}px`).html(function(n,r,i){return n.data._pagingButton?`<div class="paging-button-wrapper"><div style="pointer-events:none">${e.pagingButton(n,r,i,e)}</div></div>`:e.nodeContent.bind(this)(n,r,i,e)})}onButtonClick(e,n){const r=this.getChartState();n.data._pagingButton||(r.setActiveNodeCentered&&(n.data._centered=!0,n.data._centeredWithDescendants=!0),n.children?(n._children=n.children,n.children=null,this.setExpansionFlagToChildren(n,!1)):(n.children=n._children,n._children=null,n.children&&n.children.forEach(({data:i})=>i._expanded=!0)),this.update(n),e.stopPropagation(),r.onExpandOrCollapse(n))}setExpansionFlagToChildren({data:e,children:n,_children:r},i){e._expanded=i,n&&n.forEach(o=>{this.setExpansionFlagToChildren(o,i)}),r&&r.forEach(o=>{this.setExpansionFlagToChildren(o,i)})}expandSomeNodes(e){if(e.data._expanded){let n=e.parent;for(;n&&n._children;)n.children=n._children,n._children=null,n=n.parent}e._children&&e._children.forEach(n=>this.expandSomeNodes(n)),e.children&&e.children.forEach(n=>this.expandSomeNodes(n))}updateNodesState(){const e=this.getChartState();this.setLayouts({expandNodesFirst:!0}),this.update(e.root)}setLayouts({expandNodesFirst:e=!0}){const n=this.getChartState();n.generateRoot=G.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o)),n.root=n.generateRoot(n.data);const r=n.root.descendants();n.initialExpandLevel>1&&r.length>0&&(r.forEach(o=>{o.depth<=n.initialExpandLevel&&(o.data._expanded=!0)}),n.initialExpandLevel=1);const i={};n.root.descendants().filter(o=>o.children).filter(o=>!o.data._pagingStep).forEach(o=>{o.data._pagingStep=n.minPagingVisibleNodes(o)}),n.root.eachBefore((o,a)=>{o.data._directSubordinatesPaging=o.children?o.children.length:0,o.children&&o.children.forEach((s,c)=>{if(s.data._pagingButton=!1,c>o.data._pagingStep&&(i[s.id]=!0),c===o.data._pagingStep&&o.children.length-1>o.data._pagingStep&&(s.data._pagingButton=!0),i[s.parent.id]&&(i[s.id]=!0),s.data._expanded||s.data._centered||s.data._highlighted||s.data._upToTheRootHighlighted){let l=s;for(;l&&(i[l.id]||l.data._pagingButton);)i[l.id]=!1,l.data._pagingButton&&(l.data._pagingButton=!1,l.parent.children.forEach(u=>{u.data._expanded=!0,i[u.id]=!1})),l=l.parent}})}),n.root=G.stratify().id(o=>n.nodeId(o)).parentId(o=>n.parentNodeId(o))(n.data.filter(o=>i[o.id]!==!0)),n.root.each((o,a,s)=>{let c=o._hierarchyHeight||o.height,l=n.nodeWidth(o),u=n.nodeHeight(o);Object.assign(o,{width:l,height:u,_hierarchyHeight:c})}),n.root.x0=0,n.root.y0=0,n.allNodes=n.root.descendants(),n.allNodes.forEach(o=>{Object.assign(o.data,{_directSubordinates:o.children?o.children.length:0,_totalSubordinates:o.descendants().length-1})}),n.root.children&&(e&&n.root.children.forEach(this.expand),n.root.children.forEach(o=>this.collapse(o)),n.initialExpandLevel==0&&(n.root._children=n.root.children,n.root.children=null),[n.root].forEach(o=>this.expandSomeNodes(o)))}collapse(e){e.children&&(e._children=e.children,e._children.forEach(n=>this.collapse(n)),e.children=null)}expand(e){e._children&&(e.children=e._children,e.children.forEach(n=>this.expand(n)),e._children=null)}zoomed(e,n){const r=this.getChartState(),i=r.chart,o=e.transform;r.lastTransform=o,i.attr("transform",o),this.isEdge()&&this.restyleForeignObjectElements()}zoomTreeBounds({x0:e,x1:n,y0:r,y1:i,params:o={animate:!0,scale:!0,onCompleted:()=>{}}}){const{centerG:a,svgWidth:s,svgHeight:c,svg:l,zoomBehavior:u,duration:f,lastTransform:d}=this.getChartState();let g=Math.min(8,.9/Math.max((n-e)/s,(i-r)/c)),p=G.zoomIdentity.translate(s/2,c/2);p=p.scale(o.scale?g:d.k),p=p.translate(-(e+n)/2,-(r+i)/2),l.transition().duration(o.animate?f:0).call(u.transform,p),a.transition().duration(o.animate?f:0).attr("transform","translate(0,0)").on("end",function(){o.onCompleted&&o.onCompleted()})}fit({animate:e=!0,nodes:n,scale:r=!0,onCompleted:i=()=>{}}={}){const o=this.getChartState(),{root:a}=o;let s=n||a.descendants();const c=G.min(s,d=>d.x+o.layoutBindings[o.layout].nodeLeftX(d)),l=G.max(s,d=>d.x+o.layoutBindings[o.layout].nodeRightX(d)),u=G.min(s,d=>d.y+o.layoutBindings[o.layout].nodeTopY(d)),f=G.max(s,d=>d.y+o.layoutBindings[o.layout].nodeBottomY(d));return this.zoomTreeBounds({params:{animate:e,scale:r,onCompleted:i},x0:c-50,x1:l+50,y0:u-50,y1:f+50}),this}loadPagingNodes(e){const n=this.getChartState();e.data._pagingButton=!1;const r=e.parent.data._pagingStep,i=n.pagingStep(e.parent),o=r+i;e.parent.data._pagingStep=o,this.updateNodesState()}setExpanded(e,n=!0){const r=this.getChartState(),i=r.allNodes.filter(({data:o})=>r.nodeId(o)==e)[0];if(!i)return console.log(`ORG CHART - ${n?"EXPAND":"COLLAPSE"} - Node with id (${e})  not found in the tree`),this;if(i.data._expanded=n,n==!1){const o=i.parent||{descendants:()=>[]};o.descendants().filter(s=>s!=o).forEach(s=>s.data._expanded=!1)}return this}setCentered(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(({data:s})=>n.nodeId(s).toString()==e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._centered=!0,o.data._expanded=!0,this):(console.log(`ORG CHART - CENTER - Node with id (${e}) not found in the tree`),this)}setHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._highlighted=!0,o.data._expanded=!0,o.data._centered=!0,this):(console.log(`ORG CHART - HIGHLIGHT - Node with id (${e})  not found in the tree`),this)}setUpToTheRootHighlighted(e){const n=this.getChartState(),o=n.generateRoot(n.data).descendants().filter(s=>n.nodeId(s.data).toString()===e.toString())[0];return o?(o.ancestors().forEach(s=>s.data._expanded=!0),o.data._upToTheRootHighlighted=!0,o.data._expanded=!0,o.ancestors().forEach(s=>s.data._upToTheRootHighlighted=!0),this):(console.log(`ORG CHART - HIGHLIGHTROOT - Node with id (${e}) not found in the tree`),this)}clearHighlighting(){const e=this.getChartState();return e.allNodes.forEach(n=>{n.data._highlighted=!1,n.data._upToTheRootHighlighted=!1}),this.update(e.root),this}fullscreen(e){const n=this.getChartState(),r=G.select(e||n.container).node();G.select(document).on("fullscreenchange."+n.id,function(i){(document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement)==r?setTimeout(a=>{n.svg.attr("height",window.innerHeight-40)},500):n.svg.attr("height",n.svgHeight)}),r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.msRequestFullscreen&&r.msRequestFullscreen()}zoomIn(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,1.3)}zoomOut(){const{svg:e,zoomBehavior:n}=this.getChartState();e.transition().call(n.scaleBy,.78)}toDataURL(e,n){var r=new XMLHttpRequest;r.onload=function(){var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.send()}exportImg({full:e=!1,scale:n=3,onLoad:r=a=>a,save:i=!0,backgroundColor:o="#FAFAFA"}={}){const a=this,s=this.getChartState(),{svg:c,root:l}=s;let u=0;const f=c.selectAll("img");let d=f.size();const g=()=>{JSON.parse(JSON.stringify(a.lastTransform()));const p=a.duration();e&&a.fit();const{svg:y}=a.getChartState();setTimeout(v=>{a.downloadImage({node:y.node(),scale:n,isSvg:!1,backgroundColor:o,onAlreadySerialized:_=>{a.update(l)},imageName:s.imageName,onLoad:r,save:i})},e?p+10:0)};d>0?f.each(function(){a.toDataURL(this.src,p=>{this.src=p,++u==d&&g()})}):g()}exportSvg(){const{svg:e,imageName:n}=this.getChartState();return this.downloadImage({imageName:n,node:e.node(),scale:3,isSvg:!0}),this}expandAll(){const{allNodes:e,root:n,data:r}=this.getChartState();return r.forEach(i=>i._expanded=!0),this.render(),this}collapseAll(){const{allNodes:e,root:n}=this.getChartState();return e.forEach(r=>r.data._expanded=!1),this.initialExpandLevel(0),this.render(),this}downloadImage({node:e,scale:n=2,imageName:r="graph",isSvg:i=!1,save:o=!0,backgroundColor:a="#FAFAFA",onAlreadySerialized:s=l=>{},onLoad:c=l=>{}}){const l=e;function u(y,v){var _=document.createElement("a");typeof _.download=="string"?(document.body.appendChild(_),_.download=v,_.href=y,_.click(),document.body.removeChild(_)):location.replace(y)}function f(y){const v="http://www.w3.org/2000/xmlns/",_="http://www.w3.org/1999/xlink",$="http://www.w3.org/2000/svg";y=y.cloneNode(!0);const S=window.location.href+"#",N=document.createTreeWalker(y,NodeFilter.SHOW_ELEMENT,null,!1);for(;N.nextNode();)for(const b of N.currentNode.attributes)b.value.includes(S)&&(b.value=b.value.replace(S,"#"));return y.setAttributeNS(v,"xmlns",$),y.setAttributeNS(v,"xmlns:xlink",_),new XMLSerializer().serializeToString(y)}if(i){let y=f(l);y=`<?xml version="1.0" standalone="no"?>\r
`+y;var p="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(y);u(p,r+".svg"),s();return}const d=n,g=document.createElement("img");g.onload=function(){const y=document.createElement("canvas"),v=l.getBoundingClientRect();y.width=v.width*d,y.height=v.height*d;const _=y.getContext("2d");_.fillStyle=a,_.fillRect(0,0,v.width*d,v.height*d),_.drawImage(g,0,0,v.width*d,v.height*d);let $=y.toDataURL("image/png");c&&c($),o&&u($,r+".png")};var p="data:image/svg+xml; charset=utf8, "+encodeURIComponent(f(l));s(),g.src=p}getTextWidth(e,{fontSize:n=14,fontWeight:r=400,defaultFont:i="Helvetice",ctx:o}={}){return o.font=`${r||""} ${n}px ${i} `,o.measureText(e).width}clear(){const e=this.getChartState();G.select(window).on(`resize.${e.id}`,null),e.svg&&e.svg.selectAll("*").remove()}}function Ot(t){return Array.isArray?Array.isArray(t):Zi(t)==="[object Array]"}function Mf(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Tf(t){return t==null?"":Mf(t)}function kt(t){return typeof t=="string"}function Gi(t){return typeof t=="number"}function Of(t){return t===!0||t===!1||Ff(t)&&Zi(t)=="[object Boolean]"}function Ki(t){return typeof t=="object"}function Ff(t){return Ki(t)&&t!==null}function dt(t){return t!=null}function bn(t){return!t.trim().length}function Zi(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Lf="Incorrect 'index' type",zf=t=>`Invalid value for key ${t}`,Pf=t=>`Pattern length exceeds max of ${t}.`,If=t=>`Missing ${t} property in key`,Vf=t=>`Property 'weight' in key '${t}' must be a positive integer`,jr=Object.prototype.hasOwnProperty;class Uf{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=Qi(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Qi(t){let e=null,n=null,r=null,i=1,o=null;if(kt(t)||Ot(t))r=t,e=Wr(t),n=zn(t);else{if(!jr.call(t,"name"))throw new Error(If("name"));const a=t.name;if(r=a,jr.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Vf(a));e=Wr(a),n=zn(a),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function Wr(t){return Ot(t)?t:t.split(".")}function zn(t){return Ot(t)?t.join("."):t}function Hf(t,e){let n=[],r=!1;const i=(o,a,s)=>{if(dt(o))if(!a[s])n.push(o);else{let c=a[s];const l=o[c];if(!dt(l))return;if(s===a.length-1&&(kt(l)||Gi(l)||Of(l)))n.push(Tf(l));else if(Ot(l)){r=!0;for(let u=0,f=l.length;u<f;u+=1)i(l[u],a,s+1)}else a.length&&i(l,a,s+1)}};return i(t,kt(e)?e.split("."):e,0),r?n:n[0]}const Xf={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qf={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Yf={location:0,threshold:.6,distance:100},jf={useExtendedSearch:!1,getFn:Hf,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var V={...qf,...Xf,...Yf,...jf};const Wf=/[^ ]+/g;function Jf(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(Wf).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),s=parseFloat(Math.round(a*r)/r);return n.set(o,s),s},clear(){n.clear()}}}class cr{constructor({getFn:e=V.getFn,fieldNormWeight:n=V.fieldNormWeight}={}){this.norm=Jf(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,kt(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();kt(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!dt(e)||bn(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(dt(a)){if(Ot(a)){let s=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:u}=c.pop();if(dt(u))if(kt(u)&&!bn(u)){let f={v:u,i:l,n:this.norm.get(u)};s.push(f)}else Ot(u)&&u.forEach((f,d)=>{c.push({nestedArrIndex:d,value:f})})}r.$[o]=s}else if(kt(a)&&!bn(a)){let s={v:a,n:this.norm.get(a)};r.$[o]=s}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function to(t,e,{getFn:n=V.getFn,fieldNormWeight:r=V.fieldNormWeight}={}){const i=new cr({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(Qi)),i.setSources(e),i.create(),i}function Gf(t,{getFn:e=V.getFn,fieldNormWeight:n=V.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new cr({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function Fe(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=V.distance,ignoreLocation:o=V.ignoreLocation}={}){const a=e/t.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}function Kf(t=[],e=V.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=t.length;o<a;o+=1){let s=t[o];s&&r===-1?r=o:!s&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const qt=32;function Zf(t,e,n,{location:r=V.location,distance:i=V.distance,threshold:o=V.threshold,findAllMatches:a=V.findAllMatches,minMatchCharLength:s=V.minMatchCharLength,includeMatches:c=V.includeMatches,ignoreLocation:l=V.ignoreLocation}={}){if(e.length>qt)throw new Error(Pf(qt));const u=e.length,f=t.length,d=Math.max(0,Math.min(r,f));let g=o,p=d;const y=s>1||c,v=y?Array(f):[];let _;for(;(_=t.indexOf(e,p))>-1;){let b=Fe(e,{currentLocation:_,expectedLocation:d,distance:i,ignoreLocation:l});if(g=Math.min(b,g),p=_+u,y){let C=0;for(;C<u;)v[_+C]=1,C+=1}}p=-1;let $=[],S=1,N=u+f;const P=1<<u-1;for(let b=0;b<u;b+=1){let C=0,O=N;for(;C<O;)Fe(e,{errors:b,currentLocation:d+O,expectedLocation:d,distance:i,ignoreLocation:l})<=g?C=O:N=O,O=Math.floor((N-C)/2+C);N=O;let A=Math.max(1,d-O+1),M=a?f:Math.min(d+O,f)+u,D=Array(M+2);D[M+1]=(1<<b)-1;for(let m=M;m>=A;m-=1){let h=m-1,w=n[t.charAt(h)];if(y&&(v[h]=+!!w),D[m]=(D[m+1]<<1|1)&w,b&&(D[m]|=($[m+1]|$[m])<<1|1|$[m+1]),D[m]&P&&(S=Fe(e,{errors:b,currentLocation:h,expectedLocation:d,distance:i,ignoreLocation:l}),S<=g)){if(g=S,p=h,p<=d)break;A=Math.max(1,2*d-p)}}if(Fe(e,{errors:b+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:l})>g)break;$=D}const H={isMatch:p>=0,score:Math.max(.001,S)};if(y){const b=Kf(v,s);b.length?c&&(H.indices=b):H.isMatch=!1}return H}function Qf(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const rn=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class eo{constructor(e,{location:n=V.location,threshold:r=V.threshold,distance:i=V.distance,includeMatches:o=V.includeMatches,findAllMatches:a=V.findAllMatches,minMatchCharLength:s=V.minMatchCharLength,isCaseSensitive:c=V.isCaseSensitive,ignoreDiacritics:l=V.ignoreDiacritics,ignoreLocation:u=V.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u},e=c?e:e.toLowerCase(),e=l?rn(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const f=(g,p)=>{this.chunks.push({pattern:g,alphabet:Qf(g),startIndex:p})},d=this.pattern.length;if(d>qt){let g=0;const p=d%qt,y=d-p;for(;g<y;)f(this.pattern.substr(g,qt),g),g+=qt;if(p){const v=d-qt;f(this.pattern.substr(v),v)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?rn(e):e,this.pattern===e){let y={isMatch:!0,score:0};return i&&(y.indices=[[0,e.length-1]]),y}const{location:o,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options;let f=[],d=0,g=!1;this.chunks.forEach(({pattern:y,alphabet:v,startIndex:_})=>{const{isMatch:$,score:S,indices:N}=Zf(e,y,v,{location:o+_,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});$&&(g=!0),d+=S,$&&N&&(f=[...f,...N])});let p={isMatch:g,score:g?d/this.chunks.length:1};return g&&i&&(p.indices=f),p}}class It{constructor(e){this.pattern=e}static isMultiMatch(e){return Jr(e,this.multiRegex)}static isSingleMatch(e){return Jr(e,this.singleRegex)}search(){}}function Jr(t,e){const n=t.match(e);return n?n[1]:null}class th extends It{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class eh extends It{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class nh extends It{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class rh extends It{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ih extends It{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class oh extends It{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class no extends It{constructor(e,{location:n=V.location,threshold:r=V.threshold,distance:i=V.distance,includeMatches:o=V.includeMatches,findAllMatches:a=V.findAllMatches,minMatchCharLength:s=V.minMatchCharLength,isCaseSensitive:c=V.isCaseSensitive,ignoreDiacritics:l=V.ignoreDiacritics,ignoreLocation:u=V.ignoreLocation}={}){super(e),this._bitapSearch=new eo(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:c,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ro extends It{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const Pn=[th,ro,nh,rh,oh,ih,eh,no],Gr=Pn.length,sh=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ah="|";function lh(t,e={}){return t.split(ah).map(n=>{let r=n.trim().split(sh).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=r.length;o<a;o+=1){const s=r[o];let c=!1,l=-1;for(;!c&&++l<Gr;){const u=Pn[l];let f=u.isMultiMatch(s);f&&(i.push(new u(f,e)),c=!0)}if(!c)for(l=-1;++l<Gr;){const u=Pn[l];let f=u.isSingleMatch(s);if(f){i.push(new u(f,e));break}}}return i})}const uh=new Set([no.type,ro.type]);class ch{constructor(e,{isCaseSensitive:n=V.isCaseSensitive,ignoreDiacritics:r=V.ignoreDiacritics,includeMatches:i=V.includeMatches,minMatchCharLength:o=V.minMatchCharLength,ignoreLocation:a=V.ignoreLocation,findAllMatches:s=V.findAllMatches,location:c=V.location,threshold:l=V.threshold,distance:u=V.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:o,findAllMatches:s,ignoreLocation:a,location:c,threshold:l,distance:u},e=n?e:e.toLowerCase(),e=r?rn(e):e,this.pattern=e,this.query=lh(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?rn(e):e;let a=0,s=[],c=0;for(let l=0,u=n.length;l<u;l+=1){const f=n[l];s.length=0,a=0;for(let d=0,g=f.length;d<g;d+=1){const p=f[d],{isMatch:y,indices:v,score:_}=p.search(e);if(y){if(a+=1,c+=_,r){const $=p.constructor.type;uh.has($)?s=[...s,...v]:s.push(v)}}else{c=0,a=0,s.length=0;break}}if(a){let d={isMatch:!0,score:c/a};return r&&(d.indices=s),d}}return{isMatch:!1,score:1}}}const In=[];function fh(...t){In.push(...t)}function Vn(t,e){for(let n=0,r=In.length;n<r;n+=1){let i=In[n];if(i.condition(t,e))return new i(t,e)}return new eo(t,e)}const on={AND:"$and",OR:"$or"},Un={PATH:"$path",PATTERN:"$val"},Hn=t=>!!(t[on.AND]||t[on.OR]),hh=t=>!!t[Un.PATH],dh=t=>!Ot(t)&&Ki(t)&&!Hn(t),Kr=t=>({[on.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function io(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const a=hh(i);if(!a&&o.length>1&&!Hn(i))return r(Kr(i));if(dh(i)){const c=a?i[Un.PATH]:o[0],l=a?i[Un.PATTERN]:i[c];if(!kt(l))throw new Error(zf(c));const u={keyId:zn(c),pattern:l};return n&&(u.searcher=Vn(l,e)),u}let s={children:[],operator:o[0]};return o.forEach(c=>{const l=i[c];Ot(l)&&l.forEach(u=>{s.children.push(r(u))})}),s};return Hn(t)||(t=Kr(t)),r(t)}function ph(t,{ignoreFieldNorm:e=V.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:a})=>{const s=i?i.weight:null;r*=Math.pow(a===0&&s?Number.EPSILON:a,(s||1)*(e?1:o))}),n.score=r})}function gh(t,e){const n=t.matches;e.matches=[],dt(n)&&n.forEach(r=>{if(!dt(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let a={indices:i,value:o};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function mh(t,e){e.score=t.score}function yh(t,e,{includeMatches:n=V.includeMatches,includeScore:r=V.includeScore}={}){const i=[];return n&&i.push(gh),r&&i.push(mh),t.map(o=>{const{idx:a}=o,s={item:e[a],refIndex:a};return i.length&&i.forEach(c=>{c(o,s)}),s})}class ee{constructor(e,n={},r){this.options={...V,...n},this.options.useExtendedSearch,this._keyStore=new Uf(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof cr))throw new Error(Lf);this._myIndex=n||to(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){dt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:s}=this.options;let c=kt(e)?kt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ph(c,{ignoreFieldNorm:s}),o&&c.sort(a),Gi(n)&&n>-1&&(c=c.slice(0,n)),yh(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Vn(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:a,n:s})=>{if(!dt(o))return;const{isMatch:c,score:l,indices:u}=n.searchIn(o);c&&i.push({item:o,idx:a,matches:[{score:l,value:o,norm:s,indices:u}]})}),i}_searchLogical(e){const n=io(e,this.options),r=(s,c,l)=>{if(!s.children){const{keyId:f,searcher:d}=s,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:d});return g&&g.length?[{idx:l,item:c,matches:g}]:[]}const u=[];for(let f=0,d=s.children.length;f<d;f+=1){const g=s.children[f],p=r(g,c,l);if(p.length)u.push(...p);else if(s.operator===on.AND)return[]}return u},i=this._myIndex.records,o={},a=[];return i.forEach(({$:s,i:c})=>{if(dt(s)){let l=r(n,s,c);l.length&&(o[c]||(o[c]={idx:c,item:s,matches:[]},a.push(o[c])),l.forEach(({matches:u})=>{o[c].matches.push(...u)}))}}),a}_searchObjectList(e){const n=Vn(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:s})=>{if(!dt(a))return;let c=[];r.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:n}))}),c.length&&o.push({idx:s,item:a,matches:c})}),o}_findMatches({key:e,value:n,searcher:r}){if(!dt(n))return[];let i=[];if(Ot(n))n.forEach(({v:o,i:a,n:s})=>{if(!dt(o))return;const{isMatch:c,score:l,indices:u}=r.searchIn(o);c&&i.push({score:l,key:e,value:o,idx:a,norm:s,indices:u})});else{const{v:o,n:a}=n,{isMatch:s,score:c,indices:l}=r.searchIn(o);s&&i.push({score:c,key:e,value:o,norm:a,indices:l})}return i}}ee.version="7.1.0";ee.createIndex=to;ee.parseIndex=Gf;ee.config=V;ee.parseQuery=io;fh(ch);const wh={style:{"block-size":"100%"}},oo={__name:"SelectUserDialog",props:{isDialogVisible:{type:Boolean,required:!0},users:{type:Array,required:!0},selectedUsers:{type:Array,required:!0}},emits:["update:isDialogVisible","selectUser"],setup(t,{emit:e}){const n=t,r=e,i=Ut(null),o=J(null),{theme:a}=cs();function s(p){i.value=p.api,i.value.setGridOption("rowData",u())}const c=J([{headerName:"ÙØ­Ù Ú©Ø§Ø±",field:"workplace",rowGroup:!0,hide:!0},{headerName:"ÙÙØ·ÙÙ Ú©Ø§Ø±Û",field:"workArea",rowGroup:!0,hide:!0},{headerName:"ÙØ±Ú©Ø² ÙØ²ÛÙÙ",field:"costCenter",rowGroup:!0,hide:!0},{headerName:"Ø³ÙØª Ø´ØºÙÛ",field:"jobPosition",rowGroup:!0,hide:!0},{headerName:"Ú©Ø¯ Ù¾Ø±Ø³ÙÙÛ",field:"personnelCode"},{headerName:"ÙØ§Ù",field:"firstName"},{headerName:"ÙØ§Ù Ø®Ø§ÙÙØ§Ø¯Ú¯Û",field:"lastName"}]),l=J({mode:"multiRow",enableClickSelection:!0,selectAll:"filtered",groupSelects:"filteredDescendants"});function u(){return n.users.map(p=>{var y,v,_,$,S,N,P,H;return{id:p.id,personnelCode:Number.parseInt(p.personnel_code),firstName:p.first_name,lastName:p.last_name,workplace:(v=(y=p.profile)==null?void 0:y.workplace)==null?void 0:v.name,workArea:($=(_=p.profile)==null?void 0:_.work_area)==null?void 0:$.name,costCenter:(N=(S=p.profile)==null?void 0:S.cost_center)==null?void 0:N.name,jobPosition:(H=(P=p.profile)==null?void 0:P.job_position)==null?void 0:H.name}})}const f=J({filter:"agGroupColumnFilter"});function d(){r("selectUser",i.value.getSelectedRows().map(p=>Number.parseInt(p.id))),r("update:isDialogVisible",!1)}function g(p){r("update:isDialogVisible",p)}return Dt(()=>n.isDialogVisible,p=>{p&&(o.value={rowSelection:n.selectedUsers.map(y=>String(y.id))})}),(p,y)=>{const v=Gn,_=pi("AgGridVue");return Pt(),Jn(Qn,{width:p.$vuetify.display.smAndDown?"auto":"90%",height:p.$vuetify.display.smAndDown?"auto":"90%","model-value":n.isDialogVisible,"onUpdate:modelValue":g},{default:I(()=>[B(v,{onClick:y[0]||(y[0]=$=>g(!1))}),B(Gt,null,{default:I(()=>[B(vt,null,{default:I(()=>[B(Kn,{style:{"block-size":"100%"},class:"d-flex flex-column"},{default:I(()=>[B(fs,{class:"ma-3"},{default:I(()=>[...y[1]||(y[1]=[$t(" Ø§ÙØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±Ø§Ù ",-1)])]),_:1}),B(Zn,null,{default:I(()=>[At("section",wh,[B(_,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":F(c),"get-row-id":$=>String($.data.id),"enable-rtl":"",pagination:"","group-display-type":"multipleColumns","auto-group-column-def":F(f),"cell-selection":"","row-selection":F(l),theme:F(a),"initial-state":F(o),onGridReady:s},null,8,["column-defs","get-row-id","auto-group-column-def","row-selection","theme","initial-state"])])]),_:1}),B(hs,null,{default:I(()=>[B(Jt,{color:"primary",onClick:d},{default:I(()=>[...y[2]||(y[2]=[$t(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","height","model-value"])}}},vh={__name:"AddNodeDialog",props:{isDialogVisible:{type:Boolean,required:!0},orgPositions:{type:Array,required:!0},orgUnits:{type:Array,required:!0},users:{type:Array,required:!0}},emits:["add","update:isDialogVisible"],setup(t,{emit:e}){const n=t,r=e,i="https://blureen.afgc.ir/storage",o=J(),a=je({isSelectUserDialogOpen:!1}),s=J(n.orgUnits),c=J(null),l=J(null),u=J([]),f=J(""),d=st(()=>{const b=n.users.map(C=>{var O,A,M,D,L,m,h,w;return{...C,full_name:p([C.first_name,C.last_name]),work_area_cost_center:p([(A=(O=C.profile)==null?void 0:O.work_area)==null?void 0:A.name,(D=(M=C.profile)==null?void 0:M.cost_center)==null?void 0:D.name]),last_name_work_area_cost_center:p([C.last_name,(m=(L=C.profile)==null?void 0:L.work_area)==null?void 0:m.name,(w=(h=C.profile)==null?void 0:h.cost_center)==null?void 0:w.name])}});return new ee(b,{keys:[{name:"personnel_code",weight:2},{name:"full_name",weight:1.5},{name:"work_area_cost_center",weight:1.5},{name:"last_name_work_area_cost_center",weight:1.5}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,includeScore:!0,findAllMatches:!0,minMatchCharLength:1})}),g=st(()=>{var O;const b=(O=f.value)==null?void 0:O.trim();return b?d.value.search(b).map(A=>A.item):n.users});function p(b){return b.filter(Boolean).join(" ").replace(/[\s\u200C]+/g,"")}function y(b){return(b||"").toString().replace(/[\s\u200C]+/g,"")}function v(b){b.key==="Backspace"&&!f.value&&b.stopPropagation()}function _(b){if(typeof b!="string")return;if(!b.trim()){l.value=null;return}const C=s.value.find(O=>y(O.name)===y(b));C&&(l.value=C)}function $(b){u.value=u.value.filter(C=>C.id!==b)}function S(b){u.value=n.users.filter(C=>b.includes(C.id))}function N(){var b;(b=o.value)==null||b.validate().then(({valid:C})=>{if(C){if(typeof l.value=="string"){const O=l.value.trim();l.value={id:Math.floor(Math.random()*999901)+100,name:O},s.value.push(l.value)}r("add",{orgPosition:c.value,orgUnit:l.value,users:u.value}),r("update:isDialogVisible",!1)}})}function P(){r("update:isDialogVisible",!1)}function H(b){r("update:isDialogVisible",b)}return Dt(()=>n.isDialogVisible,b=>{b||(c.value=null,l.value=null,u.value=[],f.value="")}),(b,C)=>{const O=Gn;return Pt(),xe(zt,null,[B(Qn,{width:b.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":H},{default:I(()=>[B(O,{onClick:C[0]||(C[0]=A=>H(!1))}),B(Kn,{class:"pa-1"},{default:I(()=>[B(Zn,null,{default:I(()=>[C[10]||(C[10]=At("h6",{class:"text-h6 text-center mb-6"}," Ø§ÙØ²ÙØ¯Ù Ú¯Ø±Ù Ø¬Ø¯ÛØ¯ ",-1)),B(yi,{ref_key:"refVForm",ref:o,"validate-on":"submit lazy",onSubmit:gi(N,["prevent"])},{default:I(()=>[B(Gt,null,{default:I(()=>[B(vt,{cols:"12",md:"6"},{default:I(()=>[B(We,{modelValue:F(c),"onUpdate:modelValue":C[1]||(C[1]=A=>Lt(c)?c.value=A:null),label:"Ø³ÙØª",items:n.orgPositions,"item-title":"name","item-value":"id","return-object":"",rules:["requiredValidator"in b?b.requiredValidator:F(re)]},null,8,["modelValue","items","rules"])]),_:1}),B(vt,{cols:"12",md:"6"},{default:I(()=>[B(wi,{modelValue:F(l),"onUpdate:modelValue":[C[2]||(C[2]=A=>Lt(l)?l.value=A:null),_],label:"ÙØ§Ø­Ø¯",items:F(s),"item-title":"name","item-value":"id",rules:["requiredValidator"in b?b.requiredValidator:F(re)]},null,8,["modelValue","items","rules"])]),_:1}),B(vt,{cols:"12"},{default:I(()=>[B(We,{modelValue:F(u),"onUpdate:modelValue":C[4]||(C[4]=A=>Lt(u)?u.value=A:null),search:F(f),"onUpdate:search":C[5]||(C[5]=A=>Lt(f)?f.value=A:null),multiple:"",items:F(g),"item-title":A=>`${A.first_name} ${A.last_name} (${A.personnel_code})`,clearable:"","item-value":"id",label:"Ú©Ø§Ø±Ø¨Ø±Ø§Ù","no-filter":!0,"return-object":"",rules:["requiredValidator"in b?b.requiredValidator:F(re)],onKeydownCapture:v},{selection:I(()=>[...C[7]||(C[7]=[])]),item:I(({props:A,item:M})=>{var D,L,m,h,w,E,R,T,z,U,Y,Q,j,tt;return[B(Je,ht(A,{"prepend-avatar":`${F(i)}/${(L=(D=M==null?void 0:M.raw)==null?void 0:D.avatar)==null?void 0:L.path}`,title:`${(m=M==null?void 0:M.raw)==null?void 0:m.first_name} ${(h=M==null?void 0:M.raw)==null?void 0:h.last_name} (${(w=M==null?void 0:M.raw)==null?void 0:w.personnel_code})`,subtitle:`${((T=(R=(E=M==null?void 0:M.raw)==null?void 0:E.profile)==null?void 0:R.work_area)==null?void 0:T.name)||""} ${(Y=(U=(z=M==null?void 0:M.raw)==null?void 0:z.profile)==null?void 0:U.work_area)!=null&&Y.name?"â":""} ${((tt=(j=(Q=M==null?void 0:M.raw)==null?void 0:Q.profile)==null?void 0:j.cost_center)==null?void 0:tt.name)||""}`}),null,16,["prepend-avatar","title","subtitle"])]}),append:I(()=>[B(Jt,{variant:"outlined",color:"secondary",class:"border",onClick:C[3]||(C[3]=A=>F(a).isSelectUserDialogOpen=!0)},{default:I(()=>[B(ve,{icon:"tabler-users",size:"25"})]),_:1})]),_:1},8,["modelValue","search","items","item-title","rules"])]),_:1})]),_:1}),B(Gt,null,{default:I(()=>[B(vt,{cols:"12",style:{"max-block-size":"50em"},class:"overflow-auto"},{default:I(()=>[(Pt(!0),xe(zt,null,mi(F(u),A=>(Pt(),Jn(Ye,ht({ref_for:!0},n,{key:A.id,link:"",pill:"",closable:"",variant:"outlined",size:"x-large",class:"ml-3 mb-3","onClick:close":M=>$(A.id)}),{default:I(()=>{var M;return[B(Wn,{start:"",size:"40",image:`${F(i)}/${(M=A.avatar)==null?void 0:M.path}`},null,8,["image"]),$t(" "+_e(A.first_name)+" "+_e(A.last_name),1)]}),_:2},1040,["onClick:close"]))),128))]),_:1})]),_:1}),B(Gt,null,{default:I(()=>[B(vt,{cols:"12",class:"d-flex justify-center gap-4"},{default:I(()=>[B(Jt,{type:"submit"},{default:I(()=>[...C[8]||(C[8]=[$t(" Ø§ÙØ²ÙØ¯Ù ",-1)])]),_:1}),B(Jt,{color:"secondary",variant:"tonal",onClick:P},{default:I(()=>[...C[9]||(C[9]=[$t(" Ø¨Ø³ØªÙ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"]),B(oo,{"is-dialog-visible":F(a).isSelectUserDialogOpen,"onUpdate:isDialogVisible":C[6]||(C[6]=A=>F(a).isSelectUserDialogOpen=A),users:n.users,"selected-users":F(u),onSelectUser:S},null,8,["is-dialog-visible","users","selected-users"])],64)}}},xh={__name:"EditNodeDialog",props:{isDialogVisible:{type:Boolean,required:!0},orgPositions:{type:Array,required:!0},orgUnits:{type:Array,required:!0},users:{type:Array,required:!0},node:{type:Object,required:!1}},emits:["edit","update:isDialogVisible"],setup(t,{emit:e}){const n=t,r=e,i="https://blureen.afgc.ir/storage",o=J(),a=je({isSelectUserDialogOpen:!1}),s=J(n.orgUnits),c=J(null),l=J(null),u=J([]),f=J(""),d=st(()=>{const b=n.users.map(C=>{var O,A,M,D,L,m,h,w;return{...C,full_name:p([C.first_name,C.last_name]),work_area_cost_center:p([(A=(O=C.profile)==null?void 0:O.work_area)==null?void 0:A.name,(D=(M=C.profile)==null?void 0:M.cost_center)==null?void 0:D.name]),last_name_work_area_cost_center:p([C.last_name,(m=(L=C.profile)==null?void 0:L.work_area)==null?void 0:m.name,(w=(h=C.profile)==null?void 0:h.cost_center)==null?void 0:w.name])}});return new ee(b,{keys:[{name:"personnel_code",weight:2},{name:"full_name",weight:1.5},{name:"work_area_cost_center",weight:1.5},{name:"last_name_work_area_cost_center",weight:1.5}],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0,includeScore:!0,findAllMatches:!0,minMatchCharLength:1})}),g=st(()=>{var O;const b=(O=f.value)==null?void 0:O.trim();return b?d.value.search(b).map(A=>A.item):n.users});function p(b){return b.filter(Boolean).join(" ").replace(/[\s\u200C]+/g,"")}function y(b){return(b||"").toString().replace(/[\s\u200C]+/g,"")}function v(b){b.key==="Backspace"&&!f.value&&b.stopPropagation()}function _(b){if(typeof b!="string")return;if(!b.trim()){l.value=null;return}const C=s.value.find(O=>y(O.name)===y(b));C&&(l.value=C)}function $(b){u.value=u.value.filter(C=>C.id!==b)}function S(b){u.value=n.users.filter(C=>b.includes(C.id))}function N(){var b;(b=o.value)==null||b.validate().then(({valid:C})=>{if(C){if(typeof l.value=="string"){const O=l.value.trim();l.value={id:Math.floor(Math.random()*901)+100,name:O},s.value.push(l.value)}r("edit",{id:n.node.id,parentId:n.node.parentId,orgPosition:c.value,orgUnit:l.value,users:u.value}),r("update:isDialogVisible",!1)}})}function P(){r("update:isDialogVisible",!1)}function H(b){r("update:isDialogVisible",b)}return Dt(()=>n.isDialogVisible,b=>{b&&(c.value=n.node.orgPosition,l.value=n.node.orgUnit,u.value=n.node.users,f.value="")}),(b,C)=>{const O=Gn;return Pt(),xe(zt,null,[B(Qn,{width:b.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":H},{default:I(()=>[B(O,{onClick:C[0]||(C[0]=A=>H(!1))}),B(Kn,{class:"pa-1"},{default:I(()=>[B(Zn,null,{default:I(()=>[C[10]||(C[10]=At("h6",{class:"text-h6 text-center mb-6"}," Ø§ÙØ²ÙØ¯Ù Ú¯Ø±Ù Ø¬Ø¯ÛØ¯ ",-1)),B(yi,{ref_key:"refVForm",ref:o,"validate-on":"submit lazy",onSubmit:gi(N,["prevent"])},{default:I(()=>[B(Gt,null,{default:I(()=>[B(vt,{cols:"12",md:"6"},{default:I(()=>[B(We,{modelValue:F(c),"onUpdate:modelValue":C[1]||(C[1]=A=>Lt(c)?c.value=A:null),label:"Ø³ÙØª",items:n.orgPositions,"item-title":"name","item-value":"id","return-object":"",rules:["requiredValidator"in b?b.requiredValidator:F(re)]},null,8,["modelValue","items","rules"])]),_:1}),B(vt,{cols:"12",md:"6"},{default:I(()=>[B(wi,{modelValue:F(l),"onUpdate:modelValue":[C[2]||(C[2]=A=>Lt(l)?l.value=A:null),_],label:"ÙØ§Ø­Ø¯",items:F(s),"item-title":"name","item-value":"id",rules:["requiredValidator"in b?b.requiredValidator:F(re)]},null,8,["modelValue","items","rules"])]),_:1}),B(vt,{cols:"12"},{default:I(()=>[B(We,{modelValue:F(u),"onUpdate:modelValue":C[4]||(C[4]=A=>Lt(u)?u.value=A:null),search:F(f),"onUpdate:search":C[5]||(C[5]=A=>Lt(f)?f.value=A:null),multiple:"",items:F(g),"item-title":A=>`${A.first_name} ${A.last_name} (${A.personnel_code})`,clearable:"","item-value":"id",label:"Ú©Ø§Ø±Ø¨Ø±Ø§Ù","no-filter":!0,"return-object":"",rules:["requiredValidator"in b?b.requiredValidator:F(re)],onKeydownCapture:v},{selection:I(()=>[...C[7]||(C[7]=[])]),item:I(({props:A,item:M})=>{var D,L,m,h,w,E,R,T,z,U,Y,Q,j,tt;return[B(Je,ht(A,{"prepend-avatar":`${F(i)}/${(L=(D=M==null?void 0:M.raw)==null?void 0:D.avatar)==null?void 0:L.path}`,title:`${(m=M==null?void 0:M.raw)==null?void 0:m.first_name} ${(h=M==null?void 0:M.raw)==null?void 0:h.last_name} (${(w=M==null?void 0:M.raw)==null?void 0:w.personnel_code})`,subtitle:`${((T=(R=(E=M==null?void 0:M.raw)==null?void 0:E.profile)==null?void 0:R.work_area)==null?void 0:T.name)||""} ${(Y=(U=(z=M==null?void 0:M.raw)==null?void 0:z.profile)==null?void 0:U.work_area)!=null&&Y.name?"â":""} ${((tt=(j=(Q=M==null?void 0:M.raw)==null?void 0:Q.profile)==null?void 0:j.cost_center)==null?void 0:tt.name)||""}`}),null,16,["prepend-avatar","title","subtitle"])]}),append:I(()=>[B(Jt,{variant:"outlined",color:"secondary",class:"border",onClick:C[3]||(C[3]=A=>F(a).isSelectUserDialogOpen=!0)},{default:I(()=>[B(ve,{icon:"tabler-users",size:"25"})]),_:1})]),_:1},8,["modelValue","search","items","item-title","rules"])]),_:1})]),_:1}),B(Gt,null,{default:I(()=>[B(vt,{cols:"12",style:{"max-block-size":"50em"},class:"overflow-auto"},{default:I(()=>[(Pt(!0),xe(zt,null,mi(F(u),A=>(Pt(),Jn(Ye,ht({ref_for:!0},n,{key:A.id,link:"",pill:"",closable:"",variant:"outlined",size:"x-large",class:"ml-3 mb-3","onClick:close":M=>$(A.id)}),{default:I(()=>{var M;return[B(Wn,{start:"",size:"40",image:`${F(i)}/${(M=A.avatar)==null?void 0:M.path}`},null,8,["image"]),$t(" "+_e(A.first_name)+" "+_e(A.last_name),1)]}),_:2},1040,["onClick:close"]))),128))]),_:1})]),_:1}),B(Gt,null,{default:I(()=>[B(vt,{cols:"12",class:"d-flex justify-center gap-4"},{default:I(()=>[B(Jt,{type:"submit"},{default:I(()=>[...C[8]||(C[8]=[$t(" ÙÛØ±Ø§ÛØ´ ",-1)])]),_:1}),B(Jt,{color:"secondary",variant:"tonal",onClick:P},{default:I(()=>[...C[9]||(C[9]=[$t(" Ø¨Ø³ØªÙ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"]),B(oo,{"is-dialog-visible":F(a).isSelectUserDialogOpen,"onUpdate:isDialogVisible":C[6]||(C[6]=A=>F(a).isSelectUserDialogOpen=A),users:n.users,"selected-users":F(u),onSelectUser:S},null,8,["is-dialog-visible","users","selected-users"])],64)}}};function _h(t){const e=ks[t.data.orgPosition.id]||"rgb(var(--v-theme-on-secondary))";return`
    <div class="org-chart-node" style="width: ${t.width}px; height: ${t.height}px;">
      <!-- Node Card -->
      <div class="org-chart-card">
        <!-- Action Buttons -->
        <div class="org-chart-action-bar">
          <button 
            class="node-action-btn" 
            data-action="edit" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
              <path d="m15 5 4 4"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="add" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14"/>
              <path d="M5 12h14"/>
            </svg>
          </button>
          <button 
            class="node-action-btn" 
            data-action="delete" 
            data-node-id="${t.data.id}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18"/>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            </svg>
          </button>
        </div>
        <!-- OrgPosition (top) -->
        <div class="org-position" style="background-color: ${e};">
          ${t.data.orgPosition.name}
        </div>
        <!-- OrgUnit (middle) -->
        <div class="org-unit">
          ${t.data.orgUnit.name}
        </div>
      </div>
    </div>
  `}function so(t,e){return function(){return t.apply(e,arguments)}}const{toString:bh}=Object.prototype,{getPrototypeOf:fr}=Object,{iterator:cn,toStringTag:ao}=Symbol,fn=(t=>e=>{const n=bh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bt=t=>(t=t.toLowerCase(),e=>fn(e)===t),hn=t=>e=>typeof e===t,{isArray:ce}=Array,le=hn("undefined");function ke(t){return t!==null&&!le(t)&&t.constructor!==null&&!le(t.constructor)&&lt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lo=bt("ArrayBuffer");function Ch(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lo(t.buffer),e}const Eh=hn("string"),lt=hn("function"),uo=hn("number"),$e=t=>t!==null&&typeof t=="object",Sh=t=>t===!0||t===!1,He=t=>{if(fn(t)!=="object")return!1;const e=fr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ao in t)&&!(cn in t)},Ah=t=>{if(!$e(t)||ke(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},kh=bt("Date"),$h=bt("File"),Rh=bt("Blob"),Bh=bt("FileList"),Nh=t=>$e(t)&&lt(t.pipe),Dh=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||lt(t.append)&&((e=fn(t))==="formdata"||e==="object"&&lt(t.toString)&&t.toString()==="[object FormData]"))},Mh=bt("URLSearchParams"),[Th,Oh,Fh,Lh]=["ReadableStream","Request","Response","Headers"].map(bt),zh=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Re(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),ce(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(ke(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],e.call(null,t[s],s,t)}}function co(t,e){if(ke(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Wt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fo=t=>!le(t)&&t!==Wt;function Xn(){const{caseless:t,skipUndefined:e}=fo(this)&&this||{},n={},r=(i,o)=>{const a=t&&co(n,o)||o;He(n[a])&&He(i)?n[a]=Xn(n[a],i):He(i)?n[a]=Xn({},i):ce(i)?n[a]=i.slice():(!e||!le(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Re(arguments[i],r);return n}const Ph=(t,e,n,{allOwnKeys:r}={})=>(Re(e,(i,o)=>{n&&lt(i)?t[o]=so(i,n):t[o]=i},{allOwnKeys:r}),t),Ih=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Vh=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Uh=(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!s[a]&&(e[a]=t[a],s[a]=!0);t=n!==!1&&fr(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Hh=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Xh=t=>{if(!t)return null;if(ce(t))return t;let e=t.length;if(!uo(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},qh=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&fr(Uint8Array)),Yh=(t,e)=>{const r=(t&&t[cn]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},jh=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Wh=bt("HTMLFormElement"),Jh=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Zr=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Gh=bt("RegExp"),ho=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Re(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},Kh=t=>{ho(t,(e,n)=>{if(lt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(lt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Zh=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return ce(t)?r(t):r(String(t).split(e)),n},Qh=()=>{},td=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function ed(t){return!!(t&&lt(t.append)&&t[ao]==="FormData"&&t[cn])}const nd=t=>{const e=new Array(10),n=(r,i)=>{if($e(r)){if(e.indexOf(r)>=0)return;if(ke(r))return r;if(!("toJSON"in r)){e[i]=r;const o=ce(r)?[]:{};return Re(r,(a,s)=>{const c=n(a,i+1);!le(c)&&(o[s]=c)}),e[i]=void 0,o}}return r};return n(t,0)},rd=bt("AsyncFunction"),id=t=>t&&($e(t)||lt(t))&&lt(t.then)&&lt(t.catch),po=((t,e)=>t?setImmediate:e?((n,r)=>(Wt.addEventListener("message",({source:i,data:o})=>{i===Wt&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Wt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",lt(Wt.postMessage)),od=typeof queueMicrotask<"u"?queueMicrotask.bind(Wt):typeof process<"u"&&process.nextTick||po,sd=t=>t!=null&&lt(t[cn]),x={isArray:ce,isArrayBuffer:lo,isBuffer:ke,isFormData:Dh,isArrayBufferView:Ch,isString:Eh,isNumber:uo,isBoolean:Sh,isObject:$e,isPlainObject:He,isEmptyObject:Ah,isReadableStream:Th,isRequest:Oh,isResponse:Fh,isHeaders:Lh,isUndefined:le,isDate:kh,isFile:$h,isBlob:Rh,isRegExp:Gh,isFunction:lt,isStream:Nh,isURLSearchParams:Mh,isTypedArray:qh,isFileList:Bh,forEach:Re,merge:Xn,extend:Ph,trim:zh,stripBOM:Ih,inherits:Vh,toFlatObject:Uh,kindOf:fn,kindOfTest:bt,endsWith:Hh,toArray:Xh,forEachEntry:Yh,matchAll:jh,isHTMLForm:Wh,hasOwnProperty:Zr,hasOwnProp:Zr,reduceDescriptors:ho,freezeMethods:Kh,toObjectSet:Zh,toCamelCase:Jh,noop:Qh,toFiniteNumber:td,findKey:co,global:Wt,isContextDefined:fo,isSpecCompliantForm:ed,toJSONObject:nd,isAsyncFn:rd,isThenable:id,setImmediate:po,asap:od,isIterable:sd};function q(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}x.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const go=q.prototype,mo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mo[t]={value:t}});Object.defineProperties(q,mo);Object.defineProperty(go,"isAxiosError",{value:!0});q.from=(t,e,n,r,i,o)=>{const a=Object.create(go);x.toFlatObject(t,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const s=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return q.call(a,s,c,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",o&&Object.assign(a,o),a};const ad=null;function qn(t){return x.isPlainObject(t)||x.isArray(t)}function yo(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function Qr(t,e,n){return t?t.concat(e).map(function(i,o){return i=yo(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function ld(t){return x.isArray(t)&&!t.some(qn)}const ud=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function dn(t,e,n){if(!x.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=x.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!x.isUndefined(v[y])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(x.isDate(p))return p.toISOString();if(x.isBoolean(p))return p.toString();if(!c&&x.isBlob(p))throw new q("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(p)||x.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,y,v){let _=p;if(p&&!v&&typeof p=="object"){if(x.endsWith(y,"{}"))y=r?y:y.slice(0,-2),p=JSON.stringify(p);else if(x.isArray(p)&&ld(p)||(x.isFileList(p)||x.endsWith(y,"[]"))&&(_=x.toArray(p)))return y=yo(y),_.forEach(function(S,N){!(x.isUndefined(S)||S===null)&&e.append(a===!0?Qr([y],N,o):a===null?y:y+"[]",l(S))}),!1}return qn(p)?!0:(e.append(Qr(v,y,o),l(p)),!1)}const f=[],d=Object.assign(ud,{defaultVisitor:u,convertValue:l,isVisitable:qn});function g(p,y){if(!x.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(p),x.forEach(p,function(_,$){(!(x.isUndefined(_)||_===null)&&i.call(e,_,x.isString($)?$.trim():$,y,d))===!0&&g(_,y?y.concat($):[$])}),f.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return g(t),e}function ti(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function hr(t,e){this._pairs=[],t&&dn(t,this,e)}const wo=hr.prototype;wo.append=function(e,n){this._pairs.push([e,n])};wo.toString=function(e){const n=e?function(r){return e.call(this,r,ti)}:ti;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function cd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vo(t,e,n){if(!e)return t;const r=n&&n.encode||cd;x.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=x.isURLSearchParams(e)?e.toString():new hr(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class ei{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fd=typeof URLSearchParams<"u"?URLSearchParams:hr,hd=typeof FormData<"u"?FormData:null,dd=typeof Blob<"u"?Blob:null,pd={isBrowser:!0,classes:{URLSearchParams:fd,FormData:hd,Blob:dd},protocols:["http","https","file","blob","url","data"]},dr=typeof window<"u"&&typeof document<"u",Yn=typeof navigator=="object"&&navigator||void 0,gd=dr&&(!Yn||["ReactNative","NativeScript","NS"].indexOf(Yn.product)<0),md=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yd=dr&&window.location.href||"http://localhost",wd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dr,hasStandardBrowserEnv:gd,hasStandardBrowserWebWorkerEnv:md,navigator:Yn,origin:yd},Symbol.toStringTag,{value:"Module"})),it={...wd,...pd};function vd(t,e){return dn(t,new it.classes.URLSearchParams,{visitor:function(n,r,i,o){return it.isNode&&x.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function xd(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _d(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function _o(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&x.isArray(i)?i.length:a,c?(x.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!x.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&x.isArray(i[a])&&(i[a]=_d(i[a])),!s)}if(x.isFormData(t)&&x.isFunction(t.entries)){const n={};return x.forEachEntry(t,(r,i)=>{e(xd(r),i,n,0)}),n}return null}function bd(t,e,n){if(x.isString(t))try{return(e||JSON.parse)(t),x.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Be={transitional:xo,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=x.isObject(e);if(o&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return i?JSON.stringify(_o(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e)||x.isReadableStream(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return vd(e,this.formSerializer).toString();if((s=x.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return dn(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),bd(e)):e}],transformResponse:[function(e){const n=this.transitional||Be.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(x.isResponse(e)||x.isReadableStream(e))return e;if(e&&x.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(s){if(a)throw s.name==="SyntaxError"?q.from(s,q.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],t=>{Be.headers[t]={}});const Cd=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ed=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&Cd[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ni=Symbol("internals");function me(t){return t&&String(t).trim().toLowerCase()}function Xe(t){return t===!1||t==null?t:x.isArray(t)?t.map(Xe):String(t)}function Sd(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Ad=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Cn(t,e,n,r,i){if(x.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!x.isString(e)){if(x.isString(r))return e.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(e)}}function kd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $d(t,e){const n=x.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}let ut=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(s,c,l){const u=me(c);if(!u)throw new Error("header name must be a non-empty string");const f=x.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Xe(s))}const a=(s,c)=>x.forEach(s,(l,u)=>o(l,u,c));if(x.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(x.isString(e)&&(e=e.trim())&&!Ad(e))a(Ed(e),n);else if(x.isObject(e)&&x.isIterable(e)){let s={},c,l;for(const u of e){if(!x.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?x.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=me(e),e){const r=x.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Sd(i);if(x.isFunction(n))return n.call(this,i,r);if(x.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=me(e),e){const r=x.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Cn(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=me(a),a){const s=x.findKey(r,a);s&&(!n||Cn(r,r[s],s,n))&&(delete r[s],i=!0)}}return x.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||Cn(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return x.forEach(this,(i,o)=>{const a=x.findKey(r,o);if(a){n[a]=Xe(i),delete n[o];return}const s=e?kd(o):String(o).trim();s!==o&&delete n[o],n[s]=Xe(i),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return x.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&x.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[ni]=this[ni]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=me(a);r[s]||($d(i,a),r[s]=!0)}return x.isArray(e)?e.forEach(o):o(e),this}};ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(ut.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});x.freezeMethods(ut);function En(t,e){const n=this||Be,r=e||n,i=ut.from(r.headers);let o=r.data;return x.forEach(t,function(s){o=s.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function bo(t){return!!(t&&t.__CANCEL__)}function fe(t,e,n){q.call(this,t??"canceled",q.ERR_CANCELED,e,n),this.name="CanceledError"}x.inherits(fe,q,{__CANCEL__:!0});function Co(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new q("Request failed with status code "+n.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Rd(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Bd(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let f=o,d=0;for(;f!==i;)d+=n[f++],f=f%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-a<e)return;const g=u&&l-u;return g?Math.round(d*1e3/g):void 0}}function Nd(t,e){let n=0,r=1e3/e,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),t(...l)};return[(...l)=>{const u=Date.now(),f=u-n;f>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-f)))},()=>i&&a(i)]}const sn=(t,e,n=3)=>{let r=0;const i=Bd(50,250);return Nd(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const f={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(f)},n)},ri=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},ii=t=>(...e)=>x.asap(()=>t(...e)),Dd=it.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,it.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(it.origin),it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent)):()=>!0,Md=it.hasStandardBrowserEnv?{write(t,e,n,r,i,o,a){if(typeof document>"u")return;const s=[`${t}=${encodeURIComponent(e)}`];x.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),x.isString(r)&&s.push(`path=${r}`),x.isString(i)&&s.push(`domain=${i}`),o===!0&&s.push("secure"),x.isString(a)&&s.push(`SameSite=${a}`),document.cookie=s.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Td(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Od(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Eo(t,e,n){let r=!Td(e);return t&&(r||n==!1)?Od(t,e):e}const oi=t=>t instanceof ut?{...t}:t;function te(t,e){e=e||{};const n={};function r(l,u,f,d){return x.isPlainObject(l)&&x.isPlainObject(u)?x.merge.call({caseless:d},l,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function i(l,u,f,d){if(x.isUndefined(u)){if(!x.isUndefined(l))return r(void 0,l,f,d)}else return r(l,u,f,d)}function o(l,u){if(!x.isUndefined(u))return r(void 0,u)}function a(l,u){if(x.isUndefined(u)){if(!x.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,f){if(f in e)return r(l,u);if(f in t)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,f)=>i(oi(l),oi(u),f,!0)};return x.forEach(Object.keys({...t,...e}),function(u){const f=c[u]||i,d=f(t[u],e[u],u);x.isUndefined(d)&&f!==s||(n[u]=d)}),n}const So=t=>{const e=te({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=e;if(e.headers=a=ut.from(a),e.url=vo(Eo(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),x.isFormData(n)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(x.isFunction(n.getHeaders)){const c=n.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{l.includes(u.toLowerCase())&&a.set(u,f)})}}if(it.hasStandardBrowserEnv&&(r&&x.isFunction(r)&&(r=r(e)),r||r!==!1&&Dd(e.url))){const c=i&&o&&Md.read(o);c&&a.set(i,c)}return e},Fd=typeof XMLHttpRequest<"u",Ld=Fd&&function(t){return new Promise(function(n,r){const i=So(t);let o=i.data;const a=ut.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,f,d,g,p;function y(){g&&g(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function _(){if(!v)return;const S=ut.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),P={data:!s||s==="text"||s==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:t,request:v};Co(function(b){n(b),y()},function(b){r(b),y()},P),v=null}"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(r(new q("Request aborted",q.ECONNABORTED,t,v)),v=null)},v.onerror=function(N){const P=N&&N.message?N.message:"Network Error",H=new q(P,q.ERR_NETWORK,t,v);H.event=N||null,r(H),v=null},v.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||xo;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),r(new q(N,P.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,t,v)),v=null},o===void 0&&a.setContentType(null),"setRequestHeader"in v&&x.forEach(a.toJSON(),function(N,P){v.setRequestHeader(P,N)}),x.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),s&&s!=="json"&&(v.responseType=i.responseType),l&&([d,p]=sn(l,!0),v.addEventListener("progress",d)),c&&v.upload&&([f,g]=sn(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(u=S=>{v&&(r(!S||S.type?new fe(null,t,v):S),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const $=Rd(i.url);if($&&it.protocols.indexOf($)===-1){r(new q("Unsupported protocol "+$+":",q.ERR_BAD_REQUEST,t));return}v.send(o||null)})},zd=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof q?u:new fe(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,o(new q(`timeout ${e} of ms exceeded`,q.ETIMEDOUT))},e);const s=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),t=null)};t.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>x.asap(s),c}},Pd=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Id=async function*(t,e){for await(const n of Vd(t))yield*Pd(n,e)},Vd=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},si=(t,e,n,r)=>{const i=Id(t,e);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let f=u.byteLength;if(n){let d=o+=f;n(d)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},ai=64*1024,{isFunction:Le}=x,Ud=(({Request:t,Response:e})=>({Request:t,Response:e}))(x.global),{ReadableStream:li,TextEncoder:ui}=x.global,ci=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Hd=t=>{t=x.merge.call({skipUndefined:!0},Ud,t);const{fetch:e,Request:n,Response:r}=t,i=e?Le(e):typeof fetch=="function",o=Le(n),a=Le(r);if(!i)return!1;const s=i&&Le(li),c=i&&(typeof ui=="function"?(p=>y=>p.encode(y))(new ui):async p=>new Uint8Array(await new n(p).arrayBuffer())),l=o&&s&&ci(()=>{let p=!1;const y=new n(it.origin,{body:new li,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!y}),u=a&&s&&ci(()=>x.isReadableStream(new r("").body)),f={stream:u&&(p=>p.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(y,v)=>{let _=y&&y[p];if(_)return _.call(y);throw new q(`Response type '${p}' is not supported`,q.ERR_NOT_SUPPORT,v)})});const d=async p=>{if(p==null)return 0;if(x.isBlob(p))return p.size;if(x.isSpecCompliantForm(p))return(await new n(it.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(x.isArrayBufferView(p)||x.isArrayBuffer(p))return p.byteLength;if(x.isURLSearchParams(p)&&(p=p+""),x.isString(p))return(await c(p)).byteLength},g=async(p,y)=>{const v=x.toFiniteNumber(p.getContentLength());return v??d(y)};return async p=>{let{url:y,method:v,data:_,signal:$,cancelToken:S,timeout:N,onDownloadProgress:P,onUploadProgress:H,responseType:b,headers:C,withCredentials:O="same-origin",fetchOptions:A}=So(p),M=e||fetch;b=b?(b+"").toLowerCase():"text";let D=zd([$,S&&S.toAbortSignal()],N),L=null;const m=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let h;try{if(H&&l&&v!=="get"&&v!=="head"&&(h=await g(C,_))!==0){let U=new n(y,{method:"POST",body:_,duplex:"half"}),Y;if(x.isFormData(_)&&(Y=U.headers.get("content-type"))&&C.setContentType(Y),U.body){const[Q,j]=ri(h,sn(ii(H)));_=si(U.body,ai,Q,j)}}x.isString(O)||(O=O?"include":"omit");const w=o&&"credentials"in n.prototype,E={...A,signal:D,method:v.toUpperCase(),headers:C.normalize().toJSON(),body:_,duplex:"half",credentials:w?O:void 0};L=o&&new n(y,E);let R=await(o?M(L,A):M(y,E));const T=u&&(b==="stream"||b==="response");if(u&&(P||T&&m)){const U={};["status","statusText","headers"].forEach(tt=>{U[tt]=R[tt]});const Y=x.toFiniteNumber(R.headers.get("content-length")),[Q,j]=P&&ri(Y,sn(ii(P),!0))||[];R=new r(si(R.body,ai,Q,()=>{j&&j(),m&&m()}),U)}b=b||"text";let z=await f[x.findKey(f,b)||"text"](R,p);return!T&&m&&m(),await new Promise((U,Y)=>{Co(U,Y,{data:z,headers:ut.from(R.headers),status:R.status,statusText:R.statusText,config:p,request:L})})}catch(w){throw m&&m(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new q("Network Error",q.ERR_NETWORK,p,L),{cause:w.cause||w}):q.from(w,w&&w.code,p,L)}}},Xd=new Map,Ao=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,s=a,c,l,u=Xd;for(;s--;)c=o[s],l=u.get(c),l===void 0&&u.set(c,l=s?new Map:Hd(e)),u=l;return l};Ao();const pr={http:ad,xhr:Ld,fetch:{get:Ao}};x.forEach(pr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const fi=t=>`- ${t}`,qd=t=>x.isFunction(t)||t===null||t===!1;function Yd(t,e){t=x.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let s;if(i=r,!qd(r)&&(i=pr[(s=String(r)).toLowerCase()],i===void 0))throw new q(`Unknown adapter '${s}'`);if(i&&(x.isFunction(i)||(i=i.get(e))))break;o[s||"#"+a]=i}if(!i){const a=Object.entries(o).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?a.length>1?`since :
`+a.map(fi).join(`
`):" "+fi(a[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i}const ko={getAdapter:Yd,adapters:pr};function Sn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fe(null,t)}function hi(t){return Sn(t),t.headers=ut.from(t.headers),t.data=En.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ko.getAdapter(t.adapter||Be.adapter,t)(t).then(function(r){return Sn(t),r.data=En.call(t,t.transformResponse,r),r.headers=ut.from(r.headers),r},function(r){return bo(r)||(Sn(t),r&&r.response&&(r.response.data=En.call(t,t.transformResponse,r.response),r.response.headers=ut.from(r.response.headers))),Promise.reject(r)})}const $o="1.13.2",pn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const di={};pn.transitional=function(e,n,r){function i(o,a){return"[Axios v"+$o+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(e===!1)throw new q(i(a," has been removed"+(n?" in "+n:"")),q.ERR_DEPRECATED);return n&&!di[a]&&(di[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,s):!0}};pn.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function jd(t,e,n){if(typeof t!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const s=t[o],c=s===void 0||a(s,o,t);if(c!==!0)throw new q("option "+o+" must be "+c,q.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new q("Unknown option "+o,q.ERR_BAD_OPTION)}}const qe={assertOptions:jd,validators:pn},St=qe.validators;let Zt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ei,response:new ei}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=te(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&qe.assertOptions(r,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),i!=null&&(x.isFunction(i)?n.paramsSerializer={serialize:i}:qe.assertOptions(i,{encode:St.function,serialize:St.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qe.assertOptions(n,{baseUrl:St.spelling("baseURL"),withXsrfToken:St.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&x.merge(o.common,o[n.method]);o&&x.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=ut.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,s.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,f=0,d;if(!c){const p=[hi.bind(this),void 0];for(p.unshift(...s),p.push(...l),d=p.length,u=Promise.resolve(n);f<d;)u=u.then(p[f++],p[f++]);return u}d=s.length;let g=n;for(;f<d;){const p=s[f++],y=s[f++];try{g=p(g)}catch(v){y.call(this,v);break}}try{u=hi.call(this,g)}catch(p){return Promise.reject(p)}for(f=0,d=l.length;f<d;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=te(this.defaults,e);const n=Eo(e.baseURL,e.url,e.allowAbsoluteUrls);return vo(n,e.params,e.paramsSerializer)}};x.forEach(["delete","get","head","options"],function(e){Zt.prototype[e]=function(n,r){return this.request(te(r||{},{method:e,url:n,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,s){return this.request(te(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Zt.prototype[e]=n(),Zt.prototype[e+"Form"]=n(!0)});let Wd=class Ro{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,s){r.reason||(r.reason=new fe(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Ro(function(i){e=i}),cancel:e}}};function Jd(t){return function(n){return t.apply(null,n)}}function Gd(t){return x.isObject(t)&&t.isAxiosError===!0}const jn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(jn).forEach(([t,e])=>{jn[e]=t});function Bo(t){const e=new Zt(t),n=so(Zt.prototype.request,e);return x.extend(n,Zt.prototype,e,{allOwnKeys:!0}),x.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Bo(te(t,i))},n}const nt=Bo(Be);nt.Axios=Zt;nt.CanceledError=fe;nt.CancelToken=Wd;nt.isCancel=bo;nt.VERSION=$o;nt.toFormData=dn;nt.AxiosError=q;nt.Cancel=nt.CanceledError;nt.all=function(e){return Promise.all(e)};nt.spread=Jd;nt.isAxiosError=Gd;nt.mergeConfig=te;nt.AxiosHeaders=ut;nt.formToJSON=t=>_o(x.isHTMLForm(t)?new FormData(t):t);nt.getAdapter=ko.getAdapter;nt.HttpStatusCode=jn;nt.default=nt;const{Axios:Np,AxiosError:Dp,CanceledError:Mp,isCancel:Tp,CancelToken:Op,VERSION:Fp,all:Lp,Cancel:zp,isAxiosError:Pp,spread:Ip,toFormData:Vp,AxiosHeaders:Up,HttpStatusCode:Hp,formToJSON:Xp,getAdapter:qp,mergeConfig:Yp}=nt,Yt=nt.create({baseURL:"/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});Yt.interceptors.request.use(t=>{const e=os("accessToken").value;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Yt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&$s(),Promise.reject(t)});const Kd={__name:"organization-chart",async setup(t){let e,n;const r=je({hasError:!1,errorMessage:"",isDeleteNodeDialogOpen:!1,isAddNodeDialogOpen:!1,isEditNodeDialogOpen:!1}),i=je({updateOrganizationChart:!1}),o=J([]),a=J(null),s=J(null),c=J([]),l=J([]),u=J([]),f=J(null),d=J(null),g=as();Dt(()=>g.current.value.colors,async()=>{s.value&&o.value.length>0&&s.value.render()},{deep:!0});async function p(){await Yt.get("/base/org-chart-node").then(({data:{data:D}})=>{o.value=D.map(L=>({id:L.id,parentId:L.parent_id,orgPosition:L.org_position,orgUnit:L.org_unit,users:L.users}))}).catch(D=>{console.error("Error fetching org chart nodes:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÚØ§Ø±Øª Ø³Ø§Ø²ÙØ§ÙÛ"})}async function y(){await Yt.get("/base/org-position").then(({data:{data:D}})=>{c.value=D}).catch(D=>{console.error("Error fetching org positions:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ø³ÙØªâÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function v(){await Yt.get("/base/org-unit").then(({data:{data:D}})=>{l.value=D}).catch(D=>{console.error("Error fetching org units:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª ÙØ§Ø­Ø¯ÙØ§Û Ø³Ø§Ø²ÙØ§ÙÛ"})}async function _(){await Yt.get(Rs("/base/user",{query:{"fields[users]":"id,first_name,last_name,personnel_code","fields[profiles]":"id,user_id,workplace_id,work_area_id,cost_center_id,job_position_id","filter[active]":"1",include:"profile.workplace,profile.workArea,profile.costCenter,profile.jobPosition,avatar"}}).value).then(({data:{data:D}})=>{u.value=D}).catch(D=>{console.error("Error fetching users:",D),r.hasError=!0,r.errorMessage=D.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛØ§ÙØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù"})}async function $(){i.updateOrganizationChart=!0;const D=s.value.getChartState();o.value=D.allNodes.map(L=>L.data),await Yt.put("/base/org-chart-node/update",{orgChartNodes:o.value}).then(()=>{M()}).catch(L=>{console.error("Error updating organization chart:",L),r.hasError=!0,r.errorMessage=L.message||"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±ÙØ²Ø±Ø³Ø§ÙÛ ÚØ§Ø±Øª Ø³Ø§Ø²ÙØ§ÙÛ"}).finally(()=>{i.updateOrganizationChart=!1})}function S(){!a.value||o.value.length===0||(s.value=new Df().container(a.value).data(o.value).nodeWidth(()=>220).nodeHeight(()=>90).childrenMargin(()=>50).compactMarginBetween(()=>35).compactMarginPair(()=>30).neighbourMargin(()=>20).siblingsMargin(()=>30).nodeContent(D=>_h(D)).linkUpdate(function(){gt(this).attr("stroke","rgb(var(--v-theme-secondary))").attr("stroke-opacity",.38).attr("stroke-width",1.5).attr("stroke-linecap","round")}).buttonContent(({node:D})=>`
        <div class="org-expand-btn">
          ${D.children?"â²":"â¼"} ${D.data._directSubordinates||""}
        </div>
      `).render(),N())}function N(){a.value&&a.value.addEventListener("click",D=>{const L=D.target.closest(".node-action-btn");if(!L)return;D.stopPropagation();const m=L.dataset.action,h=L.dataset.nodeId;switch(m){case"edit":P(h);break;case"add":b(h);break;case"delete":O(h);break}})}function P(D){const m=s.value.getChartState().allNodes.find(h=>String(h.data.id)===String(D));d.value=m.data,r.isEditNodeDialogOpen=!0}function H({id:D,parentId:L,orgPosition:m,orgUnit:h,users:w}){o.value=o.value.filter(E=>String(E.id)!==String(D)),o.value.push({id:D,parentId:L,orgPosition:m,orgUnit:h,users:w}),s.value.data(o.value).render()}function b(D){f.value=D,r.isAddNodeDialogOpen=!0}function C({orgPosition:D,orgUnit:L,users:m}){s.value.addNode({id:Math.floor(Math.random()*999901)+100,parentId:f.value,orgPosition:D,orgUnit:L,users:m})}function O(D){f.value=D,r.isDeleteNodeDialogOpen=!0}function A(){s.value.removeNode(f.value),r.isDeleteNodeDialogOpen=!1}async function M(){p(),await v(),await Xt(),S()}return p(),y(),v(),[e,n]=ls(()=>_()),await e,n(),us(async()=>{await Xt(),S()}),(D,L)=>{const m=pi("IconBtn");return Pt(),xe(zt,null,[B(Bs,{modelValue:F(r).hasError,"onUpdate:modelValue":L[0]||(L[0]=h=>F(r).hasError=h),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:I(()=>[$t(_e(F(r).errorMessage),1)]),_:1},8,["modelValue"]),At("div",{ref_key:"orgChartRef",ref:a,class:"org-chart-container"},null,512),B(Po,{"is-dialog-visible":F(r).isDeleteNodeDialogOpen,"onUpdate:isDialogVisible":L[1]||(L[1]=h=>F(r).isDeleteNodeDialogOpen=h),title:"Ø¢ÛØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛÙ ÙÙØ±Ø¯ Ø§Ø·ÙÛÙØ§Ù Ø¯Ø§Ø±ÛØ¯Ø",loading:!1,onConfirm:A},null,8,["is-dialog-visible"]),B(vh,{"is-dialog-visible":F(r).isAddNodeDialogOpen,"onUpdate:isDialogVisible":L[2]||(L[2]=h=>F(r).isAddNodeDialogOpen=h),"org-positions":F(c),"org-units":F(l),users:F(u),onAdd:C},null,8,["is-dialog-visible","org-positions","org-units","users"]),B(xh,{"is-dialog-visible":F(r).isEditNodeDialogOpen,"onUpdate:isDialogVisible":L[3]||(L[3]=h=>F(r).isEditNodeDialogOpen=h),"org-positions":F(c),"org-units":F(l),users:F(u),node:F(d),onEdit:H},null,8,["is-dialog-visible","org-positions","org-units","users","node"]),B(m,{size:"x-large",variant:"elevated",color:"primary",loading:F(i).updateOrganizationChart,onClick:$},{default:I(()=>[B(ve,{icon:"tabler-device-floppy",size:"35"})]),_:1},8,["loading"])],64)}}},jp=ss(Kd,[["__scopeId","data-v-265c0d8a"]]);export{jp as default};
