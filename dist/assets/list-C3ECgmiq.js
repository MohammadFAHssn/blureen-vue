import{u as B,V as U}from"./VLayout-Be6sLA0C.js";import{M as I,bJ as R,r as A,bK as r,Y as T,c4 as q,a as J,f as K,o as H,e as S,b as P,d as O,n as t,v as Q,x as W}from"./index-DCB_bfED.js";import{u as X}from"./useApi-lDR9a_oa.js";import{c as Z}from"./createUrl-CuxlHcfy.js";import{V as $}from"./VSnackbar-4QlJyYAh.js";import"./useLogout-awGQq6F9.js";import"./VOverlay-BEXuEyWe.js";const ee={style:{"block-size":"100%"}},ae={__name:"list",async setup(re){let n,m;const o=R({hasError:!1,errorMessage:""}),s=A([]),{theme:E}=B(),F=A([{headerName:"کد پرسنلی",field:"personnelCode"},{headerName:"نام",field:"firstName"},{headerName:"نام خانوادگی",field:"lastName"},{headerName:"نوع کاربر",field:"roles",cellRenderer:"MultiValuedCell",cellStyle:{display:"flex","align-items":"center"}},{headerName:"وضعیت",field:"active",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:a=>a.value===1?"فعال":"غیرفعال"}},{headerName:"کد ملی",field:"nationalCode"},{headerName:"جنسیت",field:"gender"},{headerName:"نام پدر",field:"fatherName"},{headerName:"محل تولد",field:"birthPlace"},{headerName:"تاریخ تولد",field:"birthDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"وضعیت تاهل",field:"maritalStatus"},{headerName:"تاریخ استخدام",field:"employmentDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"تاریخ شروع به کار",field:"startDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"سطح تحصیلات",field:"educationLevel"},{headerName:"محل کار",field:"workplace"},{headerName:"منطقه کاری",field:"workArea"},{headerName:"مرکز هزینه",field:"costCenter"},{headerName:"سمت شغلی",field:"jobPosition"},{headerName:"شماره تلفن همراه",field:"mobileNumber"}]),G=T(()=>{var a;return(a=s.value)==null?void 0:a.map(e=>{var l,i,d,f,c,p,u,h,_,Y,j,N,v,b,D,M,w,y,k,g,V,C,x;return{personnelCode:Number.parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(l=e.roles)==null?void 0:l.map(z=>z.name),active:e.active,nationalCode:(i=e.profile)==null?void 0:i.national_code,gender:(d=e.profile)==null?void 0:d.gender,fatherName:(f=e.profile)==null?void 0:f.father_name,birthPlace:(c=e.profile)==null?void 0:c.birth_place,birthDate:(p=e.profile)!=null&&p.birth_date?r((u=e.profile)==null?void 0:u.birth_date).format("jYYYY-jMM-jDD"):null,mobileNumber:(h=e.profile)==null?void 0:h.mobile_number,maritalStatus:(_=e.profile)==null?void 0:_.marital_status,employmentDate:(Y=e.profile)!=null&&Y.employment_date?r((j=e.profile)==null?void 0:j.employment_date).format("jYYYY-jMM-jDD"):null,startDate:(N=e.profile)!=null&&N.start_date?r((v=e.profile)==null?void 0:v.start_date).format("jYYYY-jMM-jDD"):null,educationLevel:(D=(b=e.profile)==null?void 0:b.education_level)==null?void 0:D.name,workplace:(w=(M=e.profile)==null?void 0:M.workplace)==null?void 0:w.name,workArea:(k=(y=e.profile)==null?void 0:y.work_area)==null?void 0:k.name,costCenter:(V=(g=e.profile)==null?void 0:g.cost_center)==null?void 0:V.name,jobPosition:(x=(C=e.profile)==null?void 0:C.job_position)==null?void 0:x.name}})});async function L(){try{const{data:a,error:e}=await X(Z("/base/user",{query:{"fields[roles]":"name",include:"roles,profile.workplace,profile.educationLevel,profile.workplace,profile.workArea,profile.costCenter,profile.jobPosition"}}));if(e.value)throw e.value;s.value=a.value.data}catch(a){console.error("Error fetching users:",a),o.hasError=!0,o.errorMessage="خطا در دریافت کاربران"}}return[n,m]=q(()=>L()),await n,m(),(a,e)=>{const l=J("AgGridVue");return H(),K(U,{class:"app-layout"},{default:S(()=>[P($,{modelValue:t(o).hasError,"onUpdate:modelValue":e[0]||(e[0]=i=>t(o).hasError=i),timeout:2e3,location:"center",variant:"outlined",color:"error"},{default:S(()=>[Q(W(t(o).errorMessage),1)]),_:1},8,["modelValue"]),O("section",ee,[P(l,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":t(F),"row-data":t(G),"enable-rtl":"","row-numbers":"",pagination:"",theme:t(E)},null,8,["column-defs","row-data","theme"])])]),_:1})}}},de=I(ae,[["__scopeId","data-v-5e3b9890"]]);export{de as default};
