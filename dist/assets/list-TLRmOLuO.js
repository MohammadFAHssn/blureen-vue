import{u as B}from"./useAGGridTheme-bvvBd39f.js";import{M as I,bI as U,r as A,bP as r,Y as R,bJ as T,a as q,f as J,o as H,e as P,b as S,d as K,n as t,v as O,x as Q}from"./index-DT_llzjg.js";import{u as W}from"./useApi-BELNR2-h.js";import{c as X}from"./createUrl-BxU8BW8u.js";import{V as Z}from"./VSnackbar-CpV_oguz.js";import{V as $}from"./VLayout-BfCC8kZd.js";import"./useLogout-DitEJ7bF.js";import"./VOverlay-D_UCINsE.js";const ee={style:{"block-size":"100%"}},ae={__name:"list",async setup(re){let n,m;const o=U({hasError:!1,errorMessage:""}),s=A([]),{theme:E}=B(),F=A([{headerName:"کد پرسنلی",field:"personnelCode"},{headerName:"نام",field:"firstName"},{headerName:"نام خانوادگی",field:"lastName"},{headerName:"نوع کاربر",field:"roles",cellRenderer:"MultiValuedCell",cellStyle:{display:"flex","align-items":"center"}},{headerName:"وضعیت",field:"active",cellRenderer:"Active",cellStyle:{display:"flex","align-items":"center"},filterParams:{valueFormatter:a=>a.value===1?"فعال":"غیرفعال"}},{headerName:"کد ملی",field:"nationalCode"},{headerName:"جنسیت",field:"gender"},{headerName:"نام پدر",field:"fatherName"},{headerName:"محل تولد",field:"birthPlace"},{headerName:"تاریخ تولد",field:"birthDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"وضعیت تاهل",field:"maritalStatus"},{headerName:"تاریخ استخدام",field:"employmentDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"تاریخ شروع به کار",field:"startDate",valueFormatter:a=>a.value?r(a.value,"jYYYY-jMM-jDD").format("jYYYY/jMM/jD"):null},{headerName:"سطح تحصیلات",field:"educationLevel"},{headerName:"محل کار",field:"workplace"},{headerName:"منطقه کاری",field:"workArea"},{headerName:"مرکز هزینه",field:"costCenter"},{headerName:"سمت شغلی",field:"jobPosition"},{headerName:"شماره تلفن همراه",field:"mobileNumber"}]),G=R(()=>{var a;return(a=s.value)==null?void 0:a.map(e=>{var l,i,d,f,c,p,u,h,_,Y,j,N,v,b,D,M,y,w,g,k,V,C,x;return{personnelCode:Number.parseInt(e.personnel_code),firstName:e.first_name,lastName:e.last_name,roles:(l=e.roles)==null?void 0:l.map(z=>z.name),active:e.active,nationalCode:(i=e.profile)==null?void 0:i.national_code,gender:(d=e.profile)==null?void 0:d.gender,fatherName:(f=e.profile)==null?void 0:f.father_name,birthPlace:(c=e.profile)==null?void 0:c.birth_place,birthDate:(p=e.profile)!=null&&p.birth_date?r((u=e.profile)==null?void 0:u.birth_date).format("jYYYY-jMM-jDD"):null,mobileNumber:(h=e.profile)==null?void 0:h.mobile_number,maritalStatus:(_=e.profile)==null?void 0:_.marital_status,employmentDate:(Y=e.profile)!=null&&Y.employment_date?r((j=e.profile)==null?void 0:j.employment_date).format("jYYYY-jMM-jDD"):null,startDate:(N=e.profile)!=null&&N.start_date?r((v=e.profile)==null?void 0:v.start_date).format("jYYYY-jMM-jDD"):null,educationLevel:(D=(b=e.profile)==null?void 0:b.education_level)==null?void 0:D.name,workplace:(y=(M=e.profile)==null?void 0:M.workplace)==null?void 0:y.name,workArea:(g=(w=e.profile)==null?void 0:w.work_area)==null?void 0:g.name,costCenter:(V=(k=e.profile)==null?void 0:k.cost_center)==null?void 0:V.name,jobPosition:(x=(C=e.profile)==null?void 0:C.job_position)==null?void 0:x.name}})});async function L(){try{const{data:a,error:e}=await W(X("/base/user",{query:{"fields[users]":"id,first_name,last_name,personnel_code,active","fields[roles]":"name",include:"roles,profile.educationLevel,profile.workplace,profile.workArea,profile.costCenter,profile.jobPosition"}}));if(e.value)throw e.value;s.value=a.value.data}catch(a){console.error("Error fetching users:",a),o.hasError=!0,o.errorMessage=a.message||"خطا در دریافت کاربران"}}return[n,m]=T(()=>L()),await n,m(),(a,e)=>{const l=q("AgGridVue");return H(),J($,{class:"app-layout"},{default:P(()=>[S(Z,{modelValue:t(o).hasError,"onUpdate:modelValue":e[0]||(e[0]=i=>t(o).hasError=i),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:P(()=>[O(Q(t(o).errorMessage),1)]),_:1},8,["modelValue"]),K("section",ee,[S(l,{style:{"block-size":"100%","inline-size":"100%"},"column-defs":t(F),"row-data":t(G),"enable-rtl":"","row-numbers":"",pagination:"",theme:t(E)},null,8,["column-defs","row-data","theme"])])]),_:1})}}},fe=I(ae,[["__scopeId","data-v-0d78d089"]]);export{fe as default};
