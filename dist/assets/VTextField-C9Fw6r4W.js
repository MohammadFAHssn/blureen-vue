import{V as W}from"./VCounter-BtfMPxqe.js";import{V as B,m as X}from"./VField-ByrHga6n.js";import{av as Z,a6 as $,c9 as N,aD as ee,aE as te,Y as m,r as y,ab as ne,bJ as le,aF as R,b as C,s as g,aG as ae,aH as ue,d as a,F as b,bz as oe,K as ie,d6 as se,y as re,au as h,bK as ce}from"./index-CTn1zpMl.js";function de(e){function x(o,c){var n,l;!e.autofocus||!o||(l=(n=c[0].target)==null?void 0:n.focus)==null||l.call(n)}return{onIntersect:x}}const fe=["color","file","time","date","datetime-local","week","month"],ve=$({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...ue(),...X()},"VTextField"),Ce=Z()({name:"VTextField",directives:{vIntersect:N},inheritAttrs:!1,props:ve(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,x){let{attrs:o,emit:c,slots:n}=x;const l=ee(e,"modelValue"),{isFocused:i,focus:k,blur:T}=te(e),{onIntersect:E}=de(e),M=m(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),z=m(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),F=m(()=>["plain","underlined"].includes(e.variant)),P=y(),I=y(),s=y(),K=m(()=>fe.includes(e.type)||e.persistentPlaceholder||i.value||e.active);function _(){i.value||k(),h(()=>{var t;s.value!==document.activeElement&&((t=s.value)==null||t.focus())})}function O(t){c("mousedown:control",t),t.target!==s.value&&(_(),t.preventDefault())}function U(t){c("click:control",t)}function j(t,u){t.stopPropagation(),_(),h(()=>{l.value=null,u(),ce(e["onClick:clear"],t)})}function p(t){var d;const u=t.target;if(l.value=u.value,(d=e.modelModifiers)!=null&&d.trim&&["text","search","password","tel","url"].includes(e.type)){const f=[u.selectionStart,u.selectionEnd];h(()=>{u.selectionStart=f[0],u.selectionEnd=f[1]})}}return ne(()=>{const t=!!(n.counter||e.counter!==!1&&e.counter!=null),u=!!(t||n.details),[d,f]=le(o),{modelValue:me,...G}=R.filterProps(e),H=B.filterProps(e);return C(R,g({ref:P,modelValue:l.value,"onUpdate:modelValue":r=>l.value=r,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":F.value},e.class],style:e.style},d,G,{centerAffix:!F.value,focused:i.value}),{...n,default:r=>{let{id:v,isDisabled:S,isDirty:w,isReadonly:J,isValid:Y,hasDetails:q,reset:L}=r;return C(B,g({ref:I,onMousedown:O,onClick:U,"onClick:clear":V=>j(V,L),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},oe(H,["onClick:clear"]),{id:v.value,active:K.value||w.value,dirty:w.value||e.dirty,disabled:S.value,focused:i.value,details:q.value,error:Y.value===!1}),{...n,default:V=>{let{props:{class:A,...Q}}=V;const D=ie(a("input",g({ref:s,value:l.value,onInput:p,autofocus:e.autofocus,readonly:J.value,disabled:S.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:k,onBlur:T},Q,f),null),[[N,{handler:E},null,{once:!0}]]);return a(b,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[a("span",{class:"v-text-field__prefix__text"},[e.prefix])]),n.default?a("div",{class:re(A),"data-no-activator":""},[n.default(),D]):se(D,{class:A}),e.suffix&&a("span",{class:"v-text-field__suffix"},[a("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:u?r=>{var v;return a(b,null,[(v=n.details)==null?void 0:v.call(n,r),t&&a(b,null,[a("span",null,null),C(W,{active:e.persistentCounter||i.value,value:M.value,max:z.value,disabled:e.disabled},n.counter)])])}:void 0})}),ae({},P,I,s)}});export{Ce as V,ve as m,de as u};
