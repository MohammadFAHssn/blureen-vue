import{V as be,m as _e}from"./VTextField-C9Fw6r4W.js";import{av as me,a6 as G,aa as Ie,w as j,ab as he,d as F,F as Z,s as z,ad as Fe,b7 as Oe,a7 as B,b5 as de,r as Y,Y as K,cz as Le,b6 as Te,a8 as se,c6 as xe,au as Ce,cp as Ae,bY as Be,aS as Ke,Z as Me,b4 as Ee,H as He,b as x,a9 as ae,J as ze,y as oe,aZ as $e,al as Ne,aD as Ve,bH as ve,co as Ue,aO as ie,aG as je,bE as We,bz as Ye,cs as we,ct as ke,bF as Ze,a1 as Se,cA as Ge,bw as Je,cr as Qe,a2 as Xe,a$ as qe,v as et,n as q}from"./index-CTn1zpMl.js";import{e as tt,m as lt,V as nt,a as Pe,c as at}from"./VList-BL8r1icQ.js";import{V as ot}from"./dialog-transition-CbHg9h4n.js";import{V as rt}from"./VMenu-BsgvxZfO.js";import{g as ut}from"./VOverlay-D193HQRA.js";import{V as st}from"./VDivider-BaxVbuHx.js";import{V as it}from"./VCheckboxBtn-CPGaeC_g.js";const ct=G({renderless:Boolean,...Fe()},"VVirtualScrollItem"),ft=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:ct(),emits:{"update:height":e=>!0},setup(e,n){let{attrs:l,emit:r,slots:o}=n;const{resizeRef:d,contentRect:v}=Ie(void 0,"border");j(()=>{var s;return(s=v.value)==null?void 0:s.height},s=>{s!=null&&r("update:height",s)}),he(()=>{var s,u;return e.renderless?F(Z,null,[(s=o.default)==null?void 0:s.call(o,{itemRef:d})]):F("div",z({ref:d,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(u=o.default)==null?void 0:u.call(o)])})}}),dt=-1,vt=1,ce=100,mt=G({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function ht(e,n){const l=Oe(),r=B(0);de(()=>{r.value=parseFloat(e.itemHeight||0)});const o=B(0),d=B(Math.ceil((parseInt(e.height)||l.height.value)/(r.value||16))||1),v=B(0),s=B(0),u=Y(),h=Y();let i=0;const{resizeRef:C,contentRect:V}=Ie();de(()=>{C.value=u.value});const m=K(()=>{var t;return u.value===document.documentElement?l.height.value:((t=V.value)==null?void 0:t.height)||parseInt(e.height)||0}),I=K(()=>!!(u.value&&h.value&&m.value&&r.value));let g=Array.from({length:n.value.length}),p=Array.from({length:n.value.length});const y=B(0);let w=-1;function D(t){return g[t]||r.value}const $=Le(()=>{const t=performance.now();p[0]=0;const a=n.value.length;for(let f=1;f<=a-1;f++)p[f]=(p[f-1]||0)+D(f-1);y.value=Math.max(y.value,performance.now()-t)},y),S=j(I,t=>{t&&(S(),i=h.value.offsetTop,$.immediate(),H(),~w&&Ce(()=>{Ae&&window.requestAnimationFrame(()=>{ne(w),w=-1})}))});Te(()=>{$.clear()});function ee(t,a){const f=g[t],k=r.value;r.value=k?Math.min(r.value,a):a,(f!==a||k!==r.value)&&(g[t]=a,$())}function L(t){t=se(t,0,n.value.length-1);const a=Math.floor(t),f=t%1,k=a+1,A=p[a]||0,c=p[k]||A;return A+(c-A)*f}function E(t){return gt(p,t)}let W=0,N=0,J=0;j(m,(t,a)=>{a&&(H(),t<a&&requestAnimationFrame(()=>{N=0,H()}))});let Q=-1;function te(){if(!u.value||!h.value)return;const t=u.value.scrollTop,a=performance.now();a-J>500?(N=Math.sign(t-W),i=h.value.offsetTop):N=t-W,W=t,J=a,window.clearTimeout(Q),Q=window.setTimeout(U,500),H()}function U(){!u.value||!h.value||(N=0,J=0,window.clearTimeout(Q),H())}let le=-1;function H(){cancelAnimationFrame(le),le=requestAnimationFrame(re)}function re(){if(!u.value||!m.value||!r.value)return;const t=W-i,a=Math.sign(N),f=Math.max(0,t-ce),k=se(E(f),0,n.value.length),A=t+m.value+ce,c=se(E(A)+1,k+1,n.value.length);if((a!==dt||k<o.value)&&(a!==vt||c>d.value)){const M=L(o.value)-L(k),R=L(c)-L(d.value);Math.max(M,R)>ce?(o.value=k,d.value=c):(k<=0&&(o.value=k),c>=n.value.length&&(d.value=c))}v.value=L(o.value),s.value=L(n.value.length)-L(d.value)}function ne(t){const a=L(t);!u.value||t&&!a?w=t:u.value.scrollTop=a}const ue=K(()=>n.value.slice(o.value,d.value).map((t,a)=>{const f=a+o.value;return{raw:t,index:f,key:xe(t,e.itemKey,f)}}));return j(n,()=>{g=Array.from({length:n.value.length}),p=Array.from({length:n.value.length}),$.immediate(),H()},{deep:1}),{calculateVisibleItems:H,containerRef:u,markerRef:h,computedItems:ue,paddingTop:v,paddingBottom:s,scrollToIndex:ne,handleScroll:te,handleScrollend:U,handleItemResize:ee}}function gt(e,n){let l=e.length-1,r=0,o=0,d=null,v=-1;if(e[l]<n)return l;for(;r<=l;)if(o=r+l>>1,d=e[o],d>n)l=o-1;else if(d<n)v=o,r=o+1;else return d===n?o:r;return v}const yt=G({items:{type:Array,default:()=>[]},renderless:Boolean,...mt(),...Fe(),...$e()},"VVirtualScroll"),pt=me()({name:"VVirtualScroll",props:yt(),setup(e,n){let{slots:l}=n;const r=Be("VVirtualScroll"),{dimensionStyles:o}=Ke(e),{calculateVisibleItems:d,containerRef:v,markerRef:s,handleScroll:u,handleScrollend:h,handleItemResize:i,scrollToIndex:C,paddingTop:V,paddingBottom:m,computedItems:I}=ht(e,Me(()=>e.items));return Ee(()=>e.renderless,()=>{function g(){var w,D;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[y]("scroll",u,{passive:!0}),document[y]("scrollend",h)):((w=v.value)==null||w[y]("scroll",u,{passive:!0}),(D=v.value)==null||D[y]("scrollend",h))}He(()=>{v.value=ut(r.vnode.el,!0),g(!0)}),Te(g)}),he(()=>{const g=I.value.map(p=>x(ft,{key:p.key,renderless:e.renderless,"onUpdate:height":y=>i(p.index,y)},{default:y=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:p.raw,index:p.index,...y})}}));return e.renderless?F(Z,null,[F("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:ae(V.value)}},null),g,F("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ae(m.value)}},null)]):F("div",{ref:v,class:oe(["v-virtual-scroll",e.class]),onScrollPassive:u,onScrollend:h,style:ze([o.value,e.style])},[F("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:ae(V.value),paddingBottom:ae(m.value)}},[g])])}),{calculateVisibleItems:d,scrollToIndex:C}}});function bt(e,n){const l=B(!1);let r;function o(s){cancelAnimationFrame(r),l.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l.value=!1})})}async function d(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(l.value){const u=j(l,()=>{u(),s()})}else s()})}async function v(s){var i,C;if(s.key==="Tab"&&((i=n.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(s.key))return;const u=(C=e.value)==null?void 0:C.$el;if(!u)return;(s.key==="Home"||s.key==="End")&&u.scrollTo({top:s.key==="Home"?0:u.scrollHeight,behavior:"smooth"}),await d();const h=u.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const V=u.getBoundingClientRect().top;for(const m of h)if(m.getBoundingClientRect().top>=V){m.focus();break}}else{const V=u.getBoundingClientRect().bottom;for(const m of[...h].reverse())if(m.getBoundingClientRect().bottom<=V){m.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const Vt=G({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Ze,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...lt({itemChildren:!1})},"Select"),wt=G({...Vt(),...Ye(_e({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...We({transition:{component:ot}})},"VSelect"),Rt=me()({name:"VSelect",props:wt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:l}=n;const{t:r}=Ne(),o=Y(),d=Y(),v=Y(),{items:s,transformIn:u,transformOut:h}=tt(e),i=Ve(e,"modelValue",[],t=>u(t===null?[null]:ve(t)),t=>{const a=h(t);return e.multiple?a:a[0]??null}),C=K(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),V=Ue(e),m=K(()=>i.value.map(t=>t.value)),I=B(!1);let g="",p=-1,y;const w=K(()=>e.hideSelected?s.value.filter(t=>!i.value.some(a=>(e.valueComparator||ie)(a,t))):s.value),D=K(()=>e.hideNoData&&!w.value.length||V.isReadonly.value||V.isDisabled.value),$=Ve(e,"menu"),S=K({get:()=>$.value,set:t=>{var a;$.value&&!t&&((a=d.value)!=null&&a.Î¨openChildren.size)||t&&D.value||($.value=t)}}),ee=Me(()=>S.value?e.closeText:e.openText),L=K(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),E=Y(),W=bt(E,o);function N(t){e.openOnClear&&(S.value=!0)}function J(){D.value||(S.value=!S.value)}function Q(t){we(t)&&te(t)}function te(t){var b,_,T;if(!t.key||V.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(S.value=!0),["Escape","Tab"].includes(t.key)&&(S.value=!1),t.key==="Home"?(b=E.value)==null||b.focus("first"):t.key==="End"&&((_=E.value)==null||_.focus("last"));const a=1e3;if(!we(t))return;const f=performance.now();f-y>a&&(g="",p=-1),g+=t.key.toLowerCase(),y=f;const k=w.value;function A(){let P=c();return P||g.at(-1)===g.at(-2)&&(g=g.slice(0,-1),P=c(),P)||(p=-1,P=c(),P)?P:(g=t.key.toLowerCase(),c())}function c(){for(let P=p+1;P<k.length;P++){const X=k[P];if(X.title.toLowerCase().startsWith(g))return[X,P]}}const M=A();if(!M)return;const[R,O]=M;p=O,(T=E.value)==null||T.focus(O),e.multiple||(i.value=[R])}function U(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const f=i.value.findIndex(A=>(e.valueComparator||ie)(A.value,t.value)),k=a??!~f;if(~f){const A=k?[...i.value,t]:[...i.value];A.splice(f,1),i.value=A}else k&&(i.value=[...i.value,t])}else{const f=a!==!1;i.value=f?[t]:[],Ce(()=>{S.value=!1})}}function le(t){var a;(a=E.value)!=null&&a.$el.contains(t.relatedTarget)||(S.value=!1)}function H(){var t;e.eager&&((t=v.value)==null||t.calculateVisibleItems())}function re(){var t;I.value&&((t=o.value)==null||t.focus())}function ne(t){I.value=!0}function ue(t){if(t==null)i.value=[];else if(ke(o.value,":autofill")||ke(o.value,":-webkit-autofill")){const a=s.value.find(f=>f.title===t);a&&U(a)}else o.value&&(o.value.value="")}return j(S,()=>{if(!e.hideSelected&&S.value&&i.value.length){const t=w.value.findIndex(a=>i.value.some(f=>(e.valueComparator||ie)(f.value,a.value)));Ae&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=v.value)==null||a.scrollToIndex(t))})}}),j(()=>e.items,(t,a)=>{S.value||I.value&&e.hideNoData&&!a.length&&t.length&&(S.value=!0)}),he(()=>{const t=!!(e.chips||l.chip),a=!!(!e.hideNoData||w.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),f=i.value.length>0,k=be.filterProps(e),A=f||!I.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return x(be,z({ref:o},k,{modelValue:i.value.map(c=>c.props.title).join(", "),"onUpdate:modelValue":ue,focused:I.value,"onUpdate:focused":c=>I.value=c,validationValue:i.externalValue,counterValue:C.value,dirty:f,class:["v-select",{"v-select--active-menu":S.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:A,"onClick:clear":N,"onMousedown:control":J,onBlur:le,onKeydown:te,"aria-label":r(ee.value),title:r(ee.value)}),{...l,default:()=>F(Z,null,[x(rt,z({ref:d,modelValue:S.value,"onUpdate:modelValue":c=>S.value=c,activator:"parent",contentClass:"v-select__content",disabled:D.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:H,onAfterLeave:re},L.value),{default:()=>[a&&x(nt,z({ref:E,selected:m.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:Q,onFocusin:ne,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},W,e.listProps),{default:()=>{var c,M,R;return[(c=l["prepend-item"])==null?void 0:c.call(l),!w.value.length&&!e.hideNoData&&(((M=l["no-data"])==null?void 0:M.call(l))??x(Pe,{key:"no-data",title:r(e.noDataText)},null)),x(pt,{ref:v,renderless:!0,items:w.value,itemKey:"value"},{default:O=>{var ge,ye,pe;let{item:b,index:_,itemRef:T}=O;const P=Ge(b.props),X=z(b.props,{ref:T,key:b.value,onClick:()=>U(b,null)});return b.type==="divider"?((ge=l.divider)==null?void 0:ge.call(l,{props:b.raw,index:_}))??x(st,z(b.props,{key:`divider-${_}`}),null):b.type==="subheader"?((ye=l.subheader)==null?void 0:ye.call(l,{props:b.raw,index:_}))??x(at,z(b.props,{key:`subheader-${_}`}),null):((pe=l.item)==null?void 0:pe.call(l,{item:b,index:_,props:X}))??x(Pe,z(X,{role:"option"}),{prepend:Re=>{let{isSelected:De}=Re;return F(Z,null,[e.multiple&&!e.hideSelected?x(it,{key:b.value,modelValue:De,ripple:!1,tabindex:"-1"},null):void 0,P.prependAvatar&&x(Je,{image:P.prependAvatar},null),P.prependIcon&&x(Se,{icon:P.prependIcon},null)])}})}}),(R=l["append-item"])==null?void 0:R.call(l)]}})]}),i.value.map((c,M)=>{function R(T){T.stopPropagation(),T.preventDefault(),U(c,!1)}const O={"onClick:close":R,onKeydown(T){T.key!=="Enter"&&T.key!==" "||(T.preventDefault(),T.stopPropagation(),R(T))},onMousedown(T){T.preventDefault(),T.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},b=t?!!l.chip:!!l.selection,_=b?Qe(t?l.chip({item:c,index:M,props:O}):l.selection({item:c,index:M})):void 0;if(!(b&&!_))return F("div",{key:c.value,class:"v-select__selection"},[t?l.chip?x(qe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[_]}):x(Xe,z({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},O),null):_??F("span",{class:"v-select__selection-text"},[c.title,e.multiple&&M<i.value.length-1&&F("span",{class:"v-select__selection-comma"},[et(",")])])])})]),"append-inner":function(){var O,b;for(var c=arguments.length,M=new Array(c),R=0;R<c;R++)M[R]=arguments[R];return F(Z,null,[(O=l["append-inner"])==null?void 0:O.call(l,...M),e.menuIcon?x(Se,{class:"v-select__menu-icon",color:(b=o.value)==null?void 0:b.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),je({isFocused:I,menu:S,select:U},o)}}),kt=(e,n,l)=>{if(e==null||n==null)return-1;if(!n.length)return 0;e=e.toString().toLocaleLowerCase(),n=n.toString().toLocaleLowerCase();const r=[];let o=e.indexOf(n);for(;~o;)r.push([o,o+n.length]),o=e.indexOf(n,o+n.length);return r.length?r:-1};function fe(e,n){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+n.length]]:Array.isArray(e[0])?e:[e]}const Dt=G({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function St(e,n,l){var s;const r=[],o=(l==null?void 0:l.default)??kt,d=l!=null&&l.filterKeys?ve(l.filterKeys):!1,v=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return r;e:for(let u=0;u<e.length;u++){const[h,i=h]=ve(e[u]),C={},V={};let m=-1;if((n||v>0)&&!(l!=null&&l.noFilter)){if(typeof h=="object"){if(h.type==="divider"||h.type==="subheader")continue;const p=d||Object.keys(i);for(const y of p){const w=xe(i,y),D=(s=l==null?void 0:l.customKeyFilter)==null?void 0:s[y];if(m=D?D(w,n,h):o(w,n,h),m!==-1&&m!==!1)D?C[y]=fe(m,n):V[y]=fe(m,n);else if((l==null?void 0:l.filterMode)==="every")continue e}}else m=o(h,n,h),m!==-1&&m!==!1&&(V.title=fe(m,n));const I=Object.keys(V).length,g=Object.keys(C).length;if(!I&&!g||(l==null?void 0:l.filterMode)==="union"&&g!==v&&!I||(l==null?void 0:l.filterMode)==="intersection"&&(g!==v||!I))continue}r.push({index:u,matches:{...V,...C}})}return r}function _t(e,n,l,r){const o=B([]),d=B(new Map),v=K(()=>r!=null&&r.transform?q(n).map(u=>[u,r.transform(u)]):q(n));de(()=>{const u=typeof l=="function"?l():q(l),h=typeof u!="string"&&typeof u!="number"?"":String(u),i=St(v.value,h,{customKeyFilter:{...e.customKeyFilter,...q(r==null?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),C=q(n),V=[],m=new Map;i.forEach(I=>{let{index:g,matches:p}=I;const y=C[g];V.push(y),m.set(y.value,p)}),o.value=V,d.value=m});function s(u){return d.value.get(u.value)}return{filteredItems:o,filteredMatches:d,getMatches:s}}function Ot(e,n,l){return l==null||!l.length?n:l.map((r,o)=>{const d=o===0?0:l[o-1][1],v=[F("span",{class:oe(`${e}__unmask`)},[n.slice(d,r[0])]),F("span",{class:oe(`${e}__mask`)},[n.slice(r[0],r[1])])];return o===l.length-1&&v.push(F("span",{class:oe(`${e}__unmask`)},[n.slice(r[1])])),F(Z,null,[v])})}export{Rt as V,bt as a,pt as b,Vt as c,Ot as h,Dt as m,_t as u};
