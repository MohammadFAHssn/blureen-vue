import{u as ee,m as te,a as le}from"./autofocus-DLDJmGe7.js";import{V as ae}from"./VCounter-CPK57Clw.js";import{V as B,m as ne}from"./VField-Cu2kjRp0.js";import{ax as ue,a6 as oe,ci as D,aP as ie,bQ as se,Y as x,r as y,ab as re,bS as ce,bM as M,b as h,s as P,bI as de,bT as fe,d as n,F as C,b2 as ve,K as me,d8 as xe,y as Ve,b5 as F,bU as be}from"./index-CVMLsVkI.js";const ge=["color","file","time","date","datetime-local","week","month"],ye=oe({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...te(),...fe(),...ne()},"VTextField"),ke=ue()({name:"VTextField",directives:{vIntersect:D},inheritAttrs:!1,props:ye(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,E){let{attrs:V,emit:k,slots:a}=E;const u=ie(e,"modelValue"),{isFocused:i,focus:_,blur:U}=se(e),{onIntersect:z}=le(e),O=x(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:(u.value??"").toString().length),$=x(()=>{if(V.maxlength)return V.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),S=x(()=>["plain","underlined"].includes(e.variant)),I=y(),A=y(),s=y(),f=ee(e),j=x(()=>ge.includes(e.type)||e.persistentPlaceholder||i.value||e.active);function w(){f.isSuppressing.value&&f.update(),i.value||_(),F(()=>{var t;s.value!==document.activeElement&&((t=s.value)==null||t.focus())})}function K(t){k("mousedown:control",t),t.target!==s.value&&(w(),t.preventDefault())}function Q(t){k("click:control",t)}function Y(t,l){t.stopPropagation(),w(),F(()=>{l(),be(e["onClick:clear"],t)})}function q(t){var m;const l=t.target;if(!((m=e.modelModifiers)!=null&&m.trim&&["text","search","password","tel","url"].includes(e.type))){u.value=l.value;return}const r=l.value,v=l.selectionStart,b=l.selectionEnd;u.value=r,F(()=>{let c=0;r.trimStart().length===l.value.length&&(c=r.length-l.value.length),v!=null&&(l.selectionStart=v-c),b!=null&&(l.selectionEnd=b-c)})}return re(()=>{const t=!!(a.counter||e.counter!==!1&&e.counter!=null),l=!!(t||a.details),[r,v]=ce(V),{modelValue:b,...m}=M.filterProps(e),c=B.filterProps(e);return h(M,P({ref:I,modelValue:u.value,"onUpdate:modelValue":d=>u.value=d,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":S.value},e.class],style:e.style},r,m,{centerAffix:!S.value,focused:i.value}),{...a,default:d=>{let{id:o,isDisabled:p,isDirty:N,isReadonly:G,isValid:H,hasDetails:J,reset:L}=d;return h(B,P({ref:A,onMousedown:K,onClick:Q,"onClick:clear":g=>Y(g,L),role:e.role},ve(c,["onClick:clear"]),{id:o.value,labelId:`${o.value}-label`,active:j.value||N.value,dirty:N.value||e.dirty,disabled:p.value,focused:i.value,details:J.value,error:H.value===!1}),{...a,default:g=>{let{props:{class:R,...W},controlRef:X}=g;const T=n("input",P({ref:Z=>s.value=X.value=Z,value:u.value,onInput:q,autofocus:e.autofocus,readonly:G.value,disabled:p.value,name:f.fieldName.value,autocomplete:f.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:_,onBlur:U,"aria-labelledby":`${o.value}-label`},W,v),null);return n(C,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[n("span",{class:"v-text-field__prefix__text"},[e.prefix])]),me(a.default?n("div",{class:Ve(R),"data-no-activator":""},[a.default({id:o}),T]):xe(T,{class:R}),[[D,z,null,{once:!0}]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[n("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:l?d=>{var o;return n(C,null,[(o=a.details)==null?void 0:o.call(a,d),t&&n(C,null,[n("span",null,null),h(ae,{active:e.persistentCounter||i.value,value:O.value,max:$.value,disabled:e.disabled},a.counter)])])}:void 0})}),de({},I,A,s)}});export{ke as V,ye as m};
