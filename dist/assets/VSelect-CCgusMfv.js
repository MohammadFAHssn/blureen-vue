import{ax as he,a6 as te,aa as De,w as Y,ab as ge,d as x,F as re,s as O,ad as Re,bb as Me,a7 as $,ba as ke,r as ee,Y as L,dc as He,as as Be,a8 as ve,cf as ze,aw as Fe,cK as _e,c2 as Ne,aW as Ke,Z as de,b9 as qe,H as Ue,b as I,a9 as ce,J as $e,y as We,b1 as je,bP as Je,c0 as Xe,al as Ye,aF as Se,bX as Qe,aq as Ze,da as Ge,aS as me,aJ as et,bH as tt,bg as lt,dd as Ie,cQ as Pe,aM as at,a1 as Ce,de as nt,bB as ot,a2 as xe,df as ut,b3 as rt,v as it}from"./index-BjDbercT.js";import{V as Te,m as st}from"./VTextField-DDgrD6FV.js";import{u as ct}from"./autofocus-CNqWoOyb.js";import{e as dt,m as ft,V as vt,a as Ae,c as mt}from"./VList-CrR_CGaz.js";import{V as pt}from"./dialog-transition-BfqVmbQh.js";import{V as ht}from"./VMenu-BFNRgxw0.js";import{h as gt}from"./VOverlay-BlrRlgQ7.js";import{V as yt}from"./VDivider-CY0uTSDO.js";import{V as Vt}from"./VCheckboxBtn-CNmYAWcl.js";const bt=te({renderless:Boolean,...Re()},"VVirtualScrollItem"),wt=he()({name:"VVirtualScrollItem",inheritAttrs:!1,props:bt(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:l,emit:c,slots:n}=s;const{resizeRef:m,contentRect:p}=De(void 0,"border");Y(()=>{var a;return(a=p.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ge(()=>{var a,i;return e.renderless?x(re,null,[(a=n.default)==null?void 0:a.call(n,{itemRef:m})]):x("div",O({ref:m,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(i=n.default)==null?void 0:i.call(n)])})}}),kt=-1,St=1,pe=100,It=te({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Pt(e,s){const l=Me(),c=$(0);ke(()=>{c.value=parseFloat(e.itemHeight||0)});const n=$(0),m=$(Math.ceil((parseInt(e.height)||l.height.value)/(c.value||16))||1),p=$(0),a=$(0),i=ee(),P=ee();let u=0;const{resizeRef:z,contentRect:T}=De();ke(()=>{z.value=i.value});const C=L(()=>{var o;return i.value===document.documentElement?l.height.value:((o=T.value)==null?void 0:o.height)||parseInt(e.height)||0}),Q=L(()=>!!(i.value&&P.value&&C.value&&c.value));let y=Array.from({length:s.value.length}),k=Array.from({length:s.value.length});const A=$(0);let h=-1;function E(o){return y[o]||c.value}const W=He(()=>{const o=performance.now();k[0]=0;const f=s.value.length;for(let b=1;b<=f;b++)k[b]=(k[b-1]||0)+E(b-1);A.value=Math.max(A.value,performance.now()-o)},A),M=Y(Q,o=>{o&&(M(),u=P.value.offsetTop,W.immediate(),H(),~h&&Fe(()=>{_e&&window.requestAnimationFrame(()=>{ue(h),h=-1})}))});Be(()=>{W.clear()});function le(o,f){const b=y[o],D=c.value;c.value=D?Math.min(c.value,f):f,(b!==f||D!==c.value)&&(y[o]=f,W())}function B(o){o=ve(o,0,s.value.length);const f=Math.floor(o),b=o%1,D=f+1,J=k[f]||0,t=k[D]||J;return J+(t-J)*b}function g(o){return Ct(k,o)}let Z=0,j=0,ae=0;Y(C,(o,f)=>{H(),o<f&&requestAnimationFrame(()=>{j=0,H()})});let ne=-1;function N(){if(!i.value||!P.value)return;const o=i.value.scrollTop,f=performance.now();f-ae>500?(j=Math.sign(o-Z),u=P.value.offsetTop):j=o-Z,Z=o,ae=f,window.clearTimeout(ne),ne=window.setTimeout(ie,500),H()}function ie(){!i.value||!P.value||(j=0,ae=0,window.clearTimeout(ne),H())}let oe=-1;function H(){cancelAnimationFrame(oe),oe=requestAnimationFrame(fe)}function fe(){if(!i.value||!C.value||!c.value)return;const o=Z-u,f=Math.sign(j),b=Math.max(0,o-pe),D=ve(g(b),0,s.value.length),J=o+C.value+pe,t=ve(g(J)+1,D+1,s.value.length);if((f!==kt||D<n.value)&&(f!==St||t>m.value)){const r=B(n.value)-B(D),w=B(t)-B(m.value);Math.max(r,w)>pe?(n.value=D,m.value=t):(D<=0&&(n.value=D),t>=s.value.length&&(m.value=t))}p.value=B(n.value),a.value=B(s.value.length)-B(m.value)}function ue(o){const f=B(o);!i.value||o&&!f?h=o:i.value.scrollTop=f}const G=L(()=>s.value.slice(n.value,m.value).map((o,f)=>{const b=f+n.value;return{raw:o,index:b,key:ze(o,e.itemKey,b)}}));return Y(s,()=>{y=Array.from({length:s.value.length}),k=Array.from({length:s.value.length}),W.immediate(),H()},{deep:1}),{calculateVisibleItems:H,containerRef:i,markerRef:P,computedItems:G,paddingTop:p,paddingBottom:a,scrollToIndex:ue,handleScroll:N,handleScrollend:ie,handleItemResize:le}}function Ct(e,s){let l=e.length-1,c=0,n=0,m=null,p=-1;if(e[l]<s)return l;for(;c<=l;)if(n=c+l>>1,m=e[n],m>s)l=n-1;else if(m<s)p=n,c=n+1;else return m===s?n:c;return p}const xt=te({items:{type:Array,default:()=>[]},renderless:Boolean,...It(),...Re(),...je()},"VVirtualScroll"),Tt=he()({name:"VVirtualScroll",props:xt(),setup(e,s){let{slots:l}=s;const c=Ne("VVirtualScroll"),{dimensionStyles:n}=Ke(e),{calculateVisibleItems:m,containerRef:p,markerRef:a,handleScroll:i,handleScrollend:P,handleItemResize:u,scrollToIndex:z,paddingTop:T,paddingBottom:C,computedItems:Q}=Pt(e,de(()=>e.items));return qe(()=>e.renderless,()=>{function y(){var h,E;const A=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";p.value===document.documentElement?(document[A]("scroll",i,{passive:!0}),document[A]("scrollend",P)):((h=p.value)==null||h[A]("scroll",i,{passive:!0}),(E=p.value)==null||E[A]("scrollend",P))}Ue(()=>{p.value=gt(c.vnode.el,!0),y(!0)}),Be(y)}),ge(()=>{const y=Q.value.map(k=>I(wt,{key:k.key,renderless:e.renderless,"onUpdate:height":A=>u(k.index,A)},{default:A=>{var h;return(h=l.default)==null?void 0:h.call(l,{item:k.raw,index:k.index,...A})}}));return e.renderless?x(re,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ce(T.value)}},null),y,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ce(C.value)}},null)]):x("div",{ref:p,class:We(["v-virtual-scroll",e.class]),onScrollPassive:i,onScrollend:P,style:$e([n.value,e.style])},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ce(T.value),paddingBottom:ce(C.value)}},[y])])}),{calculateVisibleItems:m,scrollToIndex:z}}});function At(e,s){const l=$(!1);let c;function n(a){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function m(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const i=Y(l,()=>{i(),a()})}else a()})}async function p(a){var u,z;if(a.key==="Tab"&&((u=s.value)==null||u.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const i=(z=e.value)==null?void 0:z.$el;if(!i)return;(a.key==="Home"||a.key==="End")&&i.scrollTo({top:a.key==="Home"?0:i.scrollHeight,behavior:"smooth"}),await m();const P=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const T=i.getBoundingClientRect().top;for(const C of P)if(C.getBoundingClientRect().top>=T){C.focus();break}}else{const T=i.getBoundingClientRect().bottom;for(const C of[...P].reverse())if(C.getBoundingClientRect().bottom<=T){C.focus();break}}}return{onScrollPassive:n,onKeydown:p}}const Dt=te({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function Rt(e,s){const l=Je(),c=L(()=>`menu-${l}`),n=de(()=>Xe(s)),m=de(()=>c.value);return{menuId:c,ariaExpanded:n,ariaControls:m}}const Bt=te({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:at,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Dt(),...ft({itemChildren:!1})},"Select"),Ft=te({...Bt(),...lt(st({modelValue:null,role:"combobox"}),["validationValue","dirty"]),...tt({transition:{component:pt}})},"VSelect"),qt=he()({name:"VSelect",props:Ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:c}=Ye(),n=ee(),m=ee(),p=ee(),{items:a,transformIn:i,transformOut:P}=dt(e),u=Se(e,"modelValue",[],t=>i(t===null?[null]:Qe(t)),t=>{const r=P(t);return e.multiple?r:r[0]??null}),z=L(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),T=Ze(e),C=ct(e),Q=L(()=>u.value.map(t=>t.value)),y=$(!1),k=de(()=>e.closableChips&&!T.isReadonly.value&&!T.isDisabled.value),{InputIcon:A}=Ge(e);let h="",E=0,W;const M=L(()=>e.hideSelected?a.value.filter(t=>!u.value.some(r=>(e.valueComparator||me)(r,t))):a.value),le=L(()=>e.hideNoData&&!M.value.length||T.isReadonly.value||T.isDisabled.value),B=Se(e,"menu"),g=L({get:()=>B.value,set:t=>{var r;B.value&&!t&&((r=m.value)!=null&&r.Î¨openChildren.size)||t&&le.value||(B.value=t)}}),{menuId:Z,ariaExpanded:j,ariaControls:ae}=Rt(e,g),ne=L(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),N=ee(),ie=At(N,n);function oe(t){e.openOnClear&&(g.value=!0)}function H(){le.value||(g.value=!g.value)}function fe(t){Ie(t)&&ue(t)}function ue(t){var _,X,V;if(!t.key||T.isReadonly.value)return;if(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(g.value=!0),["Escape","Tab"].includes(t.key)&&(g.value=!1),e.clearable&&t.key==="Backspace"){t.preventDefault(),u.value=[],oe();return}t.key==="Home"?(_=N.value)==null||_.focus("first"):t.key==="End"&&((X=N.value)==null||X.focus("last"));const r=1e3;if(!Ie(t))return;const w=performance.now();w-W>r&&(h="",E=0),h+=t.key.toLowerCase(),W=w;const K=M.value;function q(){let v=R();return v||h.at(-1)===h.at(-2)&&(h=h.slice(0,-1),E++,v=R(),v)||(E=0,v=R(),v)?v:(h=t.key.toLowerCase(),R())}function R(){for(let v=E;v<K.length;v++){const S=K[v];if(S.title.toLowerCase().startsWith(h))return[S,v]}}const U=q();if(!U)return;const[d,F]=U;E=F,(V=N.value)==null||V.focus(F),e.multiple||(u.value=[d])}function G(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const w=u.value.findIndex(q=>(e.valueComparator||me)(q.value,t.value)),K=r??!~w;if(~w){const q=K?[...u.value,t]:[...u.value];q.splice(w,1),u.value=q}else K&&(u.value=[...u.value,t])}else{const w=r!==!1;u.value=w?[t]:[],Fe(()=>{g.value=!1})}}function o(t){var r;(r=N.value)!=null&&r.$el.contains(t.relatedTarget)||(g.value=!1)}function f(){var t;e.eager&&((t=p.value)==null||t.calculateVisibleItems())}function b(){var t;y.value&&((t=n.value)==null||t.focus())}function D(t){y.value=!0}function J(t){if(t==null)u.value=[];else if(Pe(n.value,":autofill")||Pe(n.value,":-webkit-autofill")){const r=a.value.find(w=>w.title===t);r&&G(r)}else n.value&&(n.value.value="")}return Y(g,()=>{if(!e.hideSelected&&g.value&&u.value.length){const t=M.value.findIndex(r=>u.value.some(w=>(e.valueComparator||me)(w.value,r.value)));_e&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var r;t>=0&&((r=p.value)==null||r.scrollToIndex(t))})}}),Y(a,(t,r)=>{g.value||y.value&&e.hideNoData&&!r.length&&t.length&&(g.value=!0)}),ge(()=>{const t=!!(e.chips||l.chip),r=!!(!e.hideNoData||M.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),w=u.value.length>0,K=Te.filterProps(e),q=w||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return I(Te,O({ref:n},K,{modelValue:u.value.map(R=>R.props.title).join(", "),name:void 0,"onUpdate:modelValue":J,focused:y.value,"onUpdate:focused":R=>y.value=R,validationValue:u.externalValue,counterValue:z.value,dirty:w,class:["v-select",{"v-select--active-menu":g.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:q,"onClick:clear":oe,"onMousedown:control":H,onBlur:o,onKeydown:ue,"aria-expanded":j.value,"aria-controls":ae.value}),{...l,default:R=>{let{id:U}=R;return x(re,null,[x("select",{hidden:!0,multiple:e.multiple,name:C.fieldName.value},[a.value.map(d=>x("option",{key:d.value,value:d.value,selected:Q.value.includes(d.value)},null))]),I(ht,O({id:Z.value,ref:m,modelValue:g.value,"onUpdate:modelValue":d=>g.value=d,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:f,onAfterLeave:b},ne.value),{default:()=>[r&&I(vt,O({ref:N,selected:Q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:fe,onFocusin:D,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-labelledby":`${U.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},ie,e.listProps),{default:()=>{var d,F,_;return[(d=l["prepend-item"])==null?void 0:d.call(l),!M.value.length&&!e.hideNoData&&(((F=l["no-data"])==null?void 0:F.call(l))??I(Ae,{key:"no-data",title:c(e.noDataText)},null)),I(Tt,{ref:p,renderless:!0,items:M.value,itemKey:"value"},{default:X=>{var Ve,be,we;let{item:V,index:v,itemRef:S}=X;const se=nt(V.props),ye=O(V.props,{ref:S,key:V.value,onClick:()=>G(V,null),"aria-posinset":v+1,"aria-setsize":M.value.length});return V.type==="divider"?((Ve=l.divider)==null?void 0:Ve.call(l,{props:V.raw,index:v}))??I(yt,O(V.props,{key:`divider-${v}`}),null):V.type==="subheader"?((be=l.subheader)==null?void 0:be.call(l,{props:V.raw,index:v}))??I(mt,O(V.props,{key:`subheader-${v}`}),null):((we=l.item)==null?void 0:we.call(l,{item:V,index:v,props:ye}))??I(Ae,O(ye,{role:"option"}),{prepend:Ee=>{let{isSelected:Oe}=Ee;return x(re,null,[e.multiple&&!e.hideSelected?I(Vt,{key:V.value,modelValue:Oe,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:Le=>Le.preventDefault()},null):void 0,se.prependAvatar&&I(ot,{image:se.prependAvatar},null),se.prependIcon&&I(Ce,{icon:se.prependIcon},null)])}})}}),(_=l["append-item"])==null?void 0:_.call(l)]}})]}),u.value.map((d,F)=>{function _(S){S.stopPropagation(),S.preventDefault(),G(d,!1)}const X=O(xe.filterProps(d.props),{"onClick:close":_,onKeydown(S){S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),_(S))},onMousedown(S){S.preventDefault(),S.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),V=t?!!l.chip:!!l.selection,v=V?ut(t?l.chip({item:d,index:F,props:X}):l.selection({item:d,index:F})):void 0;if(!(V&&!v))return x("div",{key:d.value,class:"v-select__selection"},[t?l.chip?I(rt,{key:"chip-defaults",defaults:{VChip:{closable:k.value,size:"small",text:d.title}}},{default:()=>[v]}):I(xe,O({key:"chip",closable:k.value,size:"small",text:d.title,disabled:d.props.disabled},X),null):v??x("span",{class:"v-select__selection-text"},[d.title,e.multiple&&F<u.value.length-1&&x("span",{class:"v-select__selection-comma"},[it(",")])])])})])},"append-inner":function(){var F,_;for(var R=arguments.length,U=new Array(R),d=0;d<R;d++)U[d]=arguments[d];return x(re,null,[(F=l["append-inner"])==null?void 0:F.call(l,...U),e.menuIcon?I(Ce,{class:"v-select__menu-icon",color:(_=n.value)==null?void 0:_.fieldIconColor,icon:e.menuIcon,"aria-hidden":!0},null):void 0,e.appendInnerIcon&&I(A,{key:"append-icon",name:"appendInner",color:U[0].iconColor.value},null)])}})}),et({isFocused:y,menu:g,select:G},n)}});export{qt as V,At as a,Tt as b,Bt as m,Rt as u};
