var Ei=Object.defineProperty;var Ai=(g,m,t)=>m in g?Ei(g,m,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[m]=t;var pe=(g,m,t)=>Ai(g,typeof m!="symbol"?m+"":m,t);import{g as Li,bF as Ci,M as Ni,bK as Mi,r as lt,bk as Ti,w as Pi,bL as Ui,H as Ri,av as Bi,c as Oi,o as $i,b as Fi,d as Di,e as Hi,v as zi,x as ji,n as wt,F as qi}from"./index-BvJigIpw.js";import{u as Vi}from"./useLogout-D4XAr6IQ.js";import{u as Yi}from"./useApi-DbF863LE.js";import{c as Xi}from"./createUrl-buDdObyr.js";import{O as Ot}from"./constants-DpTqEMCm.js";import{V as Gi}from"./VSnackbar-DkKbxq--.js";import"./VOverlay-B0GUTohQ.js";var it={exports:{}},Wi=it.exports,$t;function Ji(){return $t||($t=1,(function(g,m){var t=function(e,i){(typeof e=="string"||e instanceof String)&&(e=document.querySelector(e));var n=this;Object.defineProperty(this,"element",{get:()=>e.querySelector("[data-boc-content]"),set(o){n.mainElement=o}}),Object.defineProperty(this,"mainElement",{get:()=>e,set(o){(e=o)&&(e.innerHTML=`
                    <style>                    
                    .boc-dark, .boc-light{ display: flex; }
                    [data-boc-left]{ display: none; }
                    [data-boc-right]{ height: 100%; position: relative; overflow:hidden; flex-grow: 1; }
                    [data-boc-content]{ height: 100%; width: 100%; }
                    @media screen and (max-width: 500px) {
                        .boc-dark, .boc-light{ flex-direction: column; }
                        [data-boc-left]{ order: 2; height: 50vh; }
                        [data-boc-right]{ order: 1; }
                    }
                    </style>
                    <div data-boc-left></div>
                    <div data-boc-right>
                        <div data-boc-content></div>
                    </div>`,n._constructor(i))}}),Object.defineProperty(this,"leftElement",{get:()=>e.querySelector("[data-boc-left]")}),this.element=e};t.prototype._constructor=function(e){var i=this;if(this.config=t.mergeDeep(t._defaultConfig(e),e),this._layoutConfigs={base:{orientation:this.config.orientation,levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:this.config.assistantSeparation,subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:this.config.siblingSeparation,layout:this.config.layout,columns:this.config.columns,collapse:this.config.collapse,partnerNodeSeparation:this.config.partnerNodeSeparation}},this.config.tags)for(var n in this.config.tags){var o=this.config.tags[n];o.subTreeConfig!=null&&(this._layoutConfigs[n]={orientation:o.subTreeConfig.orientation!=null?o.subTreeConfig.orientation:this.config.orientation,levelSeparation:o.subTreeConfig.levelSeparation!=null?o.subTreeConfig.levelSeparation:this.config.levelSeparation,mixedHierarchyNodesSeparation:o.subTreeConfig.mixedHierarchyNodesSeparation!=null?o.subTreeConfig.mixedHierarchyNodesSeparation:this.config.mixedHierarchyNodesSeparation,assistantSeparation:o.subTreeConfig.assistantSeparation!=null?o.subTreeConfig.assistantSeparation:this.config.assistantSeparation,subtreeSeparation:o.subTreeConfig.subtreeSeparation!=null?o.subTreeConfig.subtreeSeparation:this.config.subtreeSeparation,siblingSeparation:o.subTreeConfig.siblingSeparation!=null?o.subTreeConfig.siblingSeparation:this.config.siblingSeparation,layout:o.subTreeConfig.layout!=null?o.subTreeConfig.layout:this.config.layout,columns:o.subTreeConfig.columns!=null?o.subTreeConfig.columns:this.config.columns,collapse:o.subTreeConfig.collapse!=null?o.subTreeConfig.collapse:this.config.collapse,partnerNodeSeparation:o.subTreeConfig.partnerNodeSeparation!=null?o.subTreeConfig.partnerNodeSeparation:this.config.partnerNodeSeparation})}this._event_id=t._guid(),t._validateConfig(this.config)&&(this._vScroll={},this.config.ui||(this.ui=t.ui),this.config.editUI?this.editUI=this.config.editUI:this.editUI=new t.editUI,this.editUI.init(this),this.config.filterUI?this.filterUI=this.config.filterUI:this.filterUI=new t.filterUI,this.filterUI.init(this),this.manager=new t.manager(this),this._ai=new t._ai(this),this.config.searchUI?this.searchUI=this.config.searchUI:this.searchUI=new t.searchUI,this.config.aiUI?this.aiUI=this.config.aiUI:this.aiUI=new t.aiUI,this.config.orgScribeUI?this.orgScribeUI=this.config.orgScribeUI:this.orgScribeUI=new t.orgScribeUI,this.config.powerPointPreviewUI?this.powerPointPreviewUI=this.config.powerPointPreviewUI:this.powerPointPreviewUI=new t.exportUI("pptx"),this.config.pdfPreviewUI?this.pdfPreviewUI=this.config.pdfPreviewUI:this.pdfPreviewUI=new t.exportUI("pdf"),this.config.svgPreviewUI?this.svgPreviewUI=this.config.svgPreviewUI:this.svgPreviewUI=new t.exportUI("svg"),this.config.pngPreviewUI?this.pngPreviewUI=this.config.pngPreviewUI:this.pngPreviewUI=new t.exportUI("png"),this.config.nodeMenuUI?this.nodeMenuUI=this.config.nodeMenuUI:this.nodeMenuUI=new t.menuUI,this.nodeMenuUI.init(this,this.config.nodeMenu),this.config.nodeCircleMenuUI?this.nodeCircleMenuUI=this.config.nodeCircleMenuUI:this.nodeCircleMenuUI=new t.circleMenuUI,this.nodeCircleMenuUI.init(this,this.config.nodeCircleMenu),this.config.nodeContextMenuUI?this.nodeContextMenuUI=this.config.nodeContextMenuUI:this.nodeContextMenuUI=new t.menuUI,this.nodeContextMenuUI.init(this,this.config.nodeContextMenu),this.config.controlsUI?this.controlsUI=this.config.controlsUI:this.controlsUI=new t.controlsUI,this.config.toolbarUI?this.toolbarUI=this.config.toolbarUI:this.toolbarUI=new t.toolbarUI,this.config.notifierUI?this.notifierUI=this.config.notifierUI:this.notifierUI=new t.notifierUI,this.notifierUI.init(this),this.config.menuUI?this.menuUI=this.config.menuUI:this.menuUI=new t.menuUI,this.menuUI.init(this,this.config.menu),this.config.xScrollUI||(this.xScrollUI=new t.xScrollUI(this.element,this.config,function(){return{boundary:i.response.boundary,scale:i.getScale(),viewBox:i.getViewBox(),padding:i.config.padding}},function(r){i.setViewBox(r)},function(){i._draw(!0,t.action.xScroll)})),this.config.yScrollUI||(this.yScrollUI=new t.yScrollUI(this.element,this.config,function(){return{boundary:i.response.boundary,scale:i.getScale(),viewBox:i.getViewBox(),padding:i.config.padding}},function(r){i.setViewBox(r)},function(){i._draw(!0,t.action.xScroll)})),this.config.undoRedoUI?this.undoRedoUI=this.config.undoRedoUI:this.undoRedoUI=new t.undoRedoUI,this.mainElement.classList.add("boc-"+this.config.mode),this._gragStartedId=null,this._timeout=null,this._touch=null,this._initialized=!1,this._loaded=!1,this._moveInterval=null,this._movePosition=null,this.response=null,this.nodes=null,this.isVisible=null,t._intersectionObserver(this.element,function(r){i.isVisible=r,t.events.publish("visibility-change",[i])!==!1&&t.LAZY_LOADING&&i.isVisible&&(i._loaded?i._draw(!1,t.action.update):(i._setInitialSizeIfNotSet(),i._draw(!1,t.action.init)))}),this._resizeObserver=new ResizeObserver(r=>{for(let s of r){const{width:a,height:c}=s.contentRect;i._resizeHandler(a,c)}}),this._resizeObserver.observe(this.element))},t._defaultConfig=function(e){return{interactive:!0,mode:"light",lazyLoading:"auto",enableDragDrop:!1,enableSearch:!0,enableAI:!1,enablePan:!0,keyNavigation:!1,miniMap:!1,controls:null,nodeMenu:null,nodeCircleMenu:null,nodeContextMenu:null,menu:null,toolbar:!1,sticky:!0,nodeMouseClick:t.action.details,nodeMouseDbClick:t.none,mouseScrool:t.action.zoom,showXScroll:!1,showYScroll:!1,template:"ana",tags:{},min:!1,nodeBinding:{},linkBinding:{},searchFields:null,searchDisplayField:null,searchFieldsWeight:null,searchFieldsAbbreviation:null,nodes:[],clinks:[],slinks:[],backdrops:[],groupDottedLines:[],dottedLines:[],undoRedoStorageName:null,levelSeparation:60,siblingSeparation:20,subtreeSeparation:40,backdropSeparation:15,mixedHierarchyNodesSeparation:15,assistantSeparation:100,minPartnerSeparation:50,partnerChildrenSplitSeparation:20,partnerNodeSeparation:15,columns:10,padding:30,orientation:t.orientation.top,layout:t.layout.normal,layoutGridColumns:"dynamic",scaleInitial:1,movable:null,scaleMin:.1,scaleMax:5,orderBy:null,editUI:null,aiUI:null,orgScribeUI:null,powerPointPreviewUI:null,pdfPreviewUI:null,svgPreviewUI:null,pngPreviewUI:null,filterUI:null,searchUI:null,xScrollUI:null,yScrollUI:null,nodeMenuUI:null,controlsUI:null,nodeCircleMenuUI:null,nodeContextMenuUI:null,toolbarUI:null,notifierUI:null,menuUI:null,undoRedoUI:null,exportUrl:"https://balkan.app/export",serverUrl:"https://serverjs.balkan.app",aiChatTools:[],collapse:{},expand:{},align:t.CENTER,UI:null,anim:{func:t.anim.outPow,duration:200},zoom:{speed:120,smooth:12},roots:null,state:null,editForm:{readOnly:!1,titleBinding:"name",photoBinding:"img",addMore:"Add more fields",saveOnHide:!0,addMoreBtn:"Add",addMoreFieldName:"Field name",saveAndCloseBtn:"Save and close",cancelBtn:"Cancel",generateElementsFromFields:!0,focusBinding:null,buttons:{edit:{icon:t.icon.edit(24,24,"#fff"),text:"Edit",hideIfEditMode:!0,hideIfDetailsMode:!1},share:{icon:t.icon.share(24,24,"#fff"),text:"Share"},pdf:{icon:t.icon.pdf(24,24,"#fff"),text:"Save as PDF"},remove:{icon:t.icon.remove(24,24,"#fff"),text:"Remove",hideIfDetailsMode:!0}},elements:[]}}},t.prototype.load=function(e,i){var n=this;return this.config.nodes=e,this._draw(!1,t.action.init,void 0,function(){n.filterUI.update(),i&&i()}),this},t.prototype.loadXML=function(e,i){var n=t._xml2json(e);return this.load(n,i)},t.prototype.getXML=function(){return t._json2xml(this.config.nodes)},t.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.prototype.removeListener=function(e,i){return t.events.remove(e,i,this._event_id)},t.prototype.draw=function(e,i,n){e==null&&(e=t.action.update),this._draw(!1,e,i,n)},t.prototype._draw=function(e,i,n,o){var r=this;if(!t.LAZY_LOADING||this.isVisible)if(t.LAZY_LOADING||this._initialized||(this._setInitialSizeIfNotSet(),this.width()!=0&&this.height()!=0)){this._hideBeforeAnimationCompleted=!1;var s=i==t.action.init?null:this.getViewBox();this.manager.read(e,this.width(),this.height(),s,i,n,function(a){if(!r.notifierUI.show(a.notif)){i!=t.action.exporting&&(r.nodes=a.nodes,r.visibleNodeIds=a.visibleNodeIds,r.roots=a.roots),r.editUI.fields=a.allFields;var c={defs:""};t.events.publish("renderdefs",[r,c]);var l=r.ui.defs(c.defs),h=r.getScale(a.viewBox);l+=r.ui.pointer(r.config,i,h);var d=r.getViewBox(),p=a.viewBox;c={content:l,res:a},t.events.publish("prerender",[r,c]),l=c.content;var f=[];if(t.RENDER_LINKS_BEFORE_NODES)for(var u=0;u<a.visibleNodeIds.length;u++){var x=a.nodes[a.visibleNodeIds[u]];t.getRootOf(x).stParent?f.push(x.id):l+=r.ui.link(x,r,h,a.bordersByRootIdAndLevel,a.nodes,i)}for(u=0;u<a.visibleNodeIds.length;u++){x=a.nodes[a.visibleNodeIds[u]];var S=r._get(x.id);t.RENDER_LINKS_BEFORE_NODES&&f.includes(x.id)&&(l+=r.ui.link(x,r,h,a.bordersByRootIdAndLevel,a.nodes,i)),l+=r.ui.node(x,S,a.animations,r.config,void 0,void 0,void 0,i,h,r)}for(u=0;u<a.visibleNodeIds.length;u++)x=a.nodes[a.visibleNodeIds[u]],t.RENDER_LINKS_BEFORE_NODES||(l+=r.ui.link(x,r,h,a.bordersByRootIdAndLevel,a.nodes,i)),l+=r.ui.expandCollapseBtn(r,x,r._layoutConfigs,i,h);if(c={content:l,res:a},t.events.publish("render",[r,c]),l=c.content,a=c.res,l+=r.ui.lonely(r.config),i!==t.action.exporting){if(i!==t.action.centernode&&i!==t.action.insert&&i!==t.action.expand&&i!==t.action.collapse&&i!==t.action.update||(p=d),i===t.action.init&&d!=null&&(p=d),i===t.action.centerNode&&d!=null&&(p=d),r.response=a,r._lastSize={width:r.width(),height:r.height()},C=r.ui.svg("100%","100%",p,r.config,l),r._initialized){var y=r.getSvg(),v=y.parentNode;v.removeChild(y),v.insertAdjacentHTML("afterbegin",C),r._attachEventHandlers(),r.xScrollUI.addListener(r.getSvg()),r.yScrollUI.addListener(r.getSvg()),r.xScrollUI.setPosition(),r.yScrollUI.setPosition()}else r.element.innerHTML=r.ui.css()+C+r.ui.menuButton(r.config)+r.ui.aiButton(r.config),r._attachEventHandlers(),r.xScrollUI.create(r.width(),r.config.padding),r.xScrollUI.setPosition(),r.xScrollUI.addListener(r.getSvg()),r.yScrollUI.create(r.height(),r.config.padding),r.yScrollUI.setPosition(),r.yScrollUI.addListener(r.getSvg()),r.config.enableSearch&&r.searchUI.init(r),r.aiUI.init(r),r.orgScribeUI.init(r),r.powerPointPreviewUI.init(r),r.pdfPreviewUI.init(r),r.svgPreviewUI.init(r),r.pngPreviewUI.init(r),r.toolbarUI.init(r,r.config.toolbar),r.undoRedoUI.init(r),r.controlsUI.init(r);var E=!1,b=r.response.animations;if(b[0].length>0){for(r._hideBeforeAnimation(b[0].length),u=0;u<b[0].length;u++)b[0][u]=r.getNodeElement(b[0][u]);t.animate(b[0],b[1],b[2],r.config.anim.duration,r.config.anim.func,function(){E||(o&&o.call(r),t.events.publish("redraw",[r]),r._showAfterAnimation(),E=!0)})}i===t.action.centerNode?t.animate(r.getSvg(),{viewbox:d},{viewbox:r.response.viewBox},r.config.anim.duration,r.config.anim.func,function(){r.ripple(n.options.rippleId),E||(o&&o.call(r),t.events.publish("redraw",[r]),r._showAfterAnimation(),E=!0)},function(){r.xScrollUI.setPosition(),r.yScrollUI.setPosition()}):!d||!r.response||d[0]==r.response.viewBox[0]&&d[1]==r.response.viewBox[1]&&d[2]==r.response.viewBox[2]&&d[3]==r.response.viewBox[3]||i!==t.action.insert&&i!==t.action.expand&&i!==t.action.collapse&&i!==t.action.update&&i!==t.action.init?b[0].length==0&&(E||(o&&o.call(r),t.events.publish("redraw",[r]),E=!0)):t.animate(r.getSvg(),{viewbox:d},{viewbox:r.response.viewBox},2*r.config.anim.duration,r.config.anim.func,function(){r.xScrollUI.setPosition(),r.yScrollUI.setPosition(),E||(o&&o.call(r),t.events.publish("redraw",[r]),E=!0)}),r._initialized||(r._initialized=!0,r.filterUI.update(),r._ai.setContext(),t.events.publish("init",[r])),!r._loaded&&a&&a.nodes&&Object.keys(a.nodes).length&&(r._loaded=!0)}else{var I=a.boundary,w=I.maxX-I.minX,M=I.maxY-I.minY,C=r.ui.svg(w,M,[I.minX,I.minY,w,M],r.config,l,h);o.call(r,C,a)}}},function(a){t.events.publish("ready",[r,a])})}else console.error("Cannot load the chart with size 0! If you are using the OrgChart within tabs set OrgChart.LAZY_LOADING to true! ")},t.prototype._setInitialSizeIfNotSet=function(){this.mainElement.style.overflow="hidden",this.mainElement.style.position="relative",this.mainElement.offsetHeight==0&&(this.mainElement.style.height="100%",this.mainElement.offsetHeight==0&&(this.mainElement.style.height="700px")),this.mainElement.offsetWidth==0&&(this.mainElement.style.width="100%",this.mainElement.offsetWidth==0&&(this.mainElement.style.width="700px"))},t.prototype.width=function(){return this.element.offsetWidth},t.prototype.height=function(){return this.element.offsetHeight},t.prototype.getViewBox=function(){var e=this.getSvg();return t._getViewBox(e)},t.prototype.setViewBox=function(e){this.getSvg().setAttribute("viewBox",e.toString())},t.prototype.getScale=function(e){return e||(e=this.getViewBox()),t.getScale(e,this.width(),this.height(),this.config.scaleInitial,this.config.scaleMax,this.config.scaleMin)},t.prototype.setScale=function(e){e>this.config.scaleMax&&(e=this.config.scaleMax),e<this.config.scaleMin&&(e=this.config.scaleMin);var i=this.getViewBox().slice(0),n=this.width(),o=this.height(),r=n/i[2],s=o/i[3],a=r>s?s:r,c=i,l=i[2],h=i[3];return i[2]=i[2]/(e/a),i[3]=i[3]/(e/a),i[0]=c[0]-(i[2]-l)/2,i[1]=c[1]-(i[3]-h)/2,this.setViewBox(i),t.events.publish("redraw",[this]),e},t.prototype.ripple=function(e,i,n){var o=this.getNode(e);if(o!=null){var r=this.getNodeElement(e);if(r!=null){var s=this.getScale(),a=o.w/2,c=o.h/2;if(i!==void 0&&n!==void 0){var l=r.getBoundingClientRect();a=i/s-l.left/s,c=n/s-l.top/s}var h=o.w,d=o.h,p=h-a>a?h-a:a,f=d-c>c?d-c:c,u=p>f?p:f,x=document.createElementNS("http://www.w3.org/2000/svg","g"),S=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),y=document.createElementNS("http://www.w3.org/2000/svg","rect"),v=document.createElementNS("http://www.w3.org/2000/svg","circle"),E=t.randomId();S.setAttribute("id",E);var b={ripple:t.t(o.templateName,o.min,this.getScale()).ripple,node:o};t.events.publish("ripple",[this,b]),y.setAttribute("x",b.ripple.rect?b.ripple.rect.x:0),y.setAttribute("y",b.ripple.rect?b.ripple.rect.y:0),y.setAttribute("width",b.ripple.rect?b.ripple.rect.width:o.w),y.setAttribute("height",b.ripple.rect?b.ripple.rect.height:o.h),y.setAttribute("rx",b.ripple.radius),y.setAttribute("ry",b.ripple.radius),v.setAttribute("clip-path","url(#"+E+")"),v.setAttribute("cx",a),v.setAttribute("cy",c),v.setAttribute("r",0),v.setAttribute("fill",b.ripple.color),v.setAttribute("class","boc-ripple"),S.appendChild(y),x.appendChild(S),x.appendChild(v),r.appendChild(x),t.animate(v,{r:0,opacity:1},{r:u,opacity:0},500,t.anim.outPow,function(){r.removeChild(x)})}}},t.prototype.centerOutNodes=function(e){if(this._centerInNodes){var i=JSON.parse(this._centerInNodes);this._centerInNodes=null;var n=this;this._centerInNodesTimeout=t.animate(this.getSvg(),{viewBox:this.getViewBox()},{viewBox:i},300,this.config.anim.func,function(){n.draw(t.action.update,null,function(){e&&e.call(n)})})}},t.prototype.centerInNodes=function(e,i){var n=this.getViewBox();this._centerInNodes||(this._centerInNodes=JSON.stringify(n));var o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;for(var c of e)c.y<o&&(o=c.y),c.y+c.h>r&&(r=c.y+c.h),c.x<s&&(s=c.x),c.x+c.w>a&&(a=c.x+c.w);var l=a-s,h=r-o,d=(p=l/(l+2*this.config.padding))>(f=h/(h+2*this.config.padding))?f:p;d>this.config.scaleMax&&(d=this.config.scaleMax),d<this.config.scaleMin&&(d=this.config.scaleMin);var p,f,u=[50,50],x=this.width(),S=this.height(),y=(p=x/n[2])>(f=S/n[3])?f:p,v=n,E=n[2],b=n[3];n[2]=n[2]/(d/y),n[3]=n[3]/(d/y),n[0]=v[0]-(n[2]-E)/(100/u[0]),n[1]=v[1]-(n[3]-b)/(100/u[1]),n[0]=s-(x/d-l)/2,n[1]=o-(S/d-h)/2;var I=this;this._centerInNodesTimeout&&(clearTimeout(this._centerInNodesTimeout),this._centerInNodesTimeout=null),this._centerInNodesTimeout=t.animate(this.getSvg(),{viewBox:this.getViewBox()},{viewBox:n},300,this.config.anim.func,function(){I.draw(t.action.update,null,function(){i&&i.call(I)})})},t.prototype.center=function(e,i,n){var o,r,s=e,a=!0,c=!0;i&&i.parentState!=null&&(o=i.parentState),i&&i.childrenState!=null&&(r=i.childrenState),i&&i.rippleId!=null&&(s=i.rippleId),i&&i.vertical!=null&&(a=i.vertical),i&&i.horizontal!=null&&(c=i.horizontal);var l={parentState:o,childrenState:r,rippleId:s,vertical:a,horizontal:c};this._draw(!1,t.action.centerNode,{id:e,options:l},n)},t.prototype.fit=function(e){this.config.scaleInitial=t.match.boundary,this._draw(!0,t.action.init,{method:"fit"},e)},t.prototype.fitIfOutside=function(e){this.config.scaleInitial=t.match.boundaryIfOutside,this._draw(!0,t.action.init,{method:"fit"},e)},t.prototype.toggleFullScreen=function(){var e=document.querySelector("["+t.attr.tlbr+"r='fullScreen']");document.fullscreenElement==this.element||document.webkitFullscreenElement==this.element||document.mozFullScreenElement==this.element||document.msFullscreenElement==this.element?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e&&(e.innerHTML=t.toolbarUI.openFullScreenIcon)):(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),e&&(e.innerHTML=t.toolbarUI.closeFullScreenIcon))},t.prototype.getNode=function(e){return this.nodes[e]},t.prototype.setLayout=function(e,i){i||(i="base"),this._layoutConfigs[i].layout=e,i=="base"&&(this.config.layout=e),this._draw(!1,t.action.update)},t.prototype.setOrientation=function(e,i,n){var o=this;i||(i="base"),this._layoutConfigs[i].orientation=e,i=="base"&&(this.config.orientation=e),this._draw(!1,t.action.update,void 0,function(){o.getScale(),t._moveToBoundaryArea(o.getSvg(),o.getViewBox(),o.response.boundary,function(){o._draw(!0,t.action.pan),n&&n()})})},t.prototype.search=function(e,i,n){return t.isNEU(i)&&(i=this.searchUI._searchFields),t.isNEU(n)&&(n=i),t._search.search(this.config.nodes,e,i,n,this.config.searchDisplayField,this.config.searchFieldsWeight,this.searchUI._searchFieldsAbbreviation)},t.prototype._hideBeforeAnimation=function(e){if(this._hideBeforeAnimationCompleted!=1&&!(e&&e<t.ANIM_THRESHOLD)){var i=this.element.getElementsByTagName("text");if(i.length>t.TEXT_THRESHOLD)for(var n=0;n<i.length;n++)i[n].style.display="none";var o=this.element.getElementsByTagName("image");if(o.length>t.IMAGES_THRESHOLD)for(n=0;n<o.length;n++)o[n].style.display="none";var r=this.element.querySelectorAll("["+t.attr.link_id+"]");if(r.length>t.LINKS_THRESHOLD)for(n=0;n<r.length;n++)r[n].style.display="none";var s=this.element.querySelectorAll("["+t.attr.control_expcoll_id+"]");if(s.length>t.BUTTONS_THRESHOLD)for(n=0;n<s.length;n++)s[n].style.display="none";var a=this.element.querySelectorAll("["+t.attr.control_up_id+"]");if(a.length>t.BUTTONS_THRESHOLD)for(n=0;n<a.length;n++)a[n].style.display="none";this._hideBeforeAnimationCompleted=!0}},t.prototype._showAfterAnimation=function(){for(var e=this.element.getElementsByTagName("text"),i=0;i<e.length;i++)e[i].style.display="";var n=this.element.getElementsByTagName("image");for(i=0;i<n.length;i++)n[i].style.display="";var o=this.element.querySelectorAll("["+t.attr.link_id+"]");for(i=0;i<o.length;i++)o[i].style.display="";var r=this.element.querySelectorAll("["+t.attr.control_expcoll_id+"]");for(i=0;i<r.length;i++)r[i].style.display="";var s=this.element.querySelectorAll("["+t.attr.control_up_id+"]");for(i=0;i<s.length;i++)s[i].style.display="";this._hideBeforeAnimationCompleted=!1},t.prototype.isChild=function(e,i){for(var n=this.getNode(i);n;){if(n.id==e)return!0;n=n.parent?n.parent:n.stParent}return!1},t.prototype.getCollapsedIds=function(e){for(var i=[],n=0;n<e.childrenIds.length;n++){var o=this.getNode(e.childrenIds[n]);o.collapsed==1&&i.push(o.id)}return i},t.prototype.stateToUrl=function(){if(this.manager.state){var e={};return e.exp=this.manager.state.exp.join("*"),e.min=this.manager.state.min.join("*"),e.adjustify=this.manager.state.adjustify.x+"*"+this.manager.state.adjustify.y,e.scale=this.manager.state.scale,e.y=this.manager.state.x,e.x=this.manager.state.y,new URLSearchParams(e).toString()}return""},t.prototype.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(this.nodes==null||!this.nodes.hasOwnProperty(e))return e}},t.prototype.moveNodesToVisibleArea=function(e,i){for(var n=this,o=this.roots[0],r=this.getSvg(),s=this.getViewBox(),a=null,c=null,l=null,h=null,d=0;d<e.length;d++){var p=this.nodes[e[d]];p.x!=null&&p.y!=null&&((a===null||a<p.x+p.w)&&(a=p.x+p.w),(c===null||c<p.y+p.h)&&(c=p.y+p.h),(l===null||l>p.x)&&(l=p.x),(h===null||h>p.y)&&(h=p.y))}if(a!=null&&c!=null&&l!=null&&h!=null){var f=this.width(),u=this.height(),x=f/(b=a-l+2*this.config.padding),S=u/(I=c-h+2*this.config.padding),y=x>S?S:x,v=Math.ceil(f/y),E=Math.ceil(u/y),b=0,I=0;if(v-2*this.config.padding>=a-l)b=(a+l)/2-v/2;else switch(b=o.x-v/2+t.manager._getNodeWidth(o,this.config)/2,this.config.orientation){case t.orientation.right:case t.orientation.right_top:(b=-(v/2-(l-a)/2))<this.config.padding-v&&(b=this.config.padding-v);break;case t.orientation.left:case t.orientation.bottom_left:case t.orientation.top_left:case t.orientation.left_top:(b=-(v/2-(a-l)/2))>-this.config.padding&&(b=-this.config.padding)}if(E-2*this.config.padding>=c-h)I=(c+h)/2-E/2;else switch((I=-(E/2-(c-h)/2))>-this.config.padding&&(I=-this.config.padding),this.config.orientation){case t.orientation.bottom:case t.orientation.bottom_left:(I=-(E/2-(h-c)/2))<this.config.padding-E&&(I=this.config.padding-E);break;case t.orientation.left:case t.orientation.right:I=o.y-E/2+t.manager._getNodeWidth(o,this.config)/2}var w=[b,I,v,E];s[0]!==w[0]||s[1]!==w[1]?t.animate(r,{viewBox:s},{viewBox:w},this.config.anim.duration,this.config.anim.func,function(){n.draw(t.action.update,void 0,i)}):i&&i()}},t.prototype._nodeHasHiddenParent=function(e){return!e.parent&&!t.isNEU(e.pid)&&this.getNode(e.pid)},t.prototype.destroy=function(){this._resizeObserver.unobserve(this.element),t.events.removeForEventId(this._event_id),this.element.innerHTML=null},t.localStorage={},t.localStorage.getItem=function(e){var i=localStorage.getItem("to_date");if(i){if((i=new Date(i))<new Date){for(var n=0,o=localStorage.length;n<o;++n){var r=localStorage.key(n);r&&r.startsWith&&r.startsWith('{"n"')&&localStorage.removeItem(r)}localStorage.removeItem("to_date")}}else(i=new Date).setDate(i.getDate()+5),i=i.toISOString(),localStorage.setItem("to_date",i);return localStorage.getItem(e)},t.localStorage.setItem=function(e,i){try{localStorage.setItem(e,i)}catch(n){n.code==n.QUOTA_EXCEEDED_ERR?(console.warn("Local storage quota exceeded"),localStorage.clear()):(console.error("Local storage error code:"+n.code),console.error(n))}},t.prototype.canUpdateLink=function(e,i){if(i==null||i==null||e==null||e==null||e==i)return!1;var n=this.getNode(i),o=this.getNode(e);return!(n&&o&&(n.isPartner||n.hasPartners&&o.isAssistant||n.hasAssistants&&o.isPartner))&&!this.isChild(e,i)},t.prototype._canUpdateLink=t.prototype.canUpdateLink,t.prototype.updateNode=function(e,i,n){var o=this,r=this.get(e.id);if(n===!0&&t.events.publish("update",[this,r,e])===!1)return!1;this.update(e),this._ai.setContext(),t.events.publish("updated",[this]),this.filterUI.update();var s=this.getNode(e.id),a=s.pid;a==null&&(a=s.stpid),this._draw(!1,t.action.update,{id:a},function(){o.ripple(e.id),i&&i()})},t.prototype.update=function(e){for(var i=0;i<this.config.nodes.length;i++)if(this.config.nodes[i].id==e.id){this._putInUndoStack(),this.clearRedo(),this.config.nodes[i]=e;break}return this},t.prototype.removeNode=function(e,i,n){var o=this;if(!this.canRemove(e))return!1;var r=this._getNewPidsAndStpidsForIds(e);return n===!0&&t.events.publish("remove",[this,e,r])===!1?!1:(this.remove(e),this._ai.setContext(),t.events.publish("updated",[this]),this.filterUI.update(),this._draw(!1,t.action.update,null,function(){o.config.sticky&&(o.getScale(),t._moveToBoundaryArea(o.getSvg(),o.getViewBox(),o.response.boundary)),i&&i()}),!0)},t.prototype.remove=function(e){var i=this.get(e);if(i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.nodes.length-1;n>=0;n--)this.config.nodes[n].pid!=e&&this.config.nodes[n].stpid!=e||(this.config.nodes[n].pid=i.pid,this.config.nodes[n].stpid=i.stpid),this.config.nodes[n].id==e&&this.config.nodes.splice(n,1)}return this},t.prototype._getNewPidsAndStpidsForIds=function(e){var i=this.get(e),n={},o={};if(i)for(var r=this.config.nodes.length-1;r>=0;r--)this.config.nodes[r].pid==e?n[this.config.nodes[r].id]=i.pid:this.config.nodes[r].stpid==e&&(o[this.config.nodes[r].id]=i.stpid);return{newPidsForIds:n,newStpidsForIds:o}},t.prototype.addNode=function(e,i,n){var o=this;if(n===!0&&t.events.publish("add",[this,e])===!1)return!1;this.add(e),this._ai.setContext(),t.events.publish("updated",[this]),this.filterUI.update(),o._draw(!1,t.action.insert,{id:e.pid,insertedNodeId:e.id},function(){o.ripple(e.id),i&&i()})},t.prototype.add=function(e){if(e.id==null&&console.error("Call addNode without id"),this._putInUndoStack(),this.clearRedo(),this.config.movable&&!t.isNEU(e.pid)){var i=this._get(e.pid);i&&(i.movex!=null&&(e.movex=i.movex),i.movey!=null&&(e.movey=i.movey))}return this.config.nodes.push(e),this},t.prototype.replaceIds=function(e,i){this._replaceIds(e),this._draw(!1,t.action.update,void 0,i)},t.prototype._replaceIds=function(e){for(var i=function(l){for(var h=0;h<l.length;h++){var d=l[h];for(var p in e){var f=e[p];d.from==p&&(d.from=f),d.to==p&&(d.to=f)}}},n=0;n<this.config.nodes.length;n++){var o=this.config.nodes[n];for(var r in e){var s=e[r];o.id==r&&(o.id=s),o.pid==r&&(o.pid=s),o.stpid==r&&(o.stpid=s),o.ppid==r&&(o.ppid=s)}}if(Array.isArray(this.config.roots))for(n=0;n<this.config.roots.length;n++)t.isNEU(e[this.config.roots[n]])||(this.config.roots[n]=e[this.config.roots[n]]);if(this.nodes)for(var a in this.nodes)t.isNEU(e[a])||(s=e[a],(c=this.nodes[a]).id=s,this.nodes[s]=c);if(this.manager.oldNodes)for(var a in this.manager.oldNodes)t.isNEU(e[a])||(s=e[a],(c=this.manager.oldNodes[a]).id=s,this.manager.oldNodes[s]=c);if(this.roots){for(var a in this.roots)if(!t.isNEU(e[a])){var c;s=e[a],(c=this.roots[a]).id=s,this.roots[s]=c}}i(this.config.clinks),i(this.config.slinks),i(this.config.groupDottedLines),i(this.config.dottedLines)},t.prototype._get=function(e){var i=this.__get(e);if(i)return i;if((this.config.groupDottedLines.length||this.config.dottedLines.length)&&!t.isNEU(e)&&typeof e=="string"&&(e.indexOf("balkan_group_dotted_")!=-1||e.indexOf("balkan_dotted_")!=-1)){var n=(e=(e=e.replace("balkan_group_dotted_","")).replace("balkan_dotted_","")).indexOf("_balkan_id_");if(e=e.substring(n+11),i=this.__get(e))return i}return null},t.prototype.__get=function(e){for(var i=0;i<this.config.nodes.length;i++)if(this.config.nodes[i].id==e)return this.config.nodes[i];return null},t.prototype.get=function(e){var i=this._get(e);return i==null?null:JSON.parse(JSON.stringify(i))},t.prototype.canRemove=function(e){var i=this.getNode(e);return!!i&&!i.hasPartners&&!i.hasAssistants},t===void 0&&(t={}),t._ajax=function(e,i,n,o,r){o==null&&(o="arraybuffer");var s=new XMLHttpRequest;s.onload=function(a){s.readyState==4&&this.status===200&&(a.target==null?r(this.response):r(a.target.response))},s.onerror=function(a){r({error:a})},s.open(i,e),s.responseType=o,s.setRequestHeader("Content-Type","application/json"),n==null?s.send():s.send(n)},t===void 0&&(t={}),t.animate=function(e,i,n,o,r,s,a){var c,l=10,h=1,d=o/l+1;return document.getElementsByTagName("g"),Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]),c=setInterval(function(){for(var p=0;p<e.length;p++)for(var f in n[p]){var u=t._arrayContains(["top","left","right","bottom","width","height"],f.toLowerCase())?"px":"";switch(f.toLowerCase()){case"d":var x=r((h*l-l)/o)*(n[p][f][0]-i[p][f][0])+i[p][f][0],S=r((h*l-l)/o)*(n[p][f][1]-i[p][f][1])+i[p][f][1];e[p].setAttribute("d",e[p].getAttribute("d")+" L"+x+" "+S);break;case"r":var y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f];e[p].setAttribute("r",y);break;case"x1":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].setAttribute("x1",y);break;case"x2":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].setAttribute("x2",y);break;case"y1":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].setAttribute("y1",y);break;case"y2":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].setAttribute("y2",y);break;case"scrolltop":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].scrollTop=y;break;case"rotate3d":if(n[p][f]){var v=i[p][f],E=n[p][f],b=[0,0,0,0];for(var I in v)b[I]=r((h*l-l)/o)*(E[I]-v[I])+v[I];e[p].style.transform="rotate3d("+b.toString()+"deg)"}break;case"transform":if(n[p][f]){v=i[p][f],E=n[p][f],b=[0,0,0,0,0,0];for(var I in v)b[I]=r((h*l-l)/o)*(E[I]-v[I])+v[I];e[p].hasAttribute("transform")?e[p].setAttribute("transform","matrix("+b.toString()+")"):e[p].style.transform="matrix("+b.toString()+")"}break;case"viewbox":if(n[p][f]){v=i[p][f],E=n[p][f],b=[0,0,0,0];for(var I in v)b[I]=r((h*l-l)/o)*(E[I]-v[I])+v[I];e[p].setAttribute("viewBox",b.toString())}break;case"margin":if(n[p][f]){v=i[p][f],E=n[p][f],b=[0,0,0,0];for(var I in v)b[I]=r((h*l-l)/o)*(E[I]-v[I])+v[I];var w="";for(I=0;I<b.length;I++)w+=parseInt(b[I])+"px ";e[p]&&e[p].style&&(e[p].style[f]=w)}break;case"scrolly":y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p].scrollTo(0,y);break;default:y=r((h*l-l)/o)*(n[p][f]-i[p][f])+i[p][f],e[p]&&e[p].style&&(e[p].style[f]=y+u)}}a&&a(),(h+=1)>d+1&&(clearInterval(c),s&&s(e))},l)},t.anim={},t.anim.inPow=function(e){return e<0?0:e>1?1:Math.pow(e,2)},t.anim.outPow=function(e){return e<0?0:e>1?1:-1*(Math.pow(e-1,2)+-1)},t.anim.inOutPow=function(e){return e<0?0:e>1?1:(e*=2)<1?t.anim.inPow(e,2)/2:-.5*(Math.pow(e-2,2)+-2)},t.anim.inSin=function(e){return e<0?0:e>1?1:1-Math.cos(e*(Math.PI/2))},t.anim.outSin=function(e){return e<0?0:e>1?1:Math.sin(e*(Math.PI/2))},t.anim.inOutSin=function(e){return e<0?0:e>1?1:-.5*(Math.cos(Math.PI*e)-1)},t.anim.inExp=function(e){return e<0?0:e>1?1:Math.pow(2,10*(e-1))},t.anim.outExp=function(e){return e<0?0:e>1?1:1-Math.pow(2,-10*e)},t.anim.inOutExp=function(e){return e<0?0:e>1?1:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,10*(-2*e+1)))},t.anim.inCirc=function(e){return e<0?0:e>1?1:-(Math.sqrt(1-e*e)-1)},t.anim.outCirc=function(e){return e<0?0:e>1?1:Math.sqrt(1-(e-1)*(e-1))},t.anim.inOutCirc=function(e){return e<0?0:e>1?1:e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(2*e-2)*(2*e-2))+1)},t.anim.rebound=function(e){return e<0?0:e>1?1:e<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-1.5/2.75)*(e-1.5/2.75)+.75):e<2.5/2.75?1-(7.5625*(e-2.25/2.75)*(e-2.25/2.75)+.9375):1-(7.5625*(e-2.625/2.75)*(e-2.625/2.75)+.984375)},t.anim.inBack=function(e){return e<0?0:e>1?1:e*e*(2.70158*e-1.70158)},t.anim.outBack=function(e){return e<0?0:e>1?1:(e-1)*(e-1)*(2.70158*(e-1)+1.70158)+1},t.anim.inOutBack=function(e){return e<0?0:e>1?1:e<.5?4*e*e*(7.1898*e-2.5949)*.5:.5*((2*e-2)*(2*e-2)*(3.5949*(2*e-2)+2.5949)+2)},t.anim.impulse=function(e){var i=2*e;return i*Math.exp(1-i)},t.anim.expPulse=function(e){return Math.exp(-2*Math.pow(e,2))},t===void 0&&(t={}),t.prototype._attachEventHandlers=function(e){if(this.config.interactive){e=this.getSvg();var i=this;e.addEventListener("touchstart",function(o){o.preventDefault(),i._globalMouseDownHandler.apply(i,[this,o])},{passive:!1}),e.addEventListener("mousedown",function(o){i._globalMouseDownHandler.apply(i,[this,o])},{passive:!0}),e.addEventListener("contextmenu",function(o){i._globalContextHandler.apply(i,[this,o])},{passive:!1}),e.addEventListener("dblclick",function(o){i._globalDbClickHandler.apply(i,[this,o])},{passive:!0}),this.config.mouseScrool!=t.action.none&&e.addEventListener("wheel",function(o){i._mouseScrollHandler.apply(i,[this,o])},{passive:!1});var n=this.getMenuButton();n&&n.addEventListener("click",function(o){i._menuClickHandler.apply(i,[this,o])})}},t===void 0&&(t={}),t.VERSION="8.21.30",t.orientation={},t.orientation.top=0,t.orientation.bottom=1,t.orientation.right=2,t.orientation.left=3,t.orientation.top_left=4,t.orientation.bottom_left=5,t.orientation.right_top=6,t.orientation.left_top=7,t.align={},t.align.center=t.CENTER=8,t.align.orientation=t.ORIENTATION=9,t.attr={},t.attr.l="data-l",t.attr.id="data-id",t.attr.sl="data-sl",t.attr.lbl="data-lbl",t.attr.val="data-val",t.attr.tlbr="data-tlbr",t.attr.item="data-item",t.attr.layout="data-layout",t.attr.node_id="data-n-id",t.attr.link_id="data-l-id",t.attr.field_name="data-f-name",t.attr.c_link_to="data-c-l-to",t.attr.c_link_from="data-c-l-from",t.attr.s_link_to="data-s-l-to",t.attr.s_link_from="data-s-l-from",t.attr.control_add="data-ctrl-add",t.attr.control_expcoll_id="data-ctrl-ec-id",t.attr.control_up_id="data-ctrl-up-id",t.attr.control_export_menu="data-ctrl-menu",t.attr.control_node_menu_id="data-ctrl-n-menu-id",t.attr.control_node_circle_menu_id="data-ctrl-n-c-menu-id",t.attr.control_node_circle_menu_name="data-ctrl-n-c-menu-name",t.attr.control_node_circle_menu_wrraper_id="data-ctrl-n-c-menu-wrapper-id",t.attr.width="data-width",t.attr.text_overflow="data-text-overflow",t.ID="id",t.PID="pid",t.STPID="stpid",t.TAGS="tags",t.NODES="nodes",t.ELASTIC="elastic",t.ASSISTANT="Assistant",t.action={},t.action.expand=0,t.action.collapse=1,t.action.maximize=101,t.action.minimize=102,t.action.expandCollapse=501,t.action.edit=1,t.action.zoom=2,t.action.ctrlZoom=22,t.action.scroll=41,t.action.xScroll=3,t.action.yScroll=4,t.action.none=5,t.action.init=6,t.action.update=7,t.action.move=70,t.action.pan=8,t.action.centerNode=9,t.action.resize=10,t.action.insert=11,t.action.insertfirst=12,t.action.details=13,t.action.exporting=14,t.none=400001,t.scroll={},t.scroll.visible=!0,t.scroll.smooth=12,t.scroll.speed=120,t.scroll.safari={smooth:12,speed:250},t.match={},t.match.height=100001,t.match.width=100002,t.match.boundary=100003,t.match.boundaryIfOutside=100004,t.movable={},t.movable.node="node",t.movable.tree="tree",t.movable.detachTree="detachTree",t.layout={},t.layout.normal=t.normal=0,t.layout.mixed=t.mixed=1,t.layout.tree=t.tree=2,t.layout.treeLeftOffset=t.treeLeftOffset=3,t.layout.treeRightOffset=t.treeRightOffset=4,t.layout.treeLeft=5,t.layout.treeRight=6,t.layout.grid=-1,t.layout.treeGrid=-2,t.nodeOpenTag="<g "+t.attr.node_id+'="{id}" style="opacity: {opacity}" transform="matrix(1,0,0,1,{x},{y})" class="{class}" '+t.attr.sl+'="{sl}" '+t.attr.l+'="{level}" {lcn}>',t.linkOpenTag="<g "+t.attr.link_id+'="[{id}][{child-id}]" class="{class}">',t.expcollOpenTag="<g "+t.attr.control_expcoll_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})"  style="cursor:pointer;">',t.upOpenTag="<g "+t.attr.control_up_id+'="{id}" transform="matrix(1,0,0,1,{x},{y})" style="cursor:pointer;">',t.linkFieldsOpenTag='<g transform="matrix(1,0,0,1,{x},{y}) rotate({rotate})">',t.grCloseTag="</g>",t.A5={width:420,height:595},t.A4={width:595,height:842},t.A3={width:842,height:1191},t.A2={width:1191,height:1684},t.A1={width:1684,height:2384},t.Letter={width:612,height:791},t.Legal={width:612,height:1009},t.Legal={width:612,height:1009},t.Widescreen={width:720,height:1280},t.Standard={width:720,height:960},t.COLLAPSE_PARENT_NEIGHBORS=1,t.COLLAPSE_SUB_CHILDRENS=2,t.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED=3,t.TEXT_THRESHOLD=4e3,t.IMAGES_THRESHOLD=1e3,t.LINKS_THRESHOLD=2e3,t.BUTTONS_THRESHOLD=700,t.ANIM_THRESHOLD=500,t.IT_IS_LONELY_HERE='<g transform="translate(-100, 0)" style="cursor:pointer;"  '+t.attr.control_add+'="control-add"><text fill="#039be5">{link}</text></g>',t.RES={},t.IT_IS_LONELY_HERE_LINK=t.RES.IT_IS_LONELY_HERE_LINK="It's lonely here, add your first node",t.FIRE_DRAG_NOT_CLICK_IF_MOVE=3,t.STRING_TAGS=!1,t.MAX_NODES_MESS="The trial has expired or 200 nodes limit was reached! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/OrgChartJS/Docs/Evaluation'>See more</a>",t.OFFLINE_MESS="The evaluation version requires internet connection! <br /><a style='color: #039BE5;' target='_blank' href='https://balkan.app/OrgChartJS/Docs/Evaluation'>See more</a>",t.SEARCH_PLACEHOLDER="Search... type ? to get help.",t.SEARCH_HELP_SYMBOL="?",t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE=!1,t.SEARCH_RESULT_LIMIT=10,t.IMPORT_MESSAGE="Choose the columns (fields) in your data file that contain the required information.",t.FIXED_POSITION_ON_CLICK=!1,t.RENDER_LINKS_BEFORE_NODES=!1,t.RENDER_CLINKS_BEFORE_NODES=!1,t.MIXED_LAYOUT_ALL_NODES=!0,t.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN=!1,t.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN=1,t.LINK_ROUNDED_CORNERS=5,t.MOVE_STEP=5,t.CLINK_CURVE=1,t.MAX_DEPTH=200,t.SCALE_FACTOR=1.44,t.LAZY_LOADING_FACTOR="auto",t.HIDE_EDIT_FORM_ON_PAN=!0,t.LAZY_LOADING=!0,t.ARRAY_FIELDS=["tags"],t.CSV_DELIMITER=",",t.EDITFORM_CLOSE_BTN='<svg data-edit-from-close class="boc-edit-form-close"><path style="fill:#ffffff;" d="M21.205,5.007c-0.429-0.444-1.143-0.444-1.587,0c-0.429,0.429-0.429,1.143,0,1.571l8.047,8.047H1.111 C0.492,14.626,0,15.118,0,15.737c0,0.619,0.492,1.127,1.111,1.127h26.554l-8.047,8.032c-0.429,0.444-0.429,1.159,0,1.587 c0.444,0.444,1.159,0.444,1.587,0l9.952-9.952c0.444-0.429,0.444-1.143,0-1.571L21.205,5.007z"></path></svg>',t.ESCAPE_HTML=!1,t.VERTICAL_CHILDREN_ASSISTANT=!1,t.EXPORT_PAGES_CUT_NODES=!1,t.RESET_MOVABLE_ONEXPANDCOLLAPSE=!1,t.FILTER_ALPHABETICALLY=!0,t.SERVER_PREFIX=".azurewebsites.net/api/OrgChartJS",t.FUNC_URL_NAME="func-url-orgchartjs",t.MINIMUM_SYMBOLS_IN_SEARCH_INPUT=1,t.AI_SYSTEM_MESSAGES=[],t.ORGSCRIBE_OFFSET=" ",g.exports=t,t._intersects=function(e,i,n){var o=e.x-n.siblingSeparation/4,r=e.y,s=e.x+e.w+n.siblingSeparation/4,a=e.y;switch(n.orientation){case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:o=e.x,r=e.y-n.siblingSeparation/4,s=e.x,a=e.y+e.h+n.siblingSeparation/4}var c,l,h,d=i.p,p=i.q,f=i.r,u=i.s;return(c=(s-o)*(u-p)-(f-d)*(a-r))!==0&&(l=((r-a)*(f-o)+(s-o)*(u-r))/c,0<(h=((u-p)*(f-o)+(d-f)*(u-r))/c)&&h<1&&0<l&&l<1)},t._addPoint=function(e,i,n,o,r){switch(n.orientation){case t.orientation.top:case t.orientation.top_left:return t._addPointTop(e,i,n,o,r);case t.orientation.bottom:case t.orientation.bottom_left:return t._addPointBottom(e,i,n,o,r);case t.orientation.left:case t.orientation.left_top:return t._addPointLeft(e,i,n,o,r);case t.orientation.right:case t.orientation.right_top:return t._addPointRight(e,i,n,o,r)}},t._addPointTop=function(e,i,n,o,r){var s,a,c;return r=="left"?s=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-n.siblingSeparation/2:r=="right"&&(s=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+n.siblingSeparation/2),i.push([s,i[i.length-1][1]]),i.push([s,e.y-n.levelSeparation/3]),a=i[i.length-1][1],c=s,o.p=s,o.q=a,o.r=c,o},t._addPointBottom=function(e,i,n,o,r){var s,a,c;return r=="left"?s=e.leftNeighbor?e.x+(e.leftNeighbor.x+e.leftNeighbor.w-e.x)/2:e.x-n.siblingSeparation/2:r=="right"&&(s=e.rightNeighbor?e.x+e.w+(e.rightNeighbor.x-(e.x+e.w))/2:e.x+e.w+n.siblingSeparation/2),i.push([s,i[i.length-1][1]]),i.push([s,e.y+e.h+n.levelSeparation/3]),a=i[i.length-1][1],c=s,o.p=s,o.q=a,o.r=c,o},t._addPointLeft=function(e,i,n,o,r){var s,a=i[i.length-1][0];r=="bottom"?s=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+n.siblingSeparation/2:r=="top"&&(s=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-n.siblingSeparation/2),i.push([i[i.length-1][0],s]),i.push([e.x-n.levelSeparation/3,s]),a=i[i.length-1][0];var c=s;return o.p=a,o.q=s,o.s=c,o},t._addPointRight=function(e,i,n,o,r){var s,a=i[i.length-1][0];r=="bottom"?s=e.rightNeighbor?e.y+e.h+(e.rightNeighbor.y-(e.y+e.h))/2:e.y+e.h+n.siblingSeparation/2:r=="top"&&(s=e.leftNeighbor?e.y+(e.leftNeighbor.y+e.leftNeighbor.h-e.y)/2:e.y-n.siblingSeparation/2),i.push([i[i.length-1][0],s]),i.push([e.x+e.w+n.levelSeparation/3,s]),a=i[i.length-1][0];var c=s;return o.p=a,o.q=s,o.s=c,o},t.editUI=function(){},t.editUI.prototype.init=function(e){this.obj=e,this.fields=null,this.nodeId=null,this.detailsMode=null,this._event_id=t._guid()},t.editUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.editUI.prototype.show=function(e,i,n){if(this.hide()){if(this.nodeId=e,this.detailsMode=i,t.events.publish("show",[this,e])===!1)return!1;var o=this,r=this.content(e,i,n);this.obj.element.appendChild(r.element),t.input.init(this.obj.element),t.events.publish("shown",[this,{nodeId:e}]),n?i||this._focusElement(r.focusId):this.interval=t.animate(r.element,{right:-20,opacity:0},{right:0,opacity:1},300,t.anim.outSin,function(){i||o._focusElement(r.focusId)}),this.obj.element.querySelector("[data-edit-from-close]").addEventListener("click",function(h){h.preventDefault(),t.events.publish("cancel",[o,{id:e}])!==!1&&o.hide()}),this.obj.element.querySelector("[data-edit-from-cancel]").addEventListener("click",function(h){h.preventDefault(),t.events.publish("cancel",[o,{id:e}])!==!1&&o.hide()}),this.obj.element.querySelector("[data-edit-from-save]").addEventListener("click",function(h){h.preventDefault(),o.obj.config.editForm.saveOnHide?o.hide():o.save()&&o.hide(!0)});for(var s=this.obj.element.querySelectorAll("[data-input-btn]"),a=0;a<s.length;a++)s[a].addEventListener("click",function(h){h.preventDefault(),t.events.publish("element-btn-click",[o,{input:this.parentNode.querySelector("input"),nodeId:e,event:h}])});this.obj.element.querySelector("[data-add-more-fields-btn]").addEventListener("click",function(h){h.stopPropagation(),h.preventDefault();var d=this,p=t.elements.textbox({},{type:"textbox",label:o.obj.config.editForm.addMoreFieldName,btn:o.obj.config.editForm.addMoreBtn},"280px");d.parentNode.insertAdjacentHTML("beforebegin",p.html),d.style.display="none",t.input.init(d.parentNode.previousSibling);var f=document.getElementById(p.id);f.focus(),f.nextElementSibling.addEventListener("click",function(u){u.stopPropagation(),u.preventDefault();var x=f.value,S=o.obj.element.querySelector('[data-binding="'+t._escapeDoubleQuotes(f.value)+'"]');if(t.isNEU(x)||S)f.focus();else{var y=t.elements.textbox({},{type:"textbox",label:x,binding:x},"280px");f.parentNode.parentNode.parentNode.removeChild(f.parentNode.parentNode),d.parentNode.insertAdjacentHTML("beforebegin",y.html),d.style.display="",t.input.init(d.parentNode.previousSibling);var v=document.getElementById(y.id);v.focus(),v.addEventListener("input",function(){o._drawCurrentNodeElement()})}})}),this.obj.element.querySelector("[data-boc-edit-from-btns]").addEventListener("click",function(h){for(var d=h.target;d&&d.hasAttribute&&!d.hasAttribute("data-edit-from-btn");)d=d.parentNode;if(d&&d.hasAttribute){var p=d.getAttribute("data-edit-from-btn"),f={button:o.obj.config.editForm.buttons[p],name:p,nodeId:e,event:h};if(t.events.publish("button-click",[o,f])===!1)return!1;switch(p){case"edit":o.obj.editUI.show(e,!1,!0);break;case"pdf":o.obj.exportPDFProfile({id:e,filename:r.title}),o.hide();break;case"png":o.obj.exportPNGProfile({id:e,filename:r.title}),o.hide();break;case"share":o.obj.shareProfile(e);break;case"remove":o.obj.removeNode(e,null,!0),o.hide()}}});var c=this.obj.element.querySelectorAll("[data-boc-edit-form] [data-binding]");for(a=0;a<c.length;a++){var l=c[a];l.getAttribute("data-binding")&&l.addEventListener("input",function(){o._drawCurrentNodeElement()})}}},t.editUI.prototype._drawCurrentNodeElement=function(){var e=this.obj.element.querySelector("[data-boc-edit-form]"),i=t.input.getData(e),n=this.obj.get(this.nodeId),o=this.obj.getNode(this.nodeId),r=t.mergeDeep(n,i),s=this.obj.ui.node(o,r,[],this.obj.config,void 0,void 0,void 0,void 0,this.obj.getScale(),this.obj);this._replaceNodeWith(s)},t.editUI.prototype._replaceNodeWith=function(e){var i=document.createElementNS("http://www.w3.org/2000/svg","g");i.innerHTML=e;var n=i.firstElementChild;this.obj.getNodeElement(this.nodeId).replaceWith(n)},t.editUI.prototype.setAvatar=function(e){var i=this.obj.element.querySelector('[id="boc-avatar"]'),n=this.obj.element.querySelector('[id="boc-avatar"] img'),o=this.obj.element.querySelector('[id="boc-avatar"] svg');i&&(n?n.setAttribute("src",e):o&&(i.innerHTML=`<img style="width: 100%;height:100%;border-radius: 50%;object-fit:cover;" src="${e}">`),this._drawCurrentNodeElement())},t.editUI.prototype.save=function(){var e=this.obj.element.querySelector("[data-boc-edit-form]"),i=t.input.validateAndGetData(e);if(i!==!1){var n=this.obj.get(this.nodeId),o={data:t.mergeDeep(n,i)};return t.events.publish("save",[this,o])===!1?void 0:(this.obj.updateNode(o.data,null,!0),!0)}return!1},t.editUI.prototype._focusElement=function(e){var i=null;t.isNEU(this.obj.config.editForm.focusBinding)?t.isNEU(e)||(i=document.getElementById(e)):i=this.obj.element.querySelector('[data-binding="'+this.obj.config.editForm.focusBinding+'"]'),i&&(i.value&&i.value.length&&i.setSelectionRange(i.value.length,i.value.length),i.focus())},t.editUI.prototype.content=function(e,i,n,o,r){var s,a=this.obj.config.editForm.readOnly,c=JSON.parse(JSON.stringify(this.obj.config.editForm.elements)),l=this.obj.config.editForm.addMore,h=this.obj.config.editForm.saveOnHide,d=this.obj.config.editForm.saveAndCloseBtn,p=this.obj.config.editForm.cancelBtn,f=this.obj.config.editForm.buttons,u=this.obj.config.editForm.titleBinding,x=this.obj.config.editForm.photoBinding,S=this.obj.getNode(e),y=this.obj._get(e),v=t.t(S.templateName,S.min,this.obj.getScale()),E=y[u],b=y[x];if(this.obj.config.editForm.generateElementsFromFields)for(var I=0;I<this.fields.length;I++){var w=this.fields[I];if(w!="tags"){for(var M=!1,C=0;C<c.length;C++){if(Array.isArray(c[C])){for(var R=0;R<c[C].length;R++)if(w==c[C][R].binding){M=!0;break}}else if(w==c[C].binding){M=!0;break}if(M)break}M||c.push({type:"textbox",label:w,binding:w})}}t.isNEU(E)&&(E=""),b=t.isNEU(b)?t.icon.user(150,150,"#8C8C8C",0,0):`<img style="width: 100%;height:100%;border-radius: 50%;object-fit:cover;" src="${b}"></img>`;var O=!i,z=h?"display:none;":"",F=i?"display:none;":"",V=i||!l?"display:none;":"",X=v.editFormHeaderColor?`style="background-color:${v.editFormHeaderColor};"`:"",W=document.createElement("form");if(W.setAttribute("data-boc-edit-form",""),W.classList.add("boc-edit-form"),W.classList.add(this.obj.config.mode),W.classList.add(S.templateName.replaceAll(" ","")),W.classList.add(t.ui._defsIds[S.templateName]),Array.isArray(S.tags)&&S.tags.length)for(I=0;I<S.tags.length;I++)W.classList.add(S.tags[I].replaceAll(" ",""));W.style.display="flex",W.style.opacity=n?1:0,W.style.right=n?0:"-20px",o&&(W.style.width=o);var Z=[],Y=r?"":t.EDITFORM_CLOSE_BTN;return W.innerHTML=`<div>
                        <div class="boc-edit-form-header" ${X}>
                            ${Y}
                            ${t.editUI.renderHeaderContent(E,b,S,y)}
                        </div>
                        <div data-boc-edit-from-btns class="boc-edit-form-instruments">
                        ${(function(){if(r)return"";var q="";for(var j in f){var K=f[j];t.isNEU(K)||O&&K.hideIfEditMode||i&&K.hideIfDetailsMode||a&&K.text=="Edit"||(q+=`<div data-edit-from-btn='${j}' class="boc-img-button" ${X} title="${K.text}">${K.icon}</div>`)}return q})()}    
                        </div>
                    </div>
                    <div class="boc-edit-form-fields">
                        <div class="boc-edit-form-fields-inner">
                            <div class="boc-form-fieldset">
                                ${(function(){for(var q="",j=0;j<c.length;j++){var K=c[j];if(Array.isArray(K)){q+='<div class="boc-form-field-100 boc-form-fieldset">';for(var ie=0;ie<K.length;ie++){var ne=K[ie],oe=t.elements[ne.type](y,ne,"unset",i);!t.isNEU(oe.id)&&t.isNEU(s)&&t.isNEU(oe.value)&&(s=oe.id),t.isNEU(oe.value)||Z.push(`${ne.label}: ${oe.value}`),q+=oe.html}q+="</div>"}else oe=t.elements[K.type](y,K,"280px",i),!t.isNEU(oe.id)&&t.isNEU(s)&&t.isNEU(oe.value)&&(s=oe.id),t.isNEU(oe.value)||Z.push(`${K.label}: ${oe.value}`),q+=oe.html}return q})()}

                                <div class="boc-form-field" style="min-width: 280px; text-align:center; ${V}">
                                    <a data-add-more-fields-btn href="#" class="boc-link">${l}</a>
                                </div>
                            </div>        
                        </div>
                    </div>
                    <div class="boc-form-fieldset" style="padding: 14px 10px; ${F}">
                        <div class="boc-form-field" style="min-width: initial; ${z}">
                            <button data-edit-from-cancel type="button" class="boc-button transparent">${p}</button>
                        </div>
                        <div class="boc-form-field" style="min-width: initial;">
                            <button type="submit" data-edit-from-save type="button" class="boc-button">${d}</button>
                        </div>
                    </div>`,{element:W,focusId:s,title:E,shareText:Z.join(`
`)}},t.editUI.prototype.hide=function(e){var i=this.obj.element.querySelector("[data-boc-edit-form]");if(i){if(!this.detailsMode){if(this.obj.config.editForm.saveOnHide){if(!this.save())return}else if(!e){var n=this.obj.get(this.nodeId),o=this.obj.getNode(this.nodeId),r=this.obj.ui.node(o,n,[],this.obj.config,void 0,void 0,void 0,void 0,this.obj.getScale(),this.obj);this._replaceNodeWith(r)}}if(t.events.publish("hide",[this])===!1)return!1;t.isNEU(this.interval)&&(clearInterval(this.interval),this.interval=null),i.parentNode.removeChild(i),this.nodeId=null,this.detailsMode=null}return!0},t.editUI.renderHeaderContent=function(e,i,n,o){return`<h1 class="boc-edit-form-title">${t._escapeGreaterLessSign(e)}</h1>
                <div id="boc-avatar" class="boc-edit-form-avatar">${i}</div>`},t.prototype.getSvg=function(){return this.element.querySelector("svg")},t.prototype.getPointerElement=function(){return this.element.querySelector("g[data-pointer]")},t.prototype.getNodeElement=function(e){return this.element.querySelector("["+t.attr.node_id+"='"+e+"']")},t.prototype.getMenuButton=function(){return this.element.querySelector("["+t.attr.control_export_menu+"]")},t.menuUI=function(){},t.menuUI.prototype.init=function(e,i){this.obj=e,this.wrapper=null,this.menu=i,this._event_id=t._guid()},t.menuUI.prototype.showStickIn=function(e,i,n,o){this._show(e,null,i,n,o)},t.menuUI.prototype.show=function(e,i,n,o,r){this._show(e,i,n,o,r)},t.menuUI.prototype._show=function(e,i,n,o,r){var s=this;this.hide();var a="";r||(r=this.menu);var c={firstNodeId:n,secondNodeId:o,menu:r};if(t.events.publish("show",[this,c])===!1)return!1;for(var l in r=c.menu){var h=r[l].icon,d=r[l].text;h===void 0&&(h=t.icon[l]?t.icon[l](24,24,"#7A7A7A"):""),typeof d=="function"&&(d=d()),typeof h=="function"&&(h=h()),a+="<div "+t.attr.item+'="'+l+'">'+h+"<span>&nbsp;&nbsp;"+d+"</span></div>"}if(a!=""){if(this.wrapper=document.createElement("div"),this.wrapper.className="boc-chart-menu",this.wrapper.style.left="-99999px",this.wrapper.style.top="-99999px",this.wrapper.innerHTML=a,this.obj.element.appendChild(this.wrapper),i==null){var p=t._menuPosition(e,this.wrapper,this.obj.getSvg());e=p.x,i=p.y}var f=e+45;this.wrapper.style.left=f+"px",this.wrapper.style.top=i+"px",this.wrapper.style.left=f-this.wrapper.offsetWidth+"px";var u=e-this.wrapper.offsetWidth;t.animate(this.wrapper,{opacity:0,left:f-this.wrapper.offsetWidth},{opacity:1,left:u},300,t.anim.inOutPow);for(var x=this.wrapper.getElementsByTagName("div"),S=0;S<x.length;S++)(l=x[S]).addEventListener("click",function(y){var v=this.getAttribute(t.attr.item),E=r[v].onClick;t._onClickHandler(s.obj,v,E,n,o)!=0&&s.hide()})}},t.menuUI.prototype.isVisible=function(){return this.wrapper!=null},t.menuUI.prototype.hide=function(){this.wrapper!=null&&(this.obj.element.removeChild(this.wrapper),this.wrapper=null)},t.menuUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.controlsUI=function(){},t.controlsUI.prototype.init=function(e){this.instance=e,this.element=null,this.show()},t.controlsUI.prototype.show=function(){var e=this,i=this.instance.config.controls;if(i){for(var n in this.hide(),this.element=document.createElement("div"),this.element.className="boc-controls",i){var o=i[n],r=o.icon;r===void 0&&(r=t.icon[n]?t.icon[n](32,32,"#7A7A7A"):t.icon.cursor(32,32,"#7A7A7A"));var s=o.title;s||(s=n),this.element.innerHTML+=`<div data-control-id="${n}" title="${s}">
                                        ${r}
                                </div>`}this.instance.element.appendChild(this.element),this.element.addEventListener("click",function(a){for(var c=a.target;c&&c.hasAttribute&&!c.hasAttribute("data-control-id");)c=c.parentNode;if(c.hasAttribute&&c.hasAttribute("data-control-id")){var l=c.getAttribute("data-control-id"),h=e.instance.config.controls[l].onClick;t._onClickHandler(e.instance,l,h,void 0,void 0)}})}},t.controlsUI.prototype.hide=function(){this.element!=null&&this.element.parentElement.removeChild(this.element)},t.circleMenuUI=function(){},t.circleMenuUI.prototype.init=function(e,i){this.obj=e,this.menu=i,this._menu=null,this._buttonsInterval=[],this._linesInterval=[],this._event_id=t._guid()},t.circleMenuUI.prototype.show=function(e,i){this._show(e,i)},t.circleMenuUI.prototype.isVisible=function(){return this.obj.element.querySelector("["+t.attr.control_node_circle_menu_wrraper_id+"]")!==null},t.circleMenuUI.prototype._show=function(e,i){var n=this,o=this.obj.getNode(e),r=t.t(o.templateName,o.min,this.obj.getScale());if(!t.isNEU(r.nodeCircleMenuButton)){var s=this.obj.getSvg(),a=this.obj.element.querySelector("["+t.attr.control_node_circle_menu_id+'="'+e+'"]'),c=this.obj.getNodeElement(e),l=t._getTransform(a),h=t._getTransform(c),d=l[4]+h[4],p=l[5]+h[5],f=a.querySelectorAll("line"),u=this.obj.element.querySelector("["+t.attr.control_node_circle_menu_wrraper_id+"]");if(t.isNEU(u)||u.getAttribute(t.attr.control_node_circle_menu_wrraper_id)!=e){this.hide(),i||(i=this.menu);var x={nodeId:e,menu:i},S=t.events.publish("show",[this,x]);if(this._menu=i,S===!1)return!1;for(var y=0,v=Object.keys(x.menu).length,E=2*r.nodeCircleMenuButton.radius+4,b=2*Math.PI*E,I=b/v-(2*r.nodeCircleMenuButton.radius+2);I<0;)E+=8,I=(b=2*Math.PI*E)/v-(2*r.nodeCircleMenuButton.radius+2);for(var w in(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute(t.attr.control_node_circle_menu_wrraper_id,e),u.setAttribute("transform","matrix(1,0,0,1,"+d+","+p+")"),s.appendChild(u),x.menu){var M=x.menu[w].icon,C=x.menu[w].color,R=x.menu[w].text;typeof M=="function"&&(M=M()),typeof C=="function"&&(C=C()),typeof R=="function"&&(R=R());var O=document.createElementNS("http://www.w3.org/2000/svg","g");O.setAttribute("transform","matrix(1,0,0,1,0,0)"),O.setAttribute(t.attr.control_node_circle_menu_name,w),O.style.cursor="pointer";var z=document.createElementNS("http://www.w3.org/2000/svg","title");t.isNEU(R)||(z.innerHTML=R);var F=document.createElementNS("http://www.w3.org/2000/svg","circle");F.setAttribute("cx",0),F.setAttribute("cy",0),F.setAttribute("r",r.nodeCircleMenuButton.radius),F.setAttribute("fill",C),F.setAttribute("stroke-width","1"),F.setAttribute("stroke",r.nodeCircleMenuButton.stroke),O.appendChild(F),O.appendChild(z),O.innerHTML+=M,u.appendChild(O);var V=O.getElementsByTagName("svg")[0];if(V.setAttribute("pointer-events","none"),V){var X=parseInt(V.getAttribute("width")),W=parseInt(V.getAttribute("height"));V.setAttribute("x",-X/2),V.setAttribute("y",-W/2)}var Z=y*Math.PI/(v/2);y++;var Y=Math.cos(Z)*E,q=Math.sin(Z)*E;this._buttonsInterval.push(t.animate(O,{transform:[1,0,0,1,0,0]},{transform:[1,0,0,1,Y,q]},250,t.anim.outBack,function(j){var K=j[0].getAttribute(t.attr.control_node_circle_menu_name),ie=j[0].parentNode.getAttribute(t.attr.control_node_circle_menu_wrraper_id);j[0].addEventListener("mouseenter",function(ne){t.events.publish("mouseenter",[n,{from:ie,menuItem:x.menu[K],menuItemName:K,event:ne}])}),j[0].addEventListener("mouseout",function(ne){t.events.publish("mouseout",[n,{from:ie,menuItem:x.menu[K],menuItemName:K,event:ne}])})}))}this._linesInterval.push(t.animate(f[0],{x1:-r.nodeCircleMenuButton.radius/2,y1:-6,x2:r.nodeCircleMenuButton.radius/2,y2:-6},{x1:-7,y1:-7,x2:7,y2:7},500,t.anim.inOutSin)),this._linesInterval.push(t.animate(f[1],{x1:-r.nodeCircleMenuButton.radius/2,y1:0,x2:r.nodeCircleMenuButton.radius/2,y2:0},{x1:0,y1:0,x2:0,y2:0},500,t.anim.inOutSin)),this._linesInterval.push(t.animate(f[2],{x1:-r.nodeCircleMenuButton.radius/2,y1:6,x2:r.nodeCircleMenuButton.radius/2,y2:6},{x1:-7,y1:7,x2:7,y2:-7},500,t.anim.inOutSin))}else this.hide()}},t.circleMenuUI.prototype.hide=function(){for(var e=this._buttonsInterval.length-1;e>=0;e--)clearInterval(this._buttonsInterval[e]),this._buttonsInterval.splice(e,1);for(this._buttonsInterval=[],e=this._linesInterval.length-1;e>=0;e--)clearInterval(this._linesInterval[e]),this._linesInterval.splice(e,1);this._linesInterval=[];var i=this.obj.element.querySelector("["+t.attr.control_node_circle_menu_wrraper_id+"]");if(i!=null){var n=i.getAttribute(t.attr.control_node_circle_menu_wrraper_id),o=this.obj.getNode(n),r=t.t(o.templateName,o.min,this.obj.getScale()),s=this.obj.element.querySelector("["+t.attr.control_node_circle_menu_id+'="'+n+'"]').querySelectorAll("line");s[0].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),s[0].setAttribute("x2",r.nodeCircleMenuButton.radius/2),s[0].setAttribute("y1",-6),s[0].setAttribute("y2",-6),s[1].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),s[1].setAttribute("x2",r.nodeCircleMenuButton.radius/2),s[1].setAttribute("y1",0),s[1].setAttribute("y2",0),s[2].setAttribute("x1",-r.nodeCircleMenuButton.radius/2),s[2].setAttribute("x2",r.nodeCircleMenuButton.radius/2),s[2].setAttribute("y1",6),s[2].setAttribute("y2",6),i.parentElement.removeChild(i),i=null}},t.circleMenuUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t===void 0&&(t={}),t.idb={version:1,dbName:"BALKAN",tableName:"orgchart-js",keyPath:"id"},t.idb.db=null,t.idb._open=function(e){if(t._browser().msie)e&&e(!1);else if((navigator.userAgent.toLowerCase().indexOf("safari")>0||navigator.userAgent.toLowerCase().indexOf("firefox")>0)&&window.location!==window.parent.location)e&&e(!1);else{if(!window.indexedDB)return console.error("Your browser doesn't support a stable version of IndexedDB."),void(e&&e(!1));if(t.idb.db==null){var i=indexedDB.open(t.idb.dbName,t.idb.version);i.onerror=function(n){console.error("Cannot open database!"),e&&e(!1)},i.onsuccess=function(n){t.idb.db=n.target.result,e&&e(!0)},i.onupgradeneeded=function(n){var o=n.target.result;o.objectStoreNames.contains(t.idb.tableName)&&o.deleteObjectStore(t.idb.tableName),o.createObjectStore(t.idb.tableName,{keyPath:t.idb.keyPath})}}else e&&e(!0)}},t.idb.read=function(e,i){t.idb._open(function(n){if(n){var o=t.idb.db.transaction([t.idb.tableName]).objectStore(t.idb.tableName).get(e);o.onerror=function(r){console.error("Unable to retrieve data from database!"),i&&i(!1)},o.onsuccess=function(r){o.result?i&&i(!0,o.result):i&&i(null)}}else i&&i(!1)})},t.idb.write=function(e,i){t.idb.read(e.id,function(n){if(n==null){var o=t.idb.db.transaction([t.idb.tableName],"readwrite").objectStore(t.idb.tableName).add(e);o.onerror=function(r){console.error("Unable to add data to database!"),i&&i(!1)},o.onsuccess=function(r){i&&i(!0)}}else i&&i(n)})},t.idb.put=function(e,i){t.idb._open(function(n){if(n){var o=t.idb.db.transaction([t.idb.tableName],"readwrite").objectStore(t.idb.tableName).put(e);o.onerror=function(r){console.error("Unable to put data to database!"),i&&i(!1)},o.onsuccess=function(r){i&&i(!0)}}else i&&i(!1)})},t.idb.delete=function(e,i){t.idb._open(function(n){if(n){var o=t.idb.db.transaction([t.idb.tableName],"readwrite").objectStore(t.idb.tableName).delete(e);o.onerror=function(r){console.error("Unable to retrieve data from database!"),i&&i(!1)},o.onsuccess=function(r){o.error?i&&i(!1):i&&i(!0)}}else i&&i(!1)})},t.toolbarUI=function(){},t.toolbarUI.expandAllIcon='<svg style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="4" markerHeight="4" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#757575" /></marker><line x1="11" y1="11" x2="6" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="11" x2="26" y2="6" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="21" y1="21" x2="26" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><line x1="11" y1="21" x2="6" y2="26" stroke="#757575" stroke-width="2" marker-end="url(#arrow)" /><rect x="12" y="12" width="8" height="8" fill="#757575"></rect></svg>',t.toolbarUI.fitIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><circle cx="16" cy="16" r="5" fill="#757575"></circle></svg>',t.toolbarUI.openFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><line x1="5" y1="5" x2="27" y2="27" stroke-width="3" stroke="#757575"></line><line x1="5" y1="27" x2="27" y2="5" stroke-width="3" stroke="#757575"></line></svg>',t.toolbarUI.closeFullScreenIcon='<svg  style="margin-bottom:7px;box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M4,11 L4,4 L11,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,11 L28,4 L21,4"></path><path stroke-width="3" fill="none" stroke="#757575" d="M28,21 L28,28 L21,28"></path><path stroke-width="3" fill="none" stroke="#757575" d="M4,21 L4,28 L11,28"></path><rect x="11" y="11" width="10" height="10" stroke-width="3" fill="none" stroke="#757575" ></rect></svg>',t.toolbarUI.zoomInIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-top: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line><line x1="16" y1="8" x2="16" y2="24" stroke-width="3" stroke="#757575"></line></g><line x1="4" y1="32" x2="28" y2="32" stroke-width="1" stroke="#cacaca"></line></svg>',t.toolbarUI.zoomOutIcon='<svg style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); margin-bottom:7px; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; border-bottom: 1px solid #cacaca; background-color: #f9f9f9;display: block; cursor: pointer;" width="32px" height="32px" ><g><rect fill="#f9f9f9" x="0" y="0" width="32" height="32" ></rect><line x1="8" y1="16" x2="24" y2="16" stroke-width="3" stroke="#757575"></line></g></svg>',t.toolbarUI.layoutIcon="<svg "+t.attr.tlbr+'="layout" style="box-shadow: 0px 1px 4px rgba(0,0,0,0.3); border: 1px solid #cacaca;background-color: #f9f9f9;display: block;cursor: pointer;" width="32px" height="32px"><path stroke-width="3" fill="none" stroke="#757575" d="M8,24 L16,14 L24,24"></path><path stroke-width="3" fill="none" stroke="#757575" d="M8,16 L16,8 L24,16"></path></svg>',t.toolbarUI.prototype.init=function(e,i){if(i){this.obj=e,this.toolbar=i,this._visible=!1,this.div=document.createElement("div"),this.div.classList.add("boc-toolbar-container"),Object.assign(this.div.style,{position:"absolute",padding:"3px",right:this.obj.config.padding-10+"px",bottom:this.obj.config.padding-10+"px"}),i.expandAll&&(this.div.innerHTML+="<div "+t.attr.tlbr+'="expand">'+t.toolbarUI.expandAllIcon+"</div>"),i.fit&&(this.div.innerHTML+="<div "+t.attr.tlbr+'="fit">'+t.toolbarUI.fitIcon+"</div>"),i.zoom&&(this.div.innerHTML+="<div "+t.attr.tlbr+'="plus">'+t.toolbarUI.zoomInIcon+"</div>",this.div.innerHTML+="<div "+t.attr.tlbr+'="minus">'+t.toolbarUI.zoomOutIcon+"</div>"),i.layout&&(this.div.innerHTML+="<div "+t.attr.tlbr+'="layout">'+t.toolbarUI.layoutIcon+"</div>",this.layouts=document.createElement("div"),this.layouts.classList.add("boc-toolbar-layout"),this.layouts.innerHTML=`<svg data-layout="normal" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line></svg>
            <svg data-layout="treeRightOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="40" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="treeLeftOffset" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="30" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line><line stroke="#000000" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line><line stroke="#000000" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line><line stroke="#000000" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="mixed" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line><line stroke="#000000" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line></svg>
            <svg data-layout="tree" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="35" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="73" stroke-width="1"></line><line stroke="#000000" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line></svg>
            <svg data-layout="grid" style="cursor: pointer;" width="110" height="100"><rect fill="#039BE5" x="35" y="0" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="7" y="73" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="41" width="50" height="27"></rect><rect fill="#F57C00" x="63" y="73" width="50" height="27"></rect><line stroke="#000000" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line><line stroke="#000000" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line><line stroke="#000000" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line><line stroke="#000000" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line></svg>`,this.obj.element.appendChild(this.layouts)),i.fullScreen&&(this.div.innerHTML+="<div "+t.attr.tlbr+'="fullScreen">'+t.toolbarUI.openFullScreenIcon+"</div>"),this.obj.element.appendChild(this.div),this.layoutBtn=this.div.querySelector("["+t.attr.tlbr+'="layout"]');var n=this.div.querySelector("["+t.attr.tlbr+'="plus"]'),o=this.div.querySelector("["+t.attr.tlbr+'="minus"]'),r=this.div.querySelector("["+t.attr.tlbr+'="fit"]'),s=this.div.querySelector("["+t.attr.tlbr+'="fullScreen"]'),a=this.div.querySelector("["+t.attr.tlbr+'="expand"]'),c=this;n&&n.addEventListener("click",function(){c.obj.zoom(!0,null,!0)}),o&&o.addEventListener("click",function(){c.obj.zoom(!1,null,!0)}),r&&r.addEventListener("click",function(){c.obj.fit()}),s&&s.addEventListener("click",function(){c.obj.toggleFullScreen()}),a&&a.addEventListener("click",function(){c.obj.expand(null,"all")}),this.layoutBtn&&this.layoutBtn.addEventListener("click",function(){c._visible?c.hideLayout():c.showLayout()}),this.layouts&&this.layouts.addEventListener("click",function(l){for(var h=l.target;h;){if(h.hasAttribute&&h.hasAttribute(t.attr.layout)){h=h.getAttribute(t.attr.layout),c.obj.setLayout(t.layout[h]);break}h=h.parentNode}})}},t.toolbarUI.prototype.showLayout=function(){this._visible=!0,this.layoutBtn.style.transform="rotate(180deg) translateX(0px) translateY(0px)",t.animate(this.div,{bottom:this.obj.config.padding-10},{bottom:this.obj.config.padding+135},this.obj.config.anim.duration,this.obj.config.anim.func),t.animate(this.layouts,{bottom:-145},{bottom:0},this.obj.config.anim.duration,this.obj.config.anim.func)},t.toolbarUI.prototype.hideLayout=function(){this._visible=!1,this.layoutBtn.style.transform="rotate(0deg) translateX(0px) translateY(0px)",t.animate(this.div,{bottom:this.obj.config.padding+135},{bottom:this.obj.config.padding-10},this.obj.config.anim.duration,this.obj.config.anim.func),t.animate(this.layouts,{bottom:0},{bottom:-145},this.obj.config.anim.duration,this.obj.config.anim.func)},t.notifierUI=function(){},t.notifierUI.prototype.init=function(e){this.obj=e},t.notifierUI.prototype.show=function(e,i){if(e==null)return!1;e==1&&(e=t.MAX_NODES_MESS,i="#FFCA28"),e==2&&(e=t.OFFLINE_MESS,i="#FFCA28");var n=document.createElement("div");n.innerHTML=e,Object.assign(n.style,{position:"absolute","background-color":i,color:"#ffffff",padding:"15px","border-radius":"40px",opacity:0,overflow:"hidden","white-space":"nowrap","text-align":"center"}),this.obj.element.appendChild(n);var o=this.obj.width()/2-n.offsetWidth/2,r=this.obj.height()/2-n.offsetHeight/2;n.style.left=o+"px",n.style.top=r+"px";var s=n.offsetWidth;return n.style.width="20px",t.animate(n,{opacity:0,width:10},{opacity:1,width:s},this.obj.config.anim.duration,this.obj.config.anim.func),!0},t===void 0&&(t={}),t.icon={},t.icon.png_export=t.icon.png_preview=t.icon.pngpreview=t.icon.png=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M146.747,276.708c0-13.998-9.711-22.352-26.887-22.352c-6.99,0-11.726,0.675-14.204,1.355v44.927 c2.932,0.676,6.539,0.896,11.52,0.896C135.449,301.546,146.747,292.28,146.747,276.708z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M234.344,335.86v45.831h-31.601V229.524h40.184 l31.611,55.759c9.025,16.031,18.064,34.983,24.825,52.154h0.675c-2.257-20.103-2.933-40.643-2.933-63.44v-44.473h31.614v152.167 h-36.117l-32.516-58.703c-9.049-16.253-18.971-35.892-26.438-53.727l-0.665,0.222C233.906,289.58,234.344,311.027,234.344,335.86z M71.556,381.691V231.56c10.613-1.804,25.516-3.159,46.506-3.159c21.215,0,36.353,4.061,46.509,12.192 c9.698,7.673,16.255,20.313,16.255,35.219c0,14.897-4.959,27.549-13.999,36.123c-11.738,11.063-29.123,16.031-49.441,16.031 c-4.522,0-8.593-0.231-11.736-0.675v54.411H71.556V381.691z M453.601,523.353H97.2V419.302h356.4V523.353z M485.652,374.688 c-10.61,3.607-30.713,8.585-50.805,8.585c-27.759,0-47.872-7.003-61.857-20.545c-13.995-13.1-21.684-32.97-21.452-55.318 c0.222-50.569,37.03-79.463,86.917-79.463c19.644,0,34.783,3.829,42.219,7.446l-7.214,27.543c-8.369-3.617-18.752-6.55-35.458-6.55 c-28.656,0-50.341,16.256-50.341,49.22c0,31.382,19.649,49.892,47.872,49.892c7.895,0,14.218-0.901,16.934-2.257v-31.835h-23.493 v-26.869h56.679V374.688z"/></svg>'},t.icon.pdf_export=t.icon.pdf_preview=t.icon.pdfpreview=t.icon.pdf=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6 c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z"/><path fill="'+n+'" d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729 c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z"/><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333 c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346 c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365 c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328 c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7 V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593 V232.216h98.582V262.127z"/></svg>'},t.icon.svg_export=t.icon.svg_preview=t.icon.svg=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'" d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694 c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419 c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545 c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M338.871,225.672L284.545,386.96h-42.591 l-51.69-161.288h39.967l19.617,68.196c5.508,19.143,10.531,37.567,14.36,57.67h0.717c4.061-19.385,9.089-38.527,14.592-56.953 l20.585-68.918h38.77V225.672z M68.458,379.54l7.415-30.153c9.811,5.021,24.888,10.051,40.439,10.051 c16.751,0,25.607-6.935,25.607-17.465c0-10.052-7.662-15.795-27.05-22.734c-26.8-9.328-44.263-24.168-44.263-47.611 c0-27.524,22.971-48.579,61.014-48.579c18.188,0,31.591,3.823,41.159,8.131l-8.126,29.437c-6.465-3.116-17.945-7.657-33.745-7.657 c-15.791,0-23.454,7.183-23.454,15.552c0,10.296,9.089,14.842,29.917,22.731c28.468,10.536,41.871,25.365,41.871,48.094 c0,27.042-20.812,50.013-65.09,50.013C95.731,389.349,77.538,384.571,68.458,379.54z M453.601,523.353H97.2V419.302h356.4V523.353z M488.911,379.54c-11.243,3.823-32.537,9.103-53.831,9.103c-29.437,0-50.73-7.426-65.57-21.779 c-14.839-13.875-22.971-34.942-22.738-58.625c0.253-53.604,39.255-84.235,92.137-84.235c20.81,0,36.852,4.073,44.74,7.896 l-7.657,29.202c-8.859-3.829-19.849-6.95-37.567-6.95c-30.396,0-53.357,17.233-53.357,52.173c0,33.265,20.81,52.882,50.73,52.882 c8.375,0,15.072-0.96,17.94-2.395v-33.745h-24.875v-28.471h60.049V379.54L488.911,379.54z" /></svg>'},t.icon.csv_export=t.icon.csv=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 548.29 548.291" ><path fill="'+n+'" d="M486.2,196.121h-13.164V132.59c0-0.399-0.064-0.795-0.116-1.2c-0.021-2.52-0.824-5-2.551-6.96L364.656,3.677 c-0.031-0.034-0.064-0.044-0.085-0.075c-0.629-0.707-1.364-1.292-2.141-1.796c-0.231-0.157-0.462-0.286-0.704-0.419 c-0.672-0.365-1.386-0.672-2.121-0.893c-0.199-0.052-0.377-0.134-0.576-0.188C358.229,0.118,357.4,0,356.562,0H96.757 C84.893,0,75.256,9.649,75.256,21.502v174.613H62.093c-16.972,0-30.733,13.756-30.733,30.73v159.81 c0,16.966,13.761,30.736,30.733,30.736h13.163V526.79c0,11.854,9.637,21.501,21.501,21.501h354.777 c11.853,0,21.502-9.647,21.502-21.501V417.392H486.2c16.966,0,30.729-13.764,30.729-30.731v-159.81 C516.93,209.872,503.166,196.121,486.2,196.121z M96.757,21.502h249.053v110.006c0,5.94,4.818,10.751,10.751,10.751h94.973v53.861 H96.757V21.502z M258.618,313.18c-26.68-9.291-44.063-24.053-44.063-47.389c0-27.404,22.861-48.368,60.733-48.368 c18.107,0,31.447,3.811,40.968,8.107l-8.09,29.3c-6.43-3.107-17.862-7.632-33.59-7.632c-15.717,0-23.339,7.149-23.339,15.485 c0,10.247,9.047,14.769,29.78,22.632c28.341,10.479,41.681,25.239,41.681,47.874c0,26.909-20.721,49.786-64.792,49.786 c-18.338,0-36.449-4.776-45.497-9.77l7.38-30.016c9.772,5.014,24.775,10.006,40.264,10.006c16.671,0,25.488-6.908,25.488-17.396 C285.536,325.789,277.909,320.078,258.618,313.18z M69.474,302.692c0-54.781,39.074-85.269,87.654-85.269 c18.822,0,33.113,3.811,39.549,7.149l-7.392,28.816c-7.38-3.084-17.632-5.939-30.491-5.939c-28.822,0-51.206,17.375-51.206,53.099 c0,32.158,19.051,52.4,51.456,52.4c10.947,0,23.097-2.378,30.241-5.238l5.483,28.346c-6.672,3.34-21.674,6.919-41.208,6.919 C98.06,382.976,69.474,348.424,69.474,302.692z M451.534,520.962H96.757v-103.57h354.777V520.962z M427.518,380.583h-42.399 l-51.45-160.536h39.787l19.526,67.894c5.479,19.046,10.479,37.386,14.299,57.397h0.709c4.048-19.298,9.045-38.352,14.526-56.693 l20.487-68.598h38.599L427.518,380.583z" /></svg>'},t.icon.json_export=t.icon.json=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 32 32" ><polygon fill="'+n+'"  points="31 11 31 21 29 21 27 15 27 21 25 21 25 11 27 11 29 17 29 11 31 11"/><path fill="'+n+'"  d="M21.3335,21h-2.667A1.6684,1.6684,0,0,1,17,19.3335v-6.667A1.6684,1.6684,0,0,1,18.6665,11h2.667A1.6684,1.6684,0,0,1,23,12.6665v6.667A1.6684,1.6684,0,0,1,21.3335,21ZM19,19h2V13H19Z"/><path fill="'+n+'"  d="M13.3335,21H9V19h4V17H11a2.002,2.002,0,0,1-2-2V12.6665A1.6684,1.6684,0,0,1,10.6665,11H15v2H11v2h2a2.002,2.002,0,0,1,2,2v2.3335A1.6684,1.6684,0,0,1,13.3335,21Z"/><path fill="'+n+'"  d="M5.3335,21H2.6665A1.6684,1.6684,0,0,1,1,19.3335V17H3v2H5V11H7v8.3335A1.6684,1.6684,0,0,1,5.3335,21Z"/><rect fill="'+n+'"  id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/></svg>'},t.icon.excel=function(e,i,n){return`<svg width="${e}" height="${i}" viewBox="0 0 24 24">
            <path fill="${n}" d="M9.29289 1.29289C9.48043 1.10536 9.73478 1 10 1H18C19.6569 1 21 2.34315 21 4V9C21 9.55228 20.5523 10 20 10C19.4477 10 19 9.55228 19 9V4C19 3.44772 18.5523 3 18 3H11V8C11 8.55228 10.5523 9 10 9H5V20C5 20.5523 5.44772 21 6 21H7C7.55228 21 8 21.4477 8 22C8 22.5523 7.55228 23 7 23H6C4.34315 23 3 21.6569 3 20V8C3 7.73478 3.10536 7.48043 3.29289 7.29289L9.29289 1.29289ZM6.41421 7H9V4.41421L6.41421 7ZM19 12C19.5523 12 20 12.4477 20 13V19H23C23.5523 19 24 19.4477 24 20C24 20.5523 23.5523 21 23 21H19C18.4477 21 18 20.5523 18 20V13C18 12.4477 18.4477 12 19 12ZM11.8137 12.4188C11.4927 11.9693 10.8682 11.8653 10.4188 12.1863C9.96935 12.5073 9.86526 13.1318 10.1863 13.5812L12.2711 16.5L10.1863 19.4188C9.86526 19.8682 9.96935 20.4927 10.4188 20.8137C10.8682 21.1347 11.4927 21.0307 11.8137 20.5812L13.5 18.2205L15.1863 20.5812C15.5073 21.0307 16.1318 21.1347 16.5812 20.8137C17.0307 20.4927 17.1347 19.8682 16.8137 19.4188L14.7289 16.5L16.8137 13.5812C17.1347 13.1318 17.0307 12.5073 16.5812 12.1863C16.1318 11.8653 15.5073 11.9693 15.1863 12.4188L13.5 14.7795L11.8137 12.4188Z" fill="#000000"/>
</svg>`},t.icon.pp_export=t.icon.pp_preview=t.icon.pppreview=t.icon.powerpoint=function(e,i,n){return`<svg width="${e}" height="${i}"  viewBox="0 0 24 24" >
<path fill="${n}" d="M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H11C11.5523 23 12 22.5523 12 22C12 21.4477 11.5523 21 11 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V9C19 9.55228 19.4477 10 20 10C20.5523 10 21 9.55228 21 9V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM15 12C14.4477 12 14 12.4477 14 13V17V20C14 20.5523 14.4477 21 15 21C15.5523 21 16 20.5523 16 20V18H19C20.6569 18 22 16.6569 22 15C22 13.3431 20.6569 12 19 12H15ZM19 16H16V14H19C19.5523 14 20 14.4477 20 15C20 15.5523 19.5523 16 19 16Z" fill="#000000"/>
</svg>`},t.icon.edit=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 528.899 528.899"><path fill="'+n+'" d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981 c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611 C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069 L27.473,390.597L0.3,512.69z" /></svg>'},t.icon.details=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008 C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237 h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931 l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278 c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239 h66.527V486.763z"/><path fill="'+n+'" d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/><path fill="'+n+'" d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/><path fill="'+n+'" d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175 c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/><path fill="'+n+'" d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256 c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/></svg>'},t.icon.remove=function(e,i,n){return'<svg width="'+e+'" height="'+i+'"  viewBox="0 0 900.5 900.5"><path fill="'+n+'" d="M176.415,880.5c0,11.046,8.954,20,20,20h507.67c11.046,0,20-8.954,20-20V232.487h-547.67V880.5L176.415,880.5z M562.75,342.766h75v436.029h-75V342.766z M412.75,342.766h75v436.029h-75V342.766z M262.75,342.766h75v436.029h-75V342.766z"/><path fill="'+n+'" d="M618.825,91.911V20c0-11.046-8.954-20-20-20h-297.15c-11.046,0-20,8.954-20,20v71.911v12.5v12.5H141.874 c-11.046,0-20,8.954-20,20v50.576c0,11.045,8.954,20,20,20h34.541h547.67h34.541c11.046,0,20-8.955,20-20v-50.576 c0-11.046-8.954-20-20-20H618.825v-12.5V91.911z M543.825,112.799h-187.15v-8.389v-12.5V75h187.15v16.911v12.5V112.799z"/></svg>'},t.icon.add=function(e,i,n){return'<svg width="'+e+'" height="'+i+'"   viewBox="0 0 922 922"><path fill="'+n+'" d="M922,453V81c0-11.046-8.954-20-20-20H410c-11.045,0-20,8.954-20,20v149h318c24.812,0,45,20.187,45,45v198h149 C913.046,473.001,922,464.046,922,453z" /><path fill="'+n+'" d="M557,667.001h151c11.046,0,20-8.954,20-20v-174v-198c0-11.046-8.954-20-20-20H390H216c-11.045,0-20,8.954-20,20v149h194 h122c24.812,0,45,20.187,45,45v4V667.001z" /><path fill="'+n+'" d="M0,469v372c0,11.046,8.955,20,20,20h492c11.046,0,20-8.954,20-20V692v-12.501V667V473v-4c0-11.046-8.954-20-20-20H390H196 h-12.5H171H20C8.955,449,0,457.955,0,469z" /></svg>'},t.icon.search=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 485.213 485.213"><path fill="'+n+'" d="M471.882,407.567L360.567,296.243c-16.586,25.795-38.536,47.734-64.331,64.321l111.324,111.324 c17.772,17.768,46.587,17.768,64.321,0C489.654,454.149,489.654,425.334,471.882,407.567z" /><path fill="'+n+'" d="M363.909,181.955C363.909,81.473,282.44,0,181.956,0C81.474,0,0.001,81.473,0.001,181.955s81.473,181.951,181.955,181.951 C282.44,363.906,363.909,282.437,363.909,181.955z M181.956,318.416c-75.252,0-136.465-61.208-136.465-136.46 c0-75.252,61.213-136.465,136.465-136.465c75.25,0,136.468,61.213,136.468,136.465 C318.424,257.208,257.206,318.416,181.956,318.416z" /><path fill="'+n+'" d="M75.817,181.955h30.322c0-41.803,34.014-75.814,75.816-75.814V75.816C123.438,75.816,75.817,123.437,75.817,181.955z" /></svg>'},t.icon.xml_export=t.icon.xml=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 550.801 550.801"><path fill="'+n+'"  d="M488.426,197.019H475.2v-63.816c0-0.401-0.063-0.799-0.116-1.205c-0.021-2.534-0.827-5.023-2.562-6.992L366.325,3.691 c-0.032-0.031-0.063-0.042-0.085-0.073c-0.633-0.707-1.371-1.298-2.151-1.804c-0.231-0.158-0.464-0.287-0.706-0.422 c-0.676-0.366-1.393-0.675-2.131-0.896c-0.2-0.053-0.38-0.135-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2 c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.87v160.542 c0,17.044,13.824,30.876,30.873,30.876h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601 V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87V227.89C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605 h250.193v110.51c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M369.531,374.53h-32.058l-2.156-55.519 c-0.644-17.434-1.298-38.518-1.298-59.611h-0.633c-4.514,18.516-10.547,39.166-16.137,56.162l-17.645,56.601h-25.618 l-15.494-56.157c-4.725-16.996-9.671-37.658-13.123-56.6h-0.43c-0.854,19.585-1.508,41.961-2.586,60.038l-2.576,55.086h-30.343 l9.26-145.035h43.677l14.207,48.421c4.517,16.774,9.041,34.847,12.258,51.843h0.654c4.081-16.77,9.038-35.923,13.774-52.064 l15.493-48.199h42.82L369.531,374.53z M69.992,374.53l41.955-73.385l-40.444-71.65h37.655l12.688,26.465 c4.316,8.828,7.533,15.928,10.99,24.092h0.422c3.438-9.242,6.23-15.694,9.893-24.092l12.274-26.465h37.434l-40.89,70.796 l43.044,74.239h-37.866l-13.134-26.257c-5.376-10.108-8.817-17.639-12.909-26.04h-0.433c-3.009,8.401-6.674,15.932-11.19,26.04 l-12.042,26.257H69.992z M453.601,523.353H97.2V419.302h356.4V523.353z M485.325,374.53h-90.608V229.495h32.933v117.497h57.682 v27.538H485.325z"/></svg>'},t.icon.visio_export=t.icon.visio=function(e,i,n,o,r){return r==null&&(r=0),`<svg width="${e}" height="${i}" viewBox="0 0 24 24" x="${r}" x="${r}">
        <path fill="${n}" d="M24 7.609v9.556q0 .424-.302.726-.303.303-.726.303h-5.19q-.072 1.149-.556 2.135-.484.986-1.264 1.717-.78.732-1.803 1.15-1.022.417-2.159.417-1.016 0-1.96-.35-.943-.352-1.705-.969-.762-.617-1.295-1.47-.532-.852-.713-1.856H1.028q-.423 0-.726-.303Q0 18.363 0 17.94V7.609q0-.424.302-.726.303-.302.726-.302h5.238q-.072-.182-.072-.387 0-.424.302-.726L11.274.69q.303-.303.726-.303t.726.303l4.778 4.778q.302.302.302.726 0 .205-.072.387h5.238q.423 0 .726.302.302.302.302.726zM12 2.153l-4.04 4.04.387.388h3.012q.423 0 .726.302.302.302.302.726v2.238l3.653-3.653zM7.161 16.84l3.085-8.13H8.238q-.508 1.489-1.028 2.952-.52 1.464-1.004 2.964-.496-1.488-.992-2.958-.496-1.47-1.004-2.957H2.153l3.037 8.129zM12 22.065q.883 0 1.657-.333t1.355-.913q.58-.581.913-1.355.333-.774.333-1.658 0-.81-.302-1.548-.303-.738-.823-1.318-.52-.581-1.228-.944-.707-.363-1.518-.423v4.367q0 .423-.302.725-.303.303-.726.303H7.923q.206.677.593 1.246.387.568.92.98.532.41 1.185.64.653.23 1.379.23zm10.452-5.42V8.13h-6.158q-.133.133-.441.454-.309.32-.714.725-.405.406-.847.853-.441.448-.828.823-.387.375-.684.641-.296.266-.393.302v.097q.968.036 1.845.411t1.578.998q.702.623 1.186 1.446t.677 1.766Z"/>
    </svg>`},t.icon.link=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 512.092 512.092"  ><path fill="'+n+'" d="M312.453,199.601c-6.066-6.102-12.792-11.511-20.053-16.128c-19.232-12.315-41.59-18.859-64.427-18.859 c-31.697-0.059-62.106,12.535-84.48,34.987L34.949,308.23c-22.336,22.379-34.89,52.7-34.91,84.318 c-0.042,65.98,53.41,119.501,119.39,119.543c31.648,0.11,62.029-12.424,84.395-34.816l89.6-89.6 c1.628-1.614,2.537-3.816,2.524-6.108c-0.027-4.713-3.87-8.511-8.583-8.484h-3.413c-18.72,0.066-37.273-3.529-54.613-10.581 c-3.195-1.315-6.867-0.573-9.301,1.877l-64.427,64.512c-20.006,20.006-52.442,20.006-72.448,0 c-20.006-20.006-20.006-52.442,0-72.448l108.971-108.885c19.99-19.965,52.373-19.965,72.363,0 c13.472,12.679,34.486,12.679,47.957,0c5.796-5.801,9.31-13.495,9.899-21.675C322.976,216.108,319.371,206.535,312.453,199.601z" /><path fill="'+n+'" d="M477.061,34.993c-46.657-46.657-122.303-46.657-168.96,0l-89.515,89.429c-2.458,2.47-3.167,6.185-1.792,9.387 c1.359,3.211,4.535,5.272,8.021,5.205h3.157c18.698-0.034,37.221,3.589,54.528,10.667c3.195,1.315,6.867,0.573,9.301-1.877 l64.256-64.171c20.006-20.006,52.442-20.006,72.448,0c20.006,20.006,20.006,52.442,0,72.448l-80.043,79.957l-0.683,0.768 l-27.989,27.819c-19.99,19.965-52.373,19.965-72.363,0c-13.472-12.679-34.486-12.679-47.957,0 c-5.833,5.845-9.35,13.606-9.899,21.845c-0.624,9.775,2.981,19.348,9.899,26.283c9.877,9.919,21.433,18.008,34.133,23.893 c1.792,0.853,3.584,1.536,5.376,2.304c1.792,0.768,3.669,1.365,5.461,2.048c1.792,0.683,3.669,1.28,5.461,1.792l5.035,1.365 c3.413,0.853,6.827,1.536,10.325,2.133c4.214,0.626,8.458,1.025,12.715,1.195h5.973h0.512l5.12-0.597 c1.877-0.085,3.84-0.512,6.059-0.512h2.901l5.888-0.853l2.731-0.512l4.949-1.024h0.939c20.961-5.265,40.101-16.118,55.381-31.403 l108.629-108.629C523.718,157.296,523.718,81.65,477.061,34.993z" /></svg>'},t.icon.happy=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M176,176c17.673,0,32,14.327,32,32h32c0-35.346-28.654-64-64-64c-35.346,0-64,28.654-64,64h32 C144,190.327,158.327,176,176,176z"/><path fill="'+n+'" d="M336,144c-35.346,0-64,28.654-64,64h32c0-17.673,14.327-32,32-32c17.673,0,32,14.327,32,32h32 C400,172.654,371.346,144,336,144z"/><path fill="'+n+'" d="M256,368c-53.019,0-96-42.981-96-96h-32c0,70.692,57.308,128,128,128s128-57.308,128-128h-32 C352,325.019,309.019,368,256,368z"/></svg>'},t.icon.sad=function(e,i,n){return'<svg width="'+e+'" height="'+i+'" viewBox="0 0 512 512"><path fill="'+n+'" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,480 C132.288,480,32,379.712,32,256S132.288,32,256,32s224,100.288,224,224S379.712,480,256,480z"/><path fill="'+n+'" d="M336,192c-17.673,0-32-14.327-32-32h-32c0,35.346,28.654,64,64,64c35.346,0,64-28.654,64-64h-32 C368,177.673,353.673,192,336,192z"/><path fill="'+n+'" d="M176,224c35.346,0,64-28.654,64-64h-32c0,17.673-14.327,32-32,32s-32-14.327-32-32h-32C112,195.346,140.654,224,176,224z "/><path fill="'+n+'" d="M256,256c-70.692,0-128,57.308-128,128h32c0-53.019,42.981-96,96-96s96,42.981,96,96h32C384,313.308,326.692,256,256,256 z"/></svg>'},t.icon.share=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 512 512">
                <path fill="${n}" d="M406,332c-29.641,0-55.761,14.581-72.167,36.755L191.99,296.124c2.355-8.027,4.01-16.346,4.01-25.124
                    c0-11.906-2.441-23.225-6.658-33.636l148.445-89.328C354.307,167.424,378.589,180,406,180c49.629,0,90-40.371,90-90
                    c0-49.629-40.371-90-90-90c-49.629,0-90,40.371-90,90c0,11.437,2.355,22.286,6.262,32.358l-148.887,89.59
                    C156.869,193.136,132.937,181,106,181c-49.629,0-90,40.371-90,90c0,49.629,40.371,90,90,90c30.13,0,56.691-15.009,73.035-37.806
                    l141.376,72.395C317.807,403.995,316,412.75,316,422c0,49.629,40.371,90,90,90c49.629,0,90-40.371,90-90
                    C496,372.371,455.629,332,406,332z"/>
                </svg>`},t.icon.user=function(e,i,n,o,r){return t.isNEU(o)&&(o=0),t.isNEU(r)&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">
                <path fill="${n}" d="M12 11.796C14.7189 11.796 16.9231 9.60308 16.9231 6.89801C16.9231 4.19294 14.7189 2.00005 12 2.00005C9.28106 2.00005 7.07692 4.19294 7.07692 6.89801C7.07692 9.60308 9.28106 11.796 12 11.796Z" fill="#030D45"/>
                <path fill="${n}" d="M14.5641 13.8369H9.4359C6.46154 13.8369 4 16.2859 4 19.245C4 19.9593 4.30769 20.5716 4.92308 20.8777C5.84615 21.3879 7.89744 22.0001 12 22.0001C16.1026 22.0001 18.1538 21.3879 19.0769 20.8777C19.5897 20.5716 20 19.9593 20 19.245C20 16.1838 17.5385 13.8369 14.5641 13.8369Z" fill="#030D45"/>
            </svg>`},t.icon.close=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 512 512">
    <path fill="${n}" d="m256 0c-141.49 0-256 114.5-256 256 0 141.49 114.5 256 256 256 141.49 0 256-114.5 256-256 0-141.49-114.5-256-256-256zm-12.284 317.397-58.121 58.132c-6.565 6.553-15.283 10.166-24.557 10.166-19.196 0-34.734-15.526-34.734-34.734 0-9.274 3.612-17.992 10.166-24.557l58.132-58.121c6.785-6.784 6.785-17.783 0-24.568l-58.132-58.121c-6.553-6.565-10.166-15.283-10.166-24.557 0-19.196 15.526-34.734 34.734-34.734 9.274 0 17.992 3.613 24.557 10.166l58.121 58.132c6.785 6.773 17.784 6.773 24.568 0l58.121-58.132c6.565-6.553 15.283-10.166 24.557-10.166 19.196 0 34.734 15.526 34.734 34.734 0 9.274-3.612 17.992-10.166 24.557l-58.132 58.121c-6.785 6.784-6.785 17.783 0 24.568l58.132 58.121c6.553 6.565 10.166 15.283 10.166 24.557 0 19.196-15.526 34.734-34.734 34.734-9.274 0-17.992-3.613-24.557-10.166l-58.121-58.132c-6.784-6.784-17.784-6.773-24.568 0z"/>
    </svg>`},t.icon.undo=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">
    <path fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM9.25871 7.97395C9.56308 7.693 9.58205 7.21851 9.3011 6.91414C9.02015 6.60978 8.54565 6.5908 8.24129 6.87175L5.99129 8.94867C5.83748 9.09065 5.75 9.29045 5.75 9.49977C5.75 9.7091 5.83748 9.9089 5.99129 10.0509L8.24129 12.1278C8.54565 12.4088 9.02015 12.3898 9.3011 12.0854C9.58205 11.781 9.56308 11.3065 9.25871 11.0256L8.41824 10.2498H14.0385C14.7376 10.2498 15.2069 10.2506 15.5652 10.2862C15.9116 10.3205 16.0724 10.3813 16.1787 10.4501C16.3272 10.5461 16.4537 10.6726 16.5497 10.8211C16.6184 10.9274 16.6793 11.0882 16.7136 11.4345C16.7491 11.7929 16.75 12.2622 16.75 12.9613C16.75 13.6604 16.7491 14.1298 16.7136 14.4881C16.6793 14.8344 16.6185 14.9952 16.5497 15.1015C16.4537 15.2501 16.3272 15.3765 16.1787 15.4726C16.0724 15.5413 15.9116 15.6021 15.5652 15.6365C15.2069 15.672 14.7376 15.6729 14.0385 15.6729H9.5C9.08579 15.6729 8.75 16.0086 8.75 16.4229C8.75 16.8371 9.08579 17.1729 9.5 17.1729H14.0758C14.7279 17.1729 15.2721 17.1729 15.7133 17.1291C16.1748 17.0834 16.6038 16.9839 16.9931 16.7322C17.3199 16.5209 17.5981 16.2427 17.8094 15.916C18.0611 15.5266 18.1605 15.0976 18.2063 14.6361C18.25 14.195 18.25 13.6508 18.25 12.9987V12.924C18.25 12.2718 18.25 11.7276 18.2063 11.2865C18.1605 10.825 18.0611 10.396 17.8093 10.0067C17.5981 9.6799 17.3199 9.40169 16.9931 9.19042C16.6038 8.9387 16.1748 8.83927 15.7133 8.7935C15.2721 8.74975 14.7279 8.74976 14.0758 8.74977L8.41824 8.74977L9.25871 7.97395Z" />
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>
    </svg>`},t.icon.redo=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24" >
    <path fill="#f9f9f9" fill-rule="evenodd" clip-rule="evenodd" fill="${n}" d="M3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.7141 22 12C22 7.28598 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447ZM15.7587 6.87273C15.4543 6.59177 14.9799 6.61075 14.6989 6.91512C14.4179 7.21948 14.4369 7.69398 14.7413 7.97493L15.5818 8.75075H9.96155C7.63558 8.75075 5.75 10.6363 5.75 12.9623C5.75 15.2883 7.63557 17.1738 9.96154 17.1738H14.5C14.9142 17.1738 15.25 16.838 15.25 16.4238C15.25 16.0096 14.9142 15.6738 14.5 15.6738H9.96154C8.464 15.6738 7.25 14.4598 7.25 12.9623C7.25 11.4647 8.464 10.2508 9.96155 10.2508H15.5818L14.7413 11.0266C14.4369 11.3075 14.4179 11.782 14.6989 12.0864C14.9799 12.3908 15.4543 12.4097 15.7587 12.1288L18.0087 10.0519C18.1625 9.90987 18.25 9.71007 18.25 9.50075C18.25 9.29143 18.1625 9.09163 18.0087 8.94965L15.7587 6.87273Z"/>
    <rect style="opacity: 0" x="2" y="2" width="20" height="20"></rect>    
    </svg>`},t.icon.send=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}"  viewBox="0 0 24 24" >
                <path fill="none" stroke="${n}" stroke-width="2"  d="M10.3009 13.6949L20.102 3.89742M10.5795 14.1355L12.8019 18.5804C13.339 19.6545 13.6075 20.1916 13.9458 20.3356C14.2394 20.4606 14.575 20.4379 14.8492 20.2747C15.1651 20.0866 15.3591 19.5183 15.7472 18.3818L19.9463 6.08434C20.2845 5.09409 20.4535 4.59896 20.3378 4.27142C20.2371 3.98648 20.013 3.76234 19.7281 3.66167C19.4005 3.54595 18.9054 3.71502 17.9151 4.05315L5.61763 8.2523C4.48114 8.64037 3.91289 8.83441 3.72478 9.15032C3.56153 9.42447 3.53891 9.76007 3.66389 10.0536C3.80791 10.3919 4.34498 10.6605 5.41912 11.1975L9.86397 13.42C10.041 13.5085 10.1295 13.5527 10.2061 13.6118C10.2742 13.6643 10.3352 13.7253 10.3876 13.7933C10.4468 13.87 10.491 13.9585 10.5795 14.1355Z" />
            </svg>`},t.icon.x=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">
        <line x1="0" y1="0" x2="24" y2="24" stroke-width="3" stroke="${n}"></line>
        <line x1="24" y1="0" x2="0" y2="24" stroke-width="3" stroke="${n}"></line>
    </svg>`},t.icon.x=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 24 24">
        <line x1="0" y1="0" x2="24" y2="24" stroke-width="3" stroke="${n}"></line>
        <line x1="24" y1="0" x2="0" y2="24" stroke-width="3" stroke="${n}"></line>
    </svg>`},t.icon.fit=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 128 128">
        <path fill="${n}" d="M 58.1875 4.90625 C 29.957889 4.90625 6.9375 27.957888 6.9375 56.1875 C 6.9375 84.417111 29.957889 107.4375 58.1875 107.4375 C 69.752492 107.4375 80.436703 103.56785 89.03125 97.0625 L 108.59375 120.4375 A 7.0007 7.0007 0 1 0 119.3125 111.4375 L 98.96875 87.15625 C 105.53731 78.538312 109.4375 67.814416 109.4375 56.1875 C 109.4375 27.957888 86.417111 4.90625 58.1875 4.90625 z M 58.1875 18.875 C 78.850949 18.875 95.4375 35.52405 95.4375 56.1875 C 95.4375 76.850949 78.850949 93.4375 58.1875 93.4375 C 37.524051 93.4375 20.9375 76.850949 20.9375 56.1875 C 20.9375 35.52405 37.524051 18.875 58.1875 18.875 z M 33.125 31.09375 L 33.125 36.40625 L 33.125 75.90625 L 33.125 81.21875 L 38.4375 81.21875 L 77.9375 81.21875 L 83.25 81.21875 L 83.25 75.90625 L 83.25 36.40625 L 83.25 31.09375 L 77.9375 31.09375 L 38.4375 31.09375 L 33.125 31.09375 z M 43.78125 41.75 L 72.59375 41.75 L 72.59375 70.5625 L 43.78125 70.5625 L 43.78125 41.75 z "/>
</svg>`},t.icon.expand_all=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 32 32">
        <path fill="${n}" d="M13.816 5.989l-7.785 0.046 0.003 7.735 2.59-2.591 3.454 3.454 2.665-2.665-3.453-3.454 2.526-2.525zM12.079 17.35l-3.454 3.455-2.59-2.592-0.003 7.799 7.785-0.018-2.526-2.525 3.454-3.453-2.666-2.666zM19.922 14.633l3.453-3.454 2.59 2.591 0.004-7.735-7.785-0.046 2.526 2.525-3.454 3.454 2.666 2.665zM23.375 20.805l-3.453-3.455-2.666 2.666 3.454 3.453-2.526 2.525 7.785 0.018-0.004-7.799-2.59 2.592z"></path>
</svg>`},t.icon.full_screen=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}"  viewBox="0 0 48 48">
<rect width="48" height="48" fill="${n}" fill-opacity="0.01"/>
<path fill="none" d="M16 40H6C4.89543 40 4 39.1046 4 38V10C4 8.89543 4.89543 8 6 8H42C43.1046 8 44 8.89543 44 10V16" stroke="${n}" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
<rect x="24" y="24" width="20" height="16" rx="2" fill="none" stroke="${n}" stroke-width="4" stroke-linejoin="round"/>
</svg>`},t.icon.zoom_in=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 32 32" >
                <g sketch:type="MSLayerGroup" transform="translate(-362.000000, -1037.000000)" fill="${n}">
                    <path d="M390,1049 L382,1049 L382,1041 C382,1038.79 380.209,1037 378,1037 C375.791,1037 374,1038.79 374,1041 L374,1049 L366,1049 C363.791,1049 362,1050.79 362,1053 C362,1055.21 363.791,1057 366,1057 L374,1057 L374,1065 C374,1067.21 375.791,1069 378,1069 C380.209,1069 382,1067.21 382,1065 L382,1057 L390,1057 C392.209,1057 394,1055.21 394,1053 C394,1050.79 392.209,1049 390,1049" id="plus" sketch:type="MSShapeGroup"></path>
                </g>
            </svg>`},t.icon.zoom_out=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 -12 32 32" >
            <g id="Icon-Set-Filled" sketch:type="MSLayerGroup" transform="translate(-414.000000, -1049.000000)" fill="${n}">
                <path d="M442,1049 L418,1049 C415.791,1049 414,1050.79 414,1053 C414,1055.21 415.791,1057 418,1057 L442,1057 C444.209,1057 446,1055.21 446,1053 C446,1050.79 444.209,1049 442,1049" id="minus" sketch:type="MSShapeGroup"></path>
            </g>
        </svg>`},t.icon.layout_normal=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg  width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
            <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
            <rect fill="${n}" x="7" y="41" width="50" height="27"></rect>
            <rect fill="${n}" x="63" y="41" width="50" height="27"></rect>
            <line stroke="${n}" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="32" x2="88" y1="35" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="32" x2="32" y1="35" y2="41" stroke-width="1"></line>
            <line stroke="${n}" x1="88" x2="88" y1="35" y2="41" stroke-width="1"></line>
        </svg>`},t.icon.layout_right_offset=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg  width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
            <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
            <rect fill="${n}" x="40" y="41" width="50" height="27"></rect>
            <rect fill="${n}" x="40" y="73" width="50" height="27"></rect>
            <line stroke="${n}" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="60" x2="35" y1="35" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="35" x2="35" y1="35" y2="86" stroke-width="1"></line>
            <line stroke="${n}" x1="35" x2="40" y1="86" y2="86" stroke-width="1"></line>
            <line stroke="${n}" x1="35" x2="40" y1="54" y2="54" stroke-width="1"></line>
        </svg>`},t.icon.layout_left_offset=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
            <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
            <rect fill="${n}" x="30" y="41" width="50" height="27"></rect>
            <rect fill="${n}" x="30" y="73" width="50" height="27"></rect>
            <line stroke="${n}" x1="60" x2="60" y1="27" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="60" x2="85" y1="35" y2="35" stroke-width="1"></line>
            <line stroke="${n}" x1="85" x2="85" y1="35" y2="86" stroke-width="1"></line>
            <line stroke="${n}" x1="80" x2="85" y1="86" y2="86" stroke-width="1"></line>
            <line stroke="${n}" x1="80" x2="85" y1="54" y2="54" stroke-width="1"></line>
            </svg>`},t.icon.layout_mixed=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
        <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
        <rect fill="${n}" x="35" y="41" width="50" height="27"></rect>
        <rect fill="${n}" x="35" y="73" width="50" height="27"></rect>
        <line stroke="${n}" x1="60" x2="60" y1="27" y2="41" stroke-width="1"></line>
        <line stroke="${n}" x1="60" x2="60" y1="68" y2="73" stroke-width="1"></line>
    </svg>`},t.icon.layout_tree=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
                <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
                <rect fill="${n}" x="7" y="41" width="50" height="27"></rect>
                <rect fill="${n}" x="35" y="73" width="50" height="27"></rect>
                <rect fill="${n}" x="63" y="41" width="50" height="27"></rect>
                <line stroke="${n}" x1="60" x2="60" y1="27" y2="73" stroke-width="1"></line>
                <line stroke="${n}" x1="57" x2="63" y1="54" y2="54" stroke-width="1"></line>
        </svg>`},t.icon.layout_grid=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
                <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
                <rect fill="${n}" x="7" y="41" width="50" height="27"></rect>
                <rect fill="${n}" x="7" y="73" width="50" height="27"></rect>
                <rect fill="${n}" x="63" y="41" width="50" height="27"></rect>
                <rect fill="${n}" x="63" y="73" width="50" height="27"></rect>
                <line stroke="${n}" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line>
                <line stroke="${n}" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line>
                <line stroke="${n}" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line>
        </svg>`},t.icon.layout_grid=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 110 100">
                <rect fill="${n}" x="35" y="0" width="50" height="27"></rect>
                <rect fill="${n}" x="7" y="41" width="50" height="27"></rect>
                <rect fill="${n}" x="7" y="73" width="50" height="27"></rect>
                <rect fill="${n}" x="63" y="41" width="50" height="27"></rect>
                <rect fill="${n}" x="63" y="73" width="50" height="27"></rect>
                <line stroke="${n}" x1="60" x2="60" y1="27" y2="71" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="88" y1="39" y2="39" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="88" y1="71" y2="71" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="32" y1="71" y2="73" stroke-width="1"></line>
                <line stroke="${n}" x1="88" x2="88" y1="71" y2="73" stroke-width="1"></line>
                <line stroke="${n}" x1="32" x2="32" y1="39" y2="41" stroke-width="1"></line>
                <line stroke="${n}" x1="88" x2="88" y1="39" y2="41" stroke-width="1"></line>
        </svg>`},t.icon.cursor=function(e,i,n,o,r){return o==null&&(o=0),r==null&&(r=0),`<svg width="${e}" height="${i}" x="${o}" y="${r}" viewBox="0 0 16 16" >
                <path d="M8 3V0H6V3H8Z" fill="${n}"/>
                <path d="M0.792893 2.20711L3.29289 4.70711L4.70711 3.29289L2.20711 0.792893L0.792893 2.20711Z" fill="${n}"/>
                <path d="M6 5L5 6.00001L8 15H10L10.7172 12.1314L14.2929 15.7071L15.7071 14.2929L12.1314 10.7172L15 10V8L6 5Z" fill="${n}"/>
                <path d="M0 6H3V8H0V6Z" fill="${n}"/>
        </svg>`},t.prototype.exportPDFProfile=function(e,i){console.warn('The "exportPDFProfile" is depricated. Use "exportToPDFProfile" instead.'),e=this._defaultExportProfileOptions(e,"pdf"),this._exportProfile(e,i)},t.prototype.exportPDFPreview=function(e){console.warn('The "chart.exportPDFPreview" is depricated. Use "chart.pdfPreviewUI.show" instead.'),t.pdfPrevUI.show(this,e)},t.prototype.exportPNGProfile=function(e,i){console.warn('The "exportPNGProfile" is depricated. Use "exportToPDFProfile" instead.'),e=this._defaultExportProfileOptions(e,"png"),this._exportProfile(e,i)},t.prototype.exportPDF=function(e,i){console.warn('The "exportPDF" is depricated. Use "exportToPDF" instead.'),e=this._defaultExportOptions(e,"pdf"),this._export(e,i)},t.exportPDFFromCharts=function(e,i,n,o){console.warn('The "exportPDFFromCharts" is depricated. Use "chart1.exportToPDF" with pages instead.'),t._exportPDFFromChartsFetchSequentially(0,e,[],i,n,o)},t.prototype.exportPNG=function(e,i){console.warn('The "exportPNG" is depricated. Use "exportToPNG" instead.'),e=this._defaultExportOptions(e,"png"),this._export(e,i)},t.prototype.exportSVG=function(e,i){console.warn('The "exportSVG" is depricated. Use "exportToSVG" instead.'),e=this._defaultExportOptions(e,"svg"),this._export(e,i)},t.prototype.exportVisio=function(e,i){console.warn('The "exportVisio" is depricated. Use "exportToVisio" instead.'),this.exportToVisio(e,i)},t._exportPDFFromChartsFetchWithCallback=function(e,i){e.type&&e.type.toLowerCase()=="profile"?e.chartInstance.exportPDFProfile(e,function(n,o){i(o)}):e.chartInstance.exportPDF(e,function(n,o){i(o)})},t._exportPDFFromChartsFetchSequentially=function(e,i,n,o,r,s){if(e>=i.length){var a=[];for(var c of i)a.indexOf(c.chartInstance)==-1&&a.push(c.chartInstance),delete c.chartInstance;for(var l of(n=JSON.stringify(n),a))t.loading.show(l);return o==null&&(o="OrgChart.pdf"),r==null&&(r=!1),void t._ajax(l.config.exportUrl+"/v4","POST",n,"arraybuffer",function(h){for(var d of a)t.loading.hide(d);s?s(h):t._downloadFile("application/pdf",h,o,r,"pdf")})}t._exportPDFFromChartsFetchWithCallback(i[e],function(h){n.push(h),t._exportPDFFromChartsFetchSequentially(e+1,i,n,o,r,s)})},t.prototype._defaultExportOptions=function(e,i){return e==null&&(e={}),i=="svg"?(e.ext="svg",e.mime="image/svg+xml"):i=="visio"?(e.ext="vsdx",e.mime="application/vnd.visio"):i=="pdf"?(e.mime="application/pdf",e.ext="pdf"):i=="png"&&(e.mime="image/png",e.ext="png"),e.margin==null&&(e.margin=[50,40,50,40]),e.padding==null&&(e.padding=i=="visio"?25:0),e.landscape==null&&(e.landscape=!1),e.filename==null&&(e.filename="OrgChart."+e.ext),e.scale==null&&(e.scale="fit"),e.format==null&&(e.format="fit"),e.header==null&&(e.header=""),i=="pdf"&&e.footer==null?e.footer="Page {current-page} of {total-pages}":e.footer==null&&(e.footer=""),e.openInNewTab==null&&(e.openInNewTab=!1),e.mode==null&&(e.mode="boc-"+this.config.mode),e},t.prototype._export=function(e,i){var n=this,o={id:e.nodeId,expandChildren:e.expandChildren,parentLevels:e.parentLevels,childLevels:e.childLevels,min:e.min};e.margin&&e.margin[0]<2&&(e.margin[0]=2),e.margin&&e.margin[1]<2&&(e.margin[1]=2),e.margin&&e.margin[2]<2&&(e.margin[2]=2),e.margin&&e.margin[3]<2&&(e.margin[3]=2),this._draw(!1,t.action.exporting,o,function(r,s){var a=document.createElement("div");if(a.innerHTML=r,e.padding>0){var c=a.querySelector("svg"),l=t._getViewBox(c);l[0]-=e.padding,l[1]-=e.padding,l[2]+=2*e.padding,l[3]+=2*e.padding,c.setAttribute("viewBox",l.join()),c.setAttribute("width",l[2]),c.setAttribute("height",l[3])}if(e.ext=="svg"||e.ext=="vsdx"){(c=a.querySelector("svg")).classList.add("boc-"+n.config.mode);var h={content:a.innerHTML,options:e,styles:""};if(!i){var d=t.events.publish("exportstart",[n,h]);if(d===!1)return!1}var p=n.element.querySelector("[data-boc-styles]");if(p&&(h.styles+=p.outerHTML),h.styles&&(a.childNodes[0].insertAdjacentHTML("afterbegin",h.styles),h.content=a.innerHTML),e.ext=="svg")if(i)i(h);else{if((d=t.events.publish("exportend",[n,h]))===!1)return!1;t._downloadFile(e.mime,h.content,h.options.filename,h.options.openInNewTab,h.options.ext)}else if(e.ext=="vsdx"){t.loading.show(n);var f=JSON.stringify({svg:h.content,fileName:h.options.filename});t._ajax(n.config.serverUrl+"/Export/Visio","POST",f,"arraybuffer",function(u){if(t.loading.hide(n),i)i(h,u);else{if(t.events.publish("exportend",[n,u])===!1)return!1;t._downloadFile(e.mime,u,h.options.filename,h.options.openInNewTab,h.options.ext)}})}}else n._pages(e,a.querySelector("svg"),s,function(u){var x={content:a.innerHTML,options:e,pages:u,styles:""},S=t.events.publish("exportstart",[n,x]),y=n.element.querySelector("[data-boc-styles]");if(y&&(x.styles+=y.outerHTML),S===!1)return!1;i||t.loading.show(n),i?i(n,x,a.querySelector("svg")):(x=JSON.stringify(x),t._ajax(n.config.exportUrl+"/v4","POST",x,"arraybuffer",function(v){var E=t.events.publish("exportend",[n,v]);if(t.loading.hide(n),E===!1)return!1;t._downloadFile(e.mime,v,e.filename,e.openInNewTab,e.ext)}))})})},t.prototype.shareProfile=function(e){var i;typeof e=="object"?e=(i=e).focusId:i=this.editUI.content(e,!0,!0,"100%",!0);var n=new URL(window.location.href);n.searchParams.append("nodeId",e);var o={title:i.title,text:i.shareText,url:n.href};try{navigator.share(o)}catch(r){console.error("error: "+r)}},t.prototype.exportToCSV=t.prototype.exportCSV=function(e){var i=t._defaultExportProfileOptionsForCSV_SVG_JSON(e,"csv"),n=this.getNode(i.nodeId),o=null;n?(o=[],t._exportIterateForJSON_XML_CSV(this,n,i,o)):i.min===!1||i.expandChildren===!1?t._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"csv",filename:e,options:i,nodes:o};if(t.events.publish("exportstart",[this,r])===!1)return!1;var s=t._json2csv(r.nodes),a={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:s};if(t.events.publish("exportend",[this,a])===!1)return!1;t._downloadFile("text/csv;charset=utf-8;","\uFEFF"+a.content,a.options.filename,a.options.openInNewTab,a.ext)},t.prototype.exportToXML=t.prototype.exportXML=function(e){var i=t._defaultExportProfileOptionsForCSV_SVG_JSON(e,"xml"),n=this.getNode(i.nodeId),o=null;n?(o=[],t._exportIterateForJSON_XML_CSV(this,n,i,o)):i.min===!1||i.expandChildren===!1?t._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"xml",filename:e,options:i,nodes:o};if(t.events.publish("exportstart",[this,r])===!1)return!1;var s=t._json2xml(r.nodes),a={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:s};if(t.events.publish("exportend",[this,a])===!1)return!1;t._downloadFile("application/xml",a.content,a.options.filename,a.options.openInNewTab,a.ext)},t.prototype.exportToJSON=t.prototype.exportJSON=function(e){var i=t._defaultExportProfileOptionsForCSV_SVG_JSON(e,"json"),n=this.getNode(i.nodeId),o=null;n?(o=[],t._exportIterateForJSON_XML_CSV(this,n,i,o)):i.min===!1||i.expandChildren===!1?t._exportIterateForJSON_XML_CSV(this,this.roots,i,o):o=JSON.parse(JSON.stringify(this.config.nodes));var r={ext:"json",filename:i.filename,options:i,nodes:o};if(t.events.publish("exportstart",[this,r])===!1)return!1;var s={ext:r.ext,filename:r.filename,options:i,nodes:r.nodes,content:JSON.stringify(r.nodes)};if(t.events.publish("exportend",[this,s])===!1)return!1;t._downloadFile("application/json",s.content,s.options.filename,s.options.openInNewTab,s.ext)},t._exportIterateForJSON_XML_CSV=function(e,i,n,o){if(Array.isArray(i))for(var r=0;r<i.length;r++)t._exportIterateForJSON_XML_CSV(e,i[r],n,o);else{var s=e.get(i.id);if(o.push(s),n.min)for(r=0;r<i.stChildrenIds.length;r++)t._exportIterateForJSON_XML_CSV(e,e.getNode(i.stChildrenIds[r]),n,o);else for(r=0;r<i.stChildren.length;r++)t._exportIterateForJSON_XML_CSV(e,i.stChildren[r],n,o);if(n.expandChildren)for(r=0;r<i.childrenIds.length;r++)t._exportIterateForJSON_XML_CSV(e,e.getNode(i.childrenIds[r]),n,o);else for(r=0;r<i.children.length;r++)t._exportIterateForJSON_XML_CSV(e,i.children[r],n,o)}},t.prototype._pages=function(e,i,n,o){e.format=="A5"&&e.scale!="fit"||e.format=="A4"&&e.scale!="fit"||e.format=="A3"&&e.scale!="fit"||e.format=="A2"&&e.scale!="fit"||e.format=="A1"&&e.scale!="fit"||e.format=="Letter"&&e.scale!="fit"||e.format=="Legal"&&e.scale!="fit"?o(this._pagesA100(e,i,e.scale)):e.format=="A5"&&e.scale=="fit"||e.format=="A4"&&e.scale=="fit"||e.format=="A3"&&e.scale=="fit"||e.format=="A2"&&e.scale=="fit"||e.format=="A1"&&e.scale=="fit"||e.format=="Letter"&&e.scale=="fit"||e.format=="Legal"&&e.scale=="fit"?o(this._pagesAfit(e,i,n)):e.format=="fit"&&o(this._pagesFit(e,i))},t.prototype._pagesFit=function(e,i){var n=i.getAttribute("width"),o=i.getAttribute("height"),r=t._getViewBox(i),s={w:parseFloat(n),h:parseFloat(o)};return[{vb:r,size:{w:s.w+(e.margin[1]+e.margin[3]),h:s.h+(e.margin[0]+e.margin[2])},innerSize:s}]},t.prototype._pagesAfit=function(e,i,n){var o=i.getAttribute("width"),r=0,s=0;switch(e.format){case"A5":r=t.A5.width,s=t.A5.height;break;case"A4":r=t.A4.width,s=t.A4.height;break;case"A3":r=t.A3.width,s=t.A3.height;break;case"A2":r=t.A2.width,s=t.A2.height;break;case"A1":r=t.A1.width,s=t.A1.height;break;case"Letter":r=t.Letterw.width,s=t.Letterw.height;break;case"Legal":r=t.Legalw.width,s=t.Legalw.height}var a=e.landscape?s-(e.margin[1]+e.margin[3]):r-(e.margin[1]+e.margin[3]),c=(e.landscape,e.margin[0],e.margin[2],a/o);return this._pagesA100(e,i,100*c,n)},t.prototype._pagesA100=function(e,i,n,o){var r=t._getViewBox(i),s=0,a=0;switch(e.format){case"A5":s=t.A5.width,a=t.A5.height;break;case"A4":s=t.A4.width,a=t.A4.height;break;case"A3":s=t.A3.width,a=t.A3.height;break;case"A2":s=t.A2.width,a=t.A2.height;break;case"A1":s=t.A1.width,a=t.A1.height;break;case"Letter":s=t.Letterw.width,a=t.Letterw.height;break;case"Legal":s=t.Legalw.width,a=t.Legalw.height}var c=r[0],l=r[1],h=r[2],d=r[3],p={w:e.landscape?a-(e.margin[1]+e.margin[3]):s-(e.margin[1]+e.margin[3]),h:e.landscape?s-(e.margin[0]+e.margin[2]):a-(e.margin[0]+e.margin[2])},f={w:e.landscape?a:s,h:e.landscape?s:a};i.setAttribute("width",p.w),i.setAttribute("height",p.h);var u=p.w*(100/n),x=p.h*(100/n),S=c,y=l,v=[],E=!0;if(!t.EXPORT_PAGES_CUT_NODES&&e.scale=="fit"){i.setAttribute("preserveAspectRatio","xMinYMin");for(var b=Object.keys(o.bordersByRootIdAndLevel),I=o.bordersByRootIdAndLevel[b[0]],w=Object.keys(I).length,M=1;M<b.length;M++)w<Object.keys(o.bordersByRootIdAndLevel[b[M]]).length&&(I=o.bordersByRootIdAndLevel[b[M]],w=Object.keys(I).length);for(var C=0,R=0;;){for(R=C;!(w<=C);){if((I[C].maxY-I[C].minY)/(100/n)>p.h){E=!1;break}var O=(I[C].minY-I[R].minY)/(100/n);if(C==w-1&&(O=(I[C].maxY-I[R].minY)/(100/n)),O>p.h)break;C++}if(!E)break;var z=(C==w?I[C-1].maxY:I[C-1].minY)-I[R].minY;if(z==0){E=!1;break}if(F=(F=[S,I[R].minY,u,z]).join(),v.push({vb:F,innerSize:{w:p.x,h:z/(100/n)-1},size:f}),C==w)break;C--}v.length&&(v[v.length-1].innerSize.h+=1)}if(!E||t.EXPORT_PAGES_CUT_NODES||e.scale!="fit")for(i.setAttribute("preserveAspectRatio","xMinYMin slice"),v=[];S<h+c;){for(;y<d+l;){var F;F=(F=[S,y,u,x]).join(),v.push({vb:F,innerSize:p,size:f}),y+=x}S+=u,y=l}return v},t.prototype._defaultExportProfileOptions=function(e,i){return t.isNEU(e)||e.id==null||e.nodeId!=null||(e.nodeId=e.id),(t.isNEU(e)||t.isNEU(e.nodeId))&&console.error("options.nodeId is not defilned"),i=="svg"?(e.ext="svg",e.mime="image/svg+xml"):i=="pdf"?(e.mime="application/pdf",e.ext="pdf"):i=="png"&&(e.mime="image/png",e.ext="png"),e.margin==null&&(e.margin=[50,40,50,40]),e.padding==null&&(e.padding=0),e.landscape==null&&(e.landscape=!1),e.filename==null&&(e.filename="Profile."+e.ext),e.scale==null&&(e.scale="fit"),e.format==null&&(e.format="A4"),e.header==null&&(e.header=""),e.footer==null&&(e.footer=""),e.openInNewTab==null&&(e.openInNewTab=!1),e.mode==null&&(e.mode="boc-"+this.config.mode),e},t._defaultExportProfileOptionsForCSV_SVG_JSON=function(e,i){return t.isNEU(e)&&(e={}),typeof e=="string"&&(e={filename:e}),t.isNEU(e.filename)&&(e.filename=`OrgChart.${i}`),t.isNEU(e.expandChildren)&&(e.expandChildren=!0),t.isNEU(e.min)&&(e.min=!0),t.isNEU(e.openInNewTab)&&(e.openInNewTab=!1),e},t.prototype._exportProfile=function(e,i){var n=this,o=0,r=0;switch(e.format){case"A5":o=t.A5.width,r=t.A5.height;break;case"A4":o=t.A4.width,r=t.A4.height;break;case"A3":o=t.A3.width,r=t.A3.height;break;case"A2":o=t.A2.width,r=t.A2.height;break;case"A1":o=t.A1.width,r=t.A1.height;break;case"Letter":o=t.Letterw.width,r=t.Letterw.height;break;case"Legal":o=t.Legalw.width,r=t.Legalw.height}var s={w:e.landscape?r-(e.margin[1]+e.margin[3]):o-(e.margin[1]+e.margin[3]),h:e.landscape?o-(e.margin[0]+e.margin[2]):r-(e.margin[0]+e.margin[2])},a={w:e.landscape?r:o,h:e.landscape?o:r},c=this.editUI.content(e.nodeId,!0,!0,"100%",!0).element;t.input.init(c);var l={content:c.outerHTML,options:e,pages:[{vb:"",innerSize:s,size:a}],styles:""};if(t.events.publish("exportstart",[n,l])===!1)return!1;i||t.loading.show(n);var h=this.element.querySelector("[data-boc-styles]");h&&(l.styles+=h.outerHTML);var d=this.getSvg().querySelector("defs");if(d)for(var p=0;p<d.children.length;p++)d.children[p].nodeName.toLowerCase()=="style"&&(l.styles+=d.children[p].outerHTML);i?i(n,l,c):(l=JSON.stringify(l),t._ajax(this.config.exportUrl+"/v4","POST",l,"arraybuffer",function(f){var u=t.events.publish("exportend",[n,f]);if(t.loading.hide(n),u===!1)return!1;t._downloadFile(e.mime,f,e.filename,e.openInNewTab,e.ext)}))},t.prototype.exportToPDFProfile=function(e,i){chart.exportToPDF({pages:[{nodeId:e,isProfile:!0}]},i)},t.prototype.exportToVisio=function(e,i){var n=this;e=t._setDefaultOptions(e,"vstx"),this._createExportPages("vstx",e,function(o){for(var r=0;r<e.pages.length;r++)t.loading.show(e.pages[r].chartInstance);n._requestToExportVisio(o,e,function(s){var a=!0;if(i&&(a=i(s)),a!==!1){if((a=t.events.publish("exportend",[n,s]))===!1)return t._exportHideAnimation(e),!1;t._downloadFile("application/vnd.visio",s,e.fileName,e.openInNewTab,"vsdx")}t._exportHideAnimation(e)})})},t.prototype.exportToPDF=function(e,i){var n=this;e=t._setDefaultOptions(e,"pdf"),this._createExportPages("pdf",e,function(o){for(var r=0;r<e.pages.length;r++)t.loading.show(e.pages[r].chartInstance);n._requestToExportPDF(o,e,function(s){var a=!0;if(i&&(a=i(s)),a!==!1){if((a=t.events.publish("exportend",[n,s]))===!1)return t._exportHideAnimation(e),!1;t._downloadFile("application/pdf",s,e.fileName,e.openInNewTab,"pdf")}t._exportHideAnimation(e)})})},t.prototype.exportToPNG=function(e,i){var n=this;e=t._setDefaultOptions(e,"png"),this._createExportPages("png",e,function(o){for(var r=0;r<e.pages.length;r++)t.loading.show(e.pages[r].chartInstance);n._requestToExportPNG(o,e,function(s){var a=!0;if(i&&(a=i(s)),a!==!1){if((a=t.events.publish("exportend",[n,s]))===!1)return t._exportHideAnimation(e),!1;e.pages.length==1?t._downloadFile("image/png",s,e.fileName,e.openInNewTab,"png"):t._downloadFile("application/zip",s,e.fileName.replaceAll(".png",".zip"),!1,"zip")}t._exportHideAnimation(e)})})},t.prototype.exportToSVG=function(e,i){var n=this;e=t._setDefaultOptions(e,"svg"),this._createExportPages("svg",e,function(o){for(var r=0;r<e.pages.length;r++)t.loading.show(e.pages[r].chartInstance);n._requestToExportSVG(o,e,function(s){var a=!0;if(i&&(a=i(s)),a!==!1){if((a=t.events.publish("exportend",[n,s]))===!1)return t._exportHideAnimation(e),!1;e.pages.length==1?t._downloadFile("image/svg+xml",s,e.fileName,e.openInNewTab,"svg"):t._downloadFile("application/zip",s,e.fileName.replaceAll(".svg",".zip"),!1,"zip")}t._exportHideAnimation(e)})})},t.prototype.exportToPowerPoint=function(e,i){var n=this;e=t._setDefaultOptions(e,"pptx"),this._createExportPages("pptx",e,function(o){for(var r=0;r<e.pages.length;r++)t.loading.show(e.pages[r].chartInstance);n._requestToExportPowerPoint(o,e,function(s){var a=!0;if(i&&(a=i(s)),a!==!1){if((a=t.events.publish("exportend",[n,s]))===!1)return t._exportHideAnimation(e),!1;t._downloadFile("application/msword",s,e.fileName,e.openInNewTab,"pptx")}t._exportHideAnimation(e)})})},t._exportHideAnimation=function(e){for(var i=0;i<e.pages.length;i++)t.loading.hide(e.pages[i].chartInstance)},t._setDefaultOptions=function(e,i){return e||(e={}),e.type=i,e.landscape==null&&(i=="pdf"?e.landscape=!1:i=="pptx"&&(e.landscape=!0)),e.header==null&&(e.header=""),e.footer==null&&(i=="pdf"?e.footer='<text style="fill: #aeaeae" x="0" y="15">Page {current-page} of {total-pages}</text>':i=="png"||i=="svg"?e.footer="":i=="pptx"?e.footer='<text style="fill: #aeaeae" x="0" y="15">Slide {current-page} of {total-pages}</text>':i=="vstx"&&(e.footer="")),e.expandChildren==null&&(e.expandChildren=!1),e.childLevels==null&&(e.childLevels=null),e.parentLevels==null&&(e.parentLevels=null),e.min==null&&(e.min=!0),e.format==null&&(i=="pdf"?e.format="A4":i=="pptx"&&(e.format="Widescreen")),e.fileName==null&&(e.fileName="OrgChart."+i),e.openInNewTab==null&&(e.openInNewTab=!1),e.width==null&&e.height==null&&(i=="png"||i=="svg"||i=="vstx"||i=="pdf"&&e.format=="auto"?(e.width="auto",e.height="auto"):(t.Screen={width:screen.height/2,height:screen.width/2},e.landscape?(e.width=t[e.format].height,e.height=t[e.format].width):(e.width=t[e.format].width,e.height=t[e.format].height))),e.margin==null&&(e.margin=[30,20,30,20]),e.padding==null&&(e.padding=0),e.pages||(e.pages=[{}]),e},t.prototype._requestToExportPDF=function(e,i,n){t.__requestExport(this.config.serverUrl+"/Export/PDF",i.fileName,e,n)},t.prototype._requestToExportPNG=function(e,i,n){t.__requestExport(this.config.serverUrl+"/Export/PNG",i.fileName,e,n)},t.prototype._requestToExportVisio=function(e,i,n){t.__requestExport(this.config.serverUrl+"/Export/VSTX",i.fileName,e,n)},t.prototype._requestToExportSVG=function(e,i,n){t.__requestExport(this.config.serverUrl+"/Export/SVG",i.fileName,e,n)},t.prototype._requestToExportPowerPoint=function(e,i,n){t.__requestExport(this.config.serverUrl+"/Export/PowerPoint",i.fileName,e,n)},t.__requestExport=function(e,i,n,o){var r={filename:i,pages:n};t._ajax(e,"POST",JSON.stringify(r),"arraybuffer",function(s){o(s)})},t.prototype._createExportPages=function(e,i,n){var o=[];if(i.pages.length)for(var r=0;r<i.pages.length;r++)this.__createExportPages(e,r,o,i,n);else n(o)},t.prototype.__createExportPages=function(e,i,n,o,r){var s=this,a=o.pages[i];if(a.chartInstance||(a.chartInstance=this),a.expandChildren===void 0&&(a.expandChildren=o.expandChildren),a.childLevels===void 0&&(a.childLevels=o.childLevels),a.parentLevels===void 0&&(a.parentLevels=o.parentLevels),a.min===void 0&&(a.min=o.min),a.header===void 0&&(a.header=o.header),a.footer===void 0&&(a.footer=o.footer),a.childLevels!=null&&(a.expandChildren=!1),a.padding===void 0&&(a.padding=o.padding),a.margin===void 0&&(a.margin=o.margin),a.content!=null||a.isProfile===!0){a.isProfile&&(a.content=this._createProfileSvg(o,a));var c=s._createMasterSvg(e,a.content,i,o,a.content!=null);if(n.push(c),s.___createExportPages(e,i,n,o,r))return}else{var l={id:a.nodeId,expandChildren:a.expandChildren,parentLevels:a.parentLevels,childLevels:a.childLevels,min:a.min};o.pages[i].chartInstance._draw(!1,t.action.exporting,l,function(h,d){var p=s._createMasterSvg(e,h,i,o,!1);n.push(p),s.___createExportPages(e,i,n,o,r)})}},t.prototype._createMasterSvg=function(e,i,n,o,r){var s=!1;i==""&&(s=!0,i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="100" height="100" viewBox="0,0,0,0"><svg>');var a=o.pages[n],c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),document.body.appendChild(c);var l=t._getSvgAttributes(i);s?o.width=="auto"?a.width=1e3:a.width=o.width:o.width=="auto"?a.width=l.width+a.margin[3]+a.margin[1]:a.width=o.width;var h=document.createElementNS("http://www.w3.org/2000/svg","g");h.innerHTML=`${a.header.replaceAll("{current-page}",n+1).replaceAll("{total-pages}",o.pages.length)}`,c.appendChild(h),t._setYAttrToTextElements(a,o,h);var d=h.getBoundingClientRect();h.setAttribute("transform",`matrix(1,0,0,1,${a.margin[3]},${a.margin[0]})`);var p=document.createElementNS("http://www.w3.org/2000/svg","g");p.innerHTML=`${a.footer.replaceAll("{current-page}",n+1).replaceAll("{total-pages}",o.pages.length)}`,c.appendChild(p),t._setYAttrToTextElements(a,o,p);var f,u=p.getBoundingClientRect();if(s?o.height=="auto"?a.height=1e3:a.height=o.height:o.height=="auto"?a.height=l.height+a.margin[0]+a.margin[2]+d.height+u.height:a.height=o.height,p.setAttribute("transform",`matrix(1,0,0,1,${a.margin[3]},${a.height-a.margin[2]-u.height})`),c.classList.add("boc-"+this.config.mode),document.body.removeChild(c),!a.isProfile){var x=(a.width-a.margin[3]-a.margin[1])/l.width,S=(a.height-a.margin[0]-a.margin[2]-d.height-u.height)/l.height,y=Math.min(x,S,1);l.width*=y,l.height*=y,l.viewBox[0]-=a.padding,l.viewBox[1]-=a.padding,l.viewBox[2]+=2*a.padding,l.viewBox[3]+=2*a.padding,l.x=(a.width-l.width)/2,l.y=a.margin[0]+d.height+(a.height-a.margin[0]-d.height-a.margin[2]-u.height-l.height)/2}f=r?t._isSVG(i)?i:`<foreignObject x="0" y="0" width="100%" height="100%">${i}</foreignObject>`:t._setSvgAttributes(i,l);var v=a.width,E=a.height;return e!="pdf"||a.isProfile||(v+=2,E+=2),c.setAttribute("width",v),c.setAttribute("height",E),c.innerHTML=f+c.innerHTML,c},t.prototype._createProfileSvg=function(e,i){var n=this.editUI.content(i.nodeId,!0,!0,"100%",!0).element;return t.input.init(n),`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;" width="${e.width}" height="${e.height}" viewBox="0,0,${e.width},${e.height}">        
        <style>
            form.boc-edit-form, div.boc-edit-form-header {
                border-radius: 0;
            }
            
        </style>
        <foreignobject class="node" x="0" y="0" width="${e.width}" height="${e.height}">${n.outerHTML}</foreignobject>
    </svg>`},t.prototype.___createExportPages=function(e,i,n,o,r){if(i>=o.pages.length-1){var s={pages:n,options:o,styles:""};if(t.events.publish("exportstart",[this,s])===!1)return!1;var a=this.mainElement.querySelector("[data-boc-styles]");if(a&&(s.styles+=a.outerHTML),s.styles)for(var c=0;c<s.pages.length;c++){var l=s.pages[c];l.insertAdjacentHTML("afterbegin",s.styles),s.pages[c]=l.outerHTML}return r(s.pages),!0}return!1},t._setYAttrToTextElements=function(e,i,n){for(var o=n.querySelectorAll("text"),r=0;r<o.length;r++){var s=o[r];if(!s.hasAttribute("y")){var a=s.getBoundingClientRect();s.setAttribute("y",a.height)}if(s.hasAttribute("text-anchor")&&!s.hasAttribute("x")){var c=s.getAttribute("text-anchor").toLowerCase(),l=e.width-e.margin[1]-e.margin[3];c=="end"?s.setAttribute("x",l):c=="middle"&&s.setAttribute("x",l/2)}}},t.exportUI=function(e){this.instance=null,this.interval=null,this.element=null,this.options=null,this.selectedIndex=0,this.type=e,this.locExport="Export",this.locLandscape="Landscape",this.locPortrait="Portrait",this.locCancel="Close",this.locParentLevels="parent levels",this.locChildLevels="child levels",this.locClickToAdd="Click on a node to display it here",this.locPrintTree="Print tree",this.locPrintProfile="Print profile",e=="pdf"?(this.locAddNew="Add new page",this.locRemove="Remove page"):e=="png"?(this.locAddNew="Add new PNG",this.locRemove="Remove PNG"):e=="svg"?(this.locAddNew="Add new SVG",this.locRemove="Remove SVG"):e=="pptx"&&(this.locAddNew="Add new slide",this.locRemove="Remove slide"),Object.defineProperty(this,"width",{get(){return this.isVisible()?this.element.offsetWidth:0}})},t.exportUI.prototype.init=function(e){this.instance=e},t.exportUI.prototype.show=function(e){this.instance.pdfPreviewUI.hide(),this.instance.svgPreviewUI.hide(),this.instance.pngPreviewUI.hide(),this.instance.powerPointPreviewUI.hide(),this.instance.aiUI.hide(),this.instance.orgScribeUI.hide(),this.options=t._setDefaultOptions(e,this.type);var i=this;this.instance._createExportPages(this.type,this.options,function(n){i._init(n)})},t.exportUI.prototype.isVisible=function(){return this.element!=null},t.exportUI.prototype.hide=function(){this.instance.leftElement.style.display="none",this.element&&(this.element.parentNode.removeChild(this.element),this.element=null)},t.exportUI.prototype._updateSlectedPage=function(e){var i=this,n=this.instance.leftElement.querySelector(".boc-export-selected");if(n){var o=n.getAttribute("data-boc-export-page");this.options.pages[o].content=void 0,this.options.pages[o].nodeId=e,this.instance._createExportPages(this.type,this.options,function(r){i._draw(r)})}},t.exportUI.prototype._init=function(e){var i=this;this.element=document.createElement("div"),this.element.setAttribute("data-boc-export-form",""),this.element.style.opacity=0,this.element.classList.add("boc-export-form"),this.element.classList.add(this.instance.config.mode),this.element.style.display="";var n="";this.type=="pdf"&&(n=`<button data-boc-export-landcapeportrait>${this.options.landscape?this.locPortrait:this.locLandscape}</button> `),this.element.innerHTML=`<div class="boc-export-container">                                
                                <div class="boc-export-btns">       
                                
                                    <div class="boc-export-btns-inner">   
                                        <div class="boc-export-left">                               
                                            <button data-boc-export-cancel>${this.locCancel}</button>   
                                            ${n}                                                                    
                                            <button data-boc-export-btnnewpage>${this.locAddNew}</button>     
                                        </div>                                    
                                        <div class="boc-export-right">             
                                            <button class="boc-export-btn" data-boc-export-export>${this.locExport}</button>                          
                                        </div>                                    
                                        </div>                                    
                                </div>
                                <div class="boc-export-middle">
                                    <div class="boc-export-middle-inner" data-boc-export-pages>
                                    </div>
                                </div>
                            </div>`,this.instance.leftElement.appendChild(this.element),this.instance.leftElement.style.display="block",this.instance.leftElement.querySelector("[data-boc-export-btnnewpage]").addEventListener("click",function(a){i._addPage()});var o=this.instance.leftElement.querySelector("[data-boc-export-landcapeportrait]");o&&o.addEventListener("click",function(a){i._toggleLanscape(this)}),this.instance.leftElement.querySelector("[data-boc-export-pages]").addEventListener("click",function(a){for(var c,l=a.target;l&&l.hasAttribute&&!l.hasAttribute("data-boc-export-page");)l=l.parentNode;l&&l.hasAttribute&&l.hasAttribute("data-boc-export-page")&&(c=l.getAttribute("data-boc-export-page")),a.target.hasAttribute&&(a.target.hasAttribute("data-export-remove")?i._removePage(c):a.target.hasAttribute("data-export-child-plus")?i._incrementDecrementChildLevel(c,!0):a.target.hasAttribute("data-export-child-minus")?i._incrementDecrementChildLevel(c,!1):a.target.hasAttribute("data-export-parent-plus")?i._incrementDecrementParentLevel(c,!0):a.target.hasAttribute("data-export-parent-minus")?i._incrementDecrementParentLevel(c,!1):a.target.hasAttribute("data-export-profiletree")?i._toggelePrintTreeOrProfile(c,!1):i._selectPage(c))});var r=this.instance.leftElement.querySelector("[data-boc-export-cancel]");r&&r.addEventListener("click",function(a){i.hide()});var s=this.instance.leftElement.querySelector("[data-boc-export-export]");s&&s.addEventListener("click",function(a){i.instance.powerPointPreviewUI.isVisible()?i.instance.exportToPowerPoint(i.options):i.instance.pdfPreviewUI.isVisible()?i.instance.exportToPDF(i.options):i.instance.pngPreviewUI.isVisible()?i.instance.exportToPNG(i.options):i.instance.svgPreviewUI.isVisible()&&i.instance.exportToSVG(i.options)}),this.interval&&(clearTimeout(this.interval),this.interval=null),this.interval=t.animate(this.element,{opacity:0},{opacity:1},300,t.anim.outSin,function(){i._draw(e)})},t.exportUI.prototype._draw=function(e){var i=this.instance.leftElement.querySelector("[data-boc-export-pages]");i.innerHTML="";for(var n=0;n<e.length;n++){var o=e[n],r=this.options.pages[n].width/this.options.pages[n].height,s=t._getSvgAttributes(o);s.viewBox[0]=0,s.viewBox[1]=0,s.viewBox[2]=s.width,s.viewBox[3]=s.height,s.width="100%",s.height="100%";var a=t._setSvgAttributes(o,s),c=t._getSvgAttributes;this.options.pages[n].content==""&&(c=" boc-export-empty");var l=`<div class="boc-export-remove-buttons">                    
                        <button data-export-remove="${n}">${this.locRemove}</button>                    
                    </div>`;this.type=="pdf"&&!t.isNEU(this.options.pages[n].nodeId)&&(!this.options.pages[n].content||this.options.pages[n].isProfile&&this.options.pages[n].content)&&(l+=`<div class="boc-export-profiletree-buttons">                    
                        <button data-export-profiletree="${n}">${this.options.pages[n].isProfile?this.locPrintTree:this.locPrintProfile}</button>                    
                    </div>`),this.options.pages[n].isProfile||t.isNEU(this.options.pages[n].nodeId)||(l=`<div class="boc-export-parent-buttons">                    
                                                <button data-export-parent-minus="${n}">-</button> 
                                                <button data-export-parent-plus="${n}">+</button> ${this.options.pages[n].parentLevels==null?"all":this.options.pages[n].parentLevels} ${this.locParentLevels}
                                            </div>                                                    
                                            <div class="boc-export-child-buttons">                    
                                                <button data-export-child-minus="${n}">-</button>                                                                                              
                                                <button data-export-child-plus="${n}">+</button> ${this.options.pages[n].childLevels==null?"all":this.options.pages[n].childLevels} ${this.locChildLevels}
                                            </div>`+l),i.innerHTML+=`<div data-boc-export-page="${n}" style="aspect-ratio: ${r};" class="boc-export-page ${c}">
                                            ${a}
                                            ${l}                                                                                                                     
                                        </div>`}this._selectPage(this.selectedIndex)},t.exportUI.prototype._toggleLanscape=function(e){var i=this;this.options.landscape=!this.options.landscape,this.options.width=void 0,this.options.height=void 0,this.options=t._setDefaultOptions(this.options,this.type),e.innerHTML=this.options.landscape?this.locPortrait:this.locLandscape,this.instance._createExportPages(this.type,this.options,function(n){i._draw(n),i._selectPage(i.options.pages.length-1)})},t.exportUI.prototype._addPage=function(e){var i=this;this.options.pages.push({content:""}),this.instance._createExportPages(this.type,this.options,function(n){i._draw(n),i._selectPage(i.options.pages.length-1);var o=i.element.querySelector(".boc-export-middle");t.animate(o,{scrollTop:o.scrollTop},{scrollTop:o.scrollHeight},600,t.anim.outSin)})},t.exportUI.prototype._removePage=function(e){e=parseInt(e);var i=this;e<=i.selectedIndex&&(i.selectedIndex--,i.selectedIndex<0&&(i.selectedIndex=0)),this.options.pages.splice(e,1),this.instance._createExportPages(this.type,this.options,function(n){i._draw(n),i._selectPage(i.selectedIndex)})},t.exportUI.prototype._incrementDecrementChildLevel=function(e,i){var n=this;e<n.selectedIndex&&n.selectedIndex--;var o=this.options.pages[e];o.childLevels==null&&(o.childLevels=i?0:2),i?o.childLevels++:o.childLevels--,o.childLevels==-1&&(o.childLevels=0),o.expandChildren=!1,this.instance._createExportPages(this.type,this.options,function(r){n._draw(r),n._selectPage(n.selectedIndex)})},t.exportUI.prototype._toggelePrintTreeOrProfile=function(e){var i=this,n=this.options.pages[e];n.isProfile=!n.isProfile,this.options.pages[e].content=void 0,this.instance._createExportPages(this.type,this.options,function(o){i._draw(o),i._selectPage(i.selectedIndex)})},t.exportUI.prototype._incrementDecrementParentLevel=function(e,i){var n=this;e<n.selectedIndex&&n.selectedIndex--;var o=this.options.pages[e];o.parentLevels==null?o.parentLevels=1:i?o.parentLevels++:o.parentLevels--,o.parentLevels==-1&&(o.parentLevels=0),this.instance._createExportPages(this.type,this.options,function(r){n._draw(r),n._selectPage(n.selectedIndex)})},t.exportUI.prototype._selectPage=function(e){for(var i=this.instance.leftElement.querySelectorAll("[data-boc-export-page]"),n=0;n<i.length;n++)i[n].classList.remove("boc-export-selected");for(i=this.instance.leftElement.querySelectorAll(".boc-export-select"),n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);var o=this.instance.leftElement.querySelectorAll("[data-boc-export-pages] .boc-export-page");if(o.length){var r=o[e];r.classList.contains("boc-export-empty")&&(r.innerHTML+=`<div class="boc-export-select">${this.locClickToAdd}</div>`),r.classList.add("boc-export-selected"),this.selectedIndex=e}},t===void 0&&(t={}),t.events=(function(){var e={};return{on:function(i,n,o){Array.isArray(e[i])||(e[i]=[]),e[i].push({listener:n,event_id:o})},removeAll:function(i){Array.isArray(e[i])||(e[i]=[]),e[i]=[]},remove:function(i,n,o){var r=!1;if(e[i]&&Array.isArray(e[i])&&e[i].length>0)for(var s=e[i].length-1;s>=0;s--)(!t.isNEU(o)&&!t.isNEU(n)&&e[i][s].event_id==o&&e[i][s].listener==n||!t.isNEU(o)&&t.isNEU(n)&&e[i][s].event_id==o||t.isNEU(o)&&!t.isNEU(n)&&e[i][s].listener==n||t.isNEU(o)&&t.isNEU(n))&&(e[i].splice(s,1),r=!0);return r},has:function(i,n){if(e[i]&&Array.isArray(e[i])&&e[i].length>0){if(t.isNEU(n))return!0;for(var o=0;o<e[i].length;o++)if(e[i][o].event_id==n)return!0}return!1},removeForEventId:function(i){for(var n in e)if(Array.isArray(e[n]))for(var o=e[n].length-1;o>=0;o--)e[n][o].event_id==i&&e[n].splice(o,1)},publish:function(i,n){if(e[i]){for(var o=[],r=0;r<e[i].length;r++){var s=e[i][r];s.event_id!=null&&s.event_id!=n[0]._event_id||o.push(s.listener)}if(o.length>0){var a=!0;for(r=0;r<o.length&&(n.length==1?a=o[r](n[0])&&a:n.length==2?a=o[r](n[0],n[1])&&a:n.length==3?a=o[r](n[0],n[1],n[2])&&a:n.length==4?a=o[r](n[0],n[1],n[2],n[3])&&a:n.length==5&&(a=o[r](n[0],n[1],n[2],n[3],n[4])&&a),a!==!1);r++);return a}}}}})(),t.prototype.importCSV=function(){var e=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".csv"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=r.result,a=t._csvToArray(s),c=[],l=a[0];t._importSetColumnNames(l,function(h){for(var d=1;d<a.length;d++){for(var p={},f=0;f<a[d].length;f++){var u=h[f],x=a[d][f];p[u]=t._convertStringToArray(u,x)}p.id.trim()!=""&&c.push(p)}var S={nodes:c,columnNames:a[0]};t.events.publish("import",[e,S])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=S.nodes,e._ai.setContext(),t.events.publish("updated",[e]),e.filterUI.update(),e.draw())})},r.readAsText(o.files[0])},i.click()},t._importSetColumnNames=function(e,i){if(e.indexOf("id")==-1||e.indexOf("pid")==-1){var n=document.createElement("DIV"),o=document.createElement("P");o.style.padding="5px",o.style.color="rgb(122, 122, 122)",o.innerHTML=t.IMPORT_MESSAGE,n.appendChild(o);var r=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),c=document.createElement("span");r.setAttribute("id","boc-sampleDialog"),r.style.height="260px",r.style.width="400px",r.style.background="white",r.style.border="0.5px solid grey",r.style.position="fixed",r.style.overflow="hidden",r.style.zIndex="99",s.setAttribute("id","title"),s.style.backgroundColor="#e5e5e5",s.style.fontWeight="bold",s.style.color="rgb(122, 122, 122)",s.style.height="20px",s.style.padding="3px 0 0 7px",c.setAttribute("id","close"),c.style.cursor="pointer",c.style.position="absolute",c.style.color="rgb(122, 122, 122)",c.style.fontWeight="bold",c.style.top="2px",c.style.zIndex=100,a.setAttribute("id","content"),a.style.padding="2px",s.innerHTML="Import Organizational Chart Data",c.innerHTML="&times;";var l=document.createElement("HR");l.style.height="0.1px",l.style.backgroundColor="#aeaeae",l.style.border="none",l.style.margin="0",r.appendChild(s),r.appendChild(l),a.appendChild(n),r.appendChild(a),r.appendChild(c),document.body.appendChild(r),t._importCenter(r),c.style.left=r.offsetWidth-20+"px";var h=document.createElement("div");h.setAttribute("id","overlay"),h.style.width="100%",h.style.height="100%",h.style.left=0,h.style.top=0,h.style.position="fixed",h.style.background="grey",h.style.opacity="0.5",h.style.zIndex=98,document.body.appendChild(h),r._overlay=h;var d=document.createElement("LABEL"),p=document.createTextNode("Name:");d.setAttribute("for","boc-id-select"),d.appendChild(p),d.style.fontSize="16px",d.style.color="rgb(122, 122, 122)",d.style.padding="5px",d.style.margin="5px",d.style.width="30%",d.style.textAlign="right",d.style.display="inline-block",n.appendChild(d);var f=document.createElement("SELECT");f.id="boc-id-select",f.style.fontSize="16px",f.style.color="rgb(122, 122, 122)",f.style.padding="5px",f.style.margin="5px",f.style.width="60%",f.style.border="1px solid #aeaeae",n.appendChild(f);var u=document.createElement("BR");n.appendChild(u);for(var x=0;x<e.length;x++){(b=document.createElement("option")).setAttribute("value",e[x]);var S=document.createTextNode(e[x]);b.appendChild(S),f.appendChild(b)}var y=document.createElement("LABEL"),v=document.createTextNode("Reports to:");y.setAttribute("for","pid-select"),y.appendChild(v),y.style.fontSize="16px",y.style.color="rgb(122, 122, 122)",y.style.padding="5px",y.style.margin="5px",y.style.width="30%",y.style.textAlign="right",y.style.display="inline-block",n.appendChild(y);var E=document.createElement("SELECT");for(E.id="pid-select",E.style.fontSize="16px",E.style.color="rgb(122, 122, 122)",E.style.padding="5px",E.style.margin="5px",E.style.width="60%",E.style.border="1px solid #aeaeae",n.appendChild(E),x=0;x<e.length;x++){var b;(b=document.createElement("option")).setAttribute("value",e[x]),S=document.createTextNode(e[x]),b.appendChild(S),E.appendChild(b)}var I=document.createElement("BUTTON");I.innerHTML="Import",I.style.fontSize="16px",I.style.color="rgb(122, 122, 122)",I.style.padding="5px 20px",I.style.margin="20px auto",I.style.display="block",I.onclick=function(){r.style.display="none",r._overlay&&r._overlay.parentNode.removeChild(r._overlay);var M=f.options[f.selectedIndex].value,C=e.indexOf(M);e[C]="id";var R=E.options[E.selectedIndex].value,O=e.indexOf(R);e[O]="pid",i(e)};var w=document.createElement("DIV");return w.appendChild(I),n.appendChild(w),c.onclick=function(M){r._overlay&&r._overlay.parentNode.removeChild(r._overlay),r.parentNode.removeChild(r),M.stopPropagation()},s.onmousedown=function(M){M=M||window.event,r._dragging=!0,r._originalLeft=r.offsetLeft,r._originalTop=r.offsetTop,r._mouseLeft=M.clientX,r._mouseTop=M.clientY},document.onmousemove=function(M){M=M||window.event,r._dragging&&(r.style.left=r._originalLeft+M.clientX-r._mouseLeft+"px",r.style.top=r._originalTop+M.clientY-r._mouseTop+"px")},document.onmouseup=function(M){M=M||window.event,r._dragging&&(r.style.left=r._originalLeft+M.clientX-r._mouseLeft+"px",r.style.top=r._originalTop+M.clientY-r._mouseTop+"px",r._dragging=!1)},r}i(e)},t._importCenter=function(e){e&&(e.style.left=(window.innerWidth-e.offsetWidth)/2+"px",e.style.top=(window.innerHeight-e.offsetHeight)/2+"px")},t.prototype.importXML=function(){var e=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".xml"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=r.result,a=t._xml2json(s);t.events.publish("import",[e,a])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=a,e._ai.setContext(),t.events.publish("updated",[e]),e.filterUI.update(),e.draw())},r.readAsText(o.files[0])},i.click()},t.prototype.importJSON=function(){var e=this,i=document.createElement("INPUT");i.setAttribute("type","file"),i.setAttribute("accept",".json"),i.style.display="none",i.onchange=function(n){var o=n.target,r=new FileReader;r.onload=function(){var s=r.result,a=JSON.parse(s);t.events.publish("import",[e,a])!=0&&(e._putInUndoStack(),e.clearRedo(),e.config.nodes=a,e._ai.setContext(),t.events.publish("updated",[e]),e.filterUI.update(),e.draw())},r.readAsText(o.files[0])},i.click()},t.prototype.expand=function(e,i,n){this._resetMovableNodes();var o={id:e,ids:i};this._draw(!1,t.action.expand,o,n)},t.prototype.collapse=function(e,i,n){this._resetMovableNodes();var o={id:e,ids:i};this._draw(!1,t.action.collapse,o,n)},t.prototype.expandCollapse=function(e,i,n,o){this._resetMovableNodes(),Array.isArray(i)||(i=[]),Array.isArray(n)||(n=[]);var r={id:e,expandIds:i,collapseIds:n,ids:i.concat(n)};this._draw(!1,t.action.collapse,r,o)},t.prototype.changeRoots=function(e,i,n){this.config.roots=i;var o={id:e,changeRoots:i};this._draw(!1,t.action.update,o,n)},t.prototype._resetMovableNodes=function(){if(t.RESET_MOVABLE_ONEXPANDCOLLAPSE&&this.config.movable!=null){for(var e=!1,i=0;i<this.config.nodes.length;i++){var n=this.config.nodes[i];n.movex!=null&&(n.movex=0,e=!0),n.movey!=null&&(n.movey=0,e=!0)}e&&(this._ai.setContext(),t.events.publish("updated",[this]))}},t.prototype.maximize=function(e,i,n,o){var r=this,s={id:e,options:{}};t.isNEU(s.id)&&(s.id=this.roots[0].id,s.all=!0),s.options.horizontal=!1,s.options.vertical=!1,i&&(s.options.horizontal=i),n&&(s.options.vertical=n),this._draw(!1,t.action.maximize,s,function(){r.ripple(e),o&&o()})},t.prototype.minimize=function(e,i){var n=this,o={id:e};t.isNEU(o.id)&&(o.id=this.roots[0].id,o.all=!0),this._draw(!1,t.action.minimize,o,function(){n.ripple(e),i&&i()})},t.prototype._expCollHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this.getNode(e),n=this.getCollapsedIds(i);if(n.length){if(t.events.publish("expcollclick",[this,!1,e,n])===!1)return!1;this.expand(e,n,!1)}else{if(t.events.publish("expcollclick",[this,!0,e,i.childrenIds])===!1)return!1;this.collapse(e,i.childrenIds,!1)}},t.prototype._upHandler=function(e){this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var i=this._upHandlerCreateArgs(e);if(t.events.publish("up-click",[this,i])===!1)return!1;this.changeRoots(i.id,i.roots,!1)},t.prototype._upHandlerCreateArgs=function(e){var i,n=this.getNode(e),o=Object.assign([],this.config.roots),r=this.getNode(n.pid);if(r&&(i=r),i){if(Array.isArray(o)){var s=o.indexOf(n.id);s!=-1&&o.splice(s,1)}else o=[];o.push(i.id)}return{id:n.id,roots:o}},String.prototype.replaceAll||(String.prototype.replaceAll=function(e,i){return this.replace(new RegExp(e,"g"),i)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}),String.prototype.splice||(String.prototype.splice=function(e,i,n){return this.slice(0,e)+n+this.slice(e+Math.abs(i))}),String.prototype.insert||(String.prototype.insert=function(e,i){return e>0?this.substring(0,e)+i+this.substr(e):i+this}),Array.prototype.unique||Object.defineProperty(Array.prototype,"unique",{value:function(){for(var e=this.concat(),i=0;i<e.length;++i)for(var n=i+1;n<e.length;++n)e[i]===e[n]&&e.splice(n--,1);return e},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.has||Object.defineProperty(Array.prototype,"has",{value:function(e){for(var i=0;i<this.length;i++)if(this[i]==e)return!0;return!1},writable:!0,configurable:!0,enumerable:!1}),Array.prototype.compare||Object.defineProperty(Array.prototype,"compare",{value:function(e){if(this.length!=e.length)return!1;for(var i=0;i<this.length;i++)if(!e.has(this[i]))return!1;return!0},writable:!0,configurable:!0,enumerable:!1}),Object.assign||Object.defineProperty(Object,"assign",{value:function(e,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(r!=null)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},writable:!0,configurable:!0}),t.prototype._clickHandler=function(e,i){if(!(i.button>0)){for(var n=i.target;n!=e;){if(n.hasAttribute(t.attr.control_expcoll_id)){var o=n.getAttribute(t.attr.control_expcoll_id),r=this.getNode(o);return void this._expCollHandler(r.id)}if(n.hasAttribute(t.attr.node_id))return o=n.getAttribute(t.attr.node_id),r=this.getNode(o),void this._nodeClickHandler(r.id,i);if(n.hasAttribute(t.attr.control_node_menu_id))return i.stopPropagation(),i.preventDefault(),o=n.getAttribute(t.attr.control_node_menu_id),r=this.getNode(o),void this._nodeMenuClickHandler(r.id,n,i);if(n.hasAttribute(t.attr.control_node_circle_menu_id))return i.stopPropagation(),i.preventDefault(),o=n.getAttribute(t.attr.control_node_circle_menu_id),void this._nodeCircleMenuClickHandler(o);if(n.hasAttribute(t.attr.control_node_circle_menu_name))return i.stopPropagation(),void this._nodeCircleMenuItemClickHandler(n,i);if(n.hasAttribute(t.attr.control_add))return void this._lonelyButtonHandler();if(n.hasAttribute(t.attr.control_up_id))return o=n.getAttribute(t.attr.control_up_id),i.stopPropagation(),i.preventDefault(),void this._upHandler(o);if(n.hasAttribute(t.attr.c_link_from))return void t.events.publish("clink-click",[this,{from:n.getAttribute(t.attr.c_link_from),to:n.getAttribute(t.attr.c_link_to),event:i}]);if(n.hasAttribute(t.attr.s_link_from))return void t.events.publish("slink-click",[this,{from:n.getAttribute(t.attr.s_link_from),to:n.getAttribute(t.attr.s_link_to),event:i}]);if(n.hasAttribute("data-ctrl-n-dotted-close"))return o=n.getAttribute("data-ctrl-n-dotted-close"),void this.minimize(o);if(n.hasAttribute("data-ctrl-n-dotted-open"))return o=n.getAttribute("data-ctrl-n-dotted-open"),void this.maximize(o);n=n.parentNode}t.events.publish("canvas-click",[this,{event:i}])}},t.prototype._mouseDownHandler=function(e,i,n){var o=this;t.HIDE_EDIT_FORM_ON_PAN&&this.editUI.hide(),t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide();var r=this.getViewBox(),s=this.getScale(),a=t._getClientTouchesXY(i,0),c=t._getClientTouchesXY(i,1),l={diffX:0,diffY:0,x0:a.x,y0:a.y,type:this.config.enablePan?"pan":"pan-not-enabled",viewBoxLeft:r[0],viewBoxTop:r[1]};i.touches&&i.touches.length>1&&(l.type="pinch",l.dist=Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y)));var h=0,d=function(f){var u=t._getClientTouchesXY(f,0);if(l&&l.type=="pan"){o._hideBeforeAnimation(),l.diffX=u.x-l.x0,l.diffY=u.y-l.y0,h=Math.max(Math.abs(l.diffY),Math.abs(l.diffX));var x=-l.diffY/s+l.viewBoxTop,S=-l.diffX/s+l.viewBoxLeft;h>3&&(o._hideBeforeAnimation(),o._changeCursorOnPanStart(r,s,f),o._move(x,S,r))}else if(l&&l.type=="pinch"){var y=t._getClientTouchesXY(f,1),v=Math.sqrt((u.x-y.x)*(u.x-y.x)+(u.y-y.y)*(u.y-y.y)),E=1+(v-l.dist)/(l.dist/100)/100;l.dist=v;var b=t._pinchMiddlePointInPercent(o.element,o.width(),o.height(),f);o.zoom(E,b)}},p=function(f){h<3&&l.type!="pinch"&&(f.touches==null||f.touches.length<=1)?o._clickHandler(e,f):h>10&&(l.type=="pan"&&o.config.sticky?(o.getScale(),setTimeout(function(){t._moveToBoundaryArea(e,o.getViewBox(),o.response.boundary,function(){o._draw(!0,t.action.pan)})},0)):l.type!="pan"||o.config.sticky||setTimeout(function(){o._draw(!0,t.action.pan)},0)),l.type=="pan"&&o._changeCursorOnPanEnd(),l=null,e.removeEventListener(n.move,d),e.removeEventListener(n.up,p),n.leave&&e.removeEventListener(n.leave,p),n.touchstart&&e.removeEventListener(n.touchstart,p)};e.addEventListener(n.move,d,{passive:!0}),e.addEventListener(n.up,p),n.leave&&e.addEventListener(n.leave,p),n.touchstart&&e.addEventListener(n.touchstart,p,{passive:!0})},t.prototype._changeCursorOnPanStart=function(e,i,n){var o=this.getPointerElement();if(o){var r=t._getOffsetXY(this.element,n),s=r.x/i+e[0]-16/i,a=r.y/i+e[1]-16/i;o.style.display="inherit",o.setAttribute("transform","matrix(0,0,0,0,"+s+","+a+")"),t.animate(o,{transform:[0,0,0,0,s,a],opacity:0},{transform:[1/i,0,0,1/i,s,a],opacity:1},300,t.anim.outBack)}else this.element.style.cursor="move"},t.prototype._changeCursorOnPanEnd=function(){var e=this.getPointerElement();e?e.style.display="none":this.element.style.cursor="initial"},t.prototype._globalMouseDownHandler=function(e,i){var n={move:"mousemove",up:"mouseup",leave:"mouseleave"};i.type.indexOf("touch")!=-1&&(i.touches.length==1?this._touch={x:i.touches[0].clientX,y:i.touches[0].clientY}:this._touch=null,n={move:"touchmove",up:"touchend",touchstart:"touchstart"});for(var o=i.target;o!=e&&!o.hasAttribute(t.attr.control_node_menu_id)&&!o.hasAttribute(t.attr.control_node_circle_menu_id);){if(o.hasAttribute(t.attr.node_id)&&(this.config.enableDragDrop||this.config.movable)){if(i.touches==null||i.touches.length<=1)return void this._nodeMouseDownHandler(o,i,n)}else if(o.hasAttribute(t.attr.control_node_circle_menu_name)&&(i.stopPropagation(),i.touches==null||i.touches.length<=1))return void this._nodeCircleNodeMenuItemMouseDownHandler(e,o,i,n);o=o.parentNode}i.stopPropagation(),this._mouseDownHandler(e,i,n)},t.prototype._globalContextHandler=function(e,i){for(var n=i.target;n!=e;){if(n.hasAttribute(t.attr.node_id)){var o=n.getAttribute(t.attr.node_id),r=this.getNode(o);return void this._nodeContextHandler(r.id,i)}n=n.parentNode}},t.prototype._nodeContextHandler=function(e,i){i.preventDefault(),t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var n=this.get(e),o=null;if(n!=null&&Array.isArray(n.tags))for(var r=0;r<n.tags.length;r++){var s=n.tags[r];this.config.tags[s]&&this.config.tags[s].nodeContextMenu&&(o=this.config.tags[s].nodeContextMenu)}var a=this.element.getBoundingClientRect(),c=i.clientX-a.left,l=i.clientY-a.top;this.nodeContextMenuUI.show(c,l,e,null,o)},t.prototype._globalDbClickHandler=function(e,i){for(var n=i.target;n!=e;){if(n.hasAttribute(t.attr.node_id)){var o=n.getAttribute(t.attr.node_id),r=this.getNode(o);return void this._nodeDbClickHandler(r.id,i)}n=n.parentNode}},t.prototype._mouseScrollHandler=function(e,i){this.__mouseScrollHandler(this.getSvg(),i)},t.prototype.__mouseScrollHandler=function(e,i){if(i.ctrlKey){if(this.config.mouseScrool==t.action.zoom)return}else if(this.config.mouseScrool==t.action.ctrlZoom||this.config.mouseScrool!=t.action.zoom)return;if(i.preventDefault(),!navigator.hardwareConcurrency||navigator.hardwareConcurrency<9){let p=i.deltaY/1e3;p=Math.abs(p)<.1?.1*i.deltaY/Math.abs(i.deltaY):p;var n=t._centerPointInPercent(e,i.clientX,i.clientY);this.zoom(1-p,n)}else{var o=this,r=!1,s=this.config.zoom.speed,a=this.config.zoom.smooth,c=0,l=this.getScale();n=t._centerPointInPercent(e,i.clientX,i.clientY);var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p){setTimeout(p,20)};i.preventDefault();var d=i.delta||i.wheelDelta;d===void 0&&(d=-i.detail),d=Math.max(-1,Math.min(1,d)),c+=-d*s,r||(function p(){r=!0;var f=(c-l)/a;f>0?f++:f--,l+=f,o.zoom(1-f/12/50,n),parseInt(l)==parseInt(c)?r=!1:h(p)})()}},t.prototype._nodeCircleNodeMenuItemMouseDownHandler=function(e,i,n,o){var r=i.parentNode.getAttribute(t.attr.control_node_circle_menu_wrraper_id),s=i.getAttribute(t.attr.control_node_circle_menu_name),a=this.nodeCircleMenuUI._menu[s];if(a.draggable){var c=this,l=t._getClientXY(n),h=this.getNode(r);i._dragEventFired=!1;var d=c.getScale(),p=null,f=null;document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var u=this.getSvg(),x={x:l.x,y:l.y},S=i.cloneNode(!0);u.insertBefore(S,u.firstChild);var y=t._getTransform(S),v=y[4],E=y[5],b=(function(C){for(;C&&!C.hasAttribute(t.attr.control_node_circle_menu_wrraper_id);)C=C.parentNode;if(C){var R=t._getTransform(C);return{x:R[4],y:R[5]}}console.error("cannot find parent"+t.attr.control_node_circle_menu_wrraper_id)})(i);S.setAttribute("transform","matrix(1,0,0,1,"+(v+b.x)+","+(E+b.y)+")"),S.style.opacity=.7;var I=function(C,R){if(C!=null){R.classList.remove("boc-drag-over");for(var O=t.getStParentNodes(c.getNode(p)),z=0;z<O.length;z++){var F=c.getNodeElement(O[z].id);F&&(F.style.opacity=1)}}},w=function(C){if(x){var R=t._getClientXY(C),O=C.target;t.isMobile()&&(O=document.elementFromPoint(R.x,R.y)),R.x+=b.x*d,R.y+=b.y*d;var z=t._getOffsetXY(c.element,C),F={left:c.width()-(z.x+c.config.padding)<0,right:z.x-c.config.padding<0,up:c.height()-(z.y+c.config.padding)<0,down:z.y-c.config.padding<0};if(F.left||F.right||F.up||F.down){u.classList&&(u.classList.remove("boc-cursor-grab"),u.classList.add("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy"));var V=y[4],X=y[5],W=x.x,Z=x.y,Y=R.x,q=R.y;c.moveStart(F,function(J){y[4]=V+J.x,y[5]=X+J.y,x.x=W-J.xWithoutScale,x.y=Z-J.yWithoutScale,R.x=Y-J.xWithoutScale,R.y=q-J.yWithoutScale,S.setAttribute("transform","matrix("+y.toString()+")")})}else{for(c.moveEnd(),u.classList&&(u.classList.add("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy")),I(p,f),p=null,f=null;O!=null&&O!=u;){if(O.hasAttribute&&O.hasAttribute(t.attr.node_id)){var j=O.getAttribute(t.attr.node_id);p=j,f=O;break}O=O.parentNode}if(p!=null){f.classList.add("boc-drag-over");for(var K=c.getNode(p),ie=t.getStParentNodes(K),ne=0;ne<ie.length;ne++){var oe=c.getNodeElement(ie[ne].id);oe&&(oe.style.opacity=.1)}u.classList.remove("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.add("boc-cursor-copy"),u.classList.remove("boc-cursor-nodrop")}var me=(R.x-x.x)/d,$=(R.y-x.y)/d;y[4]=v+me,y[5]=E+$,!i._dragEventFired&&(Math.abs(R.x-x.x)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(R.y-x.y)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(c._gragStartedId=i.parentNode.getAttribute(t.attr.control_node_circle_menu_wrraper_id),t.events.publish("drag",[c.nodeCircleMenuUI,{from:j,menuItem:a,menuItemName:s}])===!1&&M(),i._dragEventFired=!0),S.setAttribute("transform","matrix("+y.toString()+")")}}},M=function(C){if(c.moveEnd(),u.classList&&(u.classList.remove("boc-cursor-grab"),u.classList.remove("boc-cursor-move"),u.classList.remove("boc-cursor-nodrop"),u.classList.remove("boc-cursor-copy")),u.removeEventListener(o.move,w),u.removeEventListener(o.up,M),o.leave&&u.removeEventListener(o.leave,M),h.id==p||p==null)return u.removeChild(S),c._gragStartedId=null,void(i._dragEventFired&&t.events.publish("drop",[c.nodeCircleMenuUI,{from:h.id,menuItemName:s,menuItem:a,event:C}]));var R=c.getNode(p);t.events.publish("drop",[c.nodeCircleMenuUI,{from:h.id,to:R.id,menuItem:a,menuItemName:s,event:C}]),I(p,f),u.removeChild(S),c._gragStartedId=null};u.addEventListener(o.move,w),u.addEventListener(o.up,M),o.leave&&u.addEventListener(o.leave,M)}else this._clickHandler(e,n)},t.prototype._nodeMouseDownHandler=function(e,i,n){var o=e.getAttribute(t.attr.node_id),r=this.getNode(o);this.config.movable&&!t.getRootOf(r).stParent?this._movableHandler(e,i,n):this.config.enableDragDrop&&this._dragDropHandler(e,i,n)},t.prototype._movableHandler=function(e,i,n){var o=this,r=e.getAttribute(t.attr.node_id),s=[],a=function(Y,q){if(Array.isArray(Y))for(var j=0;j<Y.length;j++)a(Y[j],q);else{for(q.push(Y.id),j=0;j<Y.stChildren.length;j++)a(Y.stChildren[j],q);for(j=0;j<Y.children.length;j++)a(Y.children[j],q)}},c=function(Y,q){if(Array.isArray(Y))for(var j=0;j<Y.length;j++)a(Y[j],q);else{for(q.push(Y.id),j=0;j<Y.stChildrenIds.length;j++)c(o.getNode(Y.stChildrenIds[j]),q);for(j=0;j<Y.childrenIds.length;j++)c(o.getNode(Y.childrenIds[j]),q)}},l=this.getNode(r);a(l,s);for(var h=this.getSvg(),d=t._getClientXY(i),p=[],f=[],u=[],x=[],S=[],y=[],v=[],E=[],b=0;b<s.length;b++){var I=this.getNode(s[b]);p.push(I),u.push({x:I.x,y:I.y});var w=this.getNodeElement(s[b]);if(w){S.push(w);var M=t._getTransform(w);x.push({x:M[4],y:M[5]}),f.push(M);var C=this.element.querySelector(`[data-ctrl-ec-id="${s[b]}"]`);if(C){y.push(C);var R=t._getTransform(C);v.push(R),E.push({x:R[4],y:R[5]})}else y.push(null),v.push(null),E.push(null);if(this.config.movable==t.movable.node)break}}e._dragEventFired=!1;var O=null,z=null;document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none";var F={x:d.x,y:d.y},V=o.getScale(),X=function(Y,q){if(Y!=null){q.classList.remove("boc-drag-over");for(var j=o.getNode(O),K=t.getStParentNodes(j),ie=0;ie<K.length;ie++){var ne=o.getNodeElement(K[ie].id);ne&&(ne.style.opacity=1)}}},W=function(Y){if(Y.touches!=null&&Y.touches.length>1)Z(Y);else if(F){var q=t._getClientXY(Y),j=Y.target;t.isMobile()&&(j=document.elementFromPoint(q.x,q.y));var K=t._getOffsetXY(o.element,Y),ie={left:o.width()-(K.x+o.config.padding)<0,right:K.x-o.config.padding<0,up:o.height()-(K.y+o.config.padding)<0,down:K.y-o.config.padding<0};if(ie.left||ie.right||ie.up||ie.down){h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.add("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy"));for(var ne=[],oe=[],me=[],$=[],J=0;J<f.length;J++)ne.push(f[J][4]),oe.push(f[J][5]),v[J]?(me.push(v[J][4]),$.push(v[J][5])):(me.push(null),$.push(null));var re=F.x,ue=F.y,be=q.x,Ve=q.y;o.moveStart(ie,function(Q){for(var he=0;he<f.length;he++){var Ee=ne[he],fe=oe[he],Ce=me[he],Xe=$[he];f[he][4]=Ee+Q.x,f[he][5]=fe+Q.y,F.x=re-Q.xWithoutScale,F.y=ue-Q.yWithoutScale,q.x=be-Q.xWithoutScale,q.y=Ve-Q.yWithoutScale,p[he].x=Ee+Q.x,p[he].y=fe+Q.y,p[he].movex=Q.x,p[he].movey=Q.y,v[he]&&(v[he][4]=Ce+Q.x,v[he][5]=Xe+Q.y);for(var Se=t.ui.link(p[he],o,V,o.response.bordersByRootIdAndLevel,o.nodes,t.action.update,!0),ee=0;ee<Se.length;ee++){var _e=Se[ee];(De=o.element.querySelector(`[data-l-id="[${_e.id}][${_e.childId}]"]`))&&(De.innerHTML=_e.html)}if(p[he].parent)for(Se=t.ui.link(p[he].parent,o,V,o.response.bordersByRootIdAndLevel,o.nodes,t.action.update,!0),ee=0;ee<Se.length;ee++){var De;_e=Se[ee],(De=o.element.querySelector(`[data-l-id="[${_e.id}][${_e.childId}]"]`))&&(De.innerHTML=_e.html)}S[he].setAttribute("transform","matrix("+f[he].toString()+")"),y[he]&&y[he].setAttribute("transform","matrix("+v[he].toString()+")")}})}else{if(o.moveEnd(),h.classList&&(h.classList.add("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy")),X(O,z),O=null,z=null,o.config.enableDragDrop)for(;j!=null&&j!=h;){if(j.hasAttribute&&j.hasAttribute(t.attr.node_id)){var Le=j.getAttribute(t.attr.node_id);if(o._gragStartedId&&Le!=o._gragStartedId){O=Le,z=j;break}}j=j.parentNode}if(O!=null){z.classList.add("boc-drag-over");for(var Re=o.getNode(O),ye=t.getStParentNodes(Re),ce=0;ce<ye.length;ce++){var we=o.getNodeElement(ye[ce].id);we&&(we.style.opacity=.1)}!o.canUpdateLink(p[0].id,O)&&h.classList?(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-copy"),h.classList.add("boc-cursor-nodrop")):h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.add("boc-cursor-copy"),h.classList.remove("boc-cursor-nodrop"))}var Me=(q.x-F.x)/V,Be=(q.y-F.y)/V;for(J=0;J<f.length;J++){f[J][4]=x[J].x+Me,f[J][5]=x[J].y+Be,v[J]&&(v[J][4]=E[J].x+Me,v[J][5]=E[J].y+Be),p[J].x=u[J].x+Me,p[J].y=u[J].y+Be;var Te=t.ui.link(p[J],o,V,o.response.bordersByRootIdAndLevel,o.nodes,t.action.update,!0);for(ce=0;ce<Te.length;ce++){var Oe=Te[ce];(Ie=o.element.querySelector(`[data-l-id="[${Oe.id}][${Oe.childId}]"]`))&&(Ie.innerHTML=Oe.html)}}if(l.parent)if(o.config.movable==t.movable.detachTree)(Ie=o.element.querySelector(`[data-l-id="[${l.parent.id}][${l.id}]"]`))&&Ie.parentElement.removeChild(Ie);else for(Te=t.ui.link(l.parent,o,V,o.response.bordersByRootIdAndLevel,o.nodes,t.action.update,!0),ce=0;ce<Te.length;ce++){var Ie;Oe=Te[ce],(Ie=o.element.querySelector(`[data-l-id="[${Oe.id}][${Oe.childId}]"]`))&&(Ie.innerHTML=Oe.html)}if(!e._dragEventFired&&(Math.abs(q.x-F.x)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(q.y-F.y)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE)){if(o._gragStartedId=s[0],t.events.publish("drag",[o,r,Y,s])===!1&&Z(),o.config.enableDragDrop)for(J=0;J<S.length;J++)h.insertBefore(S[J],h.firstChild);e._dragEventFired=!0}for(J=0;J<f.length;J++)S[J].setAttribute("transform","matrix("+f[J].toString()+")"),y[J]&&y[J].setAttribute("transform","matrix("+v[J].toString()+")")}}},Z=function(Y){!e._dragEventFired&&(Y.touches==null||Y.touches.length<=1)&&o._clickHandler(o.getSvg(),i);for(var q=0;q<p.length;q++)p[q].x=u[q].x,p[q].y=u[q].y;if(o.moveEnd(),h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy")),h.removeEventListener(n.move,W),h.removeEventListener(n.up,Z),n.leave&&h.removeEventListener(n.leave,Z),p[0].id!=O&&O!=null){var j=o.getNode(O);if((K=t.events.publish("drop",[o,p[0].id,j.id,S[0],Y]))===!1)return X(O,z),void(o._gragStartedId=null);o.canUpdateLink(p[0].id,O)?(($=o.get(p[0].id)).pid=O,$.stpid=null,o.updateNode($,null,!0)):X(O,z),o._gragStartedId=null}else{if(e._dragEventFired){var K=t.events.publish("drop",[o,p[0].id,void 0,S[0],Y]);if(o.config.movable&&K!==!1)if(o.config.movable==t.movable.detachTree){var ie=t._getTransform(o.getNodeElement(l.id));($=o.get(l.id)).pid=null,$.stpid=null,o.updateNode($,null,!0)}else{var ne=[];o.config.movable==t.movable.node?ne.push(l.id):c(l,ne);var oe=(ie=t._getTransform(o.getNodeElement(l.id)))[4]-l.x,me=ie[5]-l.y;for(q=0;q<ne.length;q++){var $;($=o.get(ne[q]))&&($.movex!=null?$.movex+=oe:$.movex=oe,$.movey!=null?$.movey+=me:$.movey=me,o.update($))}o._ai.setContext(),t.events.publish("updated",[o]),o.draw(t.action.update,{dragNodeIdList:ne})}}o._gragStartedId=null}};h.addEventListener(n.move,W),h.addEventListener(n.up,Z),n.leave&&h.addEventListener(n.leave,Z)},t.prototype._dragDropHandler=function(e,i,n){var o=t._getClientXY(i),r=e.getAttribute(t.attr.node_id),s=this.getNode(r);e._dragEventFired=!1;var a=null,c=null;this.element.style.mozUserSelect=this.element.style.webkitUserSelect=this.element.style.userSelect="none";var l=this,h=this.getSvg(),d={x:o.x,y:o.y},p=t._getTransform(e),f=p[4],u=p[5],x=l.getScale(),S=e.cloneNode(!0);S.setAttribute("data-n-id","draging"),h.insertBefore(S,h.firstChild),S.style.opacity=.7;var y=function(b,I){if(b!=null){I.classList.remove("boc-drag-over");for(var w=l.getNode(a),M=t.getStParentNodes(w),C=0;C<M.length;C++){var R=l.getNodeElement(M[C].id);R&&(R.style.opacity=1)}}},v=function(b){if(b.touches!=null&&b.touches.length>1)E(b);else if(d){var I=t._getClientXY(b),w=b.target;t.isMobile()&&(w=document.elementFromPoint(I.x,I.y));var M=t._getOffsetXY(l.element,b),C={left:l.width()-(M.x+l.config.padding)<0,right:M.x-l.config.padding<0,up:l.height()-(M.y+l.config.padding)<0,down:M.y-l.config.padding<0};if(C.left||C.right||C.up||C.down){h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.add("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy"));var R=p[4],O=p[5],z=d.x,F=d.y,V=I.x,X=I.y;l.moveStart(C,function(ne){p[4]=R+ne.x,p[5]=O+ne.y,d.x=z-ne.xWithoutScale,d.y=F-ne.yWithoutScale,I.x=V-ne.xWithoutScale,I.y=X-ne.yWithoutScale,S.setAttribute("transform","matrix("+p.toString()+")")})}else{if(l.moveEnd(),h.classList&&(h.classList.add("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy")),y(a,c),a=null,c=null,l.config.enableDragDrop)for(;w!=null&&w!=h;){if(w.hasAttribute&&w.hasAttribute(t.attr.node_id)){var W=w.getAttribute(t.attr.node_id);if(l._gragStartedId&&W!=l._gragStartedId){a=W,c=w;break}}w=w.parentNode}if(a=="draging"&&(a=null,c=null),a!=null){c.classList.add("boc-drag-over");for(var Z=l.getNode(a),Y=t.getStParentNodes(Z),q=0;q<Y.length;q++){var j=l.getNodeElement(Y[q].id);j&&(j.style.opacity=.1)}!l.canUpdateLink(s.id,a)&&h.classList?(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-copy"),h.classList.add("boc-cursor-nodrop")):h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.add("boc-cursor-copy"),h.classList.remove("boc-cursor-nodrop"))}var K=(I.x-d.x)/x,ie=(I.y-d.y)/x;p[4]=f+K,p[5]=u+ie,!e._dragEventFired&&(Math.abs(I.x-d.x)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE||Math.abs(I.y-d.y)>t.FIRE_DRAG_NOT_CLICK_IF_MOVE)&&(l._gragStartedId=W,t.events.publish("drag",[l,W,b])===!1&&E(),e._dragEventFired=!0),S.setAttribute("transform","matrix("+p.toString()+")")}}},E=function(b){if(!e._dragEventFired&&(b.touches==null||b.touches.length<=1)&&l._clickHandler(l.getSvg(),b),l.moveEnd(),h.classList&&(h.classList.remove("boc-cursor-grab"),h.classList.remove("boc-cursor-move"),h.classList.remove("boc-cursor-nodrop"),h.classList.remove("boc-cursor-copy")),h.removeEventListener(n.move,v),h.removeEventListener(n.up,E),n.leave&&h.removeEventListener(n.leave,E),s.id==a||a==null)return e._dragEventFired&&t.events.publish("drop",[l,s.id,void 0,S,b]),h.removeChild(S),void(l._gragStartedId=null);var I=l.getNode(a);if(t.events.publish("drop",[l,s.id,I.id,S,b])===!1)return y(a,c),h.removeChild(S),void(l._gragStartedId=null);if(l.canUpdateLink(s.id,a)){var w=l.get(s.id);w.pid=a,w.stpid=null,w.movex!=null&&(w.movex=void 0),w.movey!=null&&(w.movey=void 0),l.updateNode(w,null,!0)}else h.removeChild(S),y(a,c);l._gragStartedId=null};h.addEventListener(n.move,v),h.addEventListener(n.up,E),n.leave&&h.addEventListener(n.leave,E)},t.prototype._resizeHandler=function(e,i){if(this.isVisible&&e!=0&&i!=0){var n=this.getViewBox();if(n){var o=e/(n=n.slice(0))[2],r=i/n[3];Math.abs(this._lastSize.width-e)>Math.abs(this._lastSize.height-i)?n[3]=i/o:n[2]=e/r,this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),this.setViewBox(n),this.xScrollUI.create(e),this.yScrollUI.create(i),this._draw(!0,t.action.resize)}}},t.prototype._nodeDbClickHandler=function(e,i){if(t.events.publish("dbclick",[this,this.get(e)])===!1)return!1;this._commonClickHandler(e,i,this.config.nodeMouseDbClick)},t.prototype._nodeClickHandler=function(e,i){if(this.powerPointPreviewUI.isVisible())this.powerPointPreviewUI._updateSlectedPage(e),this.ripple(e,i.clientX,i.clientY);else if(this.pdfPreviewUI.isVisible())this.pdfPreviewUI._updateSlectedPage(e),this.ripple(e,i.clientX,i.clientY);else if(this.svgPreviewUI.isVisible())this.svgPreviewUI._updateSlectedPage(e),this.ripple(e,i.clientX,i.clientY);else if(this.pngPreviewUI.isVisible())this.pngPreviewUI._updateSlectedPage(e),this.ripple(e,i.clientX,i.clientY);else{var n=this.getNodeElement(e);if(n&&n._dragEventFired)return void(n._dragEventFired=!1);if(t.events.publish("click",[this,{node:this.getNode(e),event:i}])===!1)return!1;this._commonClickHandler(e,i,this.config.nodeMouseClick)}},t.prototype._nodeCircleMenuItemClickHandler=function(e,i){var n=e.parentNode.getAttribute(t.attr.control_node_circle_menu_wrraper_id),o=e.getAttribute(t.attr.control_node_circle_menu_name),r=this.nodeCircleMenuUI._menu[o];t.events.publish("click",[this.nodeCircleMenuUI,{nodeId:n,menuItemName:o,menuItem:r,event:i}])},t.prototype._nodeCircleMenuClickHandler=function(e){if(t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.menuUI.hide(),this.nodeContextMenuUI.isVisible())this.nodeContextMenuUI.hide();else{var i=this.getNode(e),n=null;if(Array.isArray(i.tags))for(var o=0;o<i.tags.length;o++){var r=i.tags[o];this.config.tags[r]&&this.config.tags[r].nodeCircleMenu&&(n=this.config.tags[r].nodeCircleMenu)}this.nodeCircleMenuUI.show(e,n)}},t.prototype._commonClickHandler=function(e,i,n){var o;t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide(),n==t.action.expandCollapse&&this.toggleExpandCollapse(e,i),n==t.action.edit&&(o=this.getNode(e))&&(this.editUI.show(o.id),this.ripple(o.id,i.clientX,i.clientY)),n==t.action.details&&(o=this.getNode(e))&&(this.editUI.show(o.id,!0),this.ripple(o.id,i.clientX,i.clientY))},t.prototype._menuHandlerMouseDownHandler=function(e,i){i.stopPropagation(),i.preventDefault()},t.prototype._nodeMenuClickHandler=function(e,i,n){t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&this.searchUI.hide(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.hide(),this.nodeCircleMenuUI.hide();var o=this.getNode(e),r=null;if(Array.isArray(o.tags))for(var s=0;s<o.tags.length;s++){var a=o.tags[s];this.config.tags[a]&&this.config.tags[a].nodeMenu&&(r=this.config.tags[a].nodeMenu)}this.nodeMenuUI.showStickIn(i,e,null,r)},t.prototype._menuClickHandler=function(e,i){i.stopPropagation(),i.preventDefault(),this.nodeMenuUI.hide(),this.nodeContextMenuUI.hide(),this.menuUI.show(e.offsetLeft,e.offsetTop)},t.prototype._lonelyButtonHandler=function(){var e={id:this.generateId()};this.addNode(e,null,!0)!==!1&&this.center(e.id)},t.prototype.toggleExpandCollapse=function(e,i){var n=this.getNode(e),o=this.getCollapsedIds(n);if(o.length){if(t.events.publish("expcollclick",[this,!1,e,o])===!1)return!1;this.expand(e,o,!1)}else{if(t.events.publish("expcollclick",[this,!0,e,n.childrenIds])===!1)return!1;this.collapse(e,n.childrenIds,!1)}i&&this.ripple(n.id,i.clientX,i.clientY)},t.prototype._move=function(e,i,n){n[0]=i,n[1]=e,this.setViewBox(n),this.xScrollUI.setPosition(),this.yScrollUI.setPosition()},t.prototype.moveStart=function(e,i,n,o){if(e){if(!this._moveInterval){var r=this,s=this.getViewBox().slice(0),a=this.getScale(),c=0,l=0,h=1;t.isNEU(n)&&(n=t.anim.inSin),t.isNEU(o)&&(o=3e3),this._moveInterval=setInterval(function(){var d={x:0,y:0,xWithoutScale:0,yWithoutScale:0};e.left?(c++,d.x=c*t.MOVE_STEP/a,d.xWithoutScale=c*t.MOVE_STEP):e.right&&(c++,d.x=-c*t.MOVE_STEP/a,d.xWithoutScale=-c*t.MOVE_STEP),e.up?(l++,d.y=l*t.MOVE_STEP/a,d.yWithoutScale=l*t.MOVE_STEP):e.down&&(l++,d.y=-l*t.MOVE_STEP/a,d.yWithoutScale=-l*t.MOVE_STEP);var p=n((10*h-10)/o);d.x=d.x*p,d.xWithoutScale=d.xWithoutScale*p,d.y=d.y*p,d.yWithoutScale=d.yWithoutScale*p,r.setViewBox([s[0]+d.x,s[1]+d.y,s[2],s[3]]),i&&i(d),h+=1},10)}}else console.error("movePosition parameter not defined")},t.prototype.moveEnd=function(){this._moveInterval&&(clearInterval(this._moveInterval),this._moveInterval=null)},t===void 0&&(t={}),t.node=function(e,i,n,o){this.templateName=o,this.id=e,this.pid=i,this.children=[],this.childrenIds=[],this.parent=null,this.stpid=null,this.stParent=null,this.stChildren=[],this.stChildrenIds=[],this.tags=n,this.tags||(this.tags=[])},t.searchUI=function(){this.lastSearch=[],this._searchAfterEnterPress=!1,this._event_id=t._guid(),this.instance=null},t.searchUI.prototype.init=function(e){this.instance=e,this.obj=this.instance,this._initSearchFields();var i=this,n=this.instance.config.padding-10,o=this.instance.config.padding-10,r=this.instance.getMenuButton();if(r){var s=r.getBoundingClientRect(),a=this.instance.getSvg().getBoundingClientRect();n=a.right-s.left+10,o=s.top-a.top-10}var c=document.createElement("div");c.classList.add("boc-search"),c.style.right=n+"px",c.style.top=o+"px";var l=t.elements.textbox({},{label:t.SEARCH_PLACEHOLDER,btn:"X"},"320px");c.innerHTML+=l.html,this.xBtn=c.querySelector("[data-input-btn]"),this.xBtn.style.display="none",this.searchTableWrapper=document.createElement("div"),c.appendChild(this.searchTableWrapper);var h=this.instance.getSvg().nextSibling;this.instance.element.insertBefore(c,h),t.input.init(c),this.input=document.getElementById(l.id),this.xBtn.addEventListener("click",function(f){f.preventDefault(),i.hide()}),this.input.addEventListener("keypress",function(f){f.key=="Enter"&&f.preventDefault()}),this.input.addEventListener("focus",function(f){i.xBtn.style.display="",i._search()}),this.input.addEventListener("blur",function(f){t.isNEU(i.input.value)&&t.SEARCH_HELP_SYMBOL!=i.input.value&&(i.xBtn.style.display="none")}),this.input.addEventListener("keydown",function(f){(f.key=="ArrowDown"||f.key=="ArrowUp")&&f.preventDefault()}),this.input.addEventListener("keyup",function(f){f.key=="ArrowDown"?d():f.key=="ArrowUp"?p():f.key=="Enter"?i._enterHandler():f.key=="Escape"?i.hide():this.value.length>=t.MINIMUM_SYMBOLS_IN_SEARCH_INPUT&&i._search()});var d=function(){var f=i.instance.element.querySelectorAll("[data-search-item-id]"),u=i.instance.element.querySelector('[data-selected="yes"]');u==null&&f.length>0?f[0].setAttribute("data-selected","yes"):f.length>0&&u.nextSibling&&u.nextSibling.setAttribute&&(u.removeAttribute("data-selected"),u.nextSibling.setAttribute("data-selected","yes"))},p=function(){var f=i.instance.element.querySelectorAll("[data-search-item-id]"),u=i.instance.element.querySelector('[data-selected="yes"]');u==null&&f.length>0?f[f.length-1].setAttribute("data-selected","yes"):f.length>0&&u.previousSibling&&u.previousSibling.setAttribute&&(u.removeAttribute("data-selected"),u.previousSibling.setAttribute("data-selected","yes"))}},t.searchUI.prototype._enterHandler=function(){var e=this.instance.element.querySelector('[data-selected="yes"]');if(e){if(e.hasAttribute("data-search-item-id")){var i=e.getAttribute("data-search-item-id");if(this.input.value!=t.SEARCH_HELP_SYMBOL){var n=t.events.publish("",[this.instance,i]),o=t.events.publish("searchclick",[this,{nodeId:i}]);n===!1&&(o=!1),o!=0&&this.instance.center(i)}else this.input.value=i+" ",this.searchTableWrapper.innerHTML=""}}else this._searchAfterEnterPress=!0,this.__search(),this.searchTableWrapper.innerHTML="",this.instance.draw()},t.searchUI.prototype._initSearchFields=function(){if(this.instance.config.searchFields==null){this._searchFields=[];for(var e=0;e<this.instance.response.allFields.length;e++){var i=this.instance.response.allFields[e];i=="tags"||t._fieldIsImg(this.instance.config,i)||this._searchFields.indexOf(i)==-1&&this._searchFields.push(i)}}else this._searchFields=this.instance.config.searchFields;if(this.instance.config.searchFieldsAbbreviation==null)for(this.searchFieldsAbbreviation={},e=0;e<this._searchFields.length;e++){for(var n=this._searchFields[e],o=0,r=n.slice(0,o+1).toLowerCase();this.searchFieldsAbbreviation[r];)o++,r=n.slice(0,o+1).toLowerCase();this.searchFieldsAbbreviation[r]=n}else this.searchFieldsAbbreviation=this.instance.config.searchFieldsAbbreviation;this._searchFieldsAbbreviation=this.searchFieldsAbbreviation},t.searchUI.prototype.find=function(e){this.input&&(this.input.value=e,document.activeElement==this.input?this._search(e):this.input.focus())},t.searchUI.prototype.addMatchTag=function(e){if(this._searchAfterEnterPress){for(var i=0;i<this.lastSearch.length;i++)if(this.lastSearch[i].id==e)return!0;return!1}return null},t.searchUI.prototype.__search=function(){this.lastSearch=t._search.search(this.instance.config.nodes,this.input.value,this._searchFields,this._searchFields,this.instance.config.searchDisplayField,this.instance.config.searchFieldsWeight,this.searchFieldsAbbreviation)},t.searchUI.prototype._search=function(){var e,i=this;if(this._searchAfterEnterPress=!1,this.input.value==t.SEARCH_HELP_SYMBOL)e=this.helpView();else{this.__search();var n=t._getFistImgField(this.instance.config);e=`<table border="0" cellspacing="0" cellpadding="0">
                        <tbody>
                            ${(function(){for(var s="",a=0;a<i.lastSearch.length&&!(a>=t.SEARCH_RESULT_LIMIT);a++){var c=i.lastSearch[a],l="";if(n){var h=i.instance._get(c.id);typeof n=="function"?l=n(i.instance,i.instance.getNode(c.id),h):h[n]&&(l=h[n])}var d="",p="";i.instance.config.searchDisplayField==c.__searchField?d=c.__searchMarks:i.instance.config.searchDisplayField?(d=c[i.instance.config.searchDisplayField],t.isNEU(d)&&(d=""),p=c.__searchMarks):d=c.__searchMarks;var f={img:l,nodeId:c.id,first:d,second:p,searchItem:c,html:t.searchUI.createItem(l,c.id,d,p)};t.events.publish("add-item",[i,f]),s+=f.html}return s})()}  
                        </tbody>
                    </table>`}this.searchTableWrapper.innerHTML=e;for(var o=this.instance.element.querySelectorAll("[data-search-item-id]"),r=0;r<o.length;r++)o[r].addEventListener("click",function(){if(this.hasAttribute("data-search-item-id")){var s=this.getAttribute("data-search-item-id");if(i.input.value!=t.SEARCH_HELP_SYMBOL){var a=t.events.publish("searchclick",[i.instance,s]),c=t.events.publish("searchclick",[i,{nodeId:s}]);if(a===!1&&(c=!1),c!==!1){i.instance.center(this.getAttribute("data-search-item-id"));var l=i.instance.element.querySelector('[data-selected="yes"]');l&&l.removeAttribute("data-selected"),this.setAttribute("data-selected","yes"),i.input.focus()}}else i.input.value=s+" ",i.searchTableWrapper.innerHTML="",i.input.focus()}});t.events.publish("show-items",[this,{}])},t.searchUI.prototype.helpView=function(){var e='<table border="0" cellspacing="0" cellpadding="0">';for(var i in this.searchFieldsAbbreviation)e+=`<tr data-search-item-id="${i}" style="height: 50px;"><td class="boc-search-image-td" style="text-align: center;">${i}</td><td class="boc-search-text-td">${this.searchFieldsAbbreviation[i]}</td></tr>`;return e+="</table>"},t.searchUI.createItem=function(e,i,n,o){return n&&(n="<b>"+n+"</b>"),`<tr data-search-item-id="${i}">
                <td class="boc-search-image-td">
                    ${e=e?`<div class="boc-search-photo" style="background-image: url(${e})"></div>`:`<div class="boc-search-photo">${t.icon.user(32,32,"#aeaeae")}</div>`}
                </td>
                <td class="boc-search-text-td">${n} <br/>${o}</td>
            </tr>`},t.searchUI.prototype.hide=function(){if(t.events.publish("hide",[this])===!1)return!1;this._searchAfterEnterPress&&(this._searchAfterEnterPress=!1,this.instance.draw()),this.lastSearch=[],this.xBtn&&(this.xBtn.style.display="none"),this.searchTableWrapper&&(this.searchTableWrapper.innerHTML=""),this.input&&(this.input.value="",document.activeElement==this.input&&this.input.blur(),document.activeElement==this.xBtn&&t.input.blurHandler(this.input))},t.searchUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t===void 0&&(t={}),t.manager=function(e){this.config=e.config,this.layoutConfigs=e._layoutConfigs,this.visibleNodeIds=[],this.viewBox=null,this.action=null,this.actionParams=null,this.nodes={},this.oldNodes={},this.maxX=null,this.maxY=null,this.minX=null,this.minY=null,this.bordersByRootIdAndLevel=null,this.roots=null,this.state=null,this.vbIsInitializedFromState=!1,this.rootList=[],this.instance=e,this._fixAdjustForExport={x:0,y:0}},t.manager.prototype.read=function(e,i,n,o,r,s,a,c){var l=this;t.state._get(this.config.state,i,n,function(h){l.state=h,l.action=r,l.actionParams=s,r!=t.action.init||!l.state||s&&s.method&&s.method=="fit"?(l.viewBox=o,l.vbIsInitializedFromState=!1):(l.viewBox=l.state.vb,l.vbIsInitializedFromState=!0,Array.isArray(l.state.roots)&&(l.config.roots=l.state.roots));var d=l.maxX,p=l.maxY,f=l.minX,u=l.minY,x=l.bordersByRootIdAndLevel,S=l.roots,y=l.nodes;if(e){var v=t.manager._getResponse(i,n,l.visibleNodeIds,l.config,d,p,f,u,l.viewBox,S,l.action,l.actionParams,y,l.oldNodes,l.vbIsInitializedFromState);r!=t.action.exporting&&(l.maxX=d,l.maxY=p,l.minX=f,l.minY=u,l.roots=S,l.nodes=y,l.visibleNodeIds=v.visibleNodeIds),v.bordersByRootIdAndLevel=x,v.roots=S,v.adjustify={x:0,y:0},l.state&&(v.adjustify=l.state.adjustify),a(v)}else l.oldNodes=y||null,l._read(function(E){d=E.maxX,p=E.maxY,f=E.minX,u=E.minY,x=E.bordersByRootIdAndLevel,S=E.roots,y=E.nodes;var b=t.manager._getResponse(i,n,l.visibleNodeIds,l.config,d,p,f,u,l.viewBox,S,l.action,l.actionParams,y,l.oldNodes,l.vbIsInitializedFromState);b.notif=E.limit,b.roots=S,b.bordersByRootIdAndLevel=x,b.adjustify=E.adjustify,r!=t.action.exporting&&(l.maxX=d,l.maxY=p,l.minX=f,l.minY=u,l.roots=S,l.nodes=y,l.visibleNodeIds=b.visibleNodeIds,l.bordersByRootIdAndLevel=x,l.rootList=E.rootList),a(b)},c)})},t.manager.prototype._read=function(e,i){var n=this,o=t.manager._createNodes(this.instance);i(o);var r=o.nodes,s=o.roots,a=t.remote;a==null&&(a=t.local),a._setPositions(s,n.layoutConfigs,function(c){var l=t.manager._doNotChangePositionOfClickedNodeIfAny(s,r,n.action,n.actionParams,n.oldNodes,n.config.orientation);n.state&&n.action==t.action.init&&(l=n.state.adjustify),n.action==t.action.exporting?l=n._fixAdjustForExport:n._fixAdjustForExport=l;for(var h={minX:null,minY:null,maxX:null,maxY:null},d={},p=[],f=0;f<s.length;f++)t.manager._setMinMaxXYAdjustifyIterate(s[f],s[f],h,0,d,l,n.config.orientation,p);for(var u in p)for(var x in p[u]){var S=d[u][x],y=p[u][x];S.minX==null&&S.minY==null&&S.maxX==null&&S.maxY==null&&t._setMinMaxXY(y,S)}e({minX:h.minX,minY:h.minY,maxX:h.maxX,maxY:h.maxY,bordersByRootIdAndLevel:d,nodes:r,roots:s,rootList:o.rootList,limit:c,adjustify:l})},r)},t===void 0&&(t={}),t.manager._initDinamicNode=function(e,i,n){i&&(e.lcn=i),n&&(e.isAssistant=!0);var o=t.t(e.templateName);e.w=o&&o.size?o.size[0]:0,e.h=o&&o.size?o.size[1]:0,e.isSplit=e.templateName=="split",e.isMirror=e.templateName=="mirror",e.isSubLevel=e.templateName=="subLevel"},t.manager._setCollpasedProperty=function(e,i,n,o,r,s,a,c){if(e.collapsed==null&&i.collapse&&i.collapse.allChildren?e.collapsed=!0:e.collapsed==null&&(e.collapsed=!1),r==t.action.expand&&n.ids.indexOf(e.id)!=-1&&(e.collapsed=!1),r==t.action.collapse&&(n.expandIds||n.collapseIds)?n.expandIds&&n.expandIds.indexOf(e.id)!=-1?e.collapsed=!1:n.collapseIds&&n.collapseIds.indexOf(e.id)!=-1&&(e.collapsed=!0):r==t.action.collapse&&n.ids.indexOf(e.id)!=-1&&(e.collapsed=!0),r==t.action.expand&&n.ids=="all"&&(e.collapsed=!1),r!=t.action.exporting||t.isNEU(n.parentLevels)&&t.isNEU(n.childLevels)||n.id==null)r==t.action.exporting&&n.expandChildren&&(e.collapsed=!1);else if(!(n.id==null||t.isNEU(n.parentLevels)&&t.isNEU(n.childLevels))){var l=c[n.id];if(l==e)e.collapsed=!1;else{for(var h=!1,d=-1,p=!1,f=-1;l;){if(d++,l==e){h=!0;break}l=c[l.pid]}l=c[n.id];for(var u=c[e.id];u;){if(f++,u==l){p=!0;break}u=c[u.pid]}n.parentLevels!=null&&h&&d<=n.parentLevels||n.childLevels!=null&&p&&f<=n.childLevels||p&&n.expandChildren?e.collapsed=!1:e.collapsed=!0}}r==t.action.init&&a!=null?e.collapsed=!a.exp.has(e.id):r==t.action.init?e.tags.indexOf("left-partner")!=-1||e.tags.indexOf("right-partner")!=-1||e.tags.indexOf("partner")!=-1||e.parentPartner?e.collapsed=i.collapse&&s>=i.collapse.level&&o.indexOf(e.id)==-1:e.collapsed=i.collapse&&s>=i.collapse.level-1&&o.indexOf(e.id)==-1:r==t.action.centerNode||r==t.action.insert||r==t.action.expand||r==t.action.collapse?o.has(e.id)&&(e.collapsed=!1):r==t.action.update&&n&&n.changeRoots&&n.changeRoots.has(e.id)&&(e.collapsed=!1)},t.manager._initNode=function(e,i,n,o,r,s,a){var c=a.manager.config,l=a.manager.layoutConfigs,h=a.manager.action,d=a.manager.actionParams,p=a.manager.state,f=l[n||"base"];e.parent==null&&t.manager._setCollpasedProperty(e,f,d,r,h,o-1,p,i);for(var u=0;u<e.childrenIds.length;u++){var x=i[e.childrenIds[u]];if(t.manager._setCollpasedProperty(x,f,d,r,h,o,p,i),!x.collapsed){if(x.parent=e,x.ppid!=null){var S=i[x.ppid];S&&(x.parentPartner=S)}(x.tags.indexOf("left-partner")!=-1||x.tags.indexOf("right-partner")!=-1||x.tags.indexOf("partner")!=-1||x.parentPartner)&&s.indexOf(e.id)==-1&&s.push(e.id),e.children.push(x)}}if(h!=t.action.minimize||e.min?h==t.action.maximize&&e.min===!0?(d.all||d.id==e.id)&&(e.min=!1):h==t.action.exporting&&d.min===!1?e.min=!1:h==t.action.init&&p!=null&&(e.min=p.min.has(e.id)):(d.all||d.id==e.id)&&(e.min=!0),!(e.min||e.tags&&e.tags.has("filter")))for(u=0;u<e.stChildrenIds.length;u++)(x=i[e.stChildrenIds[u]]).stParent=e,e.stChildren.push(x);o!=null&&(e.level=o),n&&(e.lcn=n);var y=t._getSubLevels(e.tags,c.tags);y>0&&(e.subLevels=y),e.tags.indexOf("assistant")!=-1&&e.parent!=null&&(e.isAssistant=!0);var v=t.t(e.templateName,e.min);e.w=v&&v.size?v.size[0]:0,e.h=v&&v.size?v.size[1]:0,e.padding=v&&v.padding?v.padding:[0,0,0,0];var E={node:e};t.events.publish("node-initialized",[a,E])},t.manager._iterate=function(e,i,n,o,r,s,a,c,l,h,d,p){var f=p.manager.layoutConfigs;if(t.manager._initNode(i,n,l,o,h,d,p),i.isAssistant&&(s[i.pid]||(s[i.pid]=[]),s[i.pid].push(i.id)),i.subLevels>0&&a.push(i.id),t.MIXED_LAYOUT_FOR_NODES_WITH_COLLAPSED_CHILDREN&&!i.isAssistant&&i.parent){if(i.parent&&i.parent.children.length&&i.parent.children[i.parent.children.length-1]==i){for(var u=[],x=0,S=0,y=0;y<i.parent.children.length;y++)(v=i.parent.children[y]).tags.indexOf("partner")==-1&&v.tags.indexOf("left-partner")==-1&&v.tags.indexOf("right-partner")==-1&&v.tags.indexOf("assistant")==-1&&v.children.length==0?u.push(v.id):v.tags.indexOf("assistant")!=-1?x++:v.tags.indexOf("partner")==-1&&v.tags.indexOf("left-partner")==-1&&v.tags.indexOf("right-partner")==-1||S++;(t.MIXED_LAYOUT_ALL_NODES&&u.length>1&&u.length==i.parent.children.length-x-S||!t.MIXED_LAYOUT_ALL_NODES&&u.length>1)&&(c[i.pid]=u)}}else if(!i.isAssistant&&i.childrenIds.length==0&&i.parent&&!c[i.pid]){for(u=[],x=0,S=0,y=0;y<i.parent.children.length;y++){var v;(v=i.parent.children[y]).tags.indexOf("partner")==-1&&v.tags.indexOf("left-partner")==-1&&v.tags.indexOf("right-partner")==-1&&v.tags.indexOf("assistant")==-1&&v.childrenIds.length==0?u.push(v.id):v.tags.indexOf("assistant")!=-1?x++:v.tags.indexOf("partner")==-1&&v.tags.indexOf("left-partner")==-1&&v.tags.indexOf("right-partner")==-1||S++}(t.MIXED_LAYOUT_ALL_NODES&&u.length>t.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&u.length==i.parent.childrenIds.length-x-S||!t.MIXED_LAYOUT_ALL_NODES&&u.length>t.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN)&&(c[i.pid]=u)}i.stChildren.length&&(e.stContainerNodes||(e.stContainerNodes=[]),e.stContainerNodes.push(i));for(var E=0;E<i.stChildren.length;E++){var b="";for(y=0;y<i.tags.length;y++)if(f[i.tags[y]]){b=i.tags[y];break}r.push(i.stChildren[E].id),t.manager._iterate(e,i.stChildren[E],n,0,r,s,a,c,b,h,d,p)}for(o++,E=0;E<i.children.length;E++)t.manager._iterate(e,i.children[E],n,o,r,s,a,c,l,h,d,p)},t.manager.__createNodes=function(e,i,n,o,r,s,a,c){for(var l=[],h=t._addDottedLines(n),d=0;d<h.length;d++){var p,f=h[d];p=t.STRING_TAGS?f.tags?f.tags.split(","):[]:Array.isArray(f.tags)?f.tags.slice(0):[],c.filterUI.addFilterTag(f)&&p.unshift("filter");var u=c.searchUI.addMatchTag(f.id);u===!0?p.unshift("match"):u===!1&&p.unshift("no-match");var x=t._getTemplate(p,n.tags,n.template),S=new t.node(f.id,f.pid,p,x);t.isNEU(f.ppid)||(S.ppid=f.ppid),t.isNEU(f.stpid)||(S.stpid=f.stpid),f.movex!=null&&(S.movex=f.movex),f.movey!=null&&(S.movey=f.movey),e[f.id]=S,l.push(f.id)}if(n.orderBy!=null){var y=t.manager._getOrderSortArray(n.orderBy);l.sort(function(M,C){var R,O;for(var z of h)if(z.id==M&&(R=z),z.id==C&&(O=z),R&&O)break;for(var F=0;F<y.length;F++){var V=R[y[F].field],X=O[y[F].field],W=V,Z=X;if(W==null&&(W=""),Z==null&&(Z=""),typeof W=="string"&&typeof Z=="string"){var Y=W.localeCompare(Z);if(y[F].desc&&(Y*=-1),Y!==0)return Y}else if(Y=V<X?-1:V>X?1:0,y[F].desc&&(Y*=-1),Y!==0)return Y}})}for(d=0;d<l.length;d++){var v=l[d],E=(S=e[v],s?s[v]:null),b=e[S.stpid],I=e[S.pid];if(b||(S.stpid=null),I||(S.pid=null),b){var w=s?s[b.id]:null;w&&(b.min=w.min),b.stChildrenIds.push(S.id)}else I?(E&&(S.collapsed=E.collapsed,S.min=E.min),I.childrenIds.push(S.id)):(E&&(S.collapsed=E.collapsed,S.min=E.min),i.push(S),a.push(S.id));o==t.action.init&&(S.min=t._getMin(S,n))}},t.manager._createNodes=function(e){var i=e.manager.config,n=e.manager.layoutConfigs,o=e.manager.action,r=e.manager.actionParams,s=e.manager.oldNodes,a=e.manager.state,c={},l=[],h=[];if(t.manager.__createNodes(c,l,i,o,r,s,h,e),i.roots!=null){l=[];for(var d=0;d<i.roots.length;d++){var p=c[i.roots[d]];if(p&&o==t.action.centerNode){for(var f=p;f.pid!=null||f.stpid!=null;)f=f.pid==null&&f.stpid!=null?c[f.stpid]:c[f.pid];for(var u=c[r.id];(u.pid!=null||u.stpid!=null)&&u!=p;)u=u.pid==null&&u.stpid!=null?c[u.stpid]:c[u.pid];f==u&&(p=f)}if(p){for(var x=!1,S=0;S<l.length;S++)if(l[S].id==p.id){x=!0;break}x||(t.isNEU(p.pid)||($e=(y=c[p.pid]).childrenIds.indexOf(p.id))>-1&&y.childrenIds.splice($e,1),l.push(p))}}for(i.roots=[],d=0;d<l.length;d++)i.roots.push(l[d].id)}if(o==t.action.exporting&&r.id!=null)if(r.parentLevels){for(var y=c[r.id],v=0;v<r.parentLevels&&c[y.pid];)v++,y=c[y.pid];y.pid=null,l=[y]}else(b=c[r.id])&&(b.pid=null,l=[b]);var E=[];if(o==t.action.init&&i.expand&&i.expand.nodes&&a==null)for(d=0;d<i.expand.nodes.length;d++){var b=c[i.expand.nodes[d]];for(i.expand.allChildren===!0&&t.manager._addExpandedNodeIdsIterate(b,c,E);b;)E.push(b.id),b.pid==null&&b.stpid!=null?(b=c[b.stpid]).min=!1:b=c[b.pid]}else if(o==t.action.expand&&r.ids&&r.ids!="all"||o==t.action.collapse&&r&&r.expandIds)for(Ee=o==t.action.expand?r.ids:r.expandIds,d=0;d<Ee.length;d++)for(y=c[(b=c[Ee[d]]).pid];y;)E.push(y.id),y.pid==null&&y.stpid!=null?(y=c[y.stpid]).min=!1:y=c[y.pid];else if(o==t.action.centerNode){for(var I=c[r.id];I;){if(E.push(I.id),r.options.parentState===t.COLLAPSE_PARENT_NEIGHBORS&&I)for(d=0;d<I.childrenIds.length;d++)($=c[I.childrenIds[d]]).collapsed=!0;I.pid==null&&I.stpid!=null?((I=c[I.stpid]).min=!1,I.tags&&($e=I.tags.indexOf("filter"))!=-1&&(I.tags.splice($e,1),e.filterUI._removeFilter(I.id))):I=c[I.pid]}if(I=c[r.id],r.options.childrenState===t.COLLAPSE_SUB_CHILDRENS)for(d=0;d<I.childrenIds.length;d++){(M=c[I.childrenIds[d]]).collapsed=!1;for(var w=0;w<M.childrenIds.length;w++)c[M.childrenIds[w]].collapsed=!0}if(r.options.parentState===t.COLLAPSE_PARENT_SUB_CHILDREN_EXCEPT_CLICKED&&(y=c[I.pid]))for(d=0;d<y.childrenIds.length;d++){var M;if((M=c[y.childrenIds[d]])!=I)for(M.collapsed=!1,w=0;w<M.childrenIds.length;w++)c[M.childrenIds[w]].collapsed=!0}}else if(o==t.action.insert)for(b=c[r.insertedNodeId];b;)E.push(b.id),b.pid==null&&b.stpid!=null?(b=c[b.stpid]).min=!1:b=c[b.pid];var C=[],R={},O=[],z={},F=[];for(d=0;d<l.length;d++)t.manager._iterate(l[d],l[d],c,0,C,R,O,z,"",E,F,e);if(o==t.action.collapse&&r&&Array.isArray(r.expandIds)&&Array.isArray(r.collapseIds))for(d=0;d<r.ids.length;d++)r.expandIds.has(r.collapseIds[d])?console.error(`id ${r.collapseIds[d]} exist in both collapseIds and expandIds`):(b=c[r.collapseIds[d]])&&(b.collapsed=!0);for(d=l.length-1;d>=0;d--)l[d].collapsed&&l.splice(d,1);for(d=0;d<F.length;d++){b=c[F[d]];var V=[],X=[],W=[],Z={},Y=0,q=0,j=0,K=[],ie=[];for(w=0;w<b.children.length;w++)($=b.children[w]).isAssistant?V.push($.id):$.tags.indexOf("right-partner")!=-1?($.isPartner=1,$.children=[],X.push($.id)):$.tags.indexOf("left-partner")!=-1?($.isPartner=2,$.children=[],W.push($.id)):$.tags.indexOf("partner")==-1||Y%2?$.tags.indexOf("partner")!=-1&&Y%2?($.isPartner=2,$.children=[],W.push($.id),Y++):$.parentPartner?(Z[$.parentPartner.id]||(Z[$.parentPartner.id]=[]),Z[$.parentPartner.id].push($.id)):V.push($.id):($.isPartner=1,$.children=[],X.push($.id),Y++);b.children=[];var ne=[];for(w=0;w<X.length;w++){Z[($=c[X[w]]).id]?b.children.push($):b.children.splice(0,0,$);for(var oe=0;oe<$.childrenIds.length;oe++)ne.push($.childrenIds[oe])}var me=[];for(w=0;w<W.length;w++)for(Z[($=c[W[w]]).id]?b.children.push($):b.children.splice(0,0,$),oe=0;oe<$.childrenIds.length;oe++)me.push($.childrenIds[oe]);for(w=0;w<me.length;w++)($=c[me[w]]).collapsed||($.parentPartner=$.parent,$.parent=b,$.isChildOfPartner=!0,b.children.push($));for(w=W.length-1;w>=0;w--)if(Z[W[w]])for(S=0;S<Z[W[w]].length;S++)b.children.push(c[Z[W[w]][S]]),q++,ie.indexOf(W[w])==-1&&ie.push(W[w]);for(w=0;w<V.length;w++){var $=c[V[w]];b.children.push($)}for(w=0;w<X.length;w++)if(Z[X[w]])for(S=0;S<Z[X[w]].length;S++)b.children.push(c[Z[X[w]][S]]),j++,K.indexOf(X[w])==-1&&K.push(X[w]);for(w=0;w<ne.length;w++)($=c[ne[w]]).collapsed||($.parentPartner=$.parent,$.parent=b,$.isChildOfPartner=!0,b.children.push($));b.partnerSeparation=Math.max(ie.length,K.length)*i.partnerChildrenSplitSeparation+i.minPartnerSeparation,V.length||!q||j?V.length||q||!j?V.length||q!=1||j!=1?V.length||q||j?!V.length||q||j?V.length&&(q||j)?b.hasPartners=7:b.hasPartners=1:b.hasPartners=6:b.hasPartners=5:b.hasPartners=4:b.hasPartners=3:b.hasPartners=2}for(d=0;d<O.length;d++){var J=n[(b=c[O[d]]).lcn?b.lcn:"base"];for(w=0;w<b.subLevels;w++){var re=new t.node(b.id+"_sub_level_index_"+w,b.pid,[],"subLevel");t.manager._initDinamicNode(re,b.lcn),(y=b.parent)&&(b.movex!=null&&(re.movex=b.movex),b.movey!=null&&(re.movey=b.movey),($e=y.children.indexOf(b))>-1&&(y.children.splice($e,1),y.children.splice($e,0,re)),re.children.push(b),re.parent=y,b.parent=re,c[re.id]=re)}}for(var ue in R){(y=c[ue]).hasAssistants=!0,re=new t.node(y.id+"_split_assitant_0",y.id,["assistant"],"split"),y.movex!=null&&(re.movex=y.movex),y.movey!=null&&(re.movey=y.movey),t.manager._initDinamicNode(re,y.lcn,!0),c[re.id]=re;var be=[];for(w=y.children.length-1;w>=0;w--)($=y.children[w]).isAssistant?($.parent=null,y.children.splice(w,1),be.splice(0,0,$.id)):$.isPartner||($.parent&&z[$.parent.id]&&re&&$.parent.id!=re.id&&(Object.defineProperty(z,re.id,Object.getOwnPropertyDescriptor(z,$.parent.id)),delete z[$.parent.id]),$.parent=re,re.children.unshift($),y.children.splice(w,1));if(be.length%2){var Ve=c[be[be.length-1]],Le=new t.node(Ve.id+"_mirror",y.pid,[],"mirror");t.manager._initDinamicNode(Le,Ve.lcn,!0),Le.isAssistant=!0,Le.w=Ve.w,Le.h=Ve.h,c[Le.id]=Le,be.splice(be.length-1,0,Le.id)}var Re=1;for(w=be.length-1;w>=0;w--)if(w%2&&w!=be.length-1){var ye=new t.node(y.id+"_split_assitant_"+Re,y.pid,[],"split");t.manager._initDinamicNode(ye,y.lcn,!0),y.movex!=null&&(ye.movex=y.movex),y.movey!=null&&(ye.movey=y.movey),c[ye.id]=ye,be.splice(w,0,ye.id),Re++}else w%2&&be.splice(w,0,re.id);for(w=0;w<be.length;w+=3){var ce=null;ce=w==0?y:c[be[w-2]];var we=c[be[w]],Me=c[be[w+1]],Be=c[be[w+2]];we.parent=ce,Me.parent=ce,Be.parent=ce,ce.children.push(we),ce.children.push(Me),ce.children.push(Be)}}var Te=!1;for(var Oe in n)if((J=n[Oe]).layout!=0){Te=!0;break}var Ie=t.events.has("node-layout",e._event_id);if(Te||Ie){var Q={nodes:c,config:i,action:o,actionParams:r};if(O.length){var he=!1;for(var ue in z){var Ee=z[ue];for(d=0;d<Ee.length;d++)if((b=c[Ee[d]]).subLevels){he=!0;break}if(he)break}if(he){var fe={},Ce={},Xe={};for(var ue in z){Ee=z[ue];var Se=!1,ee=null;for(d=0;d<Ee.length;d++){var _e=Ee[d];(ee===null||O.has(_e))&&(ee=c[_e].parent.id,Se||t.isNEU(c[_e].subLevels)||(Se=c[_e].subLevels>0)),fe[ee]||(fe[ee]=[]),fe[ee].push(_e),Se&&(Xe[ee]=ue,Ce[ee]||(Ce[ee]=[]),Ce[ee].push(_e))}}for(var ue in z={},Ce)if(Ce[ue].length>t.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN){var De=Xe[ue];for(d=c[De].children.length-1;d>=0;d--)$=c[De].children[d],Ce[ue].has($.id)&&c[De].children.splice(d,1)}for(var ue in fe)fe[ue].length>t.MIXED_LAYOUT_IF_NUMBER_OF_CHILDREN_IS_MORE_THEN&&(z[ue]=fe[ue])}}for(var ue in z){for(var ke=y=c[ue];ke.isSplit;)ke=c[ke.pid];for(;ke.isSubLevel;)ke=c[ke.pid];if((J=n[y.lcn?y.lcn:"base"]).layout!=0||Ie){Q.pnode=y,Q.layout=J.layout,Q.layoutGridColumns=i.layoutGridColumns,Q.childrenIds=z[ue],Q.lastChildrenPidIds=z,Q.subLevels=0,Q.layouts=[],t.events.publish("node-layout",[e,Q]),t.events.publish("layout",[Q]),Q.layouts.length||Q.layouts.push({layout:Q.layout,childrenIds:Q.childrenIds,subLevels:Q.subLevels,layoutGridColumns:Q.layoutGridColumns});for(var qe=0;qe<Q.layouts.length;qe++){var le=Q.layouts[qe];for(t.isNEU(le.subLevels)&&(le.subLevels=0),t.isNEU(le.layout)&&(le.layout=J.layout),ke=y=c[ue];ke.isSplit;)ke=c[ke.pid];for(;ke.isSubLevel;)ke=c[ke.pid];var He=y;for(w=0;w<le.subLevels;w++)re=new t.node(qe+"_sublevel_layout_"+w,He.id,[],"subLevel"),t.manager._initDinamicNode(re,He.lcn),re.parent=He,He.children.push(re),c[re.id]=re,He=re;if(le.subLevels){for(w=0;w<le.childrenIds.length;w++){var $e;$=c[le.childrenIds[w]],($e=y.children.indexOf($))!=-1&&y.children.splice($e,1),$.parent=He,He.children.push($)}y=He}if(le.layout==t.layout.grid&&le.childrenIds.length>2){le.layoutGridColumns=="dynamic"&&(le.layoutGridColumns=t._getDynamicGridCoulumns(le.childrenIds.length));var Ye=y.id;for(d=y.children.length-1;d>=0;d--)for(w=0;w<le.childrenIds.length;w++)if(_e=le.childrenIds[w],y.children[d].id==_e){y.children.splice(d,1);break}var G=le.layoutGridColumns;for(G%2!=0&&G>2&&G--,d=0;d<le.childrenIds.length;d+=G){var _=null;for(w=0;w<G;w++){var k=d+G>=le.childrenIds.length;if(le.childrenIds.length-1<d+w)break;($=c[_e=le.childrenIds[d+w]]).parent=c[Ye],c[Ye].children.push($),k||(G/2-1==w&&(_=new t.node(le.childrenIds[d+w-1]+"_grid_pseudo_node_"+le.childrenIds[d+w+1],Ye,[],"subLevel"),t.manager._initDinamicNode(_,y.lcn),_.parent=c[Ye],c[Ye].children.push(_),c[_.id]=_),G-1==w&&(Ye=_.id))}}}if(le.layout==t.layout.mixed){var A=le.childrenIds;for(d=A.length-1;d>=0;d--){for(y=($=c[A[d]]).parent,$.layout=t.layout.mixed,w=y.children.length-1;w>=0;w--)if($.id==y.children[w].id){y.children.splice(w,1);break}if(d>0){var N=c[A[d-1]];$.parent=N,$.layout=t.layout.mixed,N.children.push($)}else y.children.push($)}}else if(le.layout>1){re=new t.node(qe+"_"+y.id+"_split_0",ke.id,[],"split"),y.movex!=null&&(re.movex=y.movex),y.movey!=null&&(re.movey=y.movey),t.manager._initDinamicNode(re,y.lcn),c[re.id]=re,re.layout=le.layout;var L=[];for(d=le.childrenIds.length-1;d>=0;d--){for($=c[le.childrenIds[d]],w=0;w<y.children.length;w++)y.children[w].id==$.id&&y.children.splice(w,1);if($.parent=null,$.layout=le.layout,le.layout!=t.layout.treeRightOffset&&le.layout!=t.layout.treeRight||L.splice(0,0,$.id),le.layout>2){var B=new t.node(qe+"_"+$.id+"_mirror",ke.id,[],"mirror");t.manager._initDinamicNode(B,$.lcn),B.layout=le.layout,c[B.id]=B,L.splice(0,0,B.id)}le.layout!=t.layout.treeRightOffset&&le.layout!=t.layout.treeRight&&L.splice(0,0,$.id)}for(Re=1,w=L.length-1;w>=0;w--)w%2&&w!=L.length-1?(ye=new t.node(qe+"_"+y.id+"_split_"+Re,ke.id,[],"split"),t.manager._initDinamicNode(ye,y.lcn),y.movex!=null&&(ye.movex=y.movex),y.movey!=null&&(ye.movey=y.movey),ye.layout=le.layout,c[ye.id]=ye,L.splice(w,0,ye.id),Re++):w%2&&L.splice(w,0,re.id);for(w=0;w<L.length;w+=3)ce=null,w==0&&(ce=y),we=c[L[w]],Me=c[L[w+1]],Be=c[L[w+2]],w!=0&&(ce=c[L[w-3]]),w==0||Me||(ce=c[L[w-2]]),we.parent=ce,ce.children.push(we),Me&&(w!=0&&(ce=c[L[w-2]]),Me.parent=ce,ce.children.push(Me)),Be&&(w!=0&&(ce=c[L[w-1]]),Be.parent=ce,ce.children.push(Be))}}}}}if(t.VERTICAL_CHILDREN_ASSISTANT)for(d=0;d<l.length;d++)t.manager._verticalAssistantIterate(l[d],c);return Q={nodes:c,roots:l},t.events.publish("nodes-initialized",[e,Q]),{nodes:Q.nodes,roots:Q.roots,rootList:h}},t.manager._getOrderSortArray=function(e){if(typeof e=="string")return[{field:e,desc:!1}];if(Array.isArray(e)){var i=[];for(var n of e)typeof n=="string"?i.push({field:n,desc:!1}):e instanceof Object?i.push(n):console.error("Unseported orderBy value!");return i}if(e instanceof Object)return[e];console.error("Unseported orderBy value!")},t.manager._getNodeWidth=function(e,i){switch(i.orientation){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:return e.w;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:return e.h}return 0},t.manager._isVisible=function(e,i,n,o,r,s,a){var c=0;if(t.LAZY_LOADING_FACTOR=="auto"){var l=s/r*2,h=a/r*2;c=l>h?Math.ceil(l):Math.ceil(h)}else c=t.LAZY_LOADING_FACTOR/r;if(e.x!=null&&e.y!=null){if(t._getLazyLoading(i)&&o!==t.action.exporting){let p=function(f,u){var x=f.x,S=f.y,y=f.w,v=f.h,E=u[0]-c,b=u[2]+c+u[0],I=u[1]-c,w=u[3]+c+u[1],M=x+y>E&&b>x;return M&&(M=S+v>I&&w>S),M};if(p(e,n))return!0;for(var d=0;d<e.children.length;d++)if(p(e.children[d],n))return!0;return!1}return!0}},t.manager.getAllFields=function(e){var i=[t.TAGS];for(var n in e.nodeBinding)i.push(e.nodeBinding[n]);for(n=0;n<e.nodes.length;n++)for(var o in e.nodes[n])o!==t.ID&&o!==t.TAGS&&o!==t.NODES&&o!==t.PID&&o!==t.STPID&&o!=="movex"&&o!=="movey"&&(e.nodeBinding[o]||i.has(o)||i.push(o));return i},t.manager._getMostDeepChild=function(e){if(e){var i=e;return(function n(o){o.sl>i.sl&&(i=o);for(var r=0;r<o.children.length;r++)n(o.children[r])})(e),i}},t.manager._getResponse=function(e,i,n,o,r,s,a,c,l,h,d,p,f,u,x){var S=h[0],y=[],v={top:null,left:null,bottom:null,right:null,minX:null,maxX:null,minY:null,maxY:null},E=[[],[],[]],b=r-a+2*o.padding,I=s-c+2*o.padding,w=t.getScale(l,e,i,o.scaleInitial,o.scaleMax,o.scaleMin,b,I);if(v.top=c-o.padding,v.left=a-o.padding,v.bottom=s+o.padding-i/w,v.right=r+o.padding-e/w,v.maxX=r,v.minX=a,v.maxY=s,v.minY=c,h.length==0||l==null&&!x&&o.align==t.CENTER){var M=Math.ceil(e/w),C=Math.ceil(i/w),R=0,O=0;if(M-2*o.padding>=r-a)switch(R=(r+a)/2-M/2,o.orientation){case t.orientation.right:case t.orientation.right_top:R=(a-r)/2-M/2}else switch(R=S.x-M/2+t.manager._getNodeWidth(S,o)/2,o.orientation){case t.orientation.right:case t.orientation.right_top:(R=-(M/2-(a-r)/2))<o.padding-M&&(R=o.padding-M);break;case t.orientation.left:case t.orientation.bottom_left:case t.orientation.top_left:case t.orientation.left_top:(R=-(M/2-(r-a)/2))>-o.padding&&(R=-o.padding)}if(C-2*o.padding>=s-c)switch(O=(s+c)/2-C/2,o.orientation){case t.orientation.bottom:case t.orientation.bottom_left:O=(c-s)/2-C/2}else switch((O=-(C/2-(s-c)/2))>-o.padding&&(O=-o.padding),o.orientation){case t.orientation.bottom:case t.orientation.bottom_left:(O=-(C/2-(c-s)/2))<o.padding-C&&(O=o.padding-C);break;case t.orientation.left:case t.orientation.right:O=S.y-C/2+t.manager._getNodeWidth(S,o)/2}l=[R,O,M,C]}else if(l==null&&!x&&o.align==t.ORIENTATION){switch(M=Math.ceil(e/w),C=Math.ceil(i/w),R=0,O=0,o.orientation){case t.orientation.top:R=S.x-M/2+t.manager._getNodeWidth(S,o)/2,O=-o.padding;break;case t.orientation.bottom:R=S.x-M/2+t.manager._getNodeWidth(S,o)/2,O=o.padding-C;break;case t.orientation.left:R=-o.padding,O=S.y-C/2+t.manager._getNodeWidth(S,o)/2;break;case t.orientation.right:R=o.padding-M,O=S.y-C/2+t.manager._getNodeWidth(S,o)/2;break;case t.orientation.top_left:R=-o.padding,O=-o.padding;break;case t.orientation.right_top:R=o.padding-M,O=-o.padding;break;case t.orientation.left_top:R=-o.padding,O=-o.padding;break;case t.orientation.bottom_left:R=-o.padding,O=o.padding-C}l=[R,O,M,C],o.sticky&&(l[0]<v.left&&l[0]<v.right&&(l[0]=v.left>v.right?v.right:v.left),l[0]>v.right&&l[0]>v.left&&(l[0]=v.left>v.right?v.left:v.right),l[1]<v.top&&l[1]<v.bottom&&(l[1]=v.top>v.bottom?v.bottom:v.top),l[1]>v.bottom&&l[1]>v.top&&(l[1]=v.top>v.bottom?v.top:v.bottom))}if(d==t.action.centerNode||d==t.action.maximize){var z=f[p.id];p.options.horizontal==1&&(l[0]=z.x+z.w/2-l[2]/2),p.options.vertical==1&&(l[1]=z.y+z.h/2-l[3]/2),o.sticky&&(l[0]<v.left&&l[0]<v.right&&(l[0]=v.left>v.right?v.right:v.left),l[0]>v.right&&l[0]>v.left&&(l[0]=v.left>v.right?v.left:v.right),l[1]<v.top&&l[1]<v.bottom&&(l[1]=v.top>v.bottom?v.bottom:v.top),l[1]>v.bottom&&l[1]>v.top&&(l[1]=v.top>v.bottom?v.top:v.bottom))}if(o.sticky&&(d==t.action.insert||d==t.action.expand||d==t.action.collapse||d==t.action.update||d==t.action.centerNode)){var F=null;if(d==t.action.insert&&p&&p.insertedNodeId!=null&&p.insertedNodeId!=null)F=f[p.insertedNodeId];else if(d==t.action.update&&p&&p.visId!=null&&p.visId!=null)F=f[p.visId];else if(d!=t.action.expand&&d!=t.action.collapse||!p||p.id==null||p.id==null){if(d==t.action.centerNode){switch(o.orientation){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:p.options.vertical||(F=f[p.id]);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:p.options.horizontal||(F=f[p.id])}F&&(F=t.manager._getMostDeepChild(F,f))}}else F=f[p.id],F=t.manager._getMostDeepChild(F,f);if(!t.FIXED_POSITION_ON_CLICK&&F)switch(o.orientation){case t.orientation.top:case t.orientation.top_left:var V=F.y+F.h-l[3]+o.padding;l[1]<V&&(l[1]=V);break;case t.orientation.bottom:case t.orientation.bottom_left:V=F.y-o.padding,l[1]>V&&(l[1]=V);break;case t.orientation.right:case t.orientation.right_top:V=F.x-o.padding,l[0]>V&&(l[0]=V);break;case t.orientation.left:case t.orientation.left_top:V=F.x+F.w-l[2]+o.padding,l[0]<V&&(l[0]=V)}}for(var X=0;X<h.length;X++)t.manager._iterate2(h[X],f,o,l,d,p,y,u,n,E,w,e,i);return{animations:E,boundary:v,viewBox:l,visibleNodeIds:y,nodes:f,allFields:t.manager.getAllFields(o)}},t.manager._iterate2=function(e,i,n,o,r,s,a,c,l,h,d,p,f){if(t.manager._isVisible(e,n,o,r,d,p,f)){a.push(e.id);var u=null;if((r==t.action.expand||r==t.action.collapse||r==t.action.maximize)&&c&&c[e.id]&&s.method=="expandCollapseToLevel"){if(u={x:(v=c[e.id]).x,y:v.y},v){u={x:v.x,y:v.y};for(var x=e,S=null;x!=null;)c[x.id]&&c[x.id].collapsed&&(S=x),x=x.parent;S&&S.parent&&(u={x:S.parent.x,y:S.parent.y})}if(E=i[s.id]){for(x=e.parent;x!=null;)x=x.parent;x&&(u={x:E.x+E.w/2-e.w/2,y:E.y+E.h/2-e.h/2})}}else if((r==t.action.expand||r==t.action.collapse)&&c&&c[e.id]){if(u={x:(v=c[e.id]).x,y:v.y},s.ids=="all"&&v){for(u={x:v.x,y:v.y},x=e,S=null;x!=null;)c[x.id]&&c[x.id].collapsed&&(S=x),x=x.parent;S&&S.parent&&(u={x:S.parent.x,y:S.parent.y})}if(E=i[s.id]){for(x=e.parent;x!=null&&s.ids.indexOf(e.id)==-1&&s.ids.indexOf(x.id)==-1;)x=x.parent;x&&(u={x:E.x+E.w/2-e.w/2,y:E.y+E.h/2-e.h/2})}}else if(r==t.action.centerNode&&c&&c[e.id])(v=c[e.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(y=i[s.id])&&y==e&&(x=e.parent)&&x.id==s.id&&(u={x:y.x+y.w/2-e.w/2,y:y.y+y.h/2-e.h/2});else if(r==t.action.maximize&&c&&c[e.id]){var y;(v=c[e.id]).x!=null&&v.y!=null&&(u={x:v.x,y:v.y}),(y=i[s.id])&&y==e&&(x=e.parent)&&x.id==s.id&&(u={x:y.x+y.w/2-e.w/2,y:y.y+y.h/2-e.h/2})}else if(r==t.action.minimize&&c&&c[e.id])u={x:(v=c[e.id]).x,y:v.y};else if(r==t.action.insert&&s&&s.insertedNodeId==e.id&&e.parent)u={x:e.parent.x,y:e.parent.y};else if(r!=t.action.update&&r!=t.action.insert||!c)r!==t.action.exporting&&r!==t.action.init&&l.indexOf(e.id)==-1&&(h[0].push(e.id),h[1].push({opacity:0}),h[2].push({opacity:1}));else{var v,E;if((!(v=c[e.id])||t.isNEU(v.x)&&t.isNEU(v.y))&&s){if(E=i[s.id]){for(x=E;x&&x.id==e.id;)x=x.parent;x&&(u={x:E.x,y:E.y})}}else v&&(u={x:v.x,y:v.y})}u!=null&&u.x!=null&&u.y!=null&&(u.x!=e.x||u.y!=e.y)&&(s&&s.dragNodeIdList&&s.dragNodeIdList.indexOf(e.id)!=-1||e.isSplit||(h[0].push(e.id),h[1].push({transform:[1,0,0,1,u.x,u.y]}),h[2].push({transform:[1,0,0,1,e.x,e.y]})))}for(var b=0;b<e.stChildren.length;b++)t.manager._iterate2(e.stChildren[b],i,n,o,r,s,a,c,l,h,d,p,f);for(b=0;b<e.children.length;b++)t.manager._iterate2(e.children[b],i,n,o,r,s,a,c,l,h,d,p,f)},t.manager._addExpandedNodeIdsIterate=function(e,i,n){for(var o=0;o<e.childrenIds.length;o++)n.push(e.childrenIds[o]),t.manager._addExpandedNodeIdsIterate(i[e.childrenIds[o]],i,n)},t.manager._setMinMaxXYAdjustifyIterate=function(e,i,n,o,r,s,a,c){e.x+=s.x,e.y+=s.y;for(var l=0;l<e.stChildren.length;l++)t.manager._setMinMaxXYAdjustifyIterate(e.stChildren[l],e.stChildren[l],n,0,r,s,a,c);for(e.isPartner?e.sl=o-1:e.sl=o,r[i.id]==null&&(r[i.id]={}),r[i.id][e.sl]==null&&(r[i.id][e.sl]={minX:null,minY:null,maxX:null,maxY:null}),e.layout?(c[i.id]==null&&(c[i.id]={}),c[i.id][e.sl]==null&&(c[i.id][e.sl]=e)):t._setMinMaxXY(e,r[i.id][e.sl]),e.movex!=null&&(e.x+=e.movex),e.movey!=null&&(e.y+=e.movey),t._setMinMaxXY(e,n),o++,l=0;l<e.children.length;l++)t.manager._setMinMaxXYAdjustifyIterate(e.children[l],i,n,o,r,s,a,c)},t.manager._doNotChangePositionOfClickedNodeIfAny=function(e,i,n,o,r,s){if(n!=t.action.expand&&n!=t.action.collapse&&n!=t.action.minimize&&n!=t.action.maximize&&n!=t.action.centerNode&&n!=t.action.update&&n!=t.action.insert)return{x:0,y:0};if(n==t.action.update&&(!o||o.id==null)){if(!e||!e.length)return{x:0,y:0};o={id:e[0].id}}if(o.id==null)return{x:0,y:0};var a=o.id;(n==t.action.minimize&&i[a].parent||n==t.action.maximize&&i[a].parent)&&(a=i[a].pid);var c=i[a],l=r[a];if(!l)return{x:0,y:0};var h=l.movex!=null?l.movex:0,d=l.movey!=null?l.movey:0;return{x:(l.x?l.x-h:0)-c.x,y:(l.y?l.y-d:0)-c.y}},t.manager._verticalAssistantIterate=function(e,i){for(var n=0;n<e.stChildren.length;n++)t.manager._verticalAssistantIterate(e.stChildren[n],i);if(e.children.length==3)t.manager._verticalAssistantIterate(e.children[0],i),t.manager._verticalAssistantIterate(e.children[2],i),t.manager._verticalAssistantIterate(e.children[1],i);else for(n=0;n<e.children.length;n++)t.manager._verticalAssistantIterate(e.children[n],i);if(e.isAssistant&&e.isSplit&&e.children.length){for(var o=e.parent.children[0],r=e.parent.children[2],s=e.parent;!s.hasAssistants;)s=s.parent;var a={max:0},c={max:0};t.manager._verticalAssistantLevelCountIterate(o,0,a),t.manager._verticalAssistantLevelCountIterate(r,0,c);var l=Math.max(a.max,c.max),h=[];for(n=0;n<l;n++){var d=new t.node(e.parent.id+"_split_assitant_level_"+n,e.pid,[],"subLevel");t.manager._initDinamicNode(d,e.lcn,!0),s.movex!=null&&(d.movex=s.movex),s.movey!=null&&(d.movey=s.movey),n>0&&(h[n-1].children.push(d),d.parent=h[n-1]),i[d.id]=d,h.push(d)}if(h.length){for(var p=h[h.length-1],f=h[0],u=e.children.length-1;u>=0;u--){var x=e.children[u];p.children.unshift(x),x.parent=p,e.children.splice(u,1)}e.children.push(f),f.parent=e}}},t.manager._verticalAssistantLevelCountIterate=function(e,i,n){n.max<i&&(n.max=i),i++;for(var o=0;o<e.children.length;o++)t.manager._verticalAssistantLevelCountIterate(e.children[o],i,n)},t._addDottedLines=function(e){var i=e.nodes;if((e.groupDottedLines.length||e.dottedLines.length)&&(i=JSON.parse(JSON.stringify(i))),e.groupDottedLines.length)for(var n=[],o=0;o<e.groupDottedLines.length;o++){var r=e.groupDottedLines[o];r.rootId==null&&(r.rootId=r.to);var s=`balkan_group_dotted_${r.rootId}`;if(!n.has(s)){for(var a=0;a<i.length;a++)if(i[a].id==r.rootId){(d=JSON.parse(JSON.stringify(i[a]))).id=`balkan_group_dotted_${r.rootId}_balkan_id_${i[a].id}`,d.pid=void 0,d.stpid=i[a].id,i.push(d),n.push(s),i[a].tags||(i[a].tags=[]),i[a].tags.push("group-dotted-lines"),i[a].tags.push("group-dotted-lines-"+s);break}}for(a=0;a<i.length;a++)if(i[a].id==r.from){if((d=JSON.parse(JSON.stringify(i[a]))).id=`balkan_group_dotted_${r.rootId}_balkan_id_${i[a].id}`,d.pid=`balkan_group_dotted_${r.rootId}_balkan_id_${r.to}`,d.tags){var c=d.tags.indexOf("group-dotted-lines");c!=-1&&d.tags.splice(c,1)}if(d.tags||(d.tags=[]),d.tags.push("boc-dotted-connector"),r.tags)for(var l=0;l<r.tags.length;l++)d.tags.push(r.tags[l]);i.push(d);break}}if(e.dottedLines.length)for(o=0;o<e.dottedLines.length;o++){var h=e.dottedLines[o];for(h.rootId==null&&(h.rootId=h.to),a=0;a<i.length;a++)if(i[a].id==h.from){var d;if((d=JSON.parse(JSON.stringify(i[a]))).id=`balkan_dotted_${h.rootId}_balkan_id_${i[a].id}`,h.rootId==h.to?d.pid=h.to:d.pid=`balkan_dotted_${h.rootId}_balkan_id_${h.to}`,d.tags||(d.tags=[]),d.tags.push("boc-dotted-connector"),h.tags)for(l=0;l<h.tags.length;l++)d.tags.push(h.tags[l]);i.push(d);break}}return i},t===void 0&&(t={}),t.templates={},t.templates.base={defs:"",size:[250,120],expandCollapseSize:30,linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} L{xd},{yd}"/>',node:'<rect x="0" y="0" height="120" width="250" fill="none" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',plus:'<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#aeaeae"></line>',minus:'<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line>',nodeMenuButton:'<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',menuButton:'<div style="user-select:none;position:absolute;right:{p}px;top:{p}px; width:30px;height:50px;cursor:pointer;" '+t.attr.control_export_menu+'=""><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"><hr style="background-color: #7A7A7A; height: 3px; border: none;"></div>',img_0:'<clipPath id="{randId}"><circle cx="60" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="20" y="20"  width="80" height="80"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+t.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>',editFormHeaderColor:"#039BE5"},t.templates.ana={defs:"",size:[250,120],linkAdjuster:{fromX:0,fromY:0,toX:0,toY:0},ripple:{radius:0,color:"#e6e6e6",rect:null},expandCollapseSize:30,svg:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',link:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',assistanseLink:'<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="2px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} {xd},{yd} L{xe},{ye}"/>',node:'<rect x="0" y="0" height="{h}" width="{w}" fill="#039BE5" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',plus:'<circle cx="15" cy="15" r="15" class="boc-fill" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#aeaeae"></line>',minus:'<circle cx="15" cy="15" r="15" class="boc-fill" stroke="#aeaeae" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#aeaeae"></line>',up:'<rect x="20" y="-25" width="30" height="17" fill="#aeaeae" rx="3" ry="3"></rect><line x1="35" x2="35" y1="0" y2="-8" stroke="#aeaeae" stroke-width="1"></line>',nodeMenuButton:'<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',menuButton:t.templates.base.menuButton,img_0:'<clipPath id="{randId}"><circle cx="50" cy="30" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="-10"  width="80" height="80"></image>',link_field_0:'<text text-anchor="middle" fill="#aeaeae" '+t.attr.width+'="290" x="0" y="0" style="font-size:10px;">{val}</text>',field_0:"<text "+t.attr.width+'="230" style="font-size: 18px;" fill="#ffffff" x="125" y="95" text-anchor="middle">{val}</text>',field_1:"<text "+t.attr.width+'="130" '+t.attr.text_overflow+'="multiline" style="font-size: 14px;" fill="#ffffff" x="230" y="30" text-anchor="end">{val}</text>',padding:[50,20,35,20],editFormHeaderColor:"#039BE5"},t.templates.split=Object.assign({},t.templates.ana),t.templates.split.size=[10,10],t.templates.split.node='<circle cx="5" cy="5" r="5" fill="none" stroke-width="1" stroke="#aeaeae"></circle>',t.templates.split.field_0="",t.templates.split.field_1="",t.templates.split.img_0="",t.templates.dot=Object.assign({},t.templates.split),t.templates.group=Object.assign({},t.templates.ana),t.templates.group.size=[250,120],t.templates.group.node='<rect rx="50" ry="50" x="0" y="0" height="{h}" width="{w}" fill="#f2f2f2" stroke-width="0"></rect>',t.templates.group.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}"/>',t.templates.group.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,{ew},25)" '+t.attr.control_node_menu_id+'="{id}"><g transform="matrix(1,0,0,1,-22,-8)"><rect x="0" y="0" fill="red" fill-opacity="0" width="18" height="22"></rect><line x1="0" y1="2" x2="9" y2="2" stroke="#aeaeae" stroke-width="1"></line><line x1="0" y1="9" x2="18" y2="9" stroke="#aeaeae" stroke-width="1"></line><line x1="0" y1="16" x2="22" y2="16" stroke="#aeaeae" stroke-width="1"></line></g></g>',t.templates.group.field_0="<text "+t.attr.width+'="230" style="font-size: 18px;" fill="#aeaeae" x="{cw}" y="30" text-anchor="middle">{val}</text>',t.templates.group.field_1="",t.templates.group.ripple={radius:50,color:"#aeaeae"},t.templates.invisibleGroup=Object.assign({},t.templates.group),t.templates.invisibleGroup.node="",t.templates.invisibleGroup.padding=[0,0,0,0],t.templates.invisibleGroup.field_0="",t.templates.invisibleGroup.nodeMenuButton="",t.templates.mirror={linkAdjuster:{},link:"",node:"",nodeMenuButton:"",size:[0,0]},t.templates.ula=Object.assign({},t.templates.ana),t.templates.ula.field_0="<text "+t.attr.width+'="145" style="font-size: 18px;" fill="#039BE5" x="100" y="55">{val}</text>',t.templates.ula.field_1="<text "+t.attr.width+'="145" '+t.attr.text_overflow+'="multiline" style="font-size: 14px;" fill="#afafaf" x="100" y="76">{val}</text>',t.templates.ula.node='<rect x="0" y="0" height="{h}" width="{w}" fill="#ffffff" stroke-width="1" stroke="#aeaeae"></rect><line x1="0" y1="0" x2="250" y2="0" stroke-width="2" stroke="#039BE5"></line>',t.templates.ula.img_0='<clipPath id="{randId}"><circle cx="50" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="20" width="80" height="80" ></image>',t.templates.ula.menu='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,12)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#ffffff" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#039BE5"></circle><circle cx="7" cy="0" r="2" fill="#039BE5"></circle><circle cx="14" cy="0" r="2" fill="#039BE5"></circle></g>',t.templates.ula.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="7" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="14" cy="0" r="2" fill="#AEAEAE"></circle></g>',t.templates.olivia=Object.assign({},t.templates.ana),t.templates.olivia.defs=`<style>
                                    #olivia_gradient {
                                        --color-stop-1: #ffffff;
                                        --color-stop-2: #eeeeee;
                                        --opacity-stop: 1;
                                    }
                                    .olivia-f0{
                                        font-size: 18px;
                                        fill: #757575;
                                    }
                                    .olivia-f1{
                                        font-size: 14px;
                                        fill: #757575;
                                    }
                                    .boc-dark .olivia-f0,.boc-dark .olivia-f1{
                                        fill: #aeaeae;
                                    }
                                    .boc-dark #olivia_gradient {
                                        --color-stop-1: #646464;
                                        --color-stop-2: #363636;
                                        --opacity-stop: 1;
                                    }
                                </style>
                                <linearGradient id="olivia_gradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="var(--color-stop-1)" stop-opacity="var(--opacity-stop)"/><stop offset="100%" stop-color="var(--color-stop-2)" stop-opacity="var(--opacity-stop)" /></linearGradient>`,t.templates.olivia.field_0="<text "+t.attr.width+'="135" class="olivia-f0" x="100" y="55">{val}</text>',t.templates.olivia.field_1="<text "+t.attr.width+'="135" class="olivia-f1" x="100" y="76">{val}</text>',t.templates.olivia.node='<rect fill="url(#olivia_gradient)" x="0" y="0" height="{h}" width="{w}" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',t.templates.olivia.img_0='<clipPath id="{randId}"><circle cx="50" cy="60" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="20" width="80" height="80" ></image>',t.templates.olivia.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="7" cy="0" r="2" fill="#AEAEAE"></circle><circle cx="14" cy="0" r="2" fill="#AEAEAE"></circle></g>',t.templates.belinda=Object.assign({},t.templates.ana),t.templates.belinda.size=[180,180],t.templates.belinda.ripple={radius:90,color:"#e6e6e6",rect:null},t.templates.belinda.node='<circle cx="90" cy="90" r="90" fill="#039BE5" stroke-width="1" stroke="#aeaeae"></circle>',t.templates.belinda.img_0='<clipPath id="{randId}"><circle cx="90" cy="45" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="50" y="5" width="80" height="80" ></image>',t.templates.belinda.field_0="<text "+t.attr.width+'="170" style="font-size: 18px;" text-anchor="middle" fill="#ffffff"  x="90" y="105">{val}</text>',t.templates.belinda.field_1="<text "+t.attr.width+'="160" style="font-size: 14px;" text-anchor="middle" fill="#ffffff"  x="90" y="125">{val}</text>',t.templates.belinda.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}"/>',t.templates.belinda.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,79,5)" '+t.attr.control_node_menu_id+'="{id}"><rect x="0" y="0" fill="#000000" fill-opacity="0" width="22" height="22"></rect><line stroke-width="2" stroke="#000" x1="0" y1="3" x2="22" y2="3"></line><line stroke-width="2" stroke="#000" x1="0" y1="9" x2="22" y2="9"></line><line stroke-width="2" stroke="#000" x1="0" y1="15" x2="22" y2="15"></line></g>',t.templates.rony=Object.assign({},t.templates.ana),t.templates.rony.svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background-color:#E8E8E8;display:block;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',t.templates.rony.defs='<filter id="{randId}" x="0" y="0" width="200%" height="200%"><feOffset result="offOut" in="SourceAlpha" dx="5" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter>',t.templates.rony.size=[180,250],t.templates.rony.ripple={color:"#F57C00",radius:5,rect:null},t.templates.rony.img_0='<clipPath id="{randId}"><circle cx="90" cy="160" r="60"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="30" y="100"  width="120" height="120"></image>',t.templates.rony.node='<rect filter="url(#{randId})" x="0" y="0" height="250" width="180" fill="#ffffff" stroke-width="0" rx="7" ry="7"></rect>',t.templates.rony.field_0="<text "+t.attr.width+'="165" style="font-size: 18px;" fill="#039BE5" x="90" y="40" text-anchor="middle">{val}</text>',t.templates.rony.field_1="<text "+t.attr.width+'="165" style="font-size: 14px;" fill="#F57C00" x="90" y="60" text-anchor="middle">{val}</text>',t.templates.rony.field_2="<text "+t.attr.width+'="165" style="font-size: 14px;" fill="#FFCA28" x="90" y="80" text-anchor="middle">{val}</text>',t.templates.rony.link='<path stroke="#039BE5" stroke-width="1px" fill="none" d="M{xa},{ya} {xb},{yb} {xc},{yc} L{xd},{yd}"/>',t.templates.rony.plus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#039BE5"></line>',t.templates.rony.minus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line>',t.templates.rony.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,155,235)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#F57C00"></circle><circle cx="7" cy="0" r="2" fill="#F57C00"></circle><circle cx="14" cy="0" r="2" fill="#F57C00"></circle></g>',t.templates.mery=Object.assign({},t.templates.ana),t.templates.mery.ripple={color:"#e6e6e6",radius:50,rect:null},t.templates.mery.node='<rect x="0" y="0" height="120" width="250" fill="#ffffff" stroke-width="1" stroke="#686868" rx="50" ry="50"></rect><rect x="0" y="45" height="30" width="250" fill="#039BE5" stroke-width="1"></rect>',t.templates.mery.link='<path stroke="#aeaeae" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',t.templates.mery.img_0='<clipPath id="{randId}"><circle cx="125" cy="60" r="24"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="95" y="33"  width="60" height="60"></image>',t.templates.mery.field_0="<text "+t.attr.width+'="220" style="font-size: 18px;" fill="#039BE5" x="125" y="30" text-anchor="middle">{val}</text>',t.templates.mery.field_1="<text "+t.attr.width+'="220" style="font-size: 14px;" fill="#039BE5" x="125" y="100" text-anchor="middle">{val}</text>',t.templates.mery.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,60)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',t.templates.polina=Object.assign({},t.templates.ana),t.templates.polina.size=[300,80],t.templates.polina.ripple={color:"#e6e6e6",radius:40,rect:null},t.templates.polina.node='<rect x="0" y="0" height="80" width="300" fill="#039BE5" stroke-width="1" stroke="#686868" rx="40" ry="40"></rect>',t.templates.polina.img_0='<clipPath id="{randId}"><circle  cx="40" cy="40" r="35"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="0" y="0"  width="80" height="80"></image>',t.templates.polina.field_0="<text "+t.attr.width+'="210" style="font-size: 18px;" fill="#ffffff" x="80" y="30" text-anchor="start">{val}</text>',t.templates.polina.field_1="<text "+t.attr.width+'="210" style="font-size: 14px;" fill="#ffffff" x="80" y="55" text-anchor="start">{val}</text>',t.templates.polina.link='<path stroke="#686868" stroke-width="1px" fill="none" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',t.templates.polina.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,285,33)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="0" cy="7" r="2" fill="#ffffff"></circle><circle cx="0" cy="14" r="2" fill="#ffffff"></circle></g>',t.templates.mila=Object.assign({},t.templates.ana),t.templates.mila.node='<rect x="0" y="0" height="120" width="250" fill="#039BE5" stroke-width="1" stroke="#aeaeae"></rect><rect x="-5" y="70" height="30" width="260" fill="#ffffff" stroke-width="1" stroke="#039BE5"></rect><line x1="-5" x2="0" y1="100" y2="105" stroke-width="1" stroke="#039BE5"/><line x1="255" x2="250" y1="100" y2="105" stroke-width="1" stroke="#039BE5"/>',t.templates.mila.img_0='<image preserveAspectRatio="xMidYMid slice" xlink:href="{val}" x="20" y="5"  width="64" height="64"></image>',t.templates.mila.field_0="<text "+t.attr.width+'="240" style="font-size: 18px;" fill="#039BE5" x="125" y="92" text-anchor="middle">{val}</text>',t.templates.mila.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,110)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',t.templates.diva=Object.assign({},t.templates.ana),t.templates.diva.size=[200,170],t.templates.diva.node='<rect x="0" y="80" height="90" width="200" fill="#039BE5"></rect><circle cx="100" cy="50" fill="#ffffff" r="50" stroke="#039BE5" stroke-width="2"></circle>',t.templates.diva.img_0='<clipPath id="{randId}"><circle cx="100" cy="50" r="45"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="50" y="0"  width="100" height="100"></image>',t.templates.diva.field_0="<text "+t.attr.width+'="185" style="font-size: 18px;" fill="#ffffff" x="100" y="125" text-anchor="middle">{val}</text>',t.templates.diva.field_1="<text "+t.attr.width+'="185" style="font-size: 14px;" fill="#ffffff" x="100" y="145" text-anchor="middle">{val}</text>',t.templates.diva.pointer='<g data-pointer="pointer" transform="matrix(0,0,0,0,100,100)"><radialGradient id="pointerGradient"><stop stop-color="#ffffff" offset="0" /><stop stop-color="#039BE5" offset="1" /></radialGradient><circle cx="16" cy="16" r="16" stroke-width="1" stroke="#acacac" fill="url(#pointerGradient)"></circle></g>',t.templates.diva.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,175,155)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',t.templates.luba=Object.assign({},t.templates.ana),t.templates.luba.svg='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block;background-color: #2E2E2E;" width="{w}" height="{h}" viewBox="{viewBox}">{content}</svg>',t.templates.luba.defs='<linearGradient id="{randId}" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#646464;stop-opacity:1" /><stop offset="100%" style="stop-color:#363636;stop-opacity:1" /></linearGradient>',t.templates.luba.node='<rect fill="url(#{randId})" x="0" y="0" height="120" width="250" stroke-width="1" stroke="#aeaeae" rx="7" ry="7"></rect>',t.templates.luba.img_0='<clipPath id="{randId}"><circle cx="50" cy="25" r="40"></circle></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="-15"  width="80" height="80"></image>',t.templates.luba.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#aeaeae"></circle><circle cx="7" cy="0" r="2" fill="#aeaeae"></circle><circle cx="14" cy="0" r="2" fill="#aeaeae"></circle></g>',t.templates.luba.field_0="<text "+t.attr.width+'="235" style="font-size: 18px;" fill="#aeaeae" x="125" y="90" text-anchor="middle">{val}</text>',t.templates.luba.field_1="<text "+t.attr.width+'="140" style="font-size: 14px;" fill="#aeaeae" x="240" y="30" text-anchor="end">{val}</text>',t.templates.luba.plus='<rect x="0" y="0" width="36" height="36" rx="12" ry="12" fill="#2E2E2E" stroke="#aeaeae" stroke-width="1"></rect><line x1="4" y1="18" x2="32" y2="18" stroke-width="1" stroke="#aeaeae"></line><line x1="18" y1="4" x2="18" y2="32" stroke-width="1" stroke="#aeaeae"></line>',t.templates.luba.minus='<rect x="0" y="0" width="36" height="36" rx="12" ry="12" fill="#2E2E2E" stroke="#aeaeae" stroke-width="1"></rect><line x1="4" y1="18" x2="32" y2="18" stroke-width="1" stroke="#aeaeae"></line>',t.templates.luba.expandCollapseSize=36,t.templates.isla=Object.assign({},t.templates.ana),t.templates.isla.defs='<filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="isla-shadow"><feOffset dx="0" dy="4" in="SourceAlpha" result="shadowOffsetOuter1" /><feGaussianBlur stdDeviation="10" in="shadowOffsetOuter1" result="shadowBlurOuter1" /><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" /><feMerge><feMergeNode in="shadowMatrixOuter1" /><feMergeNode in="SourceGraphic" /></feMerge></filter>',t.templates.isla.size=[180,120],t.templates.isla.node='<rect filter="url(#isla-shadow)" x="0" y="20" rx="7" ry="7" height="100" width="180" fill="#FFF" stroke-width="1" stroke="#039BE5" ></rect><rect x="25" y="75" rx="10" ry="10" height="20" width="130" fill="#039BE5" stroke-width="3" stroke="#039BE5"></rect><rect fill="#ffffff" stroke="#039BE5" stroke-width="1" x="70" y="0" rx="13" ry="13" width="40" height="40"></rect><circle stroke="#FFCA28" stroke-width="3" fill="none" cx="90" cy="12" r="8"></circle><path d="M75,34 C75,17 105,17 105,34" stroke="#FFCA28" stroke-width="3" fill="none"></path>',t.templates.isla.field_0="<text "+t.attr.width+'="120" style="font-size: 12px;" fill="#fff" x="90" y="90" text-anchor="middle">{val}</text>',t.templates.isla.field_1="<text "+t.attr.width+'="160" style="font-size: 13px;" fill="#039BE5" x="90" y="64" text-anchor="middle">{val}</text>',t.templates.isla.img_0='<clipPath id="{randId}"><rect filter="url(#isla-shadow)" fill="#ffffff" stroke="#039BE5" stroke-width="1" x="70" y="0" rx="13" ry="13" width="40" height="40"></rect></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="70" y="0"  width="40" height="40"></image>',t.templates.isla.minus='<circle cx="15" cy="15" r="15" fill="#F57C00" stroke="#F57C00" stroke-width="1"></circle><line x1="8" y1="15" x2="22" y2="15" stroke-width="1" stroke="#ffffff"></line>',t.templates.isla.plus='<circle cx="15" cy="15" r="15" fill="#ffffff" stroke="#039BE5" stroke-width="1"></circle><line x1="4" y1="15" x2="26" y2="15" stroke-width="1" stroke="#039BE5"></line><line x1="15" y1="4" x2="15" y2="26" stroke-width="1" stroke="#039BE5"></line>',t.templates.isla.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,83,45)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#F57C00"></circle><circle cx="7" cy="0" r="2" fill="#F57C00"></circle><circle cx="14" cy="0" r="2" fill="#F57C00"></circle></g>',t.templates.isla.ripple={radius:0,color:"#F57C00",rect:{x:0,y:20,width:180,height:100}},t.templates.deborah=Object.assign({},t.templates.polina),t.templates.deborah.size=[150,150],t.templates.deborah.node='<rect x="0" y="0" height="150" width="150" fill="#039BE5" stroke-width="1" stroke="#686868" rx="15" ry="15"></rect>',t.templates.deborah.img_0='<clipPath id="{randId}"><rect fill="#ffffff" stroke="#039BE5" stroke-width="1" x="5" y="5" rx="15" ry="15" width="140" height="140"></rect></clipPath><image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="5" y="5"  width="140" height="140"></image><rect x="3" y="5" height="30" width="144" fill="#039BE5" opacity="0.5" rx="3" ry="3"></rect><rect x="3" y="115" height="30" width="144" fill="#039BE5" opacity="0.5" rx="3" ry="3"></rect>',t.templates.deborah.field_0="<text "+t.attr.width+'="125" '+t.attr.text_overflow+'="ellipsis" style="font-size: 18px;" fill="#ffffff" x="15" y="25" text-anchor="start">{val}</text>',t.templates.deborah.field_1="<text "+t.attr.width+'="105" '+t.attr.text_overflow+'="ellipsis" style="font-size: 11px;" fill="#ffffff" x="15" y="135" text-anchor="start">{val}</text>',t.templates.deborah.nodeMenuButton='<g style="cursor:pointer;" transform="matrix(1,0,0,1,125,130)" '+t.attr.control_node_menu_id+'="{id}"><rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect><circle cx="0" cy="0" r="2" fill="#ffffff"></circle><circle cx="7" cy="0" r="2" fill="#ffffff"></circle><circle cx="14" cy="0" r="2" fill="#ffffff"></circle></g>',t.templates.subLevel=Object.assign({},t.templates.base),t.templates.subLevel.size=[0,0],t.templates.subLevel.node="",t.templates.subLevel.plus="",t.templates.subLevel.minus="",t.templates.subLevel.nodeMenuButton="",t.templates.group_dotted_lines=Object.assign({},t.templates.group),t.templates.group_dotted_lines.size=[250,120],t.templates.group_dotted_lines.link='<path stroke-linejoin="round" stroke="#aeaeae" stroke-width="1px" fill="none" d="{rounded}" />',t.templates.group_dotted_lines.node='<rect rx="5" ry="5" x="0" y="0" height="{h}" width="{w}" fill="#e5e5e5" stroke-width="0"></rect>',t.templates.group_dotted_lines.nodeGroupDottedCloseButton='<g transform="matrix(1,0,0,1,{ew},0)"><circle cx="0.5" cy="21.5" r="12" fill="#F57C00"></circle>'+t.icon.close(25,25,"#fff",-13,8)+"</g>",t.templates.group_dotted_lines.field_0='<text data-width="230" style="font-size: 18px;" fill="#F57C00" x="20" y="30" text-anchor="start">Dotted Lines</text>',t.templates.group_dotted_lines.field_1="",t.templates.group_dotted_lines.img_0="",t.templates.group_dotted_lines.ripple.radius=5,t.templates.group_dotted_lines.min=Object.assign({},t.templates.olivia),t.templates.group_dotted_lines.min.nodeGroupDottedOpenButton='<g transform="matrix(1,0,0,1,220,10)"><rect x="0" y="0" width="22" height="22" stroke="#aeaeae" stroke-width="1" fill="#ffffff" rx="5" ry="5"></rect><text x="11" y="16" text-anchor="middle" style="font-size: 14px;" fill="#2A292E">{children-total-count}</text><rect x="0" y="0" width="22" height="22" style="opacity: 0" stroke="#aeaeae" stroke-width="1" fill="red" rx="5" ry="5"></rect></g>',t.ui={_defsIds:{},defs:function(e){var i="";for(var n in t.templates){var o=t.templates[n];o.defs&&(t.ui._defsIds[n]=t.randomId(),i+=o.defs.replaceAll("{randId}",t.ui._defsIds[n]))}return"<defs>"+i+e+"</defs>"},lonely:function(e){return e.nodes&&e.nodes.length?"":t.IT_IS_LONELY_HERE.replace("{link}",t.RES.IT_IS_LONELY_HERE_LINK)},pointer:function(e,i,n){if(i===t.action.exporting)return"";var o=t.t(e.template,!1,n).pointer;return o||(o=""),o},aiButton:function(e){return e.enableAI?'<div data-boc-ai-button class="boc-ai-button">AI</div>':""},node:function(e,i,n,o,r,s,a,c,l,h){var d=t.t(e.templateName,e.min,l),p=d.node.replaceAll("{w}",e.w).replaceAll("{h}",e.h);d.defs&&(p=p.replaceAll("{randId}",t.ui._defsIds[e.templateName])),a==null&&(a=o.nodeBinding);var f={node:e,data:i};for(var u in a){var x,S=a[u];i&&(x=i[S]);var y=t._lblIsImg(o,u);if(f.value=x,f.element=d[u],f.name=S,f.field=u,t.events.publish("field",[h,f])!==!1&&f.value!=null&&f.value!=null&&f.element!=null&&(!y||y&&!t.isNEU(f.value))){if(!y&&typeof f.value=="string"){var v=f.element;v&&(v=v.replaceAll("{ew}",e.w-(e.padding?e.padding[1]:0)).replaceAll("{cw}",e.w/2)),f.value=t.wrapText(f.value,v)}var E=f.element.replace("{val}",f.value);p+=E=E.replaceAll("{ew}",e.w-(e.padding?e.padding[1]:0)).replaceAll("{cw}",e.w/2).replaceAll("{randId}",t.randomId()).replaceAll("{randId2}",t.randomId())}}var b=t._getPosition(n,e,r,s),I="node";Array.isArray(e.tags)&&e.tags.length&&(I+=" "+e.tags.join(" ")),e.layout&&(I+=" tree-layout");var w="";e.lcn&&(w='lcn="'+e.lcn+'"');var M=t.nodeOpenTag.replace("{lcn}",w).replace("{id}",e.id).replace("{class}",I).replace("{sl}",e.sl).replace("{level}",e.level).replace("{x}",b.x).replace("{y}",b.y),C=t._getOpacity(n,e);return p=(M=M.replace("{opacity}",C))+(p+=t.ui.nodeBtns(o,e,c,d,h))+t.grCloseTag},nodeBtns:function(e,i,n,o,r){var s="";return e.nodeMenu==null||i.isSplit||n===t.action.exporting||(s+=o.nodeMenuButton.replace("{id}",i.id).replace("{cw}",i.w/2).replace("{ch}",i.h/2).replace("{ew}",i.w-(i.padding?i.padding[1]:0)).replace("{eh}",i.h-(i.padding?i.padding[2]:0))),e.nodeCircleMenu==null||i.isSplit||n===t.action.exporting||t.isNEU(o.nodeCircleMenuButton)||(s+='<g style="cursor:pointer;" transform="matrix(1,0,0,1,'+o.nodeCircleMenuButton.x+","+o.nodeCircleMenuButton.y+')" '+t.attr.control_node_circle_menu_id+'="'+i.id+'"><circle cx="0" cy="0" fill="'+o.nodeCircleMenuButton.color+'" r="'+o.nodeCircleMenuButton.radius+'" stroke-width="1" stroke="'+o.nodeCircleMenuButton.stroke+'"></circle><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="-6" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="-6" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="0" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="0" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line><line x1="-'+o.nodeCircleMenuButton.radius/2+'" y1="6" x2="'+o.nodeCircleMenuButton.radius/2+'" y2="6" stroke-width="2" stroke="'+o.nodeCircleMenuButton.stroke+'"></line></g>'),s},expandCollapseBtn:function(e,i,n,o,r){var s="";if(o!==t.action.exporting&&!i.isSplit){var a=n[i.lcn?i.lcn:"base"],c=0,l=0,h=t.t(i.templateName,i.min,r);if(i.childrenIds.length>0){if(i.hasPartners){for(var d=!1,p=0;p<i.childrenIds.length;p++){var f=e.getNode(i.childrenIds[p]);!f||f.parentPartner||f.isPartner||(d=!0)}if(!d)return""}switch(a.orientation){case t.orientation.top:case t.orientation.top_left:c=i.x+i.w/2,l=i.y+i.h;break;case t.orientation.bottom:case t.orientation.bottom_left:c=i.x+i.w/2,l=i.y;break;case t.orientation.right:case t.orientation.right_top:c=i.x,l=i.y+i.h/2;break;case t.orientation.left:case t.orientation.left_top:c=i.x+i.w,l=i.y+i.h/2}if(c-=h.expandCollapseSize/2,l-=h.expandCollapseSize/2,e.getCollapsedIds(i).length?(s+=t.expcollOpenTag.replace("{id}",i.id).replace("{x}",c).replace("{y}",l),s+=h.plus,s+=t.grCloseTag):(s+=t.expcollOpenTag.replace("{id}",i.id).replace("{x}",c).replace("{y}",l),s+=h.minus,s+=t.grCloseTag),s.indexOf("{collapsed-children-count}")!=-1){var u=t.collapsedChildrenCount(e,i);s=s.replace("{collapsed-children-count}",u)}if(s.indexOf("{collapsed-children-total-count}")!=-1){var x=t.collapsedChildrenTotalCount(e,i);s=s.replace("{collapsed-children-total-count}",x)}if(s.indexOf("{children-count}")!=-1){var S=t.childrenCount(e,i);s=s.replace("{children-count}",S)}if(s.indexOf("{children-total-count}")!=-1){var y=t.childrenTotalCount(e,i);s=s.replace("{children-total-count}",y)}}e._nodeHasHiddenParent(i)&&(s+=t.upOpenTag.replace("{id}",i.id).replace("{x}",i.x).replace("{y}",i.y),s+=h.up,s+=t.grCloseTag)}var v={html:s,node:i};return t.events.publish("renderbuttons",[e,v]),v.html},link:function(e,i,n,o,r,s,a){var c=e.lcn?e.lcn:"base",l=i._layoutConfigs[c],h=t.t(e.templateName,e.min,n),d=[],p=[],f=l.levelSeparation/2;e.layout>0&&(f=l.mixedHierarchyNodesSeparation/2);var u=0,x=t.getRootOf(e).id,S=o[x][e.sl],y=void 0;if(e.hasPartners){y={ids:[],indexes:{},ppnodes:{},lastLeft:null,firstRight:null,maxSidePartnersWithChildren:0,rightIds:[],leftIds:[],partnerChildrenSplitSeparation:i.config.partnerChildrenSplitSeparation};for(var v=0;v<e.children.length;v++)(b=e.children[v]).parentPartner?(y.ppnodes[b.id]=b.parentPartner,y.ids.push(b.id),b.parentPartner.isPartner==1?(y.rightIds.indexOf(b.parentPartner.id)==-1&&y.rightIds.push(b.parentPartner.id),y.indexes[b.id]=y.rightIds.indexOf(b.parentPartner.id),y.firstRight||(y.firstRight=b)):b.parentPartner.isPartner==2&&(y.leftIds.indexOf(b.parentPartner.id)==-1&&y.leftIds.push(b.parentPartner.id),y.indexes[b.id]=y.leftIds.indexOf(b.parentPartner.id),y.lastLeft=b)):b.isPartner||(y.lastLeft=b,y.firstRight||(y.firstRight=b));y.maxSidePartnersWithChildren=Math.max(y.leftIds.length,y.rightIds.length),u=y.maxSidePartnersWithChildren==0?i.config.minPartnerSeparation/2:i.config.minPartnerSeparation/2+y.partnerChildrenSplitSeparation*y.maxSidePartnersWithChildren+y.partnerChildrenSplitSeparation/2}for(v=0;v<e.children.length;v++){var E,b=e.children[v],I=o[x][b.sl],w={xa:0,ya:0,xb:0,yb:0,xc:0,yc:0,xd:0,yd:0,x:0,y:0,rotate:0},M=(h=t.t(b.templateName,b.min,n)).link;if(b.isChildOfPartner)switch(l.orientation){case t.orientation.top:case t.orientation.top_left:var C=b.layout==1?void 0:I.minY-(I.minY-S.maxY)/2;w=t.ui._linkTopToBottom(b.parentPartner,b,h,f,C);break;case t.orientation.bottom:case t.orientation.bottom_left:C=b.layout==1?void 0:I.maxY-(I.maxY-S.minY)/2,w=t.ui._linkBottomToTop(b.parentPartner,b,h,f,C);break;case t.orientation.right:case t.orientation.right_top:C=b.layout==1?void 0:I.maxX-(I.maxX-S.minX)/2,w=t.ui._linkRightToLeft(b.parentPartner,b,h,f,C);break;case t.orientation.left:case t.orientation.left_top:C=b.layout==1?void 0:I.minX-(I.minX-S.maxX)/2,w=t.ui._linkLeftToRight(b.parentPartner,b,h,f,C)}else if(y&&y.ids.indexOf(b.id)!=-1)switch(l.orientation){case t.orientation.top:case t.orientation.top_left:w=t.ui._linkPpTop(y,e,b,I,S,h);break;case t.orientation.bottom:case t.orientation.bottom_left:w=t.ui._linkPpBottom(y,e,b,I,S,h);break;case t.orientation.right:case t.orientation.right_top:w=t.ui._linkPpRight(y,e,b,I,S,h);break;case t.orientation.left:case t.orientation.left_top:w=t.ui._linkPpLeft(y,e,b,I,S,h)}else{var R=b.isAssistant&&b.rightNeighbor&&b.rightNeighbor.isAssistant&&b.parent==b.rightNeighbor.parent,O=b.isAssistant&&b.leftNeighbor&&b.leftNeighbor.isAssistant&&b.parent==b.leftNeighbor.parent;if((R||b.layout>1)&&b.rightNeighbor&&b.rightNeighbor.isSplit)switch(l.orientation){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:w=t.ui._linkRightToLeft(b.rightNeighbor,b,h,f);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:w=t.ui._linkBottomToTop(b.rightNeighbor,b,h,f)}else if((O||b.layout>1)&&b.leftNeighbor&&b.leftNeighbor.isSplit)switch(l.orientation){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:w=t.ui._linkLeftToRight(b.leftNeighbor,b,h,f);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:w=t.ui._linkTopToBottom(b.leftNeighbor,b,h,f)}else switch(l.orientation){case t.orientation.top:case t.orientation.top_left:b.isPartner==1?w=t.ui._linkLeftToRight(e,b,h,u):b.isPartner==2?w=t.ui._linkRightToLeft(e,b,h,u):(C=b.layout==1?void 0:I.minY-(I.minY-S.maxY)/2,w=t.ui._linkTopToBottom(e,b,h,f,C));break;case t.orientation.bottom:case t.orientation.bottom_left:b.isPartner==1?w=t.ui._linkLeftToRight(e,b,h,u):b.isPartner==2?w=t.ui._linkRightToLeft(e,b,h,u):(C=b.layout==1?void 0:I.maxY-(I.maxY-S.minY)/2,w=t.ui._linkBottomToTop(e,b,h,f,C));break;case t.orientation.right:case t.orientation.right_top:b.isPartner==1?w=t.ui._linkTopToBottom(e,b,h,u):b.isPartner==2?w=t.ui._linkBottomToTop(e,b,h,u):(C=b.layout==1?void 0:I.maxX-(I.maxX-S.minX)/2,w=t.ui._linkRightToLeft(e,b,h,f,C));break;case t.orientation.left:case t.orientation.left_top:b.isPartner==1?w=t.ui._linkTopToBottom(e,b,h,u):b.isPartner==2?w=t.ui._linkBottomToTop(e,b,h,u):(C=b.layout==1?void 0:I.minX-(I.minX-S.maxX)/2,w=t.ui._linkLeftToRight(e,b,h,f,C))}}var z=t.ui._draggableLinkPath(i,e,b,w,f,l.orientation);if(z)E=z,M=M.replaceAll("{rounded}",z).replaceAll("{edge}",z).replaceAll("{curve}",E);else if(M.indexOf("{rounded}")!=-1)if(w.xa==w.xb&&w.xa==w.xc&&w.xa==w.xd||w.ya==w.yb&&w.ya==w.yc&&w.ya==w.yd)E="M"+w.xa+","+w.ya+" L"+w.xd+","+w.yd,M=M.replaceAll("{rounded}",E);else if(Math.abs(w.xa-w.xd)<=t.LINK_ROUNDED_CORNERS&&Math.abs(w.xa-w.xc)<=t.LINK_ROUNDED_CORNERS&&Math.abs(w.xa-w.xb)<=t.LINK_ROUNDED_CORNERS)E="M"+w.xa+","+w.ya+" L"+w.xa+","+w.yd,M=M.replaceAll("{rounded}",E);else if(Math.abs(w.ya-w.yd)<=t.LINK_ROUNDED_CORNERS&&Math.abs(w.ya-w.yc)<=t.LINK_ROUNDED_CORNERS&&Math.abs(w.ya-w.yb)<=t.LINK_ROUNDED_CORNERS)E="M"+w.xa+","+w.ya+" L"+w.xd+","+w.ya,M=M.replaceAll("{rounded}",E);else{var F=t.ui._roundedEdge(w.xa,w.ya,w.xb,w.yb,w.xc,w.yc),V=t.ui._roundedEdge(w.xb,w.yb,w.xc,w.yc,w.xd,w.yd);E="M"+F.x1+","+F.y1+" "+F.x2+","+F.y2+" Q"+F.qx1+","+F.qy1+" "+F.qx2+","+F.qy2+" L"+V.x2+","+V.y2+" Q"+V.qx1+","+V.qy1+" "+V.qx2+","+V.qy2+" L"+V.x3+","+V.y3,M=M.replaceAll("{rounded}",E)}else M.indexOf("{edge}")!=-1?(E="M"+w.xa+","+w.ya+" "+w.xb+","+w.yb+" "+w.xc+","+w.yc+" L"+w.xd+","+w.yd,M=M.replaceAll("{edge}",E)):M.indexOf("{curve}")!=-1?(E="M"+w.xa+","+w.ya+" C"+w.xb+","+w.yb+" "+w.xc+","+w.yc+" "+w.xd+","+w.yd,M=M.replaceAll("{curve}",E)):(E=M.replaceAll("{xa}",w.xa).replaceAll("{ya}",w.ya).replaceAll("{xb}",w.xb).replaceAll("{yb}",w.yb).replaceAll("{xc}",w.xc).replaceAll("{yc}",w.yc).replaceAll("{xd}",w.xd).replaceAll("{yd}",w.yd),M=E);d.push(t.linkOpenTag.replaceAll("{id}",e.id).replaceAll("{class}","link "+b.tags.join(" ")).replaceAll("{child-id}",b.id));var X={node:e,cnode:b,p:w,html:M,action:s};t.events.publish("render-link",[i,X]),d.push(X.html),a&&p.push({id:e.id,childId:b.id,html:X.html});var W="";for(var Z in i.config.linkBinding){var Y=i.config.linkBinding[Z],q=i._get(b.id);if(q){var j=q[Y];X.value=j,X.element=h[Z],X.name=Y,t.events.publish("label",[i,X])!==!1&&(t.isNEU(X.value)||t.isNEU(X.element)||(W+=X.element.replace("{val}",X.value)))}}if(W!=""){var K=w.x,ie=w.y;b.movey!=null&&(ie+=b.movey),W=t.linkFieldsOpenTag.replace("{x}",K).replace("{y}",ie).replace("{rotate}",0)+W+t.grCloseTag,d.push(W)}d.push(t.grCloseTag)}return a?p:d.join("")},svg:function(e,i,n,o,r,s){return t.t(o.template,!1,s).svg.replace("{w}",e).replace("{h}",i).replace("{viewBox}",n).replace("{randId}",t.ui._defsIds[o.template]).replace("{mode}",o.mode).replace("{template}",o.template).replace("{content}",function(){return r})},menuButton:function(e){return e.menu==null?"":t.t(e.template,!1).menuButton.replaceAll("{p}",e.padding)},_roundedEdge:function(e,i,n,o,r,s){var a,c,l,h=t.LINK_ROUNDED_CORNERS,d=0;return e==n&&e==r||i==o&&i==s?(a=l=n,c=d=o):(e!=r&&n==r&&(a=l=n,c=o,i<s?d=o+h:i>s&&(d=o-h)),e<r&&n==r?n-=h:e>r&&n==r&&(n+=h),i!=s&&o==s&&(a=n,c=d=o,e<r?l=n+h:e>r&&(l=n-h)),i<s&&o==s?o-=h:i>s&&o==s&&(o+=h)),{x1:e,y1:i,x2:n,y2:o,x3:r,y3:s,qx1:a,qy1:c,qx2:l,qy2:d}},_linkTopToBottom:function(e,i,n,o,r){var s,a,c,l,h,d=0;return s=e.x+e.w/2+n.linkAdjuster.toX,a=e.y+e.h+n.linkAdjuster.toY,l=c=i.x+i.w/2+n.linkAdjuster.fromX,h=i.y+n.linkAdjuster.fromY,{xa:s,ya:a,xb:s,yb:d=e.rightNeighbor&&e.rightNeighbor.isAssistant&&i.templateName=="split"?e.rightNeighbor.y+e.rightNeighbor.h+o:e.templateName=="split"&&(i.isAssistant||i.layout>1)?h:i.templateName=="split"?a+o:r??h-o,xc:c,yc:d,xd:l,yd:h,x:c,y:t.isNEU(i.parentPartner)?d+16:d,rotate:0}},_linkBottomToTop:function(e,i,n,o,r){var s,a,c,l,h,d=0;return s=e.x+e.w/2+n.linkAdjuster.toX,a=e.y+n.linkAdjuster.toY,l=c=i.x+i.w/2+n.linkAdjuster.fromX,h=i.y+i.h+n.linkAdjuster.fromY,{xa:s,ya:a,xb:s,yb:d=e.rightNeighbor&&e.rightNeighbor.isAssistant&&i.templateName=="split"?e.rightNeighbor.y-o:e.templateName=="split"&&(i.isAssistant||i.layout>1)?h:i.templateName=="split"?a-o:r??h+o,xc:c,yc:d,xd:l,yd:h,x:c,y:d-14,rotate:0}},_linkRightToLeft:function(e,i,n,o,r){var s,a,c,l,h,d,p=0;return s=e.x+n.linkAdjuster.toX,a=e.y+e.h/2+n.linkAdjuster.toY,h=i.x+i.w+n.linkAdjuster.fromX,d=l=i.y+i.h/2+n.linkAdjuster.fromY,c=a,{xa:s,ya:a,xb:p=e.rightNeighbor&&e.rightNeighbor.isAssistant&&i.templateName=="split"?e.rightNeighbor.x-o:e.templateName=="split"&&(i.isAssistant||i.layout>1)?h:i.templateName=="split"?s-o:r??h+o,yb:c,xc:p,yc:l,xd:h,yd:d,x:p-16,y:l,rotate:90}},_linkLeftToRight:function(e,i,n,o,r){var s,a,c,l,h,d,p=0;return s=e.x+e.w+n.linkAdjuster.toX,a=e.y+e.h/2+n.linkAdjuster.toY,h=i.x+n.linkAdjuster.fromX,d=l=i.y+i.h/2+n.linkAdjuster.fromY,c=a,{xa:s,ya:a,xb:p=e.rightNeighbor&&e.rightNeighbor.isAssistant&&i.templateName=="split"?e.rightNeighbor.x+e.rightNeighbor.w+o:e.templateName=="split"&&(i.isAssistant||i.layout>1)?h:i.templateName=="split"?s+o:r??h-o,yb:c,xc:p,yc:l,xd:h,yd:d,x:p+14,y:l,rotate:270}},_linkPpTop:function(e,i,n,o,r,s){var a=e.ppnodes[n.id],c=a.y+a.h/2,l=o.minY-(o.minY-r.maxY)/2,h=(o.minY-r.maxY)/e.maxSidePartnersWithChildren/4,d=t.ui.__linkPpBottomTop(e,i,n,l,h,a),p=d.x;return l=d.mid,t.ui._linkTopToBottom({x:p,y:c,w:0,h:0},n,s,0,l)},_linkPpBottom:function(e,i,n,o,r,s){var a=e.ppnodes[n.id],c=a.y+a.h/2,l=o.maxY-(o.maxY-r.minY)/2,h=(o.maxY-r.minY)/e.maxSidePartnersWithChildren/4,d=t.ui.__linkPpBottomTop(e,i,n,l,h,a),p=d.x;return l=d.mid,t.ui._linkBottomToTop({x:p,y:c,w:0,h:0},n,s,0,l)},_linkPpLeft:function(e,i,n,o,r,s){var a=e.ppnodes[n.id],c=o.minX-(o.minX-r.maxX)/2,l=(o.minX-r.maxX)/e.maxSidePartnersWithChildren/4,h=a.x+a.w/2,d=t.ui.__linkPpLeftRight(e,i,n,c,l,a),p=d.y;return c=d.mid,t.ui._linkLeftToRight({x:h,y:p,w:0,h:0},n,s,0,c)},_linkPpRight:function(e,i,n,o,r,s){var a=e.ppnodes[n.id],c=o.maxX-(o.maxX-r.minX)/2,l=(o.maxX-r.minX)/e.maxSidePartnersWithChildren/4,h=a.x+a.w/2,d=t.ui.__linkPpLeftRight(e,i,n,c,l,a),p=d.y;return c=d.mid,t.ui._linkRightToLeft({x:h,y:p,w:0,h:0},n,s,0,c)},__linkPpBottomTop:function(e,i,n,o,r,s){var a=0;return s.isPartner==1?(a=s.x-i.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.x+e.lastLeft.w/2?a<n.x+n.w/2?o-=(e.indexes[n.id]+1)*r:o-=(e.rightIds.length-e.indexes[n.id])*r:a<n.x+n.w/2?o+=(e.rightIds.length-e.indexes[n.id])*r:o+=(e.indexes[n.id]+1)*r):s.isPartner==2&&(a=s.x+s.w+i.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.x+e.firstRight.w/2?a<n.x+n.w/2?o-=(e.indexes[n.id]+1)*r:o-=(e.leftIds.length-e.indexes[n.id])*r:a<n.x+n.w/2?o+=(e.leftIds.length-e.indexes[n.id])*r:o+=(e.indexes[n.id]+1)*r),{x:a,mid:o}},__linkPpLeftRight:function(e,i,n,o,r,s){var a=0;return s.isPartner==1?(a=s.y-i.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.rightIds.length-1)*e.partnerChildrenSplitSeparation/2,e.lastLeft&&a<e.lastLeft.y+e.lastLeft.h/2?a<n.y+n.h/2?o-=(e.indexes[n.id]+1)*r:o-=(e.rightIds.length-e.indexes[n.id])*r:a<n.y+n.h/2?o+=(e.rightIds.length-e.indexes[n.id])*r:o+=(e.indexes[n.id]+1)*r):s.isPartner==2&&(a=s.y+s.h+i.partnerSeparation/2+e.indexes[n.id]*e.partnerChildrenSplitSeparation-(e.leftIds.length-1)*e.partnerChildrenSplitSeparation/2,e.firstRight&&a>e.firstRight.y+e.firstRight.h/2?a<n.y+n.h/2?o-=(e.indexes[n.id]+1)*r:o-=(e.leftIds.length-e.indexes[n.id])*r:a<n.y+n.h/2?o+=(e.leftIds.length-e.indexes[n.id])*r:o+=(e.indexes[n.id]+1)*r),{y:a,mid:o}},_draggableLinkPath:function(e,i,n,o,r,s){if(n.isSubLevel||i.isSubLevel||n.leftNeighbor&&n.leftNeighbor.isSplit||n.rightNeighbor&&n.rightNeighbor.isSplit||n.isPartner||n.isAssistant)return null;if(t._isMoved(n)&&!t._isMoved(i)){var a=[];switch(s){case t.orientation.top:case t.orientation.top_left:if(o.yb+r/2<o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,h=n.y-r/2;break;case t.orientation.bottom:case t.orientation.bottom_left:if(o.yb-r/2>o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,h=n.y+n.h+r/2;break;case t.orientation.right:case t.orientation.right_top:if(o.xb-r/2>o.xd)return null;h=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x+n.w+r/2;break;case t.orientation.left:case t.orientation.left_top:if(o.xb+r/2<o.xd)return null;h=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x-r/2}switch(s){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:a.push(["M",o.xa,o.ya]),a.push(["L",o.xb,o.yb]),a.push(["L",l,o.yb]),a.push(["L",l,h]),a.push(["L",o.xd,h]),a.push(["L",o.xd,o.yd]);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:(a=[]).push(["M",o.xa,o.ya]),a.push(["L",o.xb,o.yb]),a.push(["L",o.xb,h]),a.push(["L",l,h]),a.push(["L",l,o.yd]),a.push(["L",o.xd,o.yd])}return t.roundPathCorners(a,t.LINK_ROUNDED_CORNERS,!1)}if(!t._isMoved(n)&&t._isMoved(i)){var c=!1;switch(a=[],s){case t.orientation.top:case t.orientation.top_left:if(o.ya+r/2>o.yb)c=!0,l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,h=i.y+i.h+r;else{if(o.yb+r/2<o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,h=n.y-r/2}break;case t.orientation.bottom:case t.orientation.bottom_left:if(o.ya-r/2<o.yb)c=!0,l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,h=i.y-r;else{if(o.yb-r/2>o.yd)return null;l=o.xa<o.xd?n.x-r/2:n.x+n.w+r/2,h=n.y+n.h+r/2}break;case t.orientation.right:case t.orientation.right_top:if(o.xa-r/2<o.xb)c=!0,h=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x-r;else{if(o.xb-r/2>o.xd)return null;h=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x+n.w+r/2}break;case t.orientation.left:case t.orientation.left_top:if(o.xa+r/2>o.xb)c=!0,h=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x+i.w+r;else{if(o.xb+r/2<o.xd)return null;h=o.ya<o.yd?n.y-r/2:n.y+n.h+r/2,l=n.x-r/2}}if(c)switch(s){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:a.push(["M",o.xa,o.ya]),a.push(["L",o.xa,h]),a.push(["L",l,h]),a.push(["L",l,o.yc]),a.push(["L",o.xc,o.yc]),a.push(["L",o.xd,o.yd]);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:a.push(["M",o.xa,o.ya]),a.push(["L",l,o.ya]),a.push(["L",l,h]),a.push(["L",o.xc,h]),a.push(["L",o.xc,o.yc]),a.push(["L",o.xd,o.yd])}else switch(s){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:a.push(["M",o.xa,o.ya]),a.push(["L",o.xb,o.yb]),a.push(["L",l,o.yb]),a.push(["L",l,h]),a.push(["L",o.xd,h]),a.push(["L",o.xd,o.yd]);break;case t.orientation.right:case t.orientation.right_top:case t.orientation.left:case t.orientation.left_top:a.push(["M",o.xa,o.ya]),a.push(["L",o.xb,o.yb]),a.push(["L",o.xb,h]),a.push(["L",l,h]),a.push(["L",l,o.yd]),a.push(["L",o.xd,o.yd])}return t.roundPathCorners(a,t.LINK_ROUNDED_CORNERS,!1)}if(t._isMoved(n)&&t._isMoved(i)){switch(a=[],s){case t.orientation.top:case t.orientation.top_left:if(o.ya+r>o.yd){var l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,h=i.y+i.h+r,d=n.y-r;a.push(["M",o.xa,o.ya]),a.push(["L",o.xa,h]),a.push(["L",l,h]),a.push(["L",l,d]),a.push(["L",o.xc,d]),a.push(["L",o.xd,o.yd])}else a.push(["M",o.xa,o.ya]),a.push(["L",o.xa,i.y+i.h+r]),a.push(["L",o.xc,i.y+i.h+r]),a.push(["L",o.xd,o.yd]);break;case t.orientation.bottom:case t.orientation.bottom_left:o.ya-r<o.yd?(l=o.xa<o.xd?i.x+i.w+r/2:i.x-r/2,h=i.y-r,d=n.y+n.h+r,a.push(["M",o.xa,o.ya]),a.push(["L",o.xa,h]),a.push(["L",l,h]),a.push(["L",l,d]),a.push(["L",o.xc,d]),a.push(["L",o.xd,o.yd])):(a.push(["M",o.xa,o.ya]),a.push(["L",o.xa,i.y-r]),a.push(["L",o.xc,i.y-r]),a.push(["L",o.xd,o.yd]));break;case t.orientation.right:case t.orientation.right_top:if(o.xa-r<o.xd){h=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x-r;var p=n.x+n.w+r;a.push(["M",o.xa,o.ya]),a.push(["L",l,o.ya]),a.push(["L",l,h]),a.push(["L",p,h]),a.push(["L",p,o.yc]),a.push(["L",o.xd,o.yd])}else a.push(["M",o.xa,o.ya]),a.push(["L",i.x-r,o.ya]),a.push(["L",i.x-r,o.yc]),a.push(["L",o.xd,o.yd]);break;case t.orientation.left:case t.orientation.left_top:o.xa+r>o.xd?(h=o.ya<o.yd?i.y+i.h+r/2:i.y-r/2,l=i.x+i.w+r,p=n.x-r,a.push(["M",o.xa,o.ya]),a.push(["L",l,o.ya]),a.push(["L",l,h]),a.push(["L",p,h]),a.push(["L",p,o.yc]),a.push(["L",o.xd,o.yd])):(a.push(["M",o.xa,o.ya]),a.push(["L",i.x+i.w+r,o.ya]),a.push(["L",i.x+i.w+r,o.yc]),a.push(["L",o.xd,o.yd]))}return t.roundPathCorners(a,t.LINK_ROUNDED_CORNERS,!1)}return null}},t===void 0&&(t={}),t._validateConfig=function(e){return!!e||(console.error("config is not defined"),!1)},t._arrayContains=function(e,i){if(e&&Array.isArray(e)){for(var n=e.length;n--;)if(e[n]===i)return!0}return!1},t._interceptions=function(e,i){if(!e)return[];if(!i)return[];var n=[];if(Array.isArray(e)&&Array.isArray(i))for(var o in e)for(var r in i)e[o]==i[r]&&n.push(e[o]);else if(Array.isArray(e)&&!Array.isArray(i))for(var o in e)for(var r in i)e[o]==r&&n.push(e[o]);else if(!Array.isArray(e)&&Array.isArray(i))for(var o in e)for(var r in i)o==i[r]&&n.push(i[r]);return n},t._getTags=function(e){return e.tags&&!Array.isArray(e.tags)?e.tags.split(","):e.tags&&Array.isArray(e.tags)?e.tags:[]},t._centerPointInPercent=function(e,i,n){var o=e.getBoundingClientRect(),r=i-o.left,s=n-o.top;return[r/(o.width/100),s/(o.height/100)]},t._trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t._getTransform=function(e){var i=e.getAttribute("transform");return i=i.replace("matrix","").replace("(","").replace(")",""),t._browser().msie&&(i=i.replace(/ /g,",")),i="["+(i=t._trim(i))+"]",i=JSON.parse(i)},t.getScale=function(e,i,n,o,r,s,a,c){var l=1;if(e||o!==t.match.boundary&&o!==t.match.boundaryIfOutside)if(e||o!==t.match.width)if(e||o!==t.match.height)if(e){var h,d;l=(h=i/e[2])>(d=n/e[3])?d:h}else l=o;else l=n/c;else l=i/a;else l=(h=i/a)>(d=n/c)?d:h,o===t.match.boundaryIfOutside&&l>1&&(l=1);return l&&l>r&&(l=r),l&&l<s&&(l=s),l},t.isObject=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&e!==null&&e.constructor&&e.constructor.name.toLowerCase()=="object"},t.fileUploadDialog=function(e){var i=document.createElement("INPUT");i.setAttribute("type","file"),i.style.display="none",i.onchange=function(){var n=this.files[0];e(n)},document.body.appendChild(i),i.click()},t.mergeDeep=function(e,i){if(t.isObject(e)&&t.isObject(i))for(var n in i)t.isObject(i[n])?(e[n]||Object.assign(e,{[n]:{}}),t.mergeDeep(e[n],i[n])):Object.assign(e,{[n]:i[n]});return e},t._lblIsImg=function(e,i){return!(!e.nodeBinding||typeof i!="string"||i.indexOf("img")==-1||!e.nodeBinding[i])},t._getFistImgField=function(e){if(e.nodeBinding){for(var i in e.nodeBinding)if(i.indexOf("img")!=-1)return e.nodeBinding[i]}return!1},t._fieldIsImg=function(e,i){if(e.nodeBinding){for(var n in e.nodeBinding)if(e.nodeBinding[n]==i)return t._lblIsImg(e,n)}return!1},t._guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.htmlRipple=function(e){var i=document.createElement("style");i.type="text/css",i.innerHTML=" .boc-ripple-container {position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .boc-ripple-container span {transform: scale(0);border-radius:100%;position:absolute;opacity:0.75;background-color:#fff;animation: boc-ripple 1000ms; }@-moz-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@-webkit-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@-o-keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}@keyframes boc-ripple {to {opacity: 0;transform: scale(2);}}",document.head.appendChild(i);var n,o,r,s=document.createElement("div");s.className="boc-ripple-container",e.addEventListener("mousedown",function(a){var c,l,h,d,p;return l=document.createElement("span"),h=this.offsetWidth,c=this.getBoundingClientRect(),p=a.pageX-c.left-h/2,d="top:"+(a.pageY-c.top-h/2)+"px; left: "+p+"px; height: "+h+"px; width: "+h+"px;",e.rippleContainer.appendChild(l),l.setAttribute("style",d)}),e.addEventListener("mouseup",(n=function(){for(;this.rippleContainer.firstChild;)this.rippleContainer.removeChild(this.rippleContainer.firstChild)},o=2e3,r=void 0,function(){var a,c;return c=this,a=arguments,clearTimeout(r),r=setTimeout(function(){return n.apply(c,a)},o)})),e.rippleContainer=s,e.appendChild(s)},t._moveToBoundaryArea=function(e,i,n,o){var r=i.slice(0);i[0]<n.left&&i[0]<n.right&&(r[0]=n.left>n.right?n.right:n.left),i[0]>n.right&&i[0]>n.left&&(r[0]=n.left>n.right?n.left:n.right),i[1]<n.top&&i[1]<n.bottom&&(r[1]=n.top>n.bottom?n.bottom:n.top),i[1]>n.bottom&&i[1]>n.top&&(r[1]=n.top>n.bottom?n.top:n.bottom),i[0]!==r[0]||i[1]!==r[1]?t.animate(e,{viewBox:i},{viewBox:r},300,t.anim.outPow,function(){o&&o()}):o&&o()},t.randomId=function(){return"_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4)},t._getClientXY=function(e){return e.type.indexOf("touch")==-1?{x:e.clientX,y:e.clientY}:e.changedTouches.length?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0},t._getClientTouchesXY=function(e,i){return e.type.indexOf("touch")!=-1?e.touches.length<i+1?{x:null,y:null}:{x:e.touches[i].clientX,y:e.touches[i].clientY}:{x:e.clientX,y:e.clientY}},t._getOffset=function(e,i){e&&(i.x+=e.offsetLeft,i.y+=e.offsetTop,t._getOffset(e.offsetParent,i))},t._getTopLeft=function(e){var i={x:0,y:0};return t._getOffset(e,i),i},t._getOffsetXY=function(e,i){if(i.type.indexOf("touch")==-1)return{x:i.offsetX,y:i.offsetY};if(i.touches.length){var n=t._getTopLeft(e);return{x:i.touches[0].pageX-n.x,y:i.touches[0].pageY-n.y}}if(i.changedTouches.length)return n=t._getTopLeft(e),isNaN(n.x)||isNaN(n.y)?{x:i.changedTouches[0].pageX,y:i.changedTouches[0].pageY}:{x:i.changedTouches[0].pageX-n.x,y:i.changedTouches[0].pageY-n.y}},t._pinchMiddlePointInPercent=function(e,i,n,o){var r=t._getTopLeft(e),s=o.touches[0].pageX-r.x,a=o.touches[0].pageY-r.y,c=o.touches[1].pageX-r.x,l=o.touches[1].pageY-r.y;return[((s-c)/2+c)/(i/100),((a-l)/2+l)/(n/100)]},t._browser=function(){var e=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,i=typeof InstallTrigger<"u",n=/constructor/i.test(window.HTMLElement)||(!window.safari||window.safari!==void 0&&safari.pushNotification).toString()==="[object SafariRemoteNotification]",o=!!document.documentMode,r=!o&&!!window.StyleMedia,s=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{opera:e,firefox:i,safari:n,msie:o,edge:r,chrome:s,blink:(s||e)&&!!window.CSS}},t._menuPosition=function(e,i,n){var o=e.getBoundingClientRect(),r=n.getBoundingClientRect(),s=i.getBoundingClientRect(),a=o.left-r.left,c=o.top-r.top;return o.top+s.height>r.top+r.height&&(c-=s.height),o.left-s.width<r.left&&(a+=s.width),{x:a,y:c}},t._getTemplate=function(e,i,n){if(Array.isArray(e))for(var o=0;o<e.length;o++){var r=i[e[o]];if(r&&r.template)return r.template}return n},t._getMin=function(e,i){if(e.tags&&e.tags.length&&i.tags)for(var n=0;n<e.tags.length;n++){var o=i.tags[e.tags[n]];if(o&&o.min===!0)return!0}return i.min},t._getSubLevels=function(e,i){if(e&&e.length)for(var n=0;n<e.length;n++){var o=i[e[n]];if(o&&o.subLevels)return o.subLevels}return 0},t._isHTML=function(e){var i=new DOMParser().parseFromString(e,"text/html");return Array.from(i.body.childNodes).some(n=>n.nodeType===1)},t._getTestDiv=function(){var e=document.getElementById("orgchart_js_test_div");return e||((e=document.createElement("div")).id="orgchart_js_test_div",e.style.position="fixed",e.style.top="-10000px",e.style.left="-10000px",document.body.appendChild(e)),e},t._getLabelSize=function(e){var i=t._getTestDiv();return i.innerHTML="<svg>"+e+"</svg>",i.querySelector("text").getBoundingClientRect()},t.wrapText=function(e,i){var n=i.toLowerCase();if(n.indexOf("<text")==-1||n.indexOf(t.attr.width)==-1||n.indexOf("foreignobject")!=-1||i.indexOf(t.attr.width)==-1||t.ESCAPE_HTML&&typeof str=="string"&&t._isHTML(e))return t._escapeHtml(e);if(!t.ESCAPE_HTML&&t._isHTML(e))return e;var o=t._getTestDiv();i=i.replaceAll("{cw}",0),o.innerHTML="<svg>"+i+"</svg>";var r,s,a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("text")[0],c=parseFloat(a.getAttribute("x")),l=parseFloat(a.getAttribute("y")),h=a.getAttribute("text-anchor"),d=a.getAttribute(t.attr.width),p=a.getAttribute(t.attr.text_overflow),f="http://www.w3.org/2000/svg",u=o.getElementsByTagName("svg")[0].getElementsByTagName("text")[0];p||(p="ellipsis");var x=p.split("-");if(x.length>1&&(r=parseInt(p.split("-")[1]),x.length>2&&x[2]=="ellipsis"&&(s=!0)),!d)return t._escapeHtml(e);if(d=parseFloat(d),c||(c=0),l||(l=0),c||(h="start"),p=="ellipsis"){u.removeChild(u.firstChild),u.textContent=e;for(var S=u.getComputedTextLength(),y=2;S>d;)u.textContent=e.substring(0,e.length-y),u.textContent+="...",S=u.getComputedTextLength(),y++;return y>2?`<title>${t._escapeHtml(e)}</title>${u.textContent}`:t._escapeHtml(e)}if(p.indexOf("multiline")!=-1){var v=e.split(" "),E=u.getBBox().height;u.textContent="";var b=document.createElementNS(f,"tspan"),I=document.createTextNode(v[0]);b.setAttributeNS(null,"x",c),b.setAttributeNS(null,"y",l),b.setAttributeNS(null,"text-anchor",h),b.appendChild(I),u.appendChild(b),y=1;for(var w=1,M=!1,C=1;C<v.length;C++){var R=b.firstChild.data.length;if(b.firstChild.data+=" "+v[C],b.getComputedTextLength()>d){if(b.firstChild.data=b.firstChild.data.slice(0,R),w++,r&&w>r){if(s&&u.children.length==r){var O=u.children[r-1].textContent;u.children[r-1].textContent=O.substring(0,O.length-3)+"...",M=!0}break}(b=document.createElementNS(f,"tspan")).setAttributeNS(null,"x",c),b.setAttributeNS(null,"y",l+E*y),b.setAttributeNS(null,"text-anchor",h),I=document.createTextNode(v[C]),b.appendChild(I),u.appendChild(b),y++}}var z="";if(u.innerHTML!=null)z=u.innerHTML,u.innerHTML="";else{var F="";for(C=u.childNodes.length-1;C>=0;C--)F=XMLSerializer().serializeToString(u.childNodes[C])+F,u.removeChild(u.childNodes[C]);z=F}return M?`<title>${t._escapeHtml(e)}</title>${z}`:z}},t._downloadFile=function(e,i,n,o,r){var s=new Blob([i],{type:e});if(o==1){var a=URL.createObjectURL(s);window.open(a,"_blank").focus()}else if(navigator.msSaveBlob)navigator.msSaveBlob(s,n);else{var c=document.createElement("a");if(c.download!==void 0){a=URL.createObjectURL(s),c.setAttribute("href",a);var l=n;l.toLowerCase().endsWith(r.toLowerCase())||(l=l+"."+r),c.setAttribute("download",l),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}},t._getPosition=function(e,i,n,o){var r={x:i.x,y:i.y};if(n!=null&&(r.x=n),o!=null&&(r.y=n),e&&e.length==3){var s=e[0].indexOf(i.id);s!=-1&&e[1][s].transform!=null&&(n==null&&(r.x=e[1][s].transform[4]),o==null&&(r.y=e[1][s].transform[5]))}return r},t._getOpacity=function(e,i){var n=1;if(e&&e.length==3){var o=e[0].indexOf(i.id);o!=-1&&e[1][o].opacity!=null&&(n=e[1][o].opacity)}return n},t.t=function(e,i,n){var o=t.templates[e];o==null&&console.error(`Template "${e}" does not exist!`);var r=null;if(n!=null&&o.scaleLessThen){var s=[];for(var a in o.scaleLessThen){var c=parseFloat(a);n<c&&s.push(c)}if(s.length>0){s.sort(function(d,p){return d-p});var l=o.scaleLessThen[s[0]];for(var h in l)r==null&&(r=Object.assign({},o)),r[h]=l[h]}}return i?r==null?o.min?o.min:o:r.min?r.min:r:r??o},t.setNodeSize=function(e){var i=t.t(e.templateName,e.min);e.w=i&&i.size?i.size[0]:0,e.h=i&&i.size?i.size[1]:0},t._imgs2base64=function(e,i,n,o){var r=e.getElementsByTagName(i),s=r.length;s==0&&o();for(var a=0;a<s;a++)(function(){var c=a,l=r[c];t._getDataUri(l.getAttribute(n),function(h){h.success&&l.setAttribute(n,h.result),c==s-1&&o()})})()},t._getDataUri=function(e,i){if(e.indexOf("base64")!=-1)i({success:!1});else{var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){n.status===200?o.readAsDataURL(n.response):n.status===404&&i({success:!1,result:n.status})};var o=new FileReader;o.onloadend=function(){i({success:!0,result:o.result})},n.send()}},t._convertStringToArray=function(e,i){return t.ARRAY_FIELDS.indexOf(e)!=-1?t.isNEU(i)?[]:i.split(","):i},t._convertArrayToString=function(e){return!t.isNEU(e)&&Array.isArray(e)?e.join():e},t._csvToArray=function(e,i){i=i||t.CSV_DELIMITER;for(var n=new RegExp("(\\"+i+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+i+"\\r\\n]*))","gi"),o=[[]],r=null;r=n.exec(e);){var s,a=r[1];a.length&&a!==i&&o.push([]),s=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],o[o.length-1].push(s)}return o},t._json2xml=function(e){for(var i=document.implementation.createDocument("","",null),n=i.createElement("nodes"),o=0;o<e.length;o++){var r=i.createElement("node"),s=e[o];for(var a in s){var c=s[a];r.setAttribute(a,t._convertArrayToString(c))}n.appendChild(r)}return i.appendChild(n),'<?xml version="1.0" encoding="utf-8" ?>'+new XMLSerializer().serializeToString(i.documentElement)},t._xml2json=function(e){for(var i=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("node"),n=[],o=0;o<i.length;o++){for(var r=i[o],s={},a=0;a<r.attributes.length;a++){var c=r.attributes[a];s[c.name]=t._convertStringToArray(c.name,c.value)}n.push(s)}return n},t.convertNodesToCsv=function(e){return t._json2csv(e)},t._json2csv=function(e){for(var i=[],n=function(a){for(var c="",l=0;l<i.length;l++){var h;(h=i[l]=="reportsTo"?null:a[i[l]]==null?"":a[i[l]])instanceof Date&&(h=h.toLocaleString());var d=(h=h===null?"":h.toString()).replace(/"/g,'""'),p=new RegExp(`("|;|
)`,"g");d.search(p)>=0&&(d='"'+d+'"'),l>0&&(c+=t.CSV_DELIMITER),c+=d}return c+`
`},o="",r=0;r<e.length;r++)for(var s in e[r])t._arrayContains(i,s)||(i.push(s),o+=s+t.CSV_DELIMITER);for(o=o.substring(0,o.length-1),o+=`
`,r=0;r<e.length;r++)o+=n(e[r]);return o=o.substring(0,o.length-1)},t.accentFold=function(e){return(e=e.toString().toLowerCase()).replace(/([])|([])|([])|([])|([])|([])|([])|([])|([])|([])/g,function(i,n,o,r,s,a,c,l,h,d,p){return n?"a":o?"c":r?"e":s?"i":a?"n":c?"o":l?"s":h?"u":d?"y":p?"ae":void 0})},t.copy=function(e){if(e===null||typeof e!="object"||"isActiveClone"in e)return e;if(e instanceof Date)var i=new e.constructor;else i=e.constructor();for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,i[n]=t.copy(e[n]),delete e.isActiveClone);return i},t._getScrollSensitivity=function(){var e=t._browser();return e.msie&&t.scroll.ie?t.scroll.ie:e.edge&&t.scroll.edge?t.scroll.edge:e.safari&&t.scroll.safari?t.scroll.safari:e.chrome&&t.scroll.chrome?t.scroll.chrome:e.firefox&&t.scroll.firefox?t.scroll.firefox:e.opera&&t.scroll.opera?t.scroll.opera:{smooth:t.scroll.smooth,speed:t.scroll.speed}},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},t.isTrial=function(){return t.remote!==void 0},t.childrenCount=function(e,i){for(var n=0,o=0;o<i.childrenIds.length;o++)e.nodes[i.childrenIds[o]]&&n++;return n},t.childrenTotalCount=function(e,i){for(var n=0,o=0;o<i.childrenIds.length;o++){var r=e.nodes[i.childrenIds[o]];r&&(n++,n+=t.childrenTotalCount(e,r))}return n},t.collapsedChildrenCount=function(e,i){for(var n=0,o=0;o<i.childrenIds.length;o++){var r=e.nodes[i.childrenIds[o]];r&&r.collapsed===!0&&n++}return n},t.collapsedChildrenTotalCount=function(e,i,n){for(var o=0,r=0;r<i.childrenIds.length;r++){var s=e.nodes[i.childrenIds[r]];s&&((n||s.collapsed===!0)&&o++,o+=t.collapsedChildrenTotalCount(e,s,!0))}return o},t._setMinMaxXY=function(e,i){(i.minX==null||e.x!=null&&e.x<i.minX)&&(i.minX=e.x),(i.minY==null||e.y!=null&&e.y<i.minY)&&(i.minY=e.y),(i.maxX==null||e.x!=null&&e.x+e.w>i.maxX)&&(i.maxX=e.x+e.w),(i.maxY==null||e.y!=null&&e.y+e.h>i.maxY)&&(i.maxY=e.y+e.h)},t.getStParentNodes=function(e,i){for(i||(i=[]);e.parent;)e=e.parent;return e.stParent&&(i.push(e.stParent),t.getStParentNodes(e.stParent,i)),i},t.getRootOf=function(e){for(;e&&e.parent;)e=e.parent;return e},t._getViewBox=function(e){var i=null;return e?(i=(i="["+(i=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),i=JSON.parse(i)):null},t.isNEU=function(e){return e==null||e===""},t.gradientCircleForDefs=function(e,i,n,o){function r(a,c,l,h){var d=(h-90)*Math.PI/180;return{x:a+l*Math.cos(d),y:c+l*Math.sin(d)}}function s(a,c,l,h,d){var p=r(a,c,l,d),f=r(a,c,l,h),u=d-h<=180?"0":"1";return["M",p.x,p.y,"A",l,l,0,u,0,f.x,f.y].join(" ")}return Array.isArray(i)||(i=[i,i,i,i,i,i]),`<linearGradient id="${e}_linearColors1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="${i[0]}"></stop>
            <stop offset="100%" stop-color="${i[1]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors2" x1="0.5" y1="0" x2="0.5" y2="1">
            <stop offset="0%" stop-color="${i[1]}"></stop>
            <stop offset="100%" stop-color="${i[2]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors3" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="${i[2]}"></stop>
            <stop offset="100%" stop-color="${i[3]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors4" x1="1" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="${i[3]}"></stop>
            <stop offset="100%" stop-color="${i[4]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors5" x1="0.5" y1="1" x2="0.5" y2="0">
            <stop offset="0%" stop-color="${i[4]}"></stop>
            <stop offset="100%" stop-color="${i[5]}"></stop>
        </linearGradient>
        <linearGradient id="${e}_linearColors6" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0%" stop-color="${i[5]}"></stop>
            <stop offset="100%" stop-color="${i[0]}"></stop>
        </linearGradient>        
        <g id="${e}">
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors1)" d="${s(n,n,n,1,60)}"  />
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors2)" d="${s(n,n,n,60,120)}"/>
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors3)" d="${s(n,n,n,120,180)}" />
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors4)" d="${s(n,n,n,180,240)}" />
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors5)" d="${s(n,n,n,240,300)}" />
            <path stroke-width="${o}" fill="none" stroke="url(#${e}_linearColors6)" d="${s(n,n,n,300,1)}"/>
        </g>`},t._intersectionObserver=function(e,i){typeof IntersectionObserver=="function"?new IntersectionObserver(function(n,o){n.forEach(function(r){var s=r.intersectionRatio>0;r.intersectionRatio==0&&(s=r.isIntersecting),i(s)})}).observe(e):i(!0)},t.convertCsvToNodes=function(e){for(var i=t._csvToArray(e),n=i[0],o=[],r=1;r<i.length;r++){for(var s={},a=0;a<i[r].length;a++){var c=n[a],l=i[r][a];s[n[a]]=t._convertStringToArray(c,l)}s.id.trim()!=""&&o.push(s)}return o},t._escapeHtml=function(e){return t.ESCAPE_HTML&&typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},t._escapeDoubleQuotes=function(e){return typeof e=="string"?e.replace(/"/g,"&quot;"):e},t._escapeGreaterLessSign=function(e){return typeof e=="string"?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},t.roundPathCorners=function(e,i,n){function o(C,R,O){var z=R.x-C.x,F=R.y-C.y,V=Math.sqrt(z*z+F*F);return r(C,R,Math.min(1,O/V))}function r(C,R,O){return{x:C.x+(R.x-C.x)*O,y:C.y+(R.y-C.y)*O}}function s(C,R){C.length>2&&(C[C.length-2]=R.x,C[C.length-1]=R.y)}function a(C){return{x:parseFloat(C[C.length-2]),y:parseFloat(C[C.length-1])}}Array.isArray(e)||(e=(e=e.split(/[,\s]/).reduce(function(C,R){var O=R.match("([a-zA-Z])(.+)");return O?(C.push(O[1]),C.push(O[2])):C.push(R),C},[])).reduce(function(C,R){return parseFloat(R)==R&&C.length?C[C.length-1].push(R):C.push([R]),C},[]));var c=[];if(e.length>1){var l=a(e[0]),h=null;e[e.length-1][0]=="Z"&&e[0].length>2&&(h=["L",l.x,l.y],e[e.length-1]=h),c.push(e[0]);for(var d=1;d<e.length;d++){var p=c[c.length-1],f=e[d],u=f==h?e[1]:e[d+1];if(u&&p&&p.length>2&&f[0]=="L"&&u.length>2&&u[0]=="L"){var x,S,y=a(p),v=a(f),E=a(u);n?(x=r(v,p.origPoint||y,i),S=r(v,u.origPoint||E,i)):(x=o(v,y,i),S=o(v,E,i)),s(f,x),f.origPoint=v,c.push(f);var b=r(x,v,.5),I=r(v,S,.5),w=["C",b.x,b.y,I.x,I.y,S.x,S.y];w.origPoint=v,c.push(w)}else c.push(f)}if(h){var M=a(c[c.length-1]);c.push(["Z"]),s(c[0],M)}}else c=e;return c.reduce(function(C,R){return C+R.join(" ")+" "},"")},t._isMoved=function(e){return e.movex!=null||e.movey!=null},t._getDynamicGridCoulumns=function(e){for(var i=1;i<e&&!(e/i-i<=0);i++);return i%2!=0&&i>2&&i--,i},t._getLazyLoading=function(e){var i=e.lazyLoading;return i=="auto"&&(i=!!(e&&e.nodes&&e.nodes.length>700)),i},t._getSvgAttributes=function(e){const i=e.match(/width="([\d.]+)"/),n=e.match(/height="([\d.]+)"/),o=e.match(/x="([\d.]+)"/),r=e.match(/y="([\d.]+)"/),s=e.match(/viewBox="([^"]+)"/),a=i?parseFloat(i[1]):0,c=n?parseFloat(n[1]):0,l=o?parseFloat(o[1]):0,h=r?parseFloat(r[1]):0;let d=[0,0,0,0];return s&&(d=s[1],d=JSON.parse(`[${d}]`)),{width:a,height:c,viewBox:d,x:l,y:h}},t._setSvgAttributes=function(e,i){var n=i.x,o=i.y,r=i.width,s=i.height,a=i.viewBox.join(",");const c=e.match(/<svg\s+([^>]*?)>/);if(!c)return e;let l=c[0],h=c[1];const d=(f,u,x)=>{if(x==null)return f;const S=new RegExp(`\\s*${u}="[^"]*"`,"i"),y=` ${u}="${x}"`;return f.match(S)?f.replace(S,y):f+y};h=d(h,"x",n),h=d(h,"y",o),h=d(h,"width",r),h=d(h,"height",s),h=d(h,"viewBox",a);const p=`<svg ${h}>`;return e.replace(l,p)},t._convertTextToNodes=function(e,i){const n=e.split(/\r?\n/).filter(a=>a.trim()!==""),o=[];let r=1;const s=[];for(let a of n){let c=0;for(;a.startsWith(i);)a=a.slice(i.length),c++;if(a=a.trim(),!a)continue;const l=a.match(/^\[([^\]]+)](.*)$/);if(l){const u=l[1].trim(),x=l[2].trim();s.length>0&&(s[s.length-1][u]=x);continue}const h=a.match(/^([^\(]+)\(([^)]+)\)$/);let d,p=[];h?(d=h[1].trim(),p=h[2].split(",").map(u=>u.trim())):d=a;const f={id:r++,pid:c===0?null:s[c-1].id,name:d,tags:p};s[c]=f,s.length=c+1,o.push(f)}return o},t._convertFromNodesToText=function(e,i){const n={},o=[];function r(s,a){const c=i.repeat(a);let l=c+s.name;Array.isArray(s.tags)&&s.tags.length>0&&(l+="("+s.tags.join(",")+")"),l+=`
`;for(const h of Object.keys(s))["id","pid","name","children","tags"].includes(h)||(l+=c+"["+h+"]"+s[h]+`
`);for(const h of s.children)l+=r(h,a+1);return l}return e.forEach(s=>{n[s.id]={...s,children:[]}}),e.forEach(s=>{s.pid&&n[s.pid]?n[s.pid].children.push(n[s.id]):o.push(n[s.id])}),o.map(s=>r(s,0)).join("").trim()},t._onClickHandler=function(e,i,n,o,r){var s;if(n===void 0)if(i==="add"){var a={id:e.generateId(),pid:o};e.addNode(a,null,!0)}else if(i==="edit"){var c=e.getNode(o);e.editUI.show(c.id)}else if(i==="details")c=e.getNode(o),e.editUI.show(c.id,!0);else if(i==="remove")e.removeNode(o,null,!0);else if(i==="svg")console.warn('The "svg" as menu key is depricated. Use "svg_export" instead.'),e.exportSVG({filename:"OrgChart.svg",expandChildren:!1,nodeId:o});else if(i==="pdf")console.warn('The "pdf" as menu key is depricated. Use "pdf_export" instead.'),e.exportPDF({filename:"OrgChart.pdf",expandChildren:!1,nodeId:o});else if(i==="png")console.warn('The "png" as menu key is depricated. Use "png_export" instead.'),e.exportPNG({filename:"OrgChart.png",expandChildren:!1,nodeId:o});else if(i==="svg_export"){var l={};t.isNEU(o)||(l.pages=[{nodeId:o}]),e.exportToSVG(l)}else i==="pdf_export"?(l={},t.isNEU(o)||(l.pages=[{nodeId:o}]),e.exportToPDF(l)):i==="png_export"?(l={},t.isNEU(o)||(l.pages=[{nodeId:o}]),e.exportToPNG(l)):i==="visio_export"||i==="visio"?e.exportToVisio({nodeId:o}):i==="pp_export"||i==="powerpoint"?e.exportToPowerPoint():i==="pp_preview"||i==="pppreview"?(l={parentLevels:0,childLevels:1,expandChildren:!1,pages:[{parentLevels:null,childLevels:null,expandChildren:!0,nodeId:e.roots[0].id}]},o!=null&&(l.expandChildren=!1,l.pages[0].nodeId=o),e.powerPointPreviewUI.show(l)):i==="pdf_preview"||i==="pdfpreview"?(l={parentLevels:0,childLevels:1,expandChildren:!1,pages:[{parentLevels:null,childLevels:null,expandChildren:!0,nodeId:e.roots[0].id}]},o!=null&&(l.expandChildren=!1,l.pages[0].nodeId=o),e.pdfPreviewUI.show(l)):i==="svg_preview"||i==="svgpreview"?(l={parentLevels:0,childLevels:1,expandChildren:!1,pages:[{parentLevels:null,childLevels:null,expandChildren:!0,nodeId:e.roots[0].id}]},o!=null&&(l.expandChildren=!1,l.pages[0].nodeId=o),e.svgPreviewUI.show(l)):i==="png_preview"||i==="pngpreview"?(l={parentLevels:0,childLevels:1,expandChildren:!1,pages:[{parentLevels:null,childLevels:null,expandChildren:!0,nodeId:e.roots[0].id}]},o!=null&&(l.expandChildren=!1,l.pages[0].nodeId=o),e.pngPreviewUI.show(l)):i==="csv_export"||i==="csv"?e.exportToCSV({nodeId:o}):i==="xml_export"||i==="xml"?e.exportToXML({nodeId:o}):i==="json_export"||i==="json"?e.exportToJSON({nodeId:o}):i==="fit"?e.fit():i==="expand_all"?e.expand(null,"all"):i==="full_screen"?e.toggleFullScreen():i==="zoom_in"?e.zoom(!0,null,!0):i==="zoom_out"||i==="zoom_out"?e.zoom(!1,null,!0):i==="layout_mixed"?e.setLayout(t.layout.mixed):i==="layout_normal"?e.setLayout(t.layout.normal):i==="layout_right_offset"?e.setLayout(t.layout.treeRightOffset):i==="layout_left_offset"?e.setLayout(t.layout.treeLeftOffset):i==="layout_tree"?e.setLayout(t.layout.tree):i==="layout_grid"&&e.setLayout(t.layout.grid);else s=n.call(e,o,r);return s},t._isSVG=function(e){if(typeof e!="string")return!1;const i=e.trim();if(!i.startsWith("<svg")||!i.endsWith("</svg>"))return!1;try{const n=new DOMParser().parseFromString(i,"image/svg+xml");return!n.querySelector("parsererror")&&n.documentElement.nodeName.toLowerCase()==="svg"}catch{return!1}},t.xScrollUI=function(e,i,n,o,r){this.element=e,this.requestParams=n,this.config=i,this.onSetViewBoxCallback=o,this.onDrawCallback=r,this.position=0,this.bar=null,this._event_id=t._guid()},t.xScrollUI.prototype.addListener=function(e){var i=this;if((this.config.mouseScrool==t.action.xScroll||this.config.mouseScrool==t.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,o=t._getScrollSensitivity();(function(r,s,a){var c=!1;function l(){c=!0;var d=(i.position-i.bar.scrollLeft)/a;if(d>0)d++;else{if(d==0)return void(c=!1);d--}Math.ceil(i.bar.scrollLeft)==Math.ceil(i.position)?c=!1:(i.bar.scrollLeft+=d,h(l))}r.addEventListener("wheel",function(d){if(!d.ctrlKey){var p=0;if(i.config.mouseScrool==t.action.xScroll)(p=d.deltaX||d.wheelDeltaX)||(p=d.deltaY||d.wheelDeltaY);else if(i.config.mouseScrool==t.action.scroll&&!(p=n||!d.shiftKey?d.deltaX||d.wheelDeltaX:d.deltaY||d.wheelDeltaY))return;p=-p,p=Math.max(-1,Math.min(1,p)),i.position+=-p*s;var f=parseFloat(i.innerBar.clientWidth)-parseFloat(i.bar.clientWidth);i.position<0&&(i.position=0),i.position>f&&(i.position=f),c||l()}},{passive:!0});var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,20)}})(e,o.speed,o.smooth)}},t.xScrollUI.prototype.create=function(e){if(this.config.showXScroll===!0||this.config.mouseScrool===t.action.scroll||this.config.mouseScrool===t.action.xScroll){var i=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.requestParams(),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",left:0,bottom:0,width:e+"px","overflow-x":"scroll",height:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=i.requestParams(),o=(parseFloat(i.innerBar.clientWidth)-parseFloat(i.bar.clientWidth))/100,r=this.scrollLeft/o,s=(n.boundary.right-n.boundary.left)/100;n.viewBox[0]=r*s+n.boundary.left,i.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.onDrawCallback()},500)}})}},t.xScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),i=(Math.abs(e.boundary.maxX-e.boundary.minX)+2*this.config.padding)*e.scale;switch(this.config.orientation){case t.orientation.right:case t.orientation.right_top:i=Math.abs(e.boundary.minX*e.scale)}this.innerBar.style.width=i+"px";var n=(e.boundary.right-e.boundary.left)/100,o=(e.viewBox[0]-e.boundary.left)/n;o<0?o=0:o>100&&(o=100);var r=(parseFloat(this.innerBar.clientWidth)-parseFloat(this.bar.clientWidth))/100,s=o*r;this.bar.ignore=!0,this.bar.scrollLeft=s,this.position=this.bar.scrollLeft,this.bar.style.visibility=r<=0?"hidden":"",this.config.showXScroll!==!0&&(this.bar.style.visibility="hidden"),t.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},t.xScrollUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.yScrollUI=function(e,i,n,o,r){this.element=e,this.requestParams=n,this.config=i,this.onSetViewBoxCallback=o,this.onDrawCallback=r,this.position=0,this.bar=null,this._event_id=t._guid()},t.yScrollUI.prototype.addListener=function(e){var i=this;if((this.config.mouseScrool==t.action.yScroll||this.config.mouseScrool==t.action.scroll)&&this.bar){var n=navigator.userAgent.indexOf("Mac OS")!==-1,o=t._getScrollSensitivity();(function(r,s,a){var c=!1;function l(){c=!0;var d=(i.position-i.bar.scrollTop)/a;if(d>0)d++;else{if(d==0)return void(c=!1);d--}Math.ceil(i.bar.scrollTop)==Math.ceil(i.position)?c=!1:(i.bar.scrollTop+=d,h(l))}r.addEventListener("wheel",function(d){if(!d.ctrlKey){var p=0;if(i.config.mouseScrool==t.action.yScroll)(p=d.deltaY||d.wheelDeltaY)||(p=d.deltaX||d.wheelDeltaX);else if(i.config.mouseScrool==t.action.scroll&&!(p=n||!d.shiftKey?d.deltaY||d.wheelDeltaY:d.deltaX||d.wheelDeltaX))return;p=-p,p=Math.max(-1,Math.min(1,p)),i.position+=-p*s;var f=parseFloat(i.innerBar.clientHeight)-parseFloat(i.bar.clientHeight);i.position<0&&(i.position=0),i.position>f&&(i.position=f),c||l()}},{passive:!0});var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,20)}})(e,o.speed,o.smooth)}},t.yScrollUI.prototype.create=function(e){if(this.config.showYScroll===!0||this.config.mouseScrool===t.action.scroll||this.config.mouseScrool===t.action.yScroll){var i=this;this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.bar=document.createElement("div"),this.innerBar=document.createElement("div"),this.innerBar.innerHTML="&nbsp",Object.assign(this.bar.style,{position:"absolute",right:0,bottom:0,height:e+"px","overflow-y":"scroll",width:"20px"}),this.element.appendChild(this.bar),this.bar.appendChild(this.innerBar),this.bar.addEventListener("scroll",function(){if(this.ignore)this.ignore=!1;else{var n=i.requestParams(),o=(parseFloat(i.innerBar.clientHeight)-parseFloat(i.bar.clientHeight))/100,r=this.scrollTop/o,s=(n.boundary.bottom-n.boundary.top)/100;n.viewBox[1]=r*s+n.boundary.top,i.onSetViewBoxCallback(n.viewBox),clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.onDrawCallback()},500)}})}},t.yScrollUI.prototype.setPosition=function(){if(this.bar){var e=this.requestParams(),i=(Math.abs(e.boundary.maxY-e.boundary.minY)+2*this.config.padding)*e.scale;switch(this.config.orientation){case t.orientation.bottom:case t.orientation.bottom_left:i=Math.abs(e.boundary.minY*e.scale)}this.innerBar.style.height=i+"px";var n=(e.boundary.bottom-e.boundary.top)/100,o=(e.viewBox[1]-e.boundary.top)/Math.abs(n);o<0?o=0:o>100&&(o=100);var r=(parseFloat(this.innerBar.clientHeight)-parseFloat(this.bar.clientHeight))/100,s=o*r;this.bar.ignore=!0,this.bar.scrollTop=s,this.position=this.bar.scrollTop,this.bar.style.visibility=r<=0?"hidden":"",this.config.showYScroll!==!0&&(this.bar.style.visibility="hidden"),t.events.publish("change",[this,{isScrollBarVisible:this.bar.style.visibility!="hidden"}])}},t.yScrollUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.prototype.zoom=function(e,i,n,o){var r=this.getViewBox().slice(0),s=r,a=r[2],c=r[3];e===!0?(r[2]=r[2]/t.SCALE_FACTOR,r[3]=r[3]/t.SCALE_FACTOR):e===!1?(r[2]=r[2]*t.SCALE_FACTOR,r[3]=r[3]*t.SCALE_FACTOR):(r[2]=r[2]/e,r[3]=r[3]/e),i||(i=[50,50]),r[0]=s[0]-(r[2]-a)/(100/i[0]),r[1]=s[1]-(r[3]-c)/(100/i[1]);var l=this.getScale(r);if(r[2]=this.width()/l,r[3]=this.height()/l,e===!0&&l<this.config.scaleMax||e===!1&&l>this.config.scaleMin||e!=0&&e!=1&&l<this.config.scaleMax&&l>this.config.scaleMin){this._hideBeforeAnimation();var h=this;n?(clearTimeout(h._timeout),t.animate(this.getSvg(),{viewbox:this.getViewBox()},{viewbox:r},this.config.anim.duration,this.config.anim.func,function(){clearTimeout(h._timeout),h._timeout=setTimeout(function(){h._draw(!0,t.action.zoom,null,o)},500)})):(this.setViewBox(r),clearTimeout(h._timeout),h._timeout=setTimeout(function(){h._draw(!0,t.action.zoom,null,o)},500))}},t.loading={},t.loading.show=function(e){var i=document.createElement("div");i.id="boc-loading",i.innerHTML='<style>@-webkit-keyframes dot-keyframes {0% { opacity: .4; -webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}@keyframes dot-keyframes {0% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}50% {opacity: 1;-webkit-transform: scale(1.2, 1.2);transform: scale(1.2, 1.2);}100% {opacity: .4;-webkit-transform: scale(1, 1);transform: scale(1, 1);}}.boc-loading-dots div {margin: 10px;}      .boc-dot-1 {background-color: #039BE5;}.boc-dot-2 {background-color: #F57C00;}.boc-dot-3 {background-color: #FFCA28;}      .boc-loading-dots {text-align: center;width: 100%; position: absolute; top: 0;}.boc-loading-dots--dot {-webkit-animation: dot-keyframes 1.5s infinite ease-in-out;animation: dot-keyframes 1.5s infinite ease-in-out;        border-radius: 10px;display: inline-block;height: 10px;width: 10px;}.boc-loading-dots--dot:nth-child(2) {-webkit-animation-delay: .5s;animation-delay: .5s;}.boc-loading-dots--dot:nth-child(3) {-webkit-animation-delay: 1s;animation-delay: 1s;}</style><div class="boc-loading-dots"><div class="boc-loading-dots--dot boc-dot-1"></div><div class="boc-loading-dots--dot boc-dot-2"></div><div class="boc-loading-dots--dot boc-dot-3"></div></div>',e.element.appendChild(i)},t.loading.hide=function(e){var i=e.element.querySelector("#boc-loading");i&&i.parentNode.removeChild(i)},t.pdfPrevUI={},t.loc||(t.loc={}),t.loc.ppdfCmdTitle="PDF Preview",t.loc.ppdfSave="Save",t.loc.ppdfCancel="Cancel",t.loc.ppdfFormat="Format",t.loc.ppdfFitToDrwaing="Fit",t.loc.ppdfA4="A4",t.loc.ppdfA3="A3",t.loc.ppdfA2="A2",t.loc.ppdfA1="A1",t.loc.ppdfLetter="Letter",t.loc.ppdfLegal="Legal",t.loc.ppdfLayout="Layout",t.loc.ppdfPortrait="Portrait",t.loc.ppdfLandscape="Landscape",t.loc.ppdfFittopagewidth="Fit to page width",t.loc.ppdfMargin="Margin",t.loc.ppdfHeader="Header",t.loc.ppdfFooter="Footer",t.loc.ppdfScale="Scale",t.pdfPrevUI.show=function(e,i){t.pdfPrevUI.hide(e),i=e._defaultExportOptions(i,"pdf");var n=document.createElement("div");n.classList.add(e.config.mode),n.id="boc-ppdf-btns",Object.assign(n.style,{position:"absolute",top:0,left:0,"background-color":"#fff","z-index":5,margin:"0 0 0 -265px","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",width:"265px",height:"100%","font-family":"Roboto,Helvetica",color:"#757575","text-align":"right",padding:"10px"}),e.element.appendChild(n),n.innerHTML="<h1>"+t.loc.ppdfCmdTitle+'</h1><div><button type="button" id="boc-prev-save" style="font-size: 14px; width: 90px;">'+t.loc.ppdfSave+'</button>&nbsp;<button type="button" id="boc-prev-cancel" style="width: 90px;font-size: 14px;">'+t.loc.ppdfCancel+'</button></div><div style="margin-top:30px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:30px;"><label for="boc-size">'+t.loc.ppdfFormat+': </label><select id="boc-ppdf-size" style="color: #757575; width: 150px; font-size: 14px;" id="boc-size"><option value="fit">'+t.loc.ppdfFitToDrwaing+'</option><option value="A4">'+t.loc.ppdfA4+'</option><option value="A3">'+t.loc.ppdfA3+'</option><option value="A2">'+t.loc.ppdfA2+'</option><option value="A1">'+t.loc.ppdfA1+'</option><option value="Letter">'+t.loc.ppdfLetter+'</option><option value="Legal">'+t.loc.ppdfLegal+'</option></select></div><div style="padding-top:10px;"><label for="boc-ppdf-layout">'+t.loc.ppdfLayout+': </label><select id="boc-ppdf-layout" style="color: #757575; width: 150px;font-size: 14px;" ><option value="false">'+t.loc.ppdfPortrait+'</option><option value="true">'+t.loc.ppdfLandscape+'</option></select></div><div style="padding-top:10px;"><label for="boc-scale">'+t.loc.ppdfScale+': </label><select id="boc-ppdf-scale" style="color: #757575; width: 150px;font-size: 14px;" id="boc-scale"><option value="fit">'+t.loc.ppdfFittopagewidth+'</option><option value="10">10%</option><option value="20">20%</option><option value="30">30%</option><option value="40">40%</option><option value="50">50%</option><option value="60">60%</option><option value="70">70%</option><option value="80">80%</option><option value="90">90%</option><option value="100">100%</option><option value="110">110%</option><option value="120">120%</option><option value="130">130%</option><option value="140">140%</option><option value="150">150%</option><option value="160">160%</option><option value="170">170%</option><option value="180">180%</option><option value="190">190%</option><option value="200">200%</option></select></div><div style="margin-top:10px;margin-bottom:10px; height:10px;border-bottom:1px solid #eeeeee;"></div><div style="padding-top:10px;"><label for="boc-ppdf-header">'+t.loc.ppdfHeader+': </label><input id="boc-ppdf-header" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="boc-ppdf-footer">'+t.loc.ppdfFooter+': </label><input id="boc-ppdf-footer" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div><div style="padding-top:10px;"><label for="boc-ppdf-margin">'+t.loc.ppdfMargin+': </label><input id="boc-ppdf-margin" type="text" style="color: #757575; width: 100px;font-size: 14px;" ></div>';var o=document.createElement("div");o.id="boc-ppdf-wrapper",Object.assign(o.style,{"overflow-y":"scroll","z-index":11,position:"absolute",top:0,left:"285px","background-color":"#eee",width:e.width()-270+"px",height:"100%"}),e.element.appendChild(o),o.innerHTML='<div id="boc-ppdf-content" style="width: 100%;margin-top:10px;margin-bottom:10px;opacity:0;"></div>';var r,s,a,c=e.element.querySelector("#boc-ppdf-size"),l=e.element.querySelector("#boc-ppdf-layout"),h=e.element.querySelector("#boc-ppdf-scale"),d=e.element.querySelector("#boc-ppdf-margin"),p=e.element.querySelector("#boc-ppdf-header"),f=e.element.querySelector("#boc-ppdf-footer");c.value=i.format,l.value=i.landscape,h.value=i.scale,d.value=i.margin,p.value=i.header,f.value=i.footer,t.animate(e.element.querySelector("#boc-ppdf-btns"),{margin:[0,0,0,-250]},{margin:[0,0,0,0]},300,t.anim.outSin,function(){e.exportPDF(i,t.pdfPrevUI._handler)}),e.element.querySelector("#boc-prev-cancel").addEventListener("click",function(){t.pdfPrevUI.hide(e)}),e.element.querySelector("#boc-prev-save").addEventListener("click",function(){e.exportPDF(i),t.pdfPrevUI.hide(e)}),t.pdfPrevUI._showHide(c,l,h),c.addEventListener("change",function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="",i.format=c.value,e.exportPDF(i,t.pdfPrevUI._handler),t.pdfPrevUI._showHide(c,l,h)})}),l.addEventListener("change",function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="",i.landscape=l.value=="true",e.exportPDF(i,t.pdfPrevUI._handler),t.pdfPrevUI._showHide(c,l,h)})}),h.addEventListener("change",function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="",i.scale=h.value,e.exportPDF(i,t.pdfPrevUI._handler),t.pdfPrevUI._showHide(c,l,h)})}),d.addEventListener("keyup",function(){clearTimeout(r),r=setTimeout(function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="";var u=d.value.split(",");if(u.length==4){for(var x=0;x<u.length;x++)u[x]=parseInt(u[x]);i.margin=u,e.exportPDF(i,t.pdfPrevUI._handler)}})},1e3)}),p.addEventListener("keyup",function(){clearTimeout(s),s=setTimeout(function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="",i.header=p.value,e.exportPDF(i,t.pdfPrevUI._handler)})},1e3)}),f.addEventListener("keyup",function(){clearTimeout(a),a=setTimeout(function(){t.animate(e.element.querySelector("#boc-ppdf-content"),{opacity:1},{opacity:0},300,t.anim.inSin,function(){e.element.querySelector("#boc-ppdf-content").innerHTML="",i.footer=f.value,e.exportPDF(i,t.pdfPrevUI._handler)})},1e3)})},t.pdfPrevUI._showHide=function(e,i,n){e.value=="A4"||e.value=="A3"||e.value=="A2"||e.value=="A1"||e.value=="Letter"||e.value=="Legal"?(i.parentNode.style.display="block",n.parentNode.style.display="block"):(i.parentNode.style.display="none",n.parentNode.style.display="none")},t.pdfPrevUI._handler=function(e,i,n){var o=i.options,r=i.pages,s=o.margin[0],a=o.margin[2],c=document.createElement("div");c.classList.add(e.config.mode),c.innerHTML=n.outerHTML,t._browser().msie&&(c.innerHTML=new XMLSerializer().serializeToString(n));for(var l=c.querySelector("svg"),h=e.element.querySelector("#boc-ppdf-content"),d=0;d<r.length;d++){var p=document.createElement("iframe");Object.assign(p.style,{display:"block",margin:"10px auto",border:"1px solid #eeeeee","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}),h.appendChild(p),l&&l.style.backgroundColor?p.style.backgroundColor=l.style.backgroundColor:p.style.backgroundColor="#fff";var f=p.contentWindow.document;f.open(),p.style.width=r[d].size.w+"px",p.style.height=r[d].size.h+"px",p.style.margin="10 auto",r[d].backgroundColor&&(p.style.backgroundColor=r[d].backgroundColor);var u=o.header;r[d].header&&(u=r[d].header),u&&(u=u.replace("{current-page}",d+1).replace("{total-pages}",r.length));var x=o.footer;r[d].footer&&(x=r[d].footer),x&&(x=x.replace("{current-page}",d+1).replace("{total-pages}",r.length)),r[d].html?f.write(t._exportHtml(r[d].html,i.styles,o,r[d].innerSize.w,r[d].innerSize.h,u,x,e.config.mode)):(l.setAttribute("viewBox",r[d].vb),f.write(t._exportHtml(c.innerHTML,i.styles,o,r[d].innerSize.w,r[d].innerSize.h,u,x,e.config.mode)));var S=f.getElementById("boc-header"),y=f.getElementById("boc-footer");if(S){var v=s-S.offsetHeight-7;S.style.top=v+"px"}if(y){var E=a-y.offsetHeight-7;y.style.bottom=E+"px"}f.close()}var b=e.element.querySelector("#boc-ppdf-content");t.animate(b,{opacity:0},{opacity:1},300,t.anim.outSin)},t.pdfPrevUI._getViewBox=function(e){var i=null;return e?(i=(i="["+(i=e.getAttribute("viewBox"))+"]").replace(/\ /g,","),i=JSON.parse(i)):null},t._exportHtml=function(e,i,n,o,r,s,a,c){for(var l="",h=0;h<n.margin.length;h++)l+=n.margin[h]+"px ";var d='<!DOCTYPE html><html style="margin:0;padding:0;"><head></head>'+i+'<body class="boc-'+c+'" style="margin:0; padding:0;"><div style="margin: '+l+";overflow:hidden;width:"+o+"px;height:"+r+'px">';return s&&(d+='<div id="boc-header" style="width:'+o+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;top:0;">'+s+"</div>"),d+=e,a&&(d+='<div id="boc-footer" style="width:'+o+"px;color:#757575;position:absolute;left:"+n.margin[3]+'px;bottom:0;">'+a+"</div>"),d+="</div>",d+="</body></html>"},t.pdfPrevUI.hide=function(e){var i=e.element.querySelector("#boc-ppdf-wrapper");if(i){i.parentNode.removeChild(i),i.style.opacity=0;var n=e.element.querySelector("#boc-ppdf-btns");n.parentNode.removeChild(n)}},t===void 0&&(t={}),t.events.on("renderdefs",function(e,i){for(var n=0;n<e.config.clinks.length;n++){var o=e.config.clinks[n].template;o||(o="orange");var r=t.clinkTemplates[o];i.defs+=r.defs}}),t.events.on("prerender",function(e,i){t.RENDER_CLINKS_BEFORE_NODES&&e._clink(e,i)}),t.events.on("render",function(e,i){t.RENDER_CLINKS_BEFORE_NODES||e._clink(e,i)}),t.events.on("drag",function(e,i,n,o){if(e instanceof t&&e.config.movable&&o)for(var r=0;r<o.length;r++){for(var s=o[r],a=e.element.querySelectorAll(`[data-c-l-from="${s}"]`),c=e.element.querySelectorAll(`[data-c-l-to="${s}"]`),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),t.prototype._clink=function(e,i){for(var n="",o=0;o<this.config.clinks.length;o++){let C=function(R,O,z){z==null&&(z=1);var F=O.x-R.x,V=O.y-R.y,X=Math.sqrt(Math.pow(O.x-R.x,2)+Math.pow(O.y-R.y,2))/3;return X=X/(Math.sqrt(F*F+V*V)*z)*t.clinkCurve(r),{x:R.x+F/2-V*X,y:R.y+V/2+F*X}};var r=this.config.clinks[o],s=e.getNode(r.from),a=e.getNode(r.to);if(s&&i.res.visibleNodeIds.indexOf(s.id)!=-1&&a&&i.res.visibleNodeIds.indexOf(a.id)!=-1){var c=s.x,l=s.y,h=a.x,d=a.y,p={},f={},u=c+s.w/2,x=h+a.w/2,S=l+s.h/2,y=d+a.h/2,v=1;switch(this.config.orientation){case t.orientation.top:case t.orientation.top_left:u<=x?(v=1,p.x=u+s.w/10,f.x=x-a.w/10):(v=-1,p.x=u-s.w/10,f.x=x+a.w/10),l==d?(v=1,p.y=l,f.y=d):l>d?(p.y=l,f.y=d+a.h):(p.y=l+s.h,f.y=d);break;case t.orientation.bottom:case t.orientation.bottom_left:u<=x?(v=-1,p.x=u+s.w/10,f.x=x+a.w/10):(v=1,p.x=u-s.w/10,f.x=x+a.w/10),l==d?(v=-1,p.y=l+s.h,f.y=d+a.h):l>d?(p.y=l,f.y=d+a.h):(p.y=l+s.h,f.y=d);break;case t.orientation.left:case t.orientation.left_top:S<=y?(v=-1,p.y=S+s.h/5,f.y=y+a.h/5):(v=1,p.y=S-s.h/5,f.y=y+a.h/5),c==h?(v=-1,p.x=c,f.x=h):c>h?(p.x=c,f.x=h+a.w):(p.x=c+s.w,f.x=h);break;case t.orientation.right:case t.orientation.right_top:S<=y?(v=1,p.y=S+s.h/5,f.y=y+a.h/5):(v=-1,p.y=S-s.h/5,f.y=y+a.h/5),c==h?(v=1,p.x=c+s.w,f.x=h+a.w):c>h?(p.x=c,f.x=h+a.w):(p.x=c+s.w,f.x=h)}var E=C(p,f,v),b=r.template;b||(b="orange");var I=t.clinkTemplates[b];if(r.label){var w=t.clinkLabelPosition(r,p,f,E);n+=I.label.replace("{x}",w.x).replace("{y}",w.y).replace("{val}",r.label)}var M="M"+p.x+","+p.y+"C"+p.x+","+p.y+" "+E.x+","+E.y+" "+f.x+","+f.y;n+=("<g "+t.attr.c_link_from+'="{from}" '+t.attr.c_link_to+'="{to}">').replace("{from}",s.id).replace("{to}",a.id)+I.link.replaceAll("{d}",M)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+M+'" />',n+=t.grCloseTag}}i.content+=n},t.clinkLabelPosition=function(e,i,n,o){var r=(n.x-i.x)/2+i.x,s=(n.y-i.y)/2+i.y;return{x:(r-o.x)/2+o.x,y:(s-o.y)/2+o.y}},t.clinkCurve=function(e){return t.CLINK_CURVE},t.prototype.addClink=function(e,i,n,o){this._putInUndoStack(),this.clearRedo();for(var r=this.config.clinks.length-1;r>=0;r--){var s=this.config.clinks[r];s.from==e&&s.to==i&&this.config.clinks.splice(r,1)}return this.config.clinks.push({from:e,to:i,label:n,template:o}),this._ai.setContext(),t.events.publish("updated",[this]),this},t.prototype.removeClink=function(e,i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.clinks.length-1;n>=0;n--){var o=this.config.clinks[n];o.from==e&&o.to==i&&this.config.clinks.splice(n,1)}return this._ai.setContext(),t.events.publish("updated",[this]),this},t.clinkTemplates={},t.clinkTemplates.orange={defs:'<marker id="arrowOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path marker-start="url(#dotOrange)" marker-end="url(#arrowOrange)" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#F57C00" text-anchor="middle" x="{x}" y="{y}">{val}</text>'},t.clinkTemplates.blue={defs:'<marker id="arrowBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path marker-start="url(#dotBlue)" marker-end="url(#arrowBlue)" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},t.clinkTemplates.yellow={defs:'<marker id="arrowYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path marker-start="url(#dotYellow)" marker-end="url(#arrowYellow)" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#FFCA28"  text-anchor="middle" x="{x}" y="{y}">{val}</text>'},t===void 0&&(t={}),t.events.on("renderdefs",function(e,i){for(var n=0;n<e.config.slinks.length;n++){var o=e.config.slinks[n].template;o||(o="orange");var r=t.slinkTemplates[o];i.defs+=r.defs}}),t.events.on("render",function(e,i){e._slinks(e,i)}),t.events.on("drag",function(e,i,n,o){if(e instanceof t&&e.config.movable&&o)for(var r=0;r<o.length;r++){for(var s=o[r],a=e.element.querySelectorAll(`[data-s-l-from="${s}"]`),c=e.element.querySelectorAll(`[data-s-l-to="${s}"]`),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);for(l=0;l<c.length;l++)c[l].parentNode.removeChild(c[l])}}),t.prototype._slinks=function(e,i){var n="",o=this.getScale(),r=i.res.boundary;function s(d,p,f){var u=[],x=null,S="left",y=d.lcn?d.lcn:"base",v=e._layoutConfigs[y];switch(v.orientation){case t.orientation.top:case t.orientation.top_left:case t.orientation.bottom:case t.orientation.bottom_left:p.x>d.x&&(S="right");break;case t.orientation.left:case t.orientation.left_top:case t.orientation.right:case t.orientation.right_top:S="top",p.y>d.y&&(S="bottom")}var E=t.t(d.templateName,d.min,o),b=v.levelSeparation;d.parent&&d.parent.layout&&(b=v.mixedHierarchyNodesSeparation);var I={p:d.x+d.w/2+E.expandCollapseSize,q:d.y,r:d.x+d.w/2+E.expandCollapseSize,s:r.minY+b};if(d.sl==p.sl)switch(x=p,v.orientation){case t.orientation.top:case t.orientation.top_left:u.push([I.p,I.q]),u.push([I.p,I.q-b/3]),E=t.t(x.templateName,x.min,o),u.push([x.x+x.w/2+E.expandCollapseSize,u[u.length-1][1]]),u.push([u[u.length-1][0],x.y]);break;case t.orientation.bottom:case t.orientation.bottom_left:I.q=d.y+d.h,I.s=r.maxY-b,u.push([I.p,I.q]),u.push([I.r,d.y+d.h+b/3]),E=t.t(x.templateName,x.min,o),u.push([x.x+x.w/2+E.expandCollapseSize,u[u.length-1][1]]),u.push([u[u.length-1][0],x.y+x.h]);break;case t.orientation.left:case t.orientation.left_top:I.p=d.x,I.q=d.y+d.h/2+E.expandCollapseSize,I.r=r.minX-b,I.s=d.y+d.h/2+E.expandCollapseSize,u.push([I.p,I.q]),u.push([d.x-b/3,I.q]),E=t.t(x.templateName,x.min,o),u.push([u[u.length-1][0],x.y+x.h/2+E.expandCollapseSize]),u.push([x.x,u[u.length-1][1]]);break;case t.orientation.right:case t.orientation.right_top:I.p=d.x+d.w,I.q=d.y+d.h/2+E.expandCollapseSize,I.r=r.maxX+b,I.s=d.y+d.h/2+E.expandCollapseSize,u.push([I.p,I.q]),u.push([d.x+d.w+b/3,I.q]),E=t.t(x.templateName,x.min,o),u.push([u[u.length-1][0],x.y+x.h/2+E.expandCollapseSize]),u.push([x.x+x.w,u[u.length-1][1]])}else{switch(v.orientation){case t.orientation.top:case t.orientation.top_left:u.push([I.p,I.q]),u.push([I.r,d.y-b/3]);break;case t.orientation.bottom:case t.orientation.bottom_left:I.q=d.y+d.h,I.s=r.maxY-b,u.push([I.p,I.q]),u.push([I.r,d.y+d.h+b/3]);break;case t.orientation.left:case t.orientation.left_top:I.p=d.x,I.q=d.y+d.h/2+E.expandCollapseSize,I.r=r.minX-b,I.s=d.y+d.h/2+E.expandCollapseSize,u.push([I.p,I.q]),u.push([d.x-b/3,I.q]);break;case t.orientation.right:case t.orientation.right_top:I.p=d.x+d.w,I.q=d.y+d.h/2+E.expandCollapseSize,I.r=r.maxX+b,I.s=d.y+d.h/2+E.expandCollapseSize,u.push([I.p,I.q]),u.push([d.x+d.w+b/3,I.q])}for(var w=d,M=d;M.parent;)M=M.parent;for(;x==null;){var C=!1,R=w.parent,O=R.leftNeighbor,z=R.rightNeighbor;if(R.id==p.id?x=R:t._intersects(R,I,v)&&(I=t._addPoint(R,u,v,I,S),C=!0),R.id!=p.id){for(;O;){if(O.id==p.id){x=O;break}t._intersects(O,I,v)&&(I=t._addPoint(O,u,v,I,S),C=!0),O=O.leftNeighbor}for(;z;){if(z.id==p.id){x=z;break}t._intersects(z,I,v)&&(I=t._addPoint(z,u,v,I,S),C=!0),z=z.rightNeighbor}}if(!C){var F=u[u.length-1][0],V=0;if(R.parent){b=v.levelSeparation,R.parent.layout&&(b=v.mixedHierarchyNodesSeparation);var X=e.manager.bordersByRootIdAndLevel[M.id][R.parent.sl];switch(v.orientation){case t.orientation.top:case t.orientation.top_left:V=X.maxY+b*(2/3);break;case t.orientation.bottom:case t.orientation.bottom_left:V=X.minY-b*(2/3);break;case t.orientation.left:case t.orientation.left_top:F=X.maxX+b*(2/3),V=u[u.length-1][1];break;case t.orientation.right:case t.orientation.right_top:F=X.minX-b*(2/3),V=u[u.length-1][1]}}u.push([F,V])}w=R}switch(E=t.t(x.templateName,x.min,o),u.splice(u.length-1,1),v.orientation){case t.orientation.top:case t.orientation.top_left:u.push([x.x+x.w/2+E.expandCollapseSize,u[u.length-1][1]]),u.push([u[u.length-1][0],x.y+x.h]);break;case t.orientation.bottom:case t.orientation.bottom_left:u.push([x.x+x.w/2+E.expandCollapseSize,u[u.length-1][1]]),u.push([u[u.length-1][0],x.y]);break;case t.orientation.left:case t.orientation.left_top:u.push([u[u.length-1][0],x.y+x.h/2+E.expandCollapseSize]),u.push([x.x+x.w,u[u.length-1][1]]);break;case t.orientation.right:case t.orientation.right_top:u.push([u[u.length-1][0],x.y+x.h/2+E.expandCollapseSize]),u.push([x.x,u[u.length-1][1]])}}var W=c.template;W||(W="orange");var Z,Y,q=null;switch((E=t.slinkTemplates[W]).labelPosition){case"start":q={x:u[1][0],y:u[1][1]};break;case"middle":var j=Math.ceil(u.length/2);Z=u[j],Y=u[j-1],q={x:(Z[0]+Y[0])/2,y:(Z[1]+Y[1])/2};break;case"end":q={x:u[u.length-2][0],y:u[u.length-2][1]}}f&&(u=u.reverse()),u[0].unshift("M");for(var K=1;K<u.length;K++)u[K].unshift("L");var ie=t.roundPathCorners(u,t.LINK_ROUNDED_CORNERS,!1);if(c.label){var ne=E.label.replace("{x}",q.x).replace("{y}",q.y).replace("{val}",c.label),oe=t._getLabelSize(ne),me=-oe.height/2;switch(v.orientation){case t.orientation.bottom:case t.orientation.bottom_left:me=oe.height}n+=E.label.replace("{x}",q.x).replace("{y}",q.y+me).replace("{val}",c.label)}var $=d.id,J=p.id;f&&($=p.id,J=d.id),n+=("<g "+t.attr.s_link_from+'="{from}" '+t.attr.s_link_to+'="{to}">').replace("{from}",$).replace("{to}",J)+E.link.replaceAll("{d}",ie)+'<path stroke="transparent" stroke-width="15" fill="none" d="'+ie+'" />',n+=t.grCloseTag}for(var a=0;a<this.config.slinks.length;a++){var c=this.config.slinks[a],l=e.getNode(c.from),h=e.getNode(c.to);l&&h&&i.res.visibleNodeIds.indexOf(h.id)!=-1&&i.res.visibleNodeIds.indexOf(l.id)!=-1&&(l.sl>=h.sl?s(l,h,!1):s(h,l,!0))}i.content+=n},t.prototype.addSlink=function(e,i,n,o){this._putInUndoStack(),this.clearRedo();for(var r=this.config.slinks.length-1;r>=0;r--){var s=this.config.slinks[r];s.from==e&&s.to==i&&this.config.slinks.splice(r,1)}return this.config.slinks.push({from:e,to:i,label:n,template:o}),this._ai.setContext(),t.events.publish("updated",[this]),this},t.prototype.removeSlink=function(e,i){this._putInUndoStack(),this.clearRedo();for(var n=this.config.slinks.length-1;n>=0;n--){var o=this.config.slinks[n];o.from==e&&o.to==i&&this.config.slinks.splice(n,1)}return this._ai.setContext(),t.events.publish("updated",[this]),this},t.slinkTemplates={},t.slinkTemplates.orange={defs:'<marker id="arrowSlinkOrange" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#F57C00" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkOrange" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#F57C00" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkOrange)" marker-end="url(#arrowSlinkOrange)" stroke-linejoin="round" stroke="#F57C00" stroke-width="2" fill="none" d="{d}" />',label:'<text dominant-baseline="middle" fill="#F57C00" alignment-baseline="middle" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},t.slinkTemplates.blue={defs:'<marker id="arrowSlinkBlue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#039BE5" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkBlue" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#039BE5" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkBlue)" marker-end="url(#arrowSlinkBlue)" stroke-linejoin="round" stroke="#039BE5" stroke-width="2" fill="none" d="{d}" />',label:'<text fill="#039BE5" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},t.slinkTemplates.yellow={defs:'<marker id="arrowSlinkYellow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path fill="#FFCA28" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker id="dotSlinkYellow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5"> <circle cx="5" cy="5" r="5" fill="#FFCA28" /></marker>',link:'<path stroke-dasharray="4, 2" marker-start="url(#dotSlinkYellow)" marker-end="url(#arrowSlinkYellow)" stroke-linejoin="round" stroke="#FFCA28" stroke-width="2" fill="none" d="{d}" />',label:'<text  fill="#FFCA28" text-anchor="middle" x="{x}" y="{y}">{val}</text>',labelPosition:"middle"},t._ai=function(e){this.instance=e,this.sessionId=null},t._ai.prototype.prompt=function(e,i){var n=this;(e=e.trim())&&(this.sessionId?n._prompt([{Role:"user",Text:e}],i):this.setContext(function(){n._prompt([{Role:"user",Text:e}],i)}))},t._ai.prototype._prompt=function(e,i){var n=this,o=[];for(var r of t.AI_SYSTEM_MESSAGES)o.push({Role:"system",Text:r});var s=this.instance.config.serverUrl+`/OrgChartJSAI/Prompt?client_messages=${encodeURIComponent(JSON.stringify(e))}&system_messages=${encodeURIComponent(JSON.stringify(o))}&sessionId=${this.sessionId}`;const a=new EventSource(s);a.onmessage=function(c){var l=JSON.parse(c.data);l.kind=="end"&&a.close(),l.kind=="text"&&(l.text,i&&i(l.text)),l.kind=="assistant-message-with-tools"?n.toolCalls(l.message,i):l.kind=="error"&&console.error(l.text)},a.onerror=function(c){console.error(c),a.close()}},t._ai.prototype.setContext=function(e){if(this.instance&&this.instance.config.enableAI&&this.instance.aiUI.canSetContext){this.sessionId=this.instance._event_id;var i=this.instance.config.serverUrl+"/OrgChartJSAI/SetContext",n=this.instance.config.aiChatTools.slice();for(var o of n)o.functionParameters=JSON.stringify(o.functionParameters);fetch(i,{method:"post",headers:{"Content-Type":"application/json","x-request-type":"ajax"},body:JSON.stringify({context:this.instance.config.nodes,sessionId:this.sessionId,chatTools:n})}).then(function(){e&&e()}).catch(function(r){console.error(r)})}},t._ai.prototype.toolCalls=function(e,i){var n=this,o={toolCalls:e.ToolCalls};t.events.publish("ai-tool-calls",[this.instance,o]);var r=[],s=[],a=[],c=[],l=[],h=null,d=null,p=null,f=null,u=null;for(var x of o.toolCalls)x.FunctionResult==null&&(x.FunctionName=="removeNode"?r.push(x):x.FunctionName=="addNode"?s.push(x):x.FunctionName=="updateNode"?a.push(x):x.FunctionName=="select"?c.push(x):x.FunctionName=="deselect"?l.push(x):x.FunctionName=="exportPDF"?h=x:x.FunctionName=="changeTemplate"?d=x:x.FunctionName=="addSlink"?p=x:x.FunctionName=="removeSlink"?f=x:x.FunctionName=="fit"&&(u=x));var S=!1;if(d&&(S=!0,x.FunctionResult="ok",this.instance.config.template=x.FunctionArguments.templateName),p){var y=this.instance.getNode(x.FunctionArguments.employeeId1),v=this.instance.getNode(x.FunctionArguments.employeeId2);y&&v&&y!=v?(S=!0,this.instance.addSlink(y.id,v.id),x.FunctionResult="ok"):x.FunctionResult=`Cannot add link between ${x.FunctionArguments.employeeId1} and ${x.FunctionArguments.employeeId2}`}f&&(y=this.instance.getNode(x.FunctionArguments.employeeId1),v=this.instance.getNode(x.FunctionArguments.employeeId2),y&&v&&y!=v?(S=!0,this.instance.removeSlink(y.id,v.id),x.FunctionResult="ok"):x.FunctionResult=`Cannot remove link between ${x.FunctionArguments.employeeId1} and ${x.FunctionArguments.employeeId2}`);for(var x of(u&&(this.instance.fit(),S=!1),r))S=!0,x.FunctionResult="ok",this.instance.remove(x.FunctionArguments.id);for(var x of s)S=!0,x.FunctionResult="ok",(E=JSON.parse(JSON.stringify(x.FunctionArguments))).isAssistant&&(E.tags=["assistant"]),delete E.isAssistant,t.isNEU(E.id)&&(E.id=this.instance.generateId()),this.instance.add(E);for(var x of a){S=!0,x.FunctionResult="ok";var E=this.instance.get(x.FunctionArguments.id);for(var b in x.FunctionArguments)b!="id"&&x.FunctionArguments[b]!=null&&(E[b]=x.FunctionArguments[b]);this.instance.update(E)}for(var x of c)for(var I of(x.FunctionResult="ok",x.FunctionArguments.ids)){x.FunctionArguments.color;var w=this.instance.getNodeElement(I).firstChild;w&&(w.style.stroke=x.FunctionArguments.color,w.style.strokeWidth=5)}var M=function(){for(var R of l)if(R.FunctionResult="ok",R.FunctionArguments.ids)for(var O of R.FunctionArguments.ids){var z=n.instance.getNodeElement(O).firstChild;z&&(z.style.stroke="#aeaeae",z.style.strokeWidth=1)}else S=!0};S?(this.setContext(),this.instance.draw(t.action.update,void 0,M)):M();var C=function(){var R=[];for(var O of o.toolCalls)R.push({Role:"tool",Text:O.FunctionResult,Id:O.Id});n._prompt(R,i)};h?t.exportPDFFromCharts([{format:"A4",chartInstance:this.instance}],void 0,void 0,function(R){x.FunctionResult="ok",t._downloadFile("application/pdf",R,"OrgChart.pdf",!1,"pdf"),C()}):C()},t.aiUI=function(){this.instance=null,this.interval=null,this.canSetContext=!1,this.element=null,this.inputElement=null,this.btnSendElement=null,this.messagesElement=null,Object.defineProperty(this,"width",{get(){return this.isVisible()?this.element.offsetWidth:0}})},t.aiUI.title="AI for OrgChart JS",t.aiUI.prototype.init=function(e){this.instance=e;var i=this,n=this.instance.element.querySelector("[data-boc-ai-button]");n&&n.addEventListener("click",function(o){i.show()})},t.aiUI.prototype.isVisible=function(){return!(!this.element||this.element.style.display=="none")},t.aiUI.prototype.show=function(e,i){this.instance.pdfPreviewUI.hide(),this.instance.svgPreviewUI.hide(),this.instance.pngPreviewUI.hide(),this.instance.powerPointPreviewUI.hide(),this.instance.aiUI.hide(),this.instance.orgScribeUI.hide(),this._create(),this.element.style.display="",this.canSetContext||(this.canSetContext=!0,this.instance._ai.setContext());var n=this;i||(this.timeout&&clearInterval(this.interval),this.interval=t.animate(this.element,{opacity:0},{opacity:1},300,t.anim.outSin,function(){e||n.inputElement.focus()}))},t.aiUI.prototype._create=function(){if(!this.element){var e=this,i="inp_"+this.instance.generateId();this.element=document.createElement("div"),this.element.setAttribute("data-boc-ai-form",""),this.element.style.opacity=0,this.element.classList.add("boc-ai-form"),this.element.classList.add(this.instance.config.mode),this.element.innerHTML=`<div class="boc-ai-container">
                                <div data-boc-ai-close class="boc-ai-close">${t.icon.x(20,20,"#aeaeae")}</div>
                                <div class="boc-ai-middle boc-ai-start">
                                    <div data-boc-ai-messages class="boc-ai-messages">
                                        <img src="https://orgchartjs.balkan.app/logo.svg">&nbsp;
                                        <span>
                                            ${t.aiUI.title}
                                        </span>
                                    </div>                                
                                </div>
                                <div>
                                    <div class="boc-input" data-boc-input="">
                                        <label for="${i}">Message OrgChart</label>
                                        <input maxlength="256" id="${i}" name="${i}" type="text" value="" autocomplete="off">     
                                        <div data-boc-ai-send class="boc-ai-send">
                                            ${t.icon.send(20,20,"#aeaeae")}
                                        </div>                                              
                                    </div>
                                                
                                </div>
                            </div>`,this.instance.leftElement.appendChild(this.element),this.instance.leftElement.style.display="block",t.input.init(this.element);var n=this.instance.leftElement.querySelector("[data-boc-ai-close] svg");n&&n.addEventListener("click",function(o){e.hide()}),this.inputElement=this.element.querySelector("#"+i),this.btnSendElement=this.inputElement.parentNode.querySelector("[data-boc-ai-send]"),this.messagesElement=this.element.querySelector("[data-boc-ai-messages]"),this.inputElement.addEventListener("input",function(o){this.value?this.parentNode.querySelector(".boc-ai-send").classList.add("boc-ai-send-cansend"):this.parentNode.querySelector(".boc-ai-send").classList.remove("boc-ai-send-cansend")}),this.element.querySelector("[data-boc-ai-send]").addEventListener("click",function(o){e.sendUserInput()}),this.inputElement.addEventListener("keyup",function(o){var r=window.event?window.event:o;switch(e.canSetContext||(e.canSetContext=!0,e.instance._ai.setContext()),r.key){case"Enter":e.sendUserInput();break;case"ArrowUp":(s=t.aiUI._getSuggestions()).length&&((a=s.indexOf(e.inputElement.value))==-1?a=s.length-1:a--,a==-1&&(a=s.length-1),e.inputElement.value=s[a]);break;case"ArrowDown":var s,a;(s=t.aiUI._getSuggestions()).length&&((a=s.indexOf(e.inputElement.value))==-1?a=0:a++,a==s.length&&(a=0),e.inputElement.value=s[a])}})}},t.aiUI.prototype.addUserMessage=function(e){this.btnSendElement.classList.remove("boc-ai-send-cansend");var i=this.element.querySelector(".boc-ai-start");i&&(i.classList.remove("boc-ai-start"),this.messagesElement.innerHTML="");var n=document.createElement("div");n.classList.add("boc-ai-user-message"),n.innerHTML=`<span class="boc-inner-user-message">${e}</span>`,this.messagesElement.appendChild(n)},t.aiUI.prototype.hide=function(){this.instance.leftElement.style.display="none",this.element&&(this.element.parentNode.removeChild(this.element),this.element=null)},t.aiUI.prototype.sendUserInput=function(){var e=this;t.aiUI._addSuggestion(this.inputElement.value),this.addUserMessage(this.inputElement.value);var i=document.createElement("div");i.classList.add("boc-ai-assistant-message");var n=document.createElement("span");n.classList.add("boc-inner-assistant-message"),i.appendChild(n),this.messagesElement.appendChild(i);var o="";this.instance._ai.prompt(this.inputElement.value,function(r){o+=r;var s=marked.parse(o);n.innerHTML=s;var a=e.element.querySelector(".boc-ai-middle");a.scrollTo(0,a.scrollHeight)}),this.inputElement.value=""},t.aiUI._addSuggestion=function(e){e=e.trim();var i=t.aiUI._getSuggestions(),n=i.indexOf(e);n!=-1&&i.splice(n,1),i.push(e),localStorage.setItem("suggestions",JSON.stringify(i))},t.aiUI._getSuggestions=function(){var e=localStorage.getItem("suggestions");return e=e?JSON.parse(e):[]},t.orgScribeUI=function(){this.instance=null,this.element=null,this.textAreaElement=null,this._timeout=null,Object.defineProperty(this,"width",{get(){return this.isVisible()?this.element.offsetWidth:0}})},t.orgScribeUI.prototype.init=function(e){this.instance=e},t.events.on("updated",function(e,i){if(e.orgScribeUI.isVisible()){var n=t._convertFromNodesToText(e.config.nodes,t.ORGSCRIBE_OFFSET);e.orgScribeUI.textAreaElement.value=n}}),t.orgScribeUI.prototype.isVisible=function(){return!(!this.element||this.element.style.display=="none")},t.orgScribeUI.prototype.show=function(e,i){this.instance.pdfPreviewUI.hide(),this.instance.svgPreviewUI.hide(),this.instance.pngPreviewUI.hide(),this.instance.powerPointPreviewUI.hide(),this.instance.aiUI.hide(),this.instance.orgScribeUI.hide(),this._create(),this.element.style.display="";var n=this;i||(this.timeout&&clearInterval(this.interval),this.interval=t.animate(this.element,{opacity:0},{opacity:1},300,t.anim.outSin,function(){if(!e){var o=n.textAreaElement.value.length;n.textAreaElement.focus(),n.textAreaElement.setSelectionRange(o,o)}}))},t.orgScribeUI.prototype._create=function(){if(!this.element){var e=this;this.element=document.createElement("div"),this.element.setAttribute("data-boc-orgscribe-form",""),this.element.style.opacity=0,this.element.classList.add("boc-orgscribe-form"),this.element.classList.add(this.instance.config.mode);var i=t._convertFromNodesToText(this.instance.config.nodes,t.ORGSCRIBE_OFFSET);this.element.innerHTML=`<div class="boc-orgscribe-container">
                                <div data-boc-orgscribe-close class="boc-orgscribe-close">${t.icon.x(20,20,"#aeaeae")}</div>                    
                                <div>
                                    <textarea wrap="off" class="boc-orgscribe-txt" data-id="boc_orgscribe_txt">${i}</textarea>
                                </div>
                            </div>`,this.instance.leftElement.appendChild(this.element),this.instance.leftElement.style.display="block";var n=this.instance.leftElement.querySelector("[data-boc-orgscribe-close] svg");n&&n.addEventListener("click",function(o){e.hide()}),this.textAreaElement=this.element.querySelector('[data-id="boc_orgscribe_txt"]'),this.textAreaElement.addEventListener("input",function(){e._timeout&&(clearTimeout(e._timeout),e._timeout=null);var o=this.value;e._timeout=setTimeout(function(){var r=t._convertTextToNodes(o,t.ORGSCRIBE_OFFSET);e.instance.load(r)},500)})}},t.orgScribeUI.prototype.hide=function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null)},(function(e,i){i(m)})(Wi,function(e){function i(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function n(G){e.defaults=G}e.defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};const o={exec:()=>null};function r(G,_=""){let k=typeof G=="string"?G:G.source;const A={replace:(N,L)=>{let B=typeof L=="string"?L:L.source;return B=B.replace(s.caret,"$1"),k=k.replace(N,B),A},getRegex:()=>new RegExp(k,_)};return A}const s={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:G=>new RegExp(`^( {0,3}${G})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:G=>new RegExp(`^ {0,${Math.min(3,G-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:G=>new RegExp(`^ {0,${Math.min(3,G-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:G=>new RegExp(`^ {0,${Math.min(3,G-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:G=>new RegExp(`^ {0,${Math.min(3,G-1)}}#`),htmlBeginRegex:G=>new RegExp(`^ {0,${Math.min(3,G-1)}}<(?:[a-z].*>|!--)`,"i")},a=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,c=/(?:[*+-]|\d{1,9}[.)])/,l=r(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,c).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),h=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,d=/(?!\s*\])(?:\\.|[^\[\]\\])+/,p=r(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",d).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),f=r(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,c).getRegex(),u="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,S=r("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",x).replace("tag",u).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),y=r(h).replace("hr",a).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u).getRegex(),v={blockquote:r(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",y).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:p,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:a,html:S,lheading:l,list:f,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:y,table:o,text:/^[^\n]+/},E=r("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",a).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u).getRegex(),b={...v,table:E,paragraph:r(h).replace("hr",a).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",E).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u).getRegex()},I={...v,html:r(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",x).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:o,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:r(h).replace("hr",a).replace("heading",` *#{1,6} *[^
]`).replace("lheading",l).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},w=/^( {2,}|\\)\n(?!\s*$)/,M=/[\p{P}\p{S}]/u,C=/[\s\p{P}\p{S}]/u,R=/[^\s\p{P}\p{S}]/u,O=r(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,C).getRegex(),z=/(?!~)[\p{P}\p{S}]/u,F=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,V=r(F,"u").replace(/punct/g,M).getRegex(),X=r(F,"u").replace(/punct/g,z).getRegex(),W="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Z=r(W,"gu").replace(/notPunctSpace/g,R).replace(/punctSpace/g,C).replace(/punct/g,M).getRegex(),Y=r(W,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,z).getRegex(),q=r("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,R).replace(/punctSpace/g,C).replace(/punct/g,M).getRegex(),j=r(/\\(punct)/,"gu").replace(/punct/g,M).getRegex(),K=r(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ie=r(x).replace("(?:-->|$)","-->").getRegex(),ne=r("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ie).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),oe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,me=r(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",oe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$=r(/^!?\[(label)\]\[(ref)\]/).replace("label",oe).replace("ref",d).getRegex(),J=r(/^!?\[(ref)\](?:\[\])?/).replace("ref",d).getRegex(),re={_backpedal:o,anyPunctuation:j,autolink:K,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:w,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:o,emStrongLDelim:V,emStrongRDelimAst:Z,emStrongRDelimUnd:q,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:me,nolink:J,punctuation:O,reflink:$,reflinkSearch:r("reflink|nolink(?!\\()","g").replace("reflink",$).replace("nolink",J).getRegex(),tag:ne,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:o},ue={...re,link:r(/^!?\[(label)\]\((.*?)\)/).replace("label",oe).getRegex(),reflink:r(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",oe).getRegex()},be={...re,emStrongRDelimAst:Y,emStrongLDelim:X,url:r(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ve={...be,br:r(w).replace("{2,}","*").getRegex(),text:r(be.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Le={normal:v,gfm:b,pedantic:I},Re={normal:re,gfm:be,breaks:Ve,pedantic:ue},ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce=G=>ye[G];function we(G,_){if(_){if(s.escapeTest.test(G))return G.replace(s.escapeReplace,ce)}else if(s.escapeTestNoEncode.test(G))return G.replace(s.escapeReplaceNoEncode,ce);return G}function Me(G){try{G=encodeURI(G).replace(s.percentDecode,"%")}catch{return null}return G}function Be(G,_){var N;const k=G.replace(s.findPipe,(L,B,T)=>{let H=!1,U=B;for(;--U>=0&&T[U]==="\\";)H=!H;return H?"|":" |"}).split(s.splitPipe);let A=0;if(k[0].trim()||k.shift(),k.length>0&&!((N=k.at(-1))!=null&&N.trim())&&k.pop(),_)if(k.length>_)k.splice(_);else for(;k.length<_;)k.push("");for(;A<k.length;A++)k[A]=k[A].trim().replace(s.slashPipe,"|");return k}function Te(G,_,k){const A=G.length;if(A===0)return"";let N=0;for(;N<A&&G.charAt(A-N-1)===_;)N++;return G.slice(0,A-N)}function Oe(G,_,k,A,N){const L=_.href,B=_.title||null,T=G[1].replace(N.other.outputLinkReplace,"$1");if(G[0].charAt(0)!=="!"){A.state.inLink=!0;const H={type:"link",raw:k,href:L,title:B,text:T,tokens:A.inlineTokens(T)};return A.state.inLink=!1,H}return{type:"image",raw:k,href:L,title:B,text:T}}class Ie{constructor(_){pe(this,"options");pe(this,"rules");pe(this,"lexer");this.options=_||e.defaults}space(_){const k=this.rules.block.newline.exec(_);if(k&&k[0].length>0)return{type:"space",raw:k[0]}}code(_){const k=this.rules.block.code.exec(_);if(k){const A=k[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:k[0],codeBlockStyle:"indented",text:this.options.pedantic?A:Te(A,`
`)}}}fences(_){const k=this.rules.block.fences.exec(_);if(k){const A=k[0],N=(function(L,B,T){const H=L.match(T.other.indentCodeCompensation);if(H===null)return B;const U=H[1];return B.split(`
`).map(D=>{const se=D.match(T.other.beginningSpace);if(se===null)return D;const[te]=se;return te.length>=U.length?D.slice(U.length):D}).join(`
`)})(A,k[3]||"",this.rules);return{type:"code",raw:A,lang:k[2]?k[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):k[2],text:N}}}heading(_){const k=this.rules.block.heading.exec(_);if(k){let A=k[2].trim();if(this.rules.other.endingHash.test(A)){const N=Te(A,"#");this.options.pedantic?A=N.trim():N&&!this.rules.other.endingSpaceChar.test(N)||(A=N.trim())}return{type:"heading",raw:k[0],depth:k[1].length,text:A,tokens:this.lexer.inline(A)}}}hr(_){const k=this.rules.block.hr.exec(_);if(k)return{type:"hr",raw:Te(k[0],`
`)}}blockquote(_){const k=this.rules.block.blockquote.exec(_);if(k){let A=Te(k[0],`
`).split(`
`),N="",L="";const B=[];for(;A.length>0;){let T=!1;const H=[];let U;for(U=0;U<A.length;U++)if(this.rules.other.blockquoteStart.test(A[U]))H.push(A[U]),T=!0;else{if(T)break;H.push(A[U])}A=A.slice(U);const D=H.join(`
`),se=D.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");N=N?`${N}
${D}`:D,L=L?`${L}
${se}`:se;const te=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(se,B,!0),this.lexer.state.top=te,A.length===0)break;const de=B.at(-1);if((de==null?void 0:de.type)==="code")break;if((de==null?void 0:de.type)==="blockquote"){const ve=de,ge=ve.raw+`
`+A.join(`
`),ze=this.blockquote(ge);B[B.length-1]=ze,N=N.substring(0,N.length-ve.raw.length)+ze.raw,L=L.substring(0,L.length-ve.text.length)+ze.text;break}if((de==null?void 0:de.type)==="list"){const ve=de,ge=ve.raw+`
`+A.join(`
`),ze=this.list(ge);B[B.length-1]=ze,N=N.substring(0,N.length-de.raw.length)+ze.raw,L=L.substring(0,L.length-ve.raw.length)+ze.raw,A=ge.substring(B.at(-1).raw.length).split(`
`)}}return{type:"blockquote",raw:N,tokens:B,text:L}}}list(_){let k=this.rules.block.list.exec(_);if(k){let A=k[1].trim();const N=A.length>1,L={type:"list",raw:"",ordered:N,start:N?+A.slice(0,-1):"",loose:!1,items:[]};A=N?`\\d{1,9}\\${A.slice(-1)}`:`\\${A}`,this.options.pedantic&&(A=N?A:"[*+-]");const B=this.rules.other.listItemRegex(A);let T=!1;for(;_;){let U=!1,D="",se="";if(!(k=B.exec(_))||this.rules.block.hr.test(_))break;D=k[0],_=_.substring(D.length);let te=k[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,vt=>" ".repeat(3*vt.length)),de=_.split(`
`,1)[0],ve=!te.trim(),ge=0;if(this.options.pedantic?(ge=2,se=te.trimStart()):ve?ge=k[1].length+1:(ge=k[2].search(this.rules.other.nonSpaceChar),ge=ge>4?1:ge,se=te.slice(ge),ge+=k[1].length),ve&&this.rules.other.blankLine.test(de)&&(D+=de+`
`,_=_.substring(de.length+1),U=!0),!U){const vt=this.rules.other.nextBulletRegex(ge),Ut=this.rules.other.hrRegex(ge),Rt=this.rules.other.fencesBeginRegex(ge),Bt=this.rules.other.headingBeginRegex(ge),Ii=this.rules.other.htmlBeginRegex(ge);for(;_;){const yt=_.split(`
`,1)[0];let et;if(de=yt,this.options.pedantic?(de=de.replace(this.rules.other.listReplaceNesting,"  "),et=de):et=de.replace(this.rules.other.tabCharGlobal,"    "),Rt.test(de)||Bt.test(de)||Ii.test(de)||vt.test(de)||Ut.test(de))break;if(et.search(this.rules.other.nonSpaceChar)>=ge||!de.trim())se+=`
`+et.slice(ge);else{if(ve||te.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Rt.test(te)||Bt.test(te)||Ut.test(te))break;se+=`
`+de}ve||de.trim()||(ve=!0),D+=yt+`
`,_=_.substring(yt.length+1),te=et.slice(ge)}}L.loose||(T?L.loose=!0:this.rules.other.doubleBlankLine.test(D)&&(T=!0));let ze,st=null;this.options.gfm&&(st=this.rules.other.listIsTask.exec(se),st&&(ze=st[0]!=="[ ] ",se=se.replace(this.rules.other.listReplaceTask,""))),L.items.push({type:"list_item",raw:D,task:!!st,checked:ze,loose:!1,text:se,tokens:[]}),L.raw+=D}const H=L.items.at(-1);if(!H)return;H.raw=H.raw.trimEnd(),H.text=H.text.trimEnd(),L.raw=L.raw.trimEnd();for(let U=0;U<L.items.length;U++)if(this.lexer.state.top=!1,L.items[U].tokens=this.lexer.blockTokens(L.items[U].text,[]),!L.loose){const D=L.items[U].tokens.filter(te=>te.type==="space"),se=D.length>0&&D.some(te=>this.rules.other.anyLine.test(te.raw));L.loose=se}if(L.loose)for(let U=0;U<L.items.length;U++)L.items[U].loose=!0;return L}}html(_){const k=this.rules.block.html.exec(_);if(k)return{type:"html",block:!0,raw:k[0],pre:k[1]==="pre"||k[1]==="script"||k[1]==="style",text:k[0]}}def(_){const k=this.rules.block.def.exec(_);if(k){const A=k[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),N=k[2]?k[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",L=k[3]?k[3].substring(1,k[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):k[3];return{type:"def",tag:A,raw:k[0],href:N,title:L}}}table(_){var T;const k=this.rules.block.table.exec(_);if(!k||!this.rules.other.tableDelimiter.test(k[2]))return;const A=Be(k[1]),N=k[2].replace(this.rules.other.tableAlignChars,"").split("|"),L=(T=k[3])!=null&&T.trim()?k[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],B={type:"table",raw:k[0],header:[],align:[],rows:[]};if(A.length===N.length){for(const H of N)this.rules.other.tableAlignRight.test(H)?B.align.push("right"):this.rules.other.tableAlignCenter.test(H)?B.align.push("center"):this.rules.other.tableAlignLeft.test(H)?B.align.push("left"):B.align.push(null);for(let H=0;H<A.length;H++)B.header.push({text:A[H],tokens:this.lexer.inline(A[H]),header:!0,align:B.align[H]});for(const H of L)B.rows.push(Be(H,B.header.length).map((U,D)=>({text:U,tokens:this.lexer.inline(U),header:!1,align:B.align[D]})));return B}}lheading(_){const k=this.rules.block.lheading.exec(_);if(k)return{type:"heading",raw:k[0],depth:k[2].charAt(0)==="="?1:2,text:k[1],tokens:this.lexer.inline(k[1])}}paragraph(_){const k=this.rules.block.paragraph.exec(_);if(k){const A=k[1].charAt(k[1].length-1)===`
`?k[1].slice(0,-1):k[1];return{type:"paragraph",raw:k[0],text:A,tokens:this.lexer.inline(A)}}}text(_){const k=this.rules.block.text.exec(_);if(k)return{type:"text",raw:k[0],text:k[0],tokens:this.lexer.inline(k[0])}}escape(_){const k=this.rules.inline.escape.exec(_);if(k)return{type:"escape",raw:k[0],text:k[1]}}tag(_){const k=this.rules.inline.tag.exec(_);if(k)return!this.lexer.state.inLink&&this.rules.other.startATag.test(k[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(k[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(k[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(k[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:k[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:k[0]}}link(_){const k=this.rules.inline.link.exec(_);if(k){const A=k[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(A)){if(!this.rules.other.endAngleBracket.test(A))return;const B=Te(A.slice(0,-1),"\\");if((A.length-B.length)%2==0)return}else{const B=(function(T,H){if(T.indexOf(H[1])===-1)return-1;let U=0;for(let D=0;D<T.length;D++)if(T[D]==="\\")D++;else if(T[D]===H[0])U++;else if(T[D]===H[1]&&(U--,U<0))return D;return-1})(k[2],"()");if(B>-1){const T=(k[0].indexOf("!")===0?5:4)+k[1].length+B;k[2]=k[2].substring(0,B),k[0]=k[0].substring(0,T).trim(),k[3]=""}}let N=k[2],L="";if(this.options.pedantic){const B=this.rules.other.pedanticHrefTitle.exec(N);B&&(N=B[1],L=B[3])}else L=k[3]?k[3].slice(1,-1):"";return N=N.trim(),this.rules.other.startAngleBracket.test(N)&&(N=this.options.pedantic&&!this.rules.other.endAngleBracket.test(A)?N.slice(1):N.slice(1,-1)),Oe(k,{href:N&&N.replace(this.rules.inline.anyPunctuation,"$1"),title:L&&L.replace(this.rules.inline.anyPunctuation,"$1")},k[0],this.lexer,this.rules)}}reflink(_,k){let A;if((A=this.rules.inline.reflink.exec(_))||(A=this.rules.inline.nolink.exec(_))){const N=k[(A[2]||A[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!N){const L=A[0].charAt(0);return{type:"text",raw:L,text:L}}return Oe(A,N,A[0],this.lexer,this.rules)}}emStrong(_,k,A=""){let N=this.rules.inline.emStrongLDelim.exec(_);if(N&&(!N[3]||!A.match(this.rules.other.unicodeAlphaNumeric))&&(!N[1]&&!N[2]||!A||this.rules.inline.punctuation.exec(A))){const L=[...N[0]].length-1;let B,T,H=L,U=0;const D=N[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(D.lastIndex=0,k=k.slice(-1*_.length+L);(N=D.exec(k))!=null;){if(B=N[1]||N[2]||N[3]||N[4]||N[5]||N[6],!B)continue;if(T=[...B].length,N[3]||N[4]){H+=T;continue}if((N[5]||N[6])&&L%3&&!((L+T)%3)){U+=T;continue}if(H-=T,H>0)continue;T=Math.min(T,T+H+U);const se=[...N[0]][0].length,te=_.slice(0,L+N.index+se+T);if(Math.min(L,T)%2){const ve=te.slice(1,-1);return{type:"em",raw:te,text:ve,tokens:this.lexer.inlineTokens(ve)}}const de=te.slice(2,-2);return{type:"strong",raw:te,text:de,tokens:this.lexer.inlineTokens(de)}}}}codespan(_){const k=this.rules.inline.code.exec(_);if(k){let A=k[2].replace(this.rules.other.newLineCharGlobal," ");const N=this.rules.other.nonSpaceChar.test(A),L=this.rules.other.startingSpaceChar.test(A)&&this.rules.other.endingSpaceChar.test(A);return N&&L&&(A=A.substring(1,A.length-1)),{type:"codespan",raw:k[0],text:A}}}br(_){const k=this.rules.inline.br.exec(_);if(k)return{type:"br",raw:k[0]}}del(_){const k=this.rules.inline.del.exec(_);if(k)return{type:"del",raw:k[0],text:k[2],tokens:this.lexer.inlineTokens(k[2])}}autolink(_){const k=this.rules.inline.autolink.exec(_);if(k){let A,N;return k[2]==="@"?(A=k[1],N="mailto:"+A):(A=k[1],N=A),{type:"link",raw:k[0],text:A,href:N,tokens:[{type:"text",raw:A,text:A}]}}}url(_){var A;let k;if(k=this.rules.inline.url.exec(_)){let N,L;if(k[2]==="@")N=k[0],L="mailto:"+N;else{let B;do B=k[0],k[0]=((A=this.rules.inline._backpedal.exec(k[0]))==null?void 0:A[0])??"";while(B!==k[0]);N=k[0],L=k[1]==="www."?"http://"+k[0]:k[0]}return{type:"link",raw:k[0],text:N,href:L,tokens:[{type:"text",raw:N,text:N}]}}}inlineText(_){const k=this.rules.inline.text.exec(_);if(k){const A=this.lexer.state.inRawBlock;return{type:"text",raw:k[0],text:k[0],escaped:A}}}}class Q{constructor(_){pe(this,"tokens");pe(this,"options");pe(this,"state");pe(this,"tokenizer");pe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=_||e.defaults,this.options.tokenizer=this.options.tokenizer||new Ie,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const k={other:s,block:Le.normal,inline:Re.normal};this.options.pedantic?(k.block=Le.pedantic,k.inline=Re.pedantic):this.options.gfm&&(k.block=Le.gfm,this.options.breaks?k.inline=Re.breaks:k.inline=Re.gfm),this.tokenizer.rules=k}static get rules(){return{block:Le,inline:Re}}static lex(_,k){return new Q(k).lex(_)}static lexInline(_,k){return new Q(k).inlineTokens(_)}lex(_){_=_.replace(s.carriageReturn,`
`),this.blockTokens(_,this.tokens);for(let k=0;k<this.inlineQueue.length;k++){const A=this.inlineQueue[k];this.inlineTokens(A.src,A.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(_,k=[],A=!1){var N,L,B;for(this.options.pedantic&&(_=_.replace(s.tabCharGlobal,"    ").replace(s.spaceLine,""));_;){let T;if((L=(N=this.options.extensions)==null?void 0:N.block)!=null&&L.some(U=>!!(T=U.call({lexer:this},_,k))&&(_=_.substring(T.raw.length),k.push(T),!0)))continue;if(T=this.tokenizer.space(_)){_=_.substring(T.raw.length);const U=k.at(-1);T.raw.length===1&&U!==void 0?U.raw+=`
`:k.push(T);continue}if(T=this.tokenizer.code(_)){_=_.substring(T.raw.length);const U=k.at(-1);(U==null?void 0:U.type)==="paragraph"||(U==null?void 0:U.type)==="text"?(U.raw+=`
`+T.raw,U.text+=`
`+T.text,this.inlineQueue.at(-1).src=U.text):k.push(T);continue}if(T=this.tokenizer.fences(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.heading(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.hr(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.blockquote(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.list(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.html(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.def(_)){_=_.substring(T.raw.length);const U=k.at(-1);(U==null?void 0:U.type)==="paragraph"||(U==null?void 0:U.type)==="text"?(U.raw+=`
`+T.raw,U.text+=`
`+T.raw,this.inlineQueue.at(-1).src=U.text):this.tokens.links[T.tag]||(this.tokens.links[T.tag]={href:T.href,title:T.title});continue}if(T=this.tokenizer.table(_)){_=_.substring(T.raw.length),k.push(T);continue}if(T=this.tokenizer.lheading(_)){_=_.substring(T.raw.length),k.push(T);continue}let H=_;if((B=this.options.extensions)!=null&&B.startBlock){let U=1/0;const D=_.slice(1);let se;this.options.extensions.startBlock.forEach(te=>{se=te.call({lexer:this},D),typeof se=="number"&&se>=0&&(U=Math.min(U,se))}),U<1/0&&U>=0&&(H=_.substring(0,U+1))}if(this.state.top&&(T=this.tokenizer.paragraph(H))){const U=k.at(-1);A&&(U==null?void 0:U.type)==="paragraph"?(U.raw+=`
`+T.raw,U.text+=`
`+T.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=U.text):k.push(T),A=H.length!==_.length,_=_.substring(T.raw.length)}else if(T=this.tokenizer.text(_)){_=_.substring(T.raw.length);const U=k.at(-1);(U==null?void 0:U.type)==="text"?(U.raw+=`
`+T.raw,U.text+=`
`+T.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=U.text):k.push(T)}else if(_){const U="Infinite loop on byte: "+_.charCodeAt(0);if(this.options.silent){console.error(U);break}throw new Error(U)}}return this.state.top=!0,k}inline(_,k=[]){return this.inlineQueue.push({src:_,tokens:k}),k}inlineTokens(_,k=[]){var T,H,U;let A=_,N=null;if(this.tokens.links){const D=Object.keys(this.tokens.links);if(D.length>0)for(;(N=this.tokenizer.rules.inline.reflinkSearch.exec(A))!=null;)D.includes(N[0].slice(N[0].lastIndexOf("[")+1,-1))&&(A=A.slice(0,N.index)+"["+"a".repeat(N[0].length-2)+"]"+A.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(N=this.tokenizer.rules.inline.blockSkip.exec(A))!=null;)A=A.slice(0,N.index)+"["+"a".repeat(N[0].length-2)+"]"+A.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(N=this.tokenizer.rules.inline.anyPunctuation.exec(A))!=null;)A=A.slice(0,N.index)+"++"+A.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let L=!1,B="";for(;_;){let D;if(L||(B=""),L=!1,(H=(T=this.options.extensions)==null?void 0:T.inline)==null?void 0:H.some(te=>!!(D=te.call({lexer:this},_,k))&&(_=_.substring(D.raw.length),k.push(D),!0)))continue;if(D=this.tokenizer.escape(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.tag(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.link(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.reflink(_,this.tokens.links)){_=_.substring(D.raw.length);const te=k.at(-1);D.type==="text"&&(te==null?void 0:te.type)==="text"?(te.raw+=D.raw,te.text+=D.text):k.push(D);continue}if(D=this.tokenizer.emStrong(_,A,B)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.codespan(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.br(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.del(_)){_=_.substring(D.raw.length),k.push(D);continue}if(D=this.tokenizer.autolink(_)){_=_.substring(D.raw.length),k.push(D);continue}if(!this.state.inLink&&(D=this.tokenizer.url(_))){_=_.substring(D.raw.length),k.push(D);continue}let se=_;if((U=this.options.extensions)!=null&&U.startInline){let te=1/0;const de=_.slice(1);let ve;this.options.extensions.startInline.forEach(ge=>{ve=ge.call({lexer:this},de),typeof ve=="number"&&ve>=0&&(te=Math.min(te,ve))}),te<1/0&&te>=0&&(se=_.substring(0,te+1))}if(D=this.tokenizer.inlineText(se)){_=_.substring(D.raw.length),D.raw.slice(-1)!=="_"&&(B=D.raw.slice(-1)),L=!0;const te=k.at(-1);(te==null?void 0:te.type)==="text"?(te.raw+=D.raw,te.text+=D.text):k.push(D)}else if(_){const te="Infinite loop on byte: "+_.charCodeAt(0);if(this.options.silent){console.error(te);break}throw new Error(te)}}return k}}class he{constructor(_){pe(this,"options");pe(this,"parser");this.options=_||e.defaults}space(_){return""}code({text:_,lang:k,escaped:A}){var B;const N=(B=(k||"").match(s.notSpaceStart))==null?void 0:B[0],L=_.replace(s.endingNewline,"")+`
`;return N?'<pre><code class="language-'+we(N)+'">'+(A?L:we(L,!0))+`</code></pre>
`:"<pre><code>"+(A?L:we(L,!0))+`</code></pre>
`}blockquote({tokens:_}){return`<blockquote>
${this.parser.parse(_)}</blockquote>
`}html({text:_}){return _}heading({tokens:_,depth:k}){return`<h${k}>${this.parser.parseInline(_)}</h${k}>
`}hr(_){return`<hr>
`}list(_){const k=_.ordered,A=_.start;let N="";for(let B=0;B<_.items.length;B++){const T=_.items[B];N+=this.listitem(T)}const L=k?"ol":"ul";return"<"+L+(k&&A!==1?' start="'+A+'"':"")+`>
`+N+"</"+L+`>
`}listitem(_){var A;let k="";if(_.task){const N=this.checkbox({checked:!!_.checked});_.loose?((A=_.tokens[0])==null?void 0:A.type)==="paragraph"?(_.tokens[0].text=N+" "+_.tokens[0].text,_.tokens[0].tokens&&_.tokens[0].tokens.length>0&&_.tokens[0].tokens[0].type==="text"&&(_.tokens[0].tokens[0].text=N+" "+we(_.tokens[0].tokens[0].text),_.tokens[0].tokens[0].escaped=!0)):_.tokens.unshift({type:"text",raw:N+" ",text:N+" ",escaped:!0}):k+=N+" "}return k+=this.parser.parse(_.tokens,!!_.loose),`<li>${k}</li>
`}checkbox({checked:_}){return"<input "+(_?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:_}){return`<p>${this.parser.parseInline(_)}</p>
`}table(_){let k="",A="";for(let L=0;L<_.header.length;L++)A+=this.tablecell(_.header[L]);k+=this.tablerow({text:A});let N="";for(let L=0;L<_.rows.length;L++){const B=_.rows[L];A="";for(let T=0;T<B.length;T++)A+=this.tablecell(B[T]);N+=this.tablerow({text:A})}return N&&(N=`<tbody>${N}</tbody>`),`<table>
<thead>
`+k+`</thead>
`+N+`</table>
`}tablerow({text:_}){return`<tr>
${_}</tr>
`}tablecell(_){const k=this.parser.parseInline(_.tokens),A=_.header?"th":"td";return(_.align?`<${A} align="${_.align}">`:`<${A}>`)+k+`</${A}>
`}strong({tokens:_}){return`<strong>${this.parser.parseInline(_)}</strong>`}em({tokens:_}){return`<em>${this.parser.parseInline(_)}</em>`}codespan({text:_}){return`<code>${we(_,!0)}</code>`}br(_){return"<br>"}del({tokens:_}){return`<del>${this.parser.parseInline(_)}</del>`}link({href:_,title:k,tokens:A}){const N=this.parser.parseInline(A),L=Me(_);if(L===null)return N;let B='<a href="'+(_=L)+'"';return k&&(B+=' title="'+we(k)+'"'),B+=">"+N+"</a>",B}image({href:_,title:k,text:A}){const N=Me(_);if(N===null)return we(A);let L=`<img src="${_=N}" alt="${A}"`;return k&&(L+=` title="${we(k)}"`),L+=">",L}text(_){return"tokens"in _&&_.tokens?this.parser.parseInline(_.tokens):"escaped"in _&&_.escaped?_.text:we(_.text)}}class Ee{strong({text:_}){return _}em({text:_}){return _}codespan({text:_}){return _}del({text:_}){return _}html({text:_}){return _}text({text:_}){return _}link({text:_}){return""+_}image({text:_}){return""+_}br(){return""}}class fe{constructor(_){pe(this,"options");pe(this,"renderer");pe(this,"textRenderer");this.options=_||e.defaults,this.options.renderer=this.options.renderer||new he,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ee}static parse(_,k){return new fe(k).parse(_)}static parseInline(_,k){return new fe(k).parseInline(_)}parse(_,k=!0){var N,L;let A="";for(let B=0;B<_.length;B++){const T=_[B];if((L=(N=this.options.extensions)==null?void 0:N.renderers)!=null&&L[T.type]){const U=T,D=this.options.extensions.renderers[U.type].call({parser:this},U);if(D!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(U.type)){A+=D||"";continue}}const H=T;switch(H.type){case"space":A+=this.renderer.space(H);continue;case"hr":A+=this.renderer.hr(H);continue;case"heading":A+=this.renderer.heading(H);continue;case"code":A+=this.renderer.code(H);continue;case"table":A+=this.renderer.table(H);continue;case"blockquote":A+=this.renderer.blockquote(H);continue;case"list":A+=this.renderer.list(H);continue;case"html":A+=this.renderer.html(H);continue;case"paragraph":A+=this.renderer.paragraph(H);continue;case"text":{let U=H,D=this.renderer.text(U);for(;B+1<_.length&&_[B+1].type==="text";)U=_[++B],D+=`
`+this.renderer.text(U);A+=k?this.renderer.paragraph({type:"paragraph",raw:D,text:D,tokens:[{type:"text",raw:D,text:D,escaped:!0}]}):D;continue}default:{const U='Token with "'+H.type+'" type was not found.';if(this.options.silent)return console.error(U),"";throw new Error(U)}}}return A}parseInline(_,k=this.renderer){var N,L;let A="";for(let B=0;B<_.length;B++){const T=_[B];if((L=(N=this.options.extensions)==null?void 0:N.renderers)!=null&&L[T.type]){const U=this.options.extensions.renderers[T.type].call({parser:this},T);if(U!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(T.type)){A+=U||"";continue}}const H=T;switch(H.type){case"escape":case"text":A+=k.text(H);break;case"html":A+=k.html(H);break;case"link":A+=k.link(H);break;case"image":A+=k.image(H);break;case"strong":A+=k.strong(H);break;case"em":A+=k.em(H);break;case"codespan":A+=k.codespan(H);break;case"br":A+=k.br(H);break;case"del":A+=k.del(H);break;default:{const U='Token with "'+H.type+'" type was not found.';if(this.options.silent)return console.error(U),"";throw new Error(U)}}}return A}}class Ce{constructor(_){pe(this,"options");pe(this,"block");this.options=_||e.defaults}preprocess(_){return _}postprocess(_){return _}processAllTokens(_){return _}provideLexer(){return this.block?Q.lex:Q.lexInline}provideParser(){return this.block?fe.parse:fe.parseInline}}pe(Ce,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Xe{constructor(..._){pe(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null});pe(this,"options",this.setOptions);pe(this,"parse",this.parseMarkdown(!0));pe(this,"parseInline",this.parseMarkdown(!1));pe(this,"Parser",fe);pe(this,"Renderer",he);pe(this,"TextRenderer",Ee);pe(this,"Lexer",Q);pe(this,"Tokenizer",Ie);pe(this,"Hooks",Ce);this.use(..._)}walkTokens(_,k){var N,L;let A=[];for(const B of _)switch(A=A.concat(k.call(this,B)),B.type){case"table":{const T=B;for(const H of T.header)A=A.concat(this.walkTokens(H.tokens,k));for(const H of T.rows)for(const U of H)A=A.concat(this.walkTokens(U.tokens,k));break}case"list":{const T=B;A=A.concat(this.walkTokens(T.items,k));break}default:{const T=B;(L=(N=this.defaults.extensions)==null?void 0:N.childTokens)!=null&&L[T.type]?this.defaults.extensions.childTokens[T.type].forEach(H=>{const U=T[H].flat(1/0);A=A.concat(this.walkTokens(U,k))}):T.tokens&&(A=A.concat(this.walkTokens(T.tokens,k)))}}return A}use(..._){const k=this.defaults.extensions||{renderers:{},childTokens:{}};return _.forEach(A=>{const N={...A};if(N.async=this.defaults.async||N.async||!1,A.extensions&&(A.extensions.forEach(L=>{if(!L.name)throw new Error("extension name required");if("renderer"in L){const B=k.renderers[L.name];k.renderers[L.name]=B?function(...T){let H=L.renderer.apply(this,T);return H===!1&&(H=B.apply(this,T)),H}:L.renderer}if("tokenizer"in L){if(!L.level||L.level!=="block"&&L.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const B=k[L.level];B?B.unshift(L.tokenizer):k[L.level]=[L.tokenizer],L.start&&(L.level==="block"?k.startBlock?k.startBlock.push(L.start):k.startBlock=[L.start]:L.level==="inline"&&(k.startInline?k.startInline.push(L.start):k.startInline=[L.start]))}"childTokens"in L&&L.childTokens&&(k.childTokens[L.name]=L.childTokens)}),N.extensions=k),A.renderer){const L=this.defaults.renderer||new he(this.defaults);for(const B in A.renderer){if(!(B in L))throw new Error(`renderer '${B}' does not exist`);if(["options","parser"].includes(B))continue;const T=B,H=A.renderer[T],U=L[T];L[T]=(...D)=>{let se=H.apply(L,D);return se===!1&&(se=U.apply(L,D)),se||""}}N.renderer=L}if(A.tokenizer){const L=this.defaults.tokenizer||new Ie(this.defaults);for(const B in A.tokenizer){if(!(B in L))throw new Error(`tokenizer '${B}' does not exist`);if(["options","rules","lexer"].includes(B))continue;const T=B,H=A.tokenizer[T],U=L[T];L[T]=(...D)=>{let se=H.apply(L,D);return se===!1&&(se=U.apply(L,D)),se}}N.tokenizer=L}if(A.hooks){const L=this.defaults.hooks||new Ce;for(const B in A.hooks){if(!(B in L))throw new Error(`hook '${B}' does not exist`);if(["options","block"].includes(B))continue;const T=B,H=A.hooks[T],U=L[T];Ce.passThroughHooks.has(B)?L[T]=D=>{if(this.defaults.async)return Promise.resolve(H.call(L,D)).then(te=>U.call(L,te));const se=H.call(L,D);return U.call(L,se)}:L[T]=(...D)=>{let se=H.apply(L,D);return se===!1&&(se=U.apply(L,D)),se}}N.hooks=L}if(A.walkTokens){const L=this.defaults.walkTokens,B=A.walkTokens;N.walkTokens=function(T){let H=[];return H.push(B.call(this,T)),L&&(H=H.concat(L.call(this,T))),H}}this.defaults={...this.defaults,...N}}),this}setOptions(_){return this.defaults={...this.defaults,..._},this}lexer(_,k){return Q.lex(_,k??this.defaults)}parser(_,k){return fe.parse(_,k??this.defaults)}parseMarkdown(_){return(k,A)=>{const N={...A},L={...this.defaults,...N},B=this.onError(!!L.silent,!!L.async);if(this.defaults.async===!0&&N.async===!1)return B(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(k==null)return B(new Error("marked(): input parameter is undefined or null"));if(typeof k!="string")return B(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(k)+", string expected"));L.hooks&&(L.hooks.options=L,L.hooks.block=_);const T=L.hooks?L.hooks.provideLexer():_?Q.lex:Q.lexInline,H=L.hooks?L.hooks.provideParser():_?fe.parse:fe.parseInline;if(L.async)return Promise.resolve(L.hooks?L.hooks.preprocess(k):k).then(U=>T(U,L)).then(U=>L.hooks?L.hooks.processAllTokens(U):U).then(U=>L.walkTokens?Promise.all(this.walkTokens(U,L.walkTokens)).then(()=>U):U).then(U=>H(U,L)).then(U=>L.hooks?L.hooks.postprocess(U):U).catch(B);try{L.hooks&&(k=L.hooks.preprocess(k));let U=T(k,L);L.hooks&&(U=L.hooks.processAllTokens(U)),L.walkTokens&&this.walkTokens(U,L.walkTokens);let D=H(U,L);return L.hooks&&(D=L.hooks.postprocess(D)),D}catch(U){return B(U)}}}onError(_,k){return A=>{if(A.message+=`
Please report this to https://github.com/markedjs/marked.`,_){const N="<p>An error occurred:</p><pre>"+we(A.message+"",!0)+"</pre>";return k?Promise.resolve(N):N}if(k)return Promise.reject(A);throw A}}}const Se=new Xe;function ee(G,_){return Se.parse(G,_)}ee.options=ee.setOptions=function(G){return Se.setOptions(G),ee.defaults=Se.defaults,n(ee.defaults),ee},ee.getDefaults=i,ee.defaults=e.defaults,ee.use=function(...G){return Se.use(...G),ee.defaults=Se.defaults,n(ee.defaults),ee},ee.walkTokens=function(G,_){return Se.walkTokens(G,_)},ee.parseInline=Se.parseInline,ee.Parser=fe,ee.parser=fe.parse,ee.Renderer=he,ee.TextRenderer=Ee,ee.Lexer=Q,ee.lexer=Q.lex,ee.Tokenizer=Ie,ee.Hooks=Ce,ee.parse=ee;const _e=ee.options,De=ee.setOptions,ke=ee.use,qe=ee.walkTokens,le=ee.parseInline,He=ee,$e=fe.parse,Ye=Q.lex;e.Hooks=Ce,e.Lexer=Q,e.Marked=Xe,e.Parser=fe,e.Renderer=he,e.TextRenderer=Ee,e.Tokenizer=Ie,e.getDefaults=i,e.lexer=Ye,e.marked=ee,e.options=_e,e.parse=He,e.parseInline=le,e.parser=$e,e.setOptions=De,e.use=ke,e.walkTokens=qe}),t.events.on("renderbuttons",function(e,i){if(i.node&&i.node.tags&&i.node.tags.has("group-dotted-lines")){var n=e.getScale(),o=t.t(i.node.templateName,i.node.min,n),r="";i.node.min?(o.nodeGroupDottedOpenButton||console.error(`[${i.node.templateName}].nodeGroupDottedOpenButton is not defined`),r+=`<g style="cursor:pointer;"  data-ctrl-n-dotted-open="${i.node.id}" transform="matrix(1,0,0,1,${i.node.x},${i.node.y})">`,r+=o.nodeGroupDottedOpenButton):(o.nodeGroupDottedCloseButton||console.error(`[${i.node.templateName}].nodeGroupDottedCloseButton is not defined`),r+=`<g style="cursor:pointer;" transform="matrix(1,0,0,1,${i.node.x},${i.node.y})" data-ctrl-n-dotted-close="${i.node.id}">`,r+=o.nodeGroupDottedCloseButton),r=(r+="</g>").replaceAll("{cw}",i.node.w/2).replaceAll("{ch}",i.node.h/2).replaceAll("{ew}",i.node.w-(i.node.padding?i.node.padding[1]:0)).replaceAll("{eh}",i.node.h-(i.node.padding?i.node.padding[2]:0));var s=e.getNode(i.node.stChildrenIds[0]);if(r.indexOf("{collapsed-children-count}")!=-1){var a=t.collapsedChildrenCount(e,s);r=r.replace("{collapsed-children-count}",a)}if(r.indexOf("{collapsed-children-total-count}")!=-1){var c=t.collapsedChildrenTotalCount(e,s);r=r.replace("{collapsed-children-total-count}",c)}if(r.indexOf("{children-count}")!=-1){var l=t.childrenCount(e,s);r=r.replace("{children-count}",l)}if(r.indexOf("{children-total-count}")!=-1){var h=t.childrenTotalCount(e,s);r=r.replace("{children-total-count}",h)}i.html+=r}}),t===void 0&&(t={}),t.prototype.undo=function(e){if(this.config.undoRedoStorageName){var i=this.undoStepsCount();if(i!=0){this._putInRedoStack();var n=`${this.config.undoRedoStorageName}_undo_`+(i-1),o=sessionStorage.getItem(n);sessionStorage.removeItem(n);var r=JSON.parse(o);this.config.nodes=r.nodes,this.config.clinks=r.clinks,this.config.slinks=r.slinks,this.config.groupDottedLines=r.groupDottedLines,this.config.dottedLines=r.dottedLines,this._ai.setContext(),t.events.publish("updated",[this]),this.filterUI.update(),this.draw(t.action.update,void 0,e),this.undoRedoUI.refresh()}}},t.prototype.redo=function(e){if(this.config.undoRedoStorageName){var i=this.redoStepsCount();if(i!=0){this._putInUndoStack();var n=`${this.config.undoRedoStorageName}_redo_`+(i-1),o=sessionStorage.getItem(n);sessionStorage.removeItem(n);var r=JSON.parse(o);this.config.nodes=r.nodes,this.config.clinks=r.clinks,this.config.slinks=r.slinks,this.config.groupDottedLines=r.groupDottedLines,this.config.dottedLines=r.dottedLines,this._ai.setContext(),t.events.publish("updated",[this]),this.filterUI.update(),this.draw(t.action.update,void 0,e),this.undoRedoUI.refresh()}}},t.prototype.clearRedo=function(){if(this.config.undoRedoStorageName){for(var e=`${this.config.undoRedoStorageName}_redo_`,i=Object.keys(sessionStorage),n=0;i.indexOf(e+n)!=-1;)sessionStorage.removeItem(e+n),n++;this.undoRedoUI.refresh()}},t.prototype.clearUndo=function(){if(this.config.undoRedoStorageName){for(var e=`${this.config.undoRedoStorageName}_undo_`,i=Object.keys(sessionStorage),n=0;i.indexOf(e+n)!=-1;)sessionStorage.removeItem(e+n),n++;this.undoRedoUI.refresh()}},t.prototype.undoStepsCount=function(){for(var e=`${this.config.undoRedoStorageName}_undo_`,i=Object.keys(sessionStorage),n=0;i.indexOf(e+n)!=-1;)n++;return n},t.prototype.redoStepsCount=function(){for(var e=`${this.config.undoRedoStorageName}_redo_`,i=Object.keys(sessionStorage),n=0;i.indexOf(e+n)!=-1;)n++;return n},t.prototype._putInUndoStack=function(){if(this.config.undoRedoStorageName){var e=`${this.config.undoRedoStorageName}_undo_`+this.undoStepsCount();sessionStorage.setItem(e,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},t.prototype._putInRedoStack=function(){if(this.config.undoRedoStorageName){var e=`${this.config.undoRedoStorageName}_redo_`+this.redoStepsCount();sessionStorage.setItem(e,JSON.stringify({nodes:this.config.nodes,clinks:this.config.clinks,slinks:this.config.slinks,groupDottedLines:this.config.groupDottedLines,dottedLines:this.config.dottedLines}))}},t===void 0&&(t={}),t.undoRedoUI=function(){this.instance=null,this._event_id=t._guid()},t.undoRedoUI.prototype.init=function(e){e.config.undoRedoStorageName&&(this.instance=e,this.refresh())},t.undoRedoUI.prototype.refresh=function(){var e=this;if(this.instance.config.undoRedoStorageName){var i={undoStepsCount:this.instance.undoStepsCount(),redoStepsCount:this.instance.redoStepsCount()};if(t.events.publish("change",[this,i])!==!1){var n=this.instance.element.querySelector("[data-undo]"),o=this.instance.element.querySelector("[data-redo]");if(!n||!o){var r=document.createElement("div");r.classList.add("boc-undo-redo"),r.innerHTML=`<span data-undo>${t.icon.undo(50,50,"")}<span class="boc-undo-i"></span></span>
                            <span data-redo>${t.icon.redo(50,50,"")}<span class="boc-redo-i"></span></span>`,this.instance.element.appendChild(r),n=this.instance.element.querySelector("[data-undo]"),o=this.instance.element.querySelector("[data-redo]"),n.addEventListener("click",function(){e.instance.undo()}),o.addEventListener("click",function(){e.instance.redo()})}i.undoStepsCount>0?(n.classList.add("boc-ur-clickable"),n.querySelector(".boc-undo-i").innerHTML=i.undoStepsCount,n.querySelector(".boc-undo-i").style.display="inline-block"):(n.classList.remove("boc-ur-clickable"),n.querySelector(".boc-undo-i").style.display="none"),i.redoStepsCount>0?(o.classList.add("boc-ur-clickable"),o.querySelector(".boc-redo-i").innerHTML=i.redoStepsCount,o.querySelector(".boc-redo-i").style.display="inline-block"):(o.classList.remove("boc-ur-clickable"),o.querySelector(".boc-redo-i").style.display="none")}}},t.undoRedoUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.undoRedoUI.prototype.onChange=function(e){return this.on("change",function(i,n){return e.call(i,n)})},t.events.on("redraw",function(e,i){if(e.config.miniMap){if(e.manager.action!=t.action.move){t.miniMap._settings._scale=Math.min(t.miniMap.width/(e.response.boundary.maxX-e.response.boundary.minX),t.miniMap.height/(e.response.boundary.maxY-e.response.boundary.minY)),t.miniMap._settings._translateX=-e.response.boundary.minX*t.miniMap._settings._scale+(t.miniMap.width-(e.response.boundary.maxX-e.response.boundary.minX)*t.miniMap._settings._scale)/2,t.miniMap._settings._translateY=-e.response.boundary.minY*t.miniMap._settings._scale+(t.miniMap.height-(e.response.boundary.maxY-e.response.boundary.minY)*t.miniMap._settings._scale)/2;var n=e.getViewBox();t.miniMap._init(e),t.miniMap._drawMainCanvas(e),t.miniMap._drawRectSelectorCanvas(e,n);var o,r,s,a,c=e.element.querySelector('[data-id="mini-map-focus"]'),l=!1,h=null;c.onmousedown=function(p){var f,u,x,S=c.getBoundingClientRect(),y=S.left,v=S.top;if(o=parseInt(p.clientX-y),r=parseInt(p.clientY-v),f=r,u=(o-t.miniMap._settings._translateX)/t.miniMap._settings._scale,x=(f-t.miniMap._settings._translateY)/t.miniMap._settings._scale,u>n[0]&&u<n[0]+n[2]&&x>n[1]&&x<n[1]+n[3])return p.preventDefault(),p.stopPropagation(),void(l=!0)},c.onmousemove=function(p){if(l){p.preventDefault(),p.stopPropagation(),t.miniMap._mouseMove=!0;var f=c.getBoundingClientRect(),u=f.left,x=f.top;s=parseInt(p.clientX-u),a=parseInt(p.clientY-x);var S=(s-o)/t.miniMap._settings._scale,y=(a-r)/t.miniMap._settings._scale;n[0]=S+n[0],n[1]=y+n[1],e.setViewBox(n),h&&(clearTimeout(h),h=null),h=setTimeout(function(){e._draw(!0,t.action.move)},300),t.miniMap._drawRectSelectorCanvas(e,n),o=s,r=a}},c.onmouseup=function(p){l&&(p.preventDefault(),p.stopPropagation(),l=!1)},c.onmouseout=function(p){l&&(p.preventDefault(),p.stopPropagation(),l=!1,t.miniMap._mouseMove=!1)},c.onclick=function(p){if(p.preventDefault(),p.stopPropagation(),t.miniMap._mouseMove)t.miniMap._mouseMove=!1;else{var f=c.getBoundingClientRect(),u=f.left,x=f.top;s=parseInt(p.clientX-u),a=parseInt(p.clientY-x);var S=s/t.miniMap._settings._scale,y=a/t.miniMap._settings._scale;n[0]=S-(n[0]+n[2]-n[0])/2-t.miniMap._settings._translateX/t.miniMap._settings._scale,n[1]=y-(n[1]+n[3]-n[1])/2-t.miniMap._settings._translateY/t.miniMap._settings._scale,e.setViewBox(n),h&&(clearTimeout(h),h=null),h=setTimeout(function(){e._draw(!0,t.action.move)},300),t.miniMap._drawRectSelectorCanvas(e,n)}}}}else{var d=e.element.querySelector('[data-id="mini-map"]');d&&d.parentNode.removeChild(d)}}),t.miniMap={},t.miniMap._settings={_translateX:0,_translateY:0,_scale:1},t.miniMap._drawMainCanvas=function(e){var i=e.element.querySelector('[data-id="mini-map-main"]'),n=i.getContext("2d");t.miniMap._initCtx(e,i,1);var o=0,r=[];(function s(a,c){if(Array.isArray(c))for(var l=0;l<c.length;l++)s(a,c[l]);else{for(n.fillStyle=t.miniMap.colors[3],n.beginPath(),n.lineWidth="0.5",n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),l=0;l<c.stChildrenIds.length;l++)o++,r.includes(c.id)||(o==1?n.fillStyle=t.miniMap.colors[0]:o==2?n.fillStyle=t.miniMap.colors[1]:o==3&&(n.fillStyle=t.miniMap.colors[2]),n.beginPath(),n.fillRect(c.x,c.y,c.w,c.h),n.strokeRect(c.x,c.y,c.w,c.h),r.push(c.id)),s(a,a.getNode(c.stChildrenIds[l])),o--;for(l=0;l<c.childrenIds.length;l++)s(a,a.getNode(c.childrenIds[l]))}})(e,e.roots)},t.miniMap._drawRectSelectorCanvas=function(e,i){var n=e.element.querySelector('[data-id="mini-map-focus"]'),o=n.getContext("2d");t.miniMap._initCtx(e,n,t.miniMap.opacity);var r=i[0],s=i[1],a=i[2],c=i[3];o.lineWidth=.5/t.miniMap._settings._scale,o.strokeStyle=t.miniMap.focusStroke,o.globalAlpha=1,o.clearRect(r,s,a,c),o.strokeRect(r,s,a,c)},t.miniMap._initCtx=function(e,i,n){var o=i.getContext("2d");i.width=i.width,i.height=i.height,o.clearRect(0,0,t.miniMap.width,t.miniMap.height),o.globalAlpha=n,n!=1&&(o.fillStyle=t.miniMap.selectorBackgroundColor,o.fillRect(0,0,t.miniMap.width,t.miniMap.height)),o.translate(t.miniMap._settings._translateX,t.miniMap._settings._translateY),o.scale(t.miniMap._settings._scale,t.miniMap._settings._scale)},t.miniMap._init=function(e){if(!e.element.querySelector('[data-id="mini-map"]')){var i=document.createElement("canvas");i.width=t.miniMap.width,i.height=t.miniMap.height,i.setAttribute("data-id","mini-map-main"),i.style.display="inline-block",i.style.backgroundColor=t.miniMap.backgroundColor,i.style.position="absolute",i.style.top=0,i.style.left=0;var n=document.createElement("canvas");n.width=t.miniMap.width,n.height=t.miniMap.height,n.setAttribute("data-id","mini-map-focus"),n.style.display="inline-block",n.style.position="absolute",n.style.top=0,n.style.left=0;var o=document.createElement("div");o.setAttribute("data-id","mini-map"),o.style.position="absolute";for(var r=["top","right","left","bottom"],s=0;s<r.length;s++){var a=r[s];t.isNEU(t.miniMap.position[a])||(t.miniMap.position[a]=="padding"?o.style[a]=e.config.padding+"px":o.style[a]=t.miniMap.position[a]+"px")}o.style.border=t.miniMap.border,o.style.padding=t.miniMap.padding+"px",o.style.backgroundColor=t.miniMap.backgroundColor;var c=document.createElement("div");c.style.position="relative",c.style.width=t.miniMap.width+"px",c.style.height=t.miniMap.height+"px",c.appendChild(i),c.appendChild(n),o.appendChild(c),e.element.appendChild(o),o.addEventListener("DOMMouseScroll",function(f){e.__mouseScrollHandler(o,f)}),o.addEventListener("mousewheel",function(f){e.__mouseScrollHandler(o,f)});var l=0,h=0,d=function(f){t.miniMap._mouseMove=!0;var u=f.clientX-l,x=f.clientY-h;if(!t.isNEU(o.style.left)){var S=parseFloat(o.style.left)+u;o.style.left=`${S}px`}if(!t.isNEU(o.style.right)){var y=parseFloat(o.style.right)-u;o.style.right=`${y}px`}if(!t.isNEU(o.style.bottom)){var v=parseFloat(o.style.bottom)-x;o.style.bottom=`${v}px`}if(!t.isNEU(o.style.top)){var E=parseFloat(o.style.top)+x;o.style.top=`${E}px`}l=f.clientX,h=f.clientY},p=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p)};t.miniMap.draggable&&o.addEventListener("mousedown",function(f){l=f.clientX,h=f.clientY,document.addEventListener("mousemove",d),document.addEventListener("mouseup",p)})}},t.miniMap.colors=["#E0E0E0","#BDBDBD","#9E9E9E","#757575"],t.miniMap.selectorBackgroundColor="white",t.miniMap.backgroundColor="white",t.miniMap.focusStroke="#f57c00",t.miniMap.opacity=.4,t.miniMap.border="1px solid #aeaeae",t.miniMap.width=250,t.miniMap.height=140,t.miniMap.padding=5,t.miniMap.position={top:void 0,left:"padding",right:void 0,bottom:"padding"},t.miniMap.draggable=!0,t._search={},t._search.search=function(e,i,n,o,r,s,a){var c=[],l=i.toLowerCase();document.documentElement.lang&&(l=i.toLocaleLowerCase(document.documentElement.lang));var h=l.split(" ");if(a&&h.length>1){var d=h[0];a[d]&&(n=[a[d]],h=(l=l.replace(d,"").trim()).split(" "))}h=h.filter(function(b,I,w){return w.indexOf(b)===I});for(var p={},f=0;f<e.length;f++)for(var u=e[f],x=0;x<n.length;x++){var S=n[x];if(!t.isNEU(u[S])){var y=u[S];if((i=t._search.searchAndComputeScore(h,y,S,s))!=null){var v=u.id;if(p[v]){if(p[v]&&p[v]<i.__score){p[v]=i.__score;for(var E=c.length-1;E>=0;E--)c[E].id==v&&c.splice(E,1);t._search.addNodeToResult(c,o,u,i,S,r)}}else p[v]=i.__score,t._search.addNodeToResult(c,o,u,i,S,r)}}}return c.sort(function(b,I){return b.__score<I.__score?1:b.__score>I.__score?-1:0}),c},t._search.addNodeToResult=function(e,i,n,o,r,s){var a={};a.id=n.id,t.isNEU(n[s])||(a[s]=n[s]);for(var c=0;c<i.length;c++){var l=i[c];t.isNEU(n[l])||t.isNEU(a[l])&&(a[l]=n[l])}o!=null&&(t.isNEU(a.__score)&&(a.__score=o.__score),t.isNEU(a.__searchField)&&(a.__searchField=r),t.isNEU(a.__searchMarks)&&(a.__searchMarks=o.__searchMarks)),e.push(a)},t._search.searchAndComputeScore=function(e,i,n,o){if(t.isNEU(i)||t.isNEU(e)||!e.length)return null;typeof i!="string"&&(i=i.toString());var r=i.toLowerCase();document.documentElement.lang&&(r=i.toLocaleLowerCase(document.documentElement.lang));var s=t._search.searchIndexesOf(r,e);if(!s.length)return null;for(var a=r.length/100,c=0,l=0,h=c>0?100:0,d=0,p=0;p<e.length;p++)for(var f=e[p],u=0;u<s.length;u++)if(f.indexOf(s[u].searchPhrase)!=-1){d++;break}var x=100/(e.length/d);if(s.length){for(l=s[0].start,u=0;u<s.length;u++)if(c+=s[u].length,s[u].start<l&&(l=s[u].start),u>=1&&s[u-1].start>s[u].start){h=0;break}}var S=0;c!=0&&(S=c/a);var y=c>0?100:0;l!=0&&(y=100-l/a);var v=0;o&&o[n]&&(v=o[n]),x&&(x=x/100*50),S>0&&(S=S/100*10),y>0&&(y=y/100*10),h>0&&(h=h/100*10),v>0&&(v=v/100*20);var E=Math.round(1e4*(x+S+y+h+v));for(s.sort(function(I,w){return I.start<w.start?-1:I.start>w.start?1:0}),u=s.length-1;u>=0;u--)for(p=0;p<s.length;p++)p<u&&s[p].start+s[p].length>s[u].start&&s.splice(u,1);var b=i;for(u=s.length-1;u>=0;u--)b=(b=b.insert(s[u].start+s[u].length,"</mark>")).insert(s[u].start,"<mark>");return{__searchMarks:b,__score:E}},t._search.searchIndexesOf=function(e,i){var n=[];if(!t.isNEU(e))for(var o=0;o<i.length;o++){var r=i[o];if(!t.isNEU(r))for(var s=0;(s=e.indexOf(r,s))>-1;)n.push({length:r.length,start:s,searchPhrase:r}),s+=r.length}return n.sort(function(a,c){return a.length<c.length?1:a.length>c.length||a.start<c.start?-1:a.start>c.start?1:0}),n=n.filter(function(a){for(var c=!1,l=0;l<n.length;l++){var h=n[l].start,d=n[l].start+n[l].length-1,p=a.start,f=a.start+a.length-1;if(h==p&&d==f){c=!1;break}if(h>=p&&d<=f){c=!0;break}if(h<=p&&d>=f){c=!0;break}}return!c})},t.events.on("redraw",function(e,i){if(e.config.state){var n=[],o=[];(function r(s){if(Array.isArray(s))for(var a=0;a<s.length;a++)r(s[a]);else{for((typeof s.id!="string"||typeof s.id=="string"&&s.id.indexOf("split")==-1&&s.id.indexOf("mirror")==-1)&&(n.push(s.id),s.min==1&&o.push(s.id)),a=0;a<s.stChildren.length;a++)r(s.stChildren[a]);for(a=0;a<s.children.length;a++)r(s.children[a])}})(e.roots),t.state._put(e.config.roots,e.width(),e.height(),e.response.viewBox,n,o,e.response.adjustify,e.config.state)}}),t.state={},t.state._buildStateNames=function(e){return{paramScale:e+"-scale",paramX:e+"-x",paramY:e+"-y",paramExp:e+"-exp",paramMin:e+"-min",paramRoots:e+"-roots",paramAdjustify:e+"-adjustify"}},t.state._put=function(e,i,n,o,r,s,a,c){if(c&&!t.isNEU(r)&&r.length!=0){var l=t.state._buildStateNames(c.name),h={roots:e,scale:Math.min(i/o[2],n/o[3]),x:o[0],y:o[1],exp:r,min:s,adjustify:a};if(c.writeToUrlParams){var d=new URLSearchParams(window.location.search);d.has(l.paramScale)?d.set(l.paramScale,h.scale):d.append(l.paramScale,h.scale),d.has(l.paramX)?d.set(l.paramX,h.x):d.append(l.paramX,h.x),d.has(l.paramY)?d.set(l.paramY,h.y):d.append(l.paramY,h.y),d.has(l.paramExp)?d.set(l.paramExp,h.exp.join("*")):d.append(l.paramExp,h.exp.join("*")),d.has(l.paramRoots)&&Array.isArray(h.roots)?d.set(l.paramRoots,h.roots.join("*")):Array.isArray(h.roots)&&d.append(l.paramRoots,h.roots.join("*")),d.has(l.paramMin)?d.set(l.paramMin,h.min.join("*")):d.append(l.paramMin,h.min.join("*")),d.has(l.paramAdjustify)?d.set(l.paramAdjustify,h.adjustify.x+"*"+h.adjustify.y):d.append(l.paramAdjustify,h.adjustify.x+"*"+h.adjustify.y),window.history.replaceState(null,null,"?"+d)}c.writeToIndexedDB&&(h.id=c.name,t.idb.put(h,function(p){p==0&&console.error("Cannot write row - "+c.name)})),c.writeToLocalStorage&&t.localStorage.setItem(c.name,JSON.stringify(h))}},t.state._get=function(e,i,n,o){if(e){var r=t.state._buildStateNames(e.name);if(e.readFromUrlParams){var s=new URLSearchParams(window.location.search);if(s.has(r.paramScale)&&s.has(r.paramX)&&s.has(r.paramY)&&s.has(r.paramExp)&&s.has(r.paramMin)&&s.has(r.paramAdjustify)){var a={},c=parseFloat(s.get(r.paramScale)),l=parseFloat(s.get(r.paramX)),h=parseFloat(s.get(r.paramY));(p=[])[0]=l,p[1]=h,p[2]=i/c,p[3]=n/c,a.vb=p,a.scale=c,a.x=l,a.y=h,a.roots=null,s.has(r.paramRoots)&&(a.roots=s.get(r.paramRoots).split("*")),a.exp=s.get(r.paramExp).split("*"),a.min=s.get(r.paramMin).split("*");var d=s.get(r.paramAdjustify).split("*");return a.adjustify={x:parseFloat(d[0]),y:parseFloat(d[1])},void o(a)}if(!e.readFromIndexedDB&&!e.readFromLocalStorage)return void o(null)}if(e.readFromLocalStorage){var p;if((a=t.localStorage.getItem(e.name))!=null)return a=JSON.parse(a),(p=[])[0]=a.x,p[1]=a.y,p[2]=i/a.scale,p[3]=n/a.scale,a.vb=p,void o(a);if(!e.readFromIndexedDB)return void o(null)}e.readFromIndexedDB&&t.idb.read(e.name,function(f,u){if(f==0)console.error("Cannot read from - "+e.name),o(null);else if(f==null)o(null);else{var x=[];x[0]=u.x,x[1]=u.y,x[2]=i/u.scale,x[3]=n/u.scale,u.vb=x,o(u)}})}else o(null)},t.state.clear=function(e){if(!e)return!1;try{localStorage.removeItem(e);var i=t.state._buildStateNames(e),n=new URLSearchParams(window.location.search);n.has(i.paramScale)&&n.delete(i.paramScale),n.has(i.paramX)&&n.delete(i.paramX),n.has(i.paramY)&&n.delete(i.paramY),n.has(i.paramExp)&&n.delete(i.paramExp),n.has(i.paramRoots)&&n.delete(i.paramRoots),n.has(i.paramMin)&&n.delete(i.paramMin),n.has(i.paramAdjustify)&&n.delete(i.paramAdjustify),window.history.replaceState(null,null,"?"+n),t.idb.delete(e,function(o){o==0&&console.error("Cannot delete row - "+e)})}catch{}},t._magnify={},t.prototype.magnify=function(e,i,n,o,r){o||(o=this.config.anim);var s=this.getNode(e),a=this.getNodeElement(e);if(s||a){var c=t._magnify[e];c&&(c.timer!=null&&clearInterval(c.timer),c.timerBack!=null&&clearInterval(c.timerBack),a.setAttribute("transform","matrix("+c.transformStart.toString()+")"),t._magnify[e]=null),n&&(a=a.cloneNode(!0),this.getSvg().appendChild(a));var l=t._getTransform(a),h=JSON.parse(JSON.stringify(l));h[0]=i,h[3]=i;var d=s.w+s.w*(i-1),p=s.h+s.h*(i-1);h[4]+=(s.w-d)/2,h[5]+=(s.h-p)/2;var f=t.animate(a,{transform:l},{transform:h},o.duration,o.func);t._magnify[e]={timer:f,transformStart:l,nodeElement:a,front:n},r&&r(a)}},t.prototype.magnifyBack=function(e,i,n){i||(i=this.config.anim);var o=t._magnify[e];if(o){o.timer!=null&&clearInterval(o.timer),o.timerBack!=null&&clearInterval(o.timerBack);var r=t._getTransform(o.nodeElement);o.timerBack=t.animate(o.nodeElement,{transform:r},{transform:o.transformStart},i.duration,i.func,function(s){var a=s[0].getAttribute(t.attr.node_id);t._magnify[a]&&t._magnify[a].front&&(s[0].parentNode.removeChild(s[0]),t._magnify[a]=null),n&&n(s[0])})}},t===void 0&&(t={}),t.events.on("init",function(e,i){if(e.config.keyNavigation&&(window.addEventListener("keydown",function(){e._windowKeyDownHandler.apply(e,[this,arguments[0]])}),t.isNEU(e._keyNavigationActiveNodeId)&&e.roots&&e.roots.length)){var n=e.roots[0].id;t.isNEU(e.config.keyNavigation.focusId)||(n=e.config.keyNavigation.focusId),e._keyNavigationActiveNodeId=n,e.center(e._keyNavigationActiveNodeId)}}),t.prototype._windowKeyDownHandler=function(e,i){for(var n=i.target,o=null;n&&n!=this.element;){if(n.hasAttribute&&n.hasAttribute(t.attr.node_id)){o=n.getAttribute(t.attr.node_id);break}n=n.parentNode}if(n){var r=o?this.getNode(o):null,s={node:r,data:o?this.get(o):null,event:i};if(t.events.publish("key-down",[this,s])!==!1&&r){if(i.code=="KeyF")this.searchUI.find("");else if(i.code=="ArrowRight"||r.isAssistant&&i.code=="ArrowDown"||r.isPartner&&i.code=="ArrowDown"){if(l=this.getNode(r.pid)){var a=l.childrenIds.indexOf(r.id);if(++a<l.childrenIds.length){var c=l.childrenIds[a];this._keyNavigationActiveNodeId=c,this.center(c)}}}else if(i.code=="ArrowLeft")(l=this.getNode(r.pid))&&(a=l.childrenIds.indexOf(r.id),--a>=0&&(c=l.childrenIds[a],this._keyNavigationActiveNodeId=c,this.center(c)));else if(i.code=="ArrowUp"){var l;(l=this.getNode(r.pid))&&(c=l.id,(r.isAssistant||l.hasAssistants||r.isPartner||l.hasPartners)&&(a=l.childrenIds.indexOf(r.id),--a>=0&&(c=l.childrenIds[a])),this._keyNavigationActiveNodeId=c,this.center(c))}else if(i.code=="ArrowDown")r.childrenIds.length&&(this._keyNavigationActiveNodeId=r.childrenIds[0],this.center(r.childrenIds[0]));else if(i.code=="Space"){var h=n.getAttribute(t.attr.node_id);return void this.toggleExpandCollapse(h,i)}}}},t.events.on("redraw",function(e,i){e.config.keyNavigation&&t._keyNavigation(e)}),t.events.on("click",function(e,i){e.config&&e.config.keyNavigation&&(e._keyNavigationActiveNodeId=i.node.id,e.center(i.node.id))}),t._keyNavigation=function(e){var i=e.element.querySelector(":focus");if(i&&i.parentElement&&i.parentElement.hasAttribute(t.attr.node_id)){var n=i.parentElement;(r=(o=i).querySelector("title"))&&r.parentNode.removeChild(r),o.removeAttribute("tabindex")}if(!t.isNEU(e._keyNavigationActiveNodeId)&&(n=e.getNodeElement(e._keyNavigationActiveNodeId))&&n.children.length){var o;(o=n.children[0]).setAttribute("tabindex",2);var r,s={text:"",id:e._keyNavigationActiveNodeId};t.events.publish("screen-reader-text",[e,s]),!t.isNEU(s.text)&&((r=document.createElementNS("http://www.w3.org/2000/svg","title")).innerHTML=s.text,o.appendChild(r)),t.SEARCH_CLOSE_RESULT_ON_ESCAPE_OR_CLICKOUTSIDE&&e.searchUI.hide(),o.focus()}},t.elements={},t.elements.textbox=function(e,i,n,o){var r=t.elements._vidrf(e,i,o);if(r.doNotRender)return{html:""};var s="";return i.btn&&(s=`<a href="#" data-input-btn="" class="boc-link boc-link-boc-button">${i.btn}</a>`),{html:`<div class="boc-form-field" style="min-width: ${n};">
                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>
                        <label for="${r.id}">${t._escapeGreaterLessSign(r.label)}</label>
                        <input ${r.readOnlyAttribute} data-binding="${t._escapeDoubleQuotes(r.binding)}" maxlength="256" id="${r.id}" name="${r.id}" type="text" value="${t._escapeDoubleQuotes(r.value)}" autocomplete="off">
                        ${s}
                    </div>
                </div>`,id:r.id,value:r.value}},t.elements.checkbox=function(e,i,n,o){var r=t.elements._vidrf(e,i,o);if(r.doNotRender)return{html:""};var s=r.value?"checked":"",a=o?'onclick="return false;"':"";return{html:`<div class="boc-form-field"  style="min-width: ${n};" >
                        <label class="boc-checkbox" data-boc-input="" ${r.disabledAttribute}>
                            <input ${s} ${a} data-binding="${t._escapeDoubleQuotes(r.binding)}" type="checkbox"><span class="boc-checkbox-checkmark" type="checkbox"></span>${t._escapeGreaterLessSign(r.label)}
                        </label>
                    </div>`,id:r.id,value:s}},t.elements.select=function(e,i,n,o){if(o)return t.elements.textbox(e,i,n,o);var r=t.elements._vidrf(e,i,o);return r.doNotRender?{html:""}:{html:`<div class="boc-form-field" style="min-width: ${n};">
                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>
                        <label for="${r.id}">${t._escapeGreaterLessSign(r.label)}</label>
                        <select data-binding="${t._escapeDoubleQuotes(r.binding)}" ${r.readOnlyAttribute} id="${r.id}" name="${r.id}">
                            ${(function(){for(var s="",a=0;a<r.options.length;a++){var c=r.options[a];s+=`<option ${c.value==r.value?"selected":""} value="${t._escapeDoubleQuotes(c.value)}">${t._escapeGreaterLessSign(c.text)}</option>`}return s})()}                           
                        </select>
                    </div>
                </div>`,id:r.id,value:r.value}},t.elements.multiSelect=function(e,i,n,o){if(o)return t.elements.textbox(e,i,n,o);var r=t.elements._vidrf(e,i,o);return r.doNotRender?{html:""}:{html:`<div class="boc-form-field" style="min-width: ${n};">
                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>
                        <label for="${r.id}">${t._escapeGreaterLessSign(r.label)}</label>
                        <select class="multiple" data-binding="${t._escapeDoubleQuotes(r.binding)}" ${r.readOnlyAttribute} id="${r.id}" name="${r.id}" multiple>
                            ${(function(){for(var s="",a=0;a<r.options.length;a++){var c=r.options[a];s+=`<option ${r.value.includes(c.value)?"selected":""} value="${t._escapeDoubleQuotes(c.value)}">${t._escapeGreaterLessSign(c.text)}</option>`}return s})()}                           
                        </select>
                    </div>
                </div>`,id:r.id,value:r.value}},t.elements.date=function(e,i,n,o){var r=t.elements._vidrf(e,i,o);return r.doNotRender?{html:""}:{html:`<div class="boc-form-field" style="min-width: ${n};">
                    <div class="boc-input" data-boc-input="" ${r.disabledAttribute} ${r.vlidators}>
                        <label for="${r.id}" class="hasval">${t._escapeGreaterLessSign(r.label)}</label>
                        <input data-binding="${t._escapeDoubleQuotes(r.binding)}" ${r.readOnlyAttribute} maxlength="256" id="${r.id}" name="${r.id}" type="date" value="${t._escapeDoubleQuotes(r.value)}" autocomplete="off">
                    </div>
                </div>`,id:r.id,value:r.value}},t.elements._vidrf=function(e,i,n){var o={};if(i.binding||(i.binding=""),i.label||(i.label=""),i.type!="select"||Array.isArray(i.options)?o.options=i.options:o.options=[],o.value=e&&!t.isNEU(e[i.binding])?e[i.binding]:"",n&&o.options){for(var r=0;r<o.options.length;r++)if(o.options[r].value==o.value){o.value=o.options[r].text;break}}if(o.id=t.elements.generateId(),o.disabledAttribute=n?"data-boc-input-disabled":"",o.readOnlyAttribute=n?"readonly":"",o.id=o.id,n&&t.isNEU(o.value)&&(o.doNotRender=!0),n&&i.binding=="photo"&&(o.id=null,o.doNotRender=!0),o.binding=i.binding,o.label=i.label,o.vlidators="",i.vlidators)for(var s in i.vlidators)o.vlidators+=`data-v-${s}="${i.vlidators[s]}" `;return o},t.elements.ids=[],t.elements.generateId=function(){for(;;){var e="_"+("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);if(!t.elements.ids.has(e))return t.elements.ids.push(e),e}},t.input={},t.input._timeout=null,t.input.initWithTimeout=function(){t.input._timeout&&(clearTimeout(t.input._timeout),t.input._timeout=null),t.input._timeout=setTimeout(t.input.init,200)},t.input.init=function(e){var i;i=e?e.querySelectorAll("[data-boc-input]"):document.querySelectorAll("[data-boc-input]");for(var n=0;n<i.length;n++){var o=i[n],r=null;o.type&&o.type.toLowerCase()=="hidden"&&(r=o),r||(r=o.querySelector("input")),r||(r=o.querySelector("select"));var s=o.querySelector("label");s&&(r.value||r.type=="select-one"&&r.selectedOptions&&r.selectedOptions.length&&r.selectedOptions[0].value==""&&r.selectedOptions[0].innerHTML)&&s.classList.add("hasval"),r.type.toLowerCase()!="checkbox"&&r.addEventListener("focus",function(){this.classList.remove("boc-validation-error");var a=this.parentNode.querySelector("label");a.classList.add("focused");var c=a.querySelector(".boc-validation-error-message");c&&c.parentNode.removeChild(c)}),r.type.toLowerCase()!="checkbox"&&r.addEventListener("blur",function(){t.input.blurHandler(this)})}},t.input.blurHandler=function(e){var i=e.parentNode.querySelector("label");i.classList.remove("focused"),e.value||e.type=="date"?i.classList.add("hasval"):i.classList.remove("hasval")},t.input.validate=function(e){var i=null;e.type&&e.type.toLowerCase()=="hidden"&&(i=e),i||(i=e.querySelector("input")),i||(i=e.querySelector("select"));var n=e.querySelector("label");if(i.classList.remove("boc-validation-error"),n){var o=n.querySelector(".boc-validation-error-message");o&&o.parentNode.removeChild(o)}!i.selectedOptions&&i.value&&(i.value=i.value.trim());var r=e.getAttribute("data-v-required"),s=e.getAttribute("data-v-password"),a=e.getAttribute("data-v-email"),c=e.getAttribute("data-v-emails");return r&&i.value==""?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+r+"</span>",i.classList.add("boc-validation-error"),!1):s&&!t.input.validatePassword(i.value)?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+s+"</span>",i.classList.add("boc-validation-error"),!1):a&&!t.input.isValidEmail(i.value)?(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+a+"</span>",i.classList.add("boc-validation-error"),!1):!(c&&!t.input.isValidEmails(i.value))||(n.innerHTML+='<span class="boc-validation-error-message">&nbsp;'+c+"</span>",i.classList.add("boc-validation-error"),!1)},t.input.validateAndGetData=function(e){for(var i=e.querySelectorAll("[data-boc-input]"),n=!0,o=0;o<i.length;o++){var r=i[o];t.input.validate(r)||(n=!1)}return!!n&&t.input.getData(e)},t.input.getData=function(e){for(var i=e.querySelectorAll("[data-binding]"),n={},o=0;o<i.length;o++){var r=i[o],s=r.getAttribute("data-binding");if(r.type.toLowerCase()=="checkbox")n[s]=r.checked;else if(r.selectedOptions&&r.hasAttribute("multiple")){var a=r.selectedOptions;n[s]=Array.from(a).map(({value:c})=>c)}else n[s]=r.value}return n},t.input.validatePassword=function(e){return e&&(e=e.trim()),!(e.length<5)&&!(e.length>18)&&e.indexOf(" ")==-1},t.input.isValidEmails=function(e){if(e)for(var i=e.split(","),n=0;n<i.length;n++){var o=i[n].trim();if(!t.input.isValidEmail(o))return!1}return!0},t.input.isValidEmail=function(e){return e&&(e=e.trim()),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},t.ui.css=function(){return'<style data-boc-styles>.boc-ai-form{height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}.boc-dark .boc-ai-form{color:#aeaeae}.boc-light .boc-ai-form{color:#757575}.boc-ai-messages{font-size:16px}@media screen and (max-width:500px){.boc-ai-form{width:100%}}.boc-dark .boc-ai-form{background-color:#252526}.boc-light .boc-ai-form{background-color:#fff}.boc-ai-button{font-size:32px;position:absolute;top:20px;left:20px;cursor:pointer;padding:12px;border-radius:50%;user-select:none}.boc-dark .boc-ai-button{color:#aeaeae}.boc-light .boc-ai-button{color:#757575}.boc-ai-button:hover{color:#fff;background-color:#039be5}.boc-ai-container{padding:0 14px;display:grid;grid-template-rows:40px auto 80px;gap:10px;height:100%}.boc-ai-container .boc-input input{padding-right:50px}.boc-ai-close{text-align:end;margin-top:20px}.boc-ai-close svg{cursor:pointer}.boc-ai-start{text-align:center;display:flex;justify-content:center;align-items:center;user-select:none}.boc-ai-start span{font-weight:700;font-size:32px;font:"Segoe UI",Arial,sans-serif;background:linear-gradient(90deg,#039be5 28%,#f57c00,#ffca28);color:transparent!important;background-clip:text;display:inline-block;padding:10px 0}.boc-ai-send.boc-ai-send-cansend{cursor:pointer;background-color:#039be5}.boc-ai-send.boc-ai-send-cansend:hover{background-color:#f57c00}.boc-ai-send.boc-ai-send-cansend:active{background-color:#ffca28}.boc-ai-send{background-color:transparent;position:absolute;right:7px;top:7px;width:38px;height:38px;border-radius:50%;text-align:center;background-repeat:no-repeat;background-position:center;background-size:20px 20px}.boc-ai-send svg{display:block;margin:auto;height:100%}.boc-ai-user-message{text-align:end;margin:14px 0}.boc-inner-user-message{padding:7px;border-radius:7px;display:inline-block}.boc-ai-middle{overflow-y:auto}.boc-ai-middle::-webkit-scrollbar{display:none}.boc-button{background-color:#039be5;cursor:pointer;width:calc(100%);height:50px;color:#fff;padding-top:5px;padding-left:7px;padding-right:7px;text-align:center;text-transform:uppercase;border:1px solid #3fc0ff;display:inline-block;border-radius:5px}.boc-button.orange{background-color:#f57c00;border:1px solid #ffa03e}.boc-button.yellow{background-color:#ffca28;border:1px solid #ffdf7c}.boc-button.lower{text-transform:unset}.boc-button.transparent{background-color:transparent}.boc-button:hover{background-color:#35afea}.boc-button.orange:hover{background-color:#f79632}.boc-button.yellow:hover{background-color:#ffd452}.boc-button:active{transform:matrix(.98,0,0,.98,0,0)}.boc-button-icon{text-align:initial;cursor:pointer;margin-bottom:15px;color:#039be5}.boc-dark .boc-button-icon:hover{background-color:#2d2d2d}.boc-light .boc-button-icon:hover{background-color:#ececec}.boc-button-icon>img{height:24px;width:24px;vertical-align:middle;padding:7px}.boc-button:focus{outline:0}.boc-button-icon>img{filter:invert(46%) sepia(66%) saturate(2530%) hue-rotate(171deg) brightness(95%) contrast(98%)}.boc-light .boc-button.transparent{color:#039be5}.boc-light .boc-button.transparent:hover{color:#fff}.boc-button-loading{background-color:transparent;cursor:pointer;width:calc(100% - 2px);height:50px;color:#fff;text-align:center;text-transform:uppercase;border:1px solid #027cb7;display:inline-block;display:flex;justify-content:center;align-items:center;display:none}.boc-button-loading .boc-loading-dots div{margin:0 10px}.boc-link-boc-button{position:absolute;right:10px;top:-1px}@media screen and (max-width:1000px){.boc-link-boc-button{right:50px}}[data-boc-input-disabled] .boc-link-boc-button{display:none}[dir=rtl] .boc-link-boc-button{left:10px;right:unset}.boc-img-button{width:48px;height:48px;cursor:pointer;border-radius:50%;background-color:#039be5;background-repeat:no-repeat;background-size:24px 24px;background-position:center center;margin:3px;display:inline-block}.boc-img-button:hover{background-color:#f57c00}.boc-checkbox{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.boc-checkbox input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.boc-checkbox-checkmark{position:absolute;top:0;left:0;height:25px;width:25px;border-radius:5px}.boc-dark [data-boc-input-disabled] .boc-checkbox-checkmark,.boc-dark [data-boc-input-disabled].boc-checkbox input:checked~.boc-checkbox-checkmark,.boc-light [data-boc-input-disabled] .boc-checkbox-checkmark,.boc-light [data-boc-input-disabled].boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#aeaeae!important}[data-boc-input-disabled].boc-checkbox{cursor:default}[dir=rtl] .boc-checkbox-checkmark{right:0}[dir=rtl] .boc-checkbox{padding-left:unset;padding-right:35px}.boc-dark .boc-checkbox-checkmark{background-color:#333;border:1px solid #5b5b5b}.boc-light .boc-checkbox-checkmark{background-color:#fff;border:1px solid #c7c7c7}.boc-dark .boc-checkbox:hover input~.boc-checkbox-checkmark{background-color:#3c3c3c}.boc-light .boc-checkbox:hover input~.boc-checkbox-checkmark{background-color:#f8f9f9}.boc-dark .boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#039be5}.boc-light .boc-checkbox input:checked~.boc-checkbox-checkmark{background-color:#039be5}.boc-checkbox-checkmark:after{content:"";position:absolute;display:none}.boc-checkbox input:checked~.boc-checkbox-checkmark:after{display:block}.boc-checkbox .boc-checkbox-checkmark:after{left:9px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.boc-controls{display:flex;flex-direction:column;gap:7px;position:absolute;right:15px;bottom:15px}.boc-controls [data-control-id] svg{display:block;margin:0 auto}.boc-controls [data-control-id]{display:flex;align-items:center;cursor:pointer;width:60px;height:60px;border-radius:30px;box-shadow:0 4px 30px rgba(0,0,0,.1);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}.boc-light .boc-controls [data-control-id]{background:rgba(255,255,255,.2);border:1px solid #c7c7c7}.boc-dark .boc-controls [data-control-id]{background:rgba(30,30,30,.2);border:1px solid #5b5b5b}.boc-controls [data-control-id]:hover{background-color:#0074e8}.boc-controls [data-control-id]:hover svg{filter:brightness(0) invert(1)}.boc-filter{user-select:none}.boc-light .boc-filter{color:#757575}.boc-dark .boc-filter{color:#ccc}.boc-filter>div>div{display:inline-block;padding:3px 10px;cursor:pointer}.boc-filter-menu fieldset,.boc-filter>div,.filter-field-selected{border-radius:5px}.boc-filter-menu fieldset{overflow-y:auto;max-height:300px}.boc-filter>div.boc-filter-menu{padding:10px}.boc-light .boc-filter>div.boc-filter-menu,.boc-light .filter-field-selected{background-color:#f8f9f9}.boc-dark .boc-filter>div.boc-filter-menu,.boc-dark .filter-field-selected{background-color:#3c3c3c}.boc-light .boc-filter>div{background-color:#eee}.boc-dark .boc-filter>div{background-color:#333}.boc-form-perspective{transform-style:preserve-3d;perspective:500px;position:absolute;top:32px}.boc-form{box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;padding:14px;transform-origin:top center;user-select:none;display:none;position:relative;max-height:calc(100vh - 100px);overflow-y:auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.boc-form-bottom{border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-top-left-radius:5px;border-top-right-radius:5px}.boc-form .separator{margin:0 10px}@media screen and (max-width:1000px){.boc-form-perspective{min-width:100%;max-height:calc(100% - 32px);left:unset!important;right:unset!important;transform:none!important}.boc-form .set{max-height:calc(100vh - 74px)}.boc-form-fieldset{max-width:unset!important}}.boc-light .boc-form .separator{border-bottom:1px solid #c7c7c7}.boc-dark .boc-form .separator{border-bottom:1px solid #5b5b5b}.boc-light .boc-form{background-color:#fff}.boc-dark .boc-form{background-color:#252526}.boc-item{padding:6px 12px 6px 12px;display:flex;flex-direction:row}.boc-light .boc-form .boc-item.selected,.boc-light .boc-form .boc-item:hover{background-color:#0074e8;color:#fff}.boc-dark .boc-form .boc-item.selected,.boc-dark .boc-form .boc-item:hover{background-color:#094771;color:#fff}.boc-item.selected img,.boc-item:hover img{filter:invert(100%)}.boc-item.selected img{visibility:visible!important}.boc-form-fieldset{display:flex;flex-wrap:wrap;margin:0!important}.boc-form-field{flex:1 0 21%;margin:3px;min-width:200px}.boc-form-field-100{flex:1 0 96%;margin:3px;min-width:200px}.boc-input{position:relative}.boc-input>input,.boc-input>select{height:50px;padding:18px 10px 2px 9px;width:100%;box-sizing:border-box;border-style:solid;border-width:1px}.boc-input select{height:50px;padding:20px 5px 4px 5px}[data-boc-input-disabled].boc-input>input,[data-boc-input-disabled].boc-input>select{border-color:transparent!important}.boc-light [data-boc-input-disabled]>input,.boc-light [data-boc-input-disabled]>select{background-color:#fff!important}.boc-dark [data-boc-input-disabled]>input,.boc-dark [data-boc-input-disabled]>select{background-color:#252526!important}[data-boc-input-disabled]>select{appearance:none;padding-left:8px}.boc-input>label{display:inline-block;position:absolute;padding-left:10px;padding-right:10px;color:#acacac;cursor:text;-webkit-transition:all .1s ease-out;-moz-transition:all .1s ease-out;-ms-transition:all .1s ease-out;-o-transition:all .1s ease-out;transition:all .1 ease-out;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:initial;text-align:initial;white-space:nowrap}.boc-input>label{top:12px;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 14px)}.boc-input>label.focused,.boc-input>label.hasval{top:-1px}.boc-input>input,.boc-input>select{outline:0;border-radius:5px}.boc-dark .boc-input>label.focused,.boc-light .boc-input>label.focused{color:#039be5}.boc-dark .boc-input>input,.boc-dark .boc-input>select{color:#ccc;background-color:#333;border-color:#5b5b5b}.boc-light .boc-input>input,.boc-light .boc-input>select{color:#757575;background-color:#fff;border-color:#c7c7c7}.boc-light .boc-input>input:focus,.boc-light .boc-input>select:focus{border-color:#039be5;background-color:#f8f9f9}.boc-dark .boc-input>input:focus,.boc-dark .boc-input>select:focus{border-color:#039be5;background-color:#3c3c3c}.boc-dark .boc-input>input.boc-validation-error,.boc-dark .boc-input>select.boc-validation-error,.boc-light .boc-input>input.boc-validation-error,.boc-light .boc-input>select.boc-validation-error{border-color:#ca2a2a}.boc-dark .boc-validation-error-message,.boc-light .boc-validation-error-message{color:#ca2a2a}.boc-input select.multiple{height:initial}.boc-link{color:#039be5;cursor:pointer;text-decoration:underline}.boc-link:hover{color:#f57c00}.boc-dark ::-webkit-scrollbar,.boc-light ::-webkit-scrollbar{width:15px;height:15px}.boc-dark ::-webkit-scrollbar-corner{background:#1e1e1e}.boc-dark ::-webkit-scrollbar-track{background:#1e1e1e;border-left:1px solid #333;border-top:1px solid #333}.boc-dark ::-webkit-scrollbar-thumb{background:#424242}.boc-dark ::-webkit-scrollbar-thumb:hover{background:#4f4f4f}.boc-dark ::-webkit-scrollbar-thumb:active{background:#5e5e5e}.boc-light ::-webkit-scrollbar-corner{background:#fff}.boc-light ::-webkit-scrollbar-track{background:#fff;border-left:1px solid #ddd;border-top:1px solid #ddd}.boc-light ::-webkit-scrollbar-thumb{background:#c1c1c1}.boc-light ::-webkit-scrollbar-thumb:hover{background:#929292}.boc-light ::-webkit-scrollbar-thumb:active{background:#666}.boc-edit-form{position:fixed;top:0;right:0;height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:1000px){.boc-edit-form{width:100%}}.boc-dark .boc-edit-form{background-color:#252526}.boc-light .boc-edit-form{background-color:#fff}.boc-edit-form-header{height:200px;text-align:center;border-radius:10px}.export-service .boc-edit-form-header{border-radius:unset}.boc-edit-form-title{color:#fff;margin:0;padding:14px 17px 7px 17px}.boc-edit-form-avatar{border-radius:50%;width:150px;height:150px;position:absolute;top:75px;border:5px solid #fff;left:50%;transform:translateX(-50%);background-color:#cacaca;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0}.boc-edit-form-close{position:absolute;right:14px;top:14px;width:34px;height:34px;cursor:pointer}.boc-edit-form-fields{flex-grow:1;overflow-y:auto;overflow-x:hidden}.boc-edit-form-fields-inner{margin:0 7px 20px 7px}.boc-ai-user-message{text-align:end;margin:14px 0}.boc-inner-user-message{padding:7px;border-radius:7px;display:inline-block}.dark .boc-inner-user-message{background-color:#333}.light .boc-inner-user-message{background-color:#f9f9f9}.boc-export-form{box-shadow:rgba(0,0,0,.2) 0 -6px 6px 0,rgba(0,0,0,.19) 0 -13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}.boc-dark .boc-export-form{color:#aeaeae;background-color:#252526}.boc-light .boc-export-form{color:#757575;background-color:#eee}@media screen and (max-width:500px){.boc-export-form{width:100%}}.boc-export-container{display:grid;grid-template-rows:40px auto;gap:10px;height:100%}.boc-export-page{width:100%;border:1px solid #aeaeae;display:flex;justify-content:center;align-items:center;user-select:none;position:relative}.boc-export-selected{border:1px solid #ffca28}.boc-export-middle{overflow-y:auto;overflow-x:hidden;padding:0 3px 0 0;margin-bottom:10px}.boc-export-btns-inner{padding-top:14px;display:flex;justify-content:space-between}.boc-export-left{justify-content:flex-start}.boc-export-right{justify-content:flex-end}.boc-export-left,.boc-export-right{user-select:none}.boc-export-select{position:absolute;top:0;left:0;text-align:center;width:100%}.boc-export-child-buttons{position:absolute;bottom:7px;left:7px;display:none}.boc-export-page:hover .boc-export-child-buttons{display:initial}.boc-export-parent-buttons{position:absolute;top:7px;left:7px;display:none}.boc-export-page:hover .boc-export-parent-buttons{display:initial}.boc-export-remove-buttons{position:absolute;bottom:7px;right:7px;display:none}.boc-export-page:hover .boc-export-remove-buttons{display:initial}.boc-export-child-buttons button,.boc-export-parent-buttons button{width:23px}.boc-export-profiletree-buttons{position:absolute;top:7px;right:7px;display:none}.boc-export-page:hover .boc-export-profiletree-buttons{display:initial}.boc-export-middle-inner{display:grid;gap:10px;margin:0 10px}.boc-export-btns-inner{margin:0 10px}.boc-chart-menu{opacity:0;display:inline-block;position:absolute;text-align:left;user-select:none;min-width:270px;box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif;border-radius:10px}.boc-chart-menu>div:hover img{filter:invert(100%)}.boc-chart-menu [data-item]{text-align:start;padding:7px 10px}.boc-dark .boc-chart-menu [data-item]{background-color:#252526;color:#acacac;border-bottom:1px solid #333}.boc-dark .boc-chart-menu [data-item]:hover{background-color:#094771!important;color:#fff!important}.boc-dark .boc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.boc-light .boc-chart-menu [data-item]{background-color:#fff;color:#333;border-bottom:1px solid #c7c7c7}.boc-light .boc-chart-menu [data-item]:hover{background-color:#0074e8!important;color:#fff!important}.boc-light .boc-chart-menu [data-item]:hover svg{filter:brightness(0) invert(1)}.boc-chart-menu [data-item] svg{vertical-align:middle}.boc-chart-menu [data-item]:first-child{border-top-left-radius:7px;border-top-right-radius:7px}.boc-chart-menu [data-item]:last-child{border-bottom-width:0;border-bottom-style:none;border-bottom-left-radius:7px;border-bottom-right-radius:7px}.boc-orgscribe-form{height:100%;width:100%;box-shadow:rgba(0,0,0,.2) 0 6px 6px 0,rgba(0,0,0,.19) 0 13px 20px 0;display:flex;flex-direction:column;height:100%;width:400px}@media screen and (max-width:500px){.boc-orgscribe-form{width:100%}}.boc-dark .boc-orgscribe-form{background-color:#252526}.boc-light .boc-orgscribe-form{background-color:#fff}.boc-orgscribe-container{padding:0 14px;display:grid;grid-template-rows:40px auto 10px;gap:10px;height:100%}.boc-orgscribe-container .boc-input input{padding-right:50px}.boc-orgscribe-close{text-align:end;margin-top:20px}.boc-orgscribe-close svg{cursor:pointer}.boc-orgscribe-txt{width:100%;height:100%;box-sizing:border-box;border-style:solid;border-width:1px;outline:0;border-radius:5px;font-size:24px}.boc-dark .boc-orgscribe-txt{color:#ccc;background-color:#333;border-color:#5b5b5b}.boc-light .boc-orgscribe-txt{color:#757575;background-color:#fff;border-color:#c7c7c7}.boc-search{position:absolute}@media screen and (max-width:500px){.boc-search{width:calc(100% - 30px);left:15px}}.boc-search .boc-input{margin-bottom:0}.boc-search-input{color:#7a7a7a;width:100%;border:none;outline:0;padding-top:10px;padding-right:47px}.boc-search-image-td{width:43px}.boc-search-text-td{padding-inline-end:7px;line-height:15px;text-align:start}.boc-search table{box-shadow:rgba(0,0,0,.2) 0 4px 8px 0,rgba(0,0,0,.19) 0 6px 20px 0;margin:0 3.5px 0 3.5px;width:calc(100% - 7px);border-radius:7px}.boc-search table tr:first-child td:first-child{border-top-left-radius:7px}.boc-search table tr:first-child td:last-child{border-top-right-radius:7px}[dir=rtl] .boc-search table tr:first-child td:first-child{border-top-left-radius:unset;border-top-right-radius:7px}[dir=rtl] .boc-search table tr:first-child td:last-child{border-top-right-radius:unset;border-top-left-radius:7px}.boc-search table tr:last-child td:first-child{border-bottom-left-radius:7px}.boc-search table tr:last-child td:last-child{border-bottom-right-radius:7px}[dir=rtl] .boc-search table tr:last-child td:first-child{border-bottom-left-radius:unset;border-bottom-right-radius:7px}[dir=rtl] .boc-search table tr:last-child td:last-child{border-bottom-right-radius:unset;border-bottom-left-radius:7px}.boc-dark .boc-search table{background-color:#252526;color:#acacac}.boc-search [data-search-item-id]{cursor:pointer}.boc-search-photo{margin:7px 7px 0 7px;width:32px;height:32px;background-size:cover;background-position:top center;border-radius:50%;display:inline-block;border:1px solid #8c8c8c}.boc-search [data-search-item-id]:hover .boc-link{color:#ffca28}.boc-search [data-search-item-id]:hover .boc-link:hover{color:#f57c00}.boc-dark .boc-search [data-search-item-id] td{border-top:1px solid #333}.boc-dark .boc-search [data-search-item-id]:hover,.boc-dark .boc-search [data-selected=yes]{background-color:#094771;color:#fff}.boc-light .boc-search table{background-color:#fff;color:#333}.boc-light .boc-search [data-search-item-id] td{border-top:1px solid #c7c7c7}.boc-light .boc-search [data-search-item-id]:hover,.boc-light .boc-search [data-selected=yes]{background-color:#0074e8;color:#fff}.boc-search [data-search-item-id]:first-child td{border-top:unset}.boc-ripple-container{position:absolute;top:0;right:0;bottom:0;left:0}.boc-drag-over rect{opacity:.5}.boc-ripple-container span{transform:scale(0);border-radius:100%;position:absolute;opacity:.75;background-color:#fff;animation:boc-ripple 1s}@-moz-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@-webkit-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@-o-keyframes boc-ripple{to{opacity:0;transform:scale(2)}}@keyframes boc-ripple{to{opacity:0;transform:scale(2)}}.boc-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.boc-slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.boc-slider.round{border-radius:24px}.boc-slider.round:before{border-radius:50%}svg text:hover{cursor:default}svg.boc-cursor-grab,svg.boc-cursor-grab text:hover{cursor:grab}svg.boc-cursor-nodrop,svg.boc-cursor-nodrop text:hover{cursor:no-drop}svg.boc-cursor-copy,svg.boc-cursor-copy text:hover{cursor:copy}svg.boc-cursor-move,svg.boc-cursor-move text:hover{cursor:move}#boc-close-btn:focus,#boc-close-btn:hover{color:#000;text-decoration:none;cursor:pointer}#boc-id-select:focus{outline:.5px solid #aeaeae}#boc-sampleDialog #title:hover{cursor:default;background:gray}.boc-light{background-color:#fff;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.boc-dark{background-color:#1e1e1e;font:13px/28px Helvetica,"Segoe UI",Arial,sans-serif}.boc-light .boc-fill{fill:#fff}.boc-dark .boc-fill{fill:#1e1e1e}.boc-dark input,.boc-dark select,.boc-light input,.boc-light select{font:16px Helvetica,"Segoe UI",Arial,sans-serif}.boc-dark h1,.boc-light h1{font-size:30px;line-height:1}.boc-light [data-boc-content]::backdrop{background-color:#fff}.boc-dark [data-boc-content]::backdrop{background-color:#1e1e1e}.boc-dark text,.boc-light text{user-select:none}.boc-edit-form{position:absolute;border-radius:10px}.export-service .boc-edit-form{border-radius:unset}.boc-dark .boc-edit-form{color:#acacac}.boc-light .boc-edit-form{color:#333}.boc-dark ::-webkit-calendar-picker-indicator{filter:invert(70%)}.boc-light ::-webkit-calendar-picker-indicator{filter:invert(50%)}.boc-edit-form-instruments{margin:42px 10px 0 10px;text-align:center;min-height:70px}.boc-img-button svg{position:relative;top:12px}.boc-light .boc-toolbar-container svg circle,.boc-light .boc-toolbar-container svg line,.boc-light .boc-toolbar-container svg path{stroke:#8c8c8c!important}.boc-dark .boc-toolbar-container svg circle,.boc-dark .boc-toolbar-container svg line,.boc-dark .boc-toolbar-container svg path{stroke:#8c8c8c!important}.boc-dark .boc-toolbar-container svg rect{fill:#252526!important}.boc-dark .boc-toolbar-container [data-tlbr=minus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-bottom:1px solid #5b5b5b!important}.boc-dark .boc-toolbar-container [data-tlbr=plus] svg{border-left:1px solid #5b5b5b!important;border-right:1px solid #5b5b5b!important;border-top:1px solid #5b5b5b!important}.boc-dark .boc-toolbar-container [data-tlbr]>svg{border:1px solid #5b5b5b!important;background-color:#252526!important}.boc-toolbar-layout{height:123px;padding-top:20px;position:absolute;width:100%;left:"0";bottom:"-145px"}.boc-light .boc-toolbar-layout{border-top:1px solid #c7c7c7;background-color:#f9f9f9}.boc-dark .boc-toolbar-layout{border-top:1px solid #5b5b5b;background-color:#2b2b2b}.boc-dotted-connector path{stroke-dasharray:7}.boc-undo-redo{position:absolute;top:23px;left:23px}@media screen and (max-width:500px){.boc-undo-redo{position:absolute;top:83px;left:23px}}.boc-light .boc-undo-redo path{fill:#cacaca}.boc-dark .boc-undo-redo path{fill:#5b5b5b}.boc-light .boc-undo-redo .boc-ur-clickable path{fill:#9c9c9c}.boc-dark .boc-undo-redo .boc-ur-clickable path{fill:#8c8c8c}.boc-undo-redo .boc-ur-clickable rect{cursor:pointer}.boc-undo-redo>span{position:relative;display:inline-block;user-select:none}.boc-undo-redo .boc-undo-i{left:-6px;top:-6px}.boc-undo-redo .boc-redo-i{right:-6px;bottom:6px}.boc-undo-redo>span>span{color:#fff;position:absolute;display:inline-block;min-width:20px;min-height:20px;border-radius:50%;line-height:20px;text-align:center;padding:1px;user-select:none;cursor:pointer}.boc-light .boc-undo-redo>span>span{background-color:#9c9c9c}.boc-dark .boc-undo-redo>span>span{background-color:#8c8c8c}</style>'},t===void 0&&(t={}),t.prototype.onField=function(e){return this.on("field",function(i,n){return e.call(i,n)})},t.prototype.onInit=function(e){return this.on("init",function(i){return e.call(i)})},t.prototype.onRedraw=function(e){return this.on("redraw",function(i){return e.call(i)})},t.prototype.onUpdateNode=function(e){return this.on("update",function(i,n,o){var r={oldData:n,newData:o};return e.call(i,r)})},t.prototype.onUpdated=function(e){return this.on("updated",function(i){return e.call(i)})},t.prototype.onRemoveNode=function(e){return this.on("remove",function(i,n,o){var r={id:n,newPidsAndStpidsForIds:o};return e.call(i,r)})},t.prototype.onAddNode=function(e){return this.on("add",function(i,n){var o={data:n};return e.call(i,o)})},t.prototype.onDrop=function(e){return this.on("drop",function(i,n,o,r,s){var a={dragId:n,dropId:o,dragNodeElement:r,event:s};return e.call(i,a)})},t.prototype.onDrag=function(e){return this.on("drag",function(i,n,o,r){var s={dragId:n,event:o,nodeIds:r};return e.call(i,s)})},t.prototype.onExpandCollapseButtonClick=t.prototype.onExpandCollpaseButtonClick=function(e){return this.on("expcollclick",function(i,n,o,r){var s={collapsing:n,id:o,ids:r};return e.call(i,s)})},t.prototype.onExportStart=function(e){return this.on("exportstart",function(i,n){return e.call(i,n)})},t.prototype.onExportEnd=function(e){return this.on("exportend",function(i,n){return e.call(i,n)})},t.prototype.onNodeClick=function(e){return this.on("click",function(i,n){return e.call(i,n)})},t.prototype.onCanvasClick=function(e){return this.on("canvas-click",function(i,n){return e.call(i,n)})},t.prototype.onNodeDoubleClick=function(e){return this.on("dbclick",function(i,n){var o={data:n};return e.call(i,o)})},t.prototype.onAIToolCalls=function(e){return this.on("ai-tool-calls",function(i,n){return e.call(i,n)})},t.filterUI=function(){},t.filterUI.prototype.init=function(e){this.instance=e,this.element=null,this.filterBy=null,this._event_id=t._guid()},t.filterUI.prototype.addFilterTag=function(e){if(!this.instance.config.filterBy||t.isNEU(e))return!1;if(this.filterBy!==null||typeof this.instance.config.filterBy!="object"||Array.isArray(this.instance.config.filterBy)||(this.filterBy=JSON.parse(JSON.stringify(this.instance.config.filterBy))),this.filterBy!=null)for(var i in this.filterBy){var n=e[i];if(n!=null){var o=this.filterBy[i];if(o!=null){var r=o[n];if(r!=null&&r.checked===!1)return!0}}}return!1},t.filterUI.prototype.show=function(e){var i=this.element.querySelector('[data-filter-field="'+e+'"]');i&&i.click()},t.filterUI.prototype.hide=function(){var e=this.instance.element.querySelector("[data-filter-close]");e&&e.click()},t.filterUI.prototype._removeFilter=function(e){var i=this.instance.get(e);for(var n in this.filterBy){var o=this.filterBy[n];for(var r in i){var s=i[r];o[s]&&(o[s].checked=!0)}}this.update()},t.filterUI.prototype.update=function(){if(this.instance.config.filterBy){var e={};if(this.instance.config.filterBy=="all")for(var i=t.manager.getAllFields(this.instance.config),n=0;n<i.length;n++){var o=i[n];o!="tags"&&o!="id"&&o!="pid"&&o!="ppid"&&o!="stpid"&&(e[o]={})}else if(Array.isArray(this.instance.config.filterBy))for(n=0;n<this.instance.config.filterBy.length;n++)e[this.instance.config.filterBy[n]]={};else if(typeof this.instance.config.filterBy=="object")for(var r in this.instance.config.filterBy)e[r]={};for(var s in e){var a=e[s];for(n=0;n<this.instance.config.nodes.length;n++){var c=this.instance.config.nodes[n][s];c!=null&&(a[c]||(a[c]={checked:!0,text:c}))}}if(this.filterBy!=null){for(var l in e)if(this.filterBy[l])for(var h in e[l])this.filterBy[l][h]&&(e[l][h]=this.filterBy[l][h])}if(t.FILTER_ALPHABETICALLY){var d=Object.keys(e).sort(),p=e;for(e={},n=0;n<d.length;n++)e[f=d[n]]=p[f];for(var s in e)for(a=e[s],e[s]={},d=Object.keys(a).sort(),n=0;n<d.length;n++){var f=d[n];e[s][f]=a[f]}}this.filterBy=e;var u=this;this.element=this.instance.element.querySelector("[data-filter]"),this.element&&this.element.parentNode.removeChild(this.element),this.element=document.createElement("div"),this.element.setAttribute("data-filter",""),this.element.style.position="absolute",this.element.setAttribute("class","boc-filter"),this.instance.config.undoRedoStorageName?(this.element.style.top=0,this.element.style.left="50%",this.element.style.transform="translate(-50%)"):(this.element.style.top=this.instance.config.padding+"px",this.element.style.left=this.instance.config.padding+"px");var x="";for(var l in this.filterBy){var S={name:l,html:`<div data-filter-field="${l}">${l}</div>`};t.events.publish("add-filter",[u,S]),x+=S.html}this.element.innerHTML=`<div>${x}</div>`,this.element.addEventListener("click",function(y){if(y.target.hasAttribute("data-filter-close")||y.target.hasAttribute("data-filter-field")){for(var v=y.target.getAttribute("data-filter-field"),E=u.instance.element.querySelectorAll("[data-filter-menu]"),b=0;b<E.length;b++)E[b].style.display="none";var I=u.instance.element.querySelectorAll(".filter-field-selected");for(b=0;b<I.length;b++)I[b].classList.remove("filter-field-selected");var w=u.instance.element.querySelector("[data-filter-close]");if(w&&w.parentNode.removeChild(w),y.target.hasAttribute("data-filter-close")||!y.target.hasAttribute("data-filter-field"))return;var M=u.instance.element.querySelector(`[data-filter-menu="${v}"]`);if(!M){var C="checked";for(var R in u.filterBy[v])u.filterBy[v][R].checked||(C="");var O={name:v,text:t.filterUI.all,value:v,checked:!0,html:`<div>
                        <input data-all type="checkbox" id="${v}" name="${v}" ${C}>
                        <label for="${v}">${t.filterUI.all}</label>
                    </div>`};t.events.publish("add-item",[u,O]);var z=O.html;for(var F in u.filterBy[v]){var V=u.filterBy[v][F],X=V.text;X==null&&(X=F),O={name:v,text:X,value:F,checked:V.checked,html:`<div>
                            <input  type="checkbox" id="${v}_${F}" name="${F}" ${V.checked?"checked":""}>
                            <label for="${v}_${F}">${X}</label>
                        </div>`},t.events.publish("add-item",[u,O]),z+=O.html}M=document.createElement("div");var W=t.filterUI.textFilterBy;M.innerHTML=`<fieldset>
                                                    <legend>${W} ${v}:</legend>
                                                    ${z}
                                                </fieldset>`,M.setAttribute("data-filter-menu",v),M.classList.add("boc-filter-menu"),y.target.parentNode.parentNode.appendChild(M);var Z=M.querySelectorAll("input");for(b=0;b<Z.length;b++)Z[b].addEventListener("change",function(Y){for(var q=Y.target;q&&!q.hasAttribute("data-filter-menu");)q=q.parentNode;if(q){var j=q.getAttribute("data-filter-menu");if(Y.target.hasAttribute("data-all")){for(var K=Y.target.parentNode.parentNode.querySelectorAll("input"),ie=0;ie<K.length;ie++)if(K[ie]!=Y.target)for(var ne in K[ie].checked=Y.target.checked,u.filterBy[j])u.filterBy[j][ne].checked=Y.target.checked}else if(u.filterBy[j][this.name]!=null&&(u.filterBy[j][this.name].checked=this.checked),this.checked){for(var oe=u.instance.config.nodes,me=0;me<oe.length;me++)if(oe[me][j]==this.name){for(var $=oe[me];$;)if(t.isNEU($.stpid))$=t.isNEU($.pid)?null:u.instance._get($.pid);else if(($=u.instance._get($.stpid))[j]){var J=Y.target.parentNode.parentNode.querySelector('[name="'+$[j]+'"]');J?(J.checked=this.checked,u.filterBy[j][$[j]].checked=this.checked):console.error('Cannot find element with selector: [name="'+$[j]+'"]')}}}var re=!0;for(var ue in u.filterBy[j])u.filterBy[j][ue].checked||(re=!1);q.querySelector("[data-all]").checked=re,u.instance.draw()}})}M.style.display="block",y.target.classList.add("filter-field-selected"),(w=document.createElement("div")).classList.add("close"),w.innerHTML="x",w.setAttribute("data-filter-close",""),y.target.parentNode.appendChild(w),t.events.publish("show-items",[u,{name:v}])}}),this.instance.element.appendChild(this.element),t.events.publish("update",[this,{}])}},t.filterUI.prototype.on=function(e,i){return t.events.on(e,i,this._event_id),this},t.filterUI.textFilterBy="Filter by",t.filterUI.all="[All]",t===void 0&&(t={}),t.remote===void 0&&(t.remote={}),t.LIMIT_NODES=!0,t.remote._fromResDTO=function(e,i,n,o,r){var s=i[e.id];e.x=s.p[0],e.y=s.p[1],e.w=s.p[2],e.h=s.p[3],s.ln!=null&&(e.leftNeighbor=r[s.ln]),s.rn!=null&&(e.rightNeighbor=r[s.rn]);for(var a=0;a<e.stChildren.length;a++)t.remote._fromResDTO(e.stChildren[a],i,n,o,r);for(a=0;a<e.children.length;a++)t.remote._fromResDTO(e.children[a],i,n,o,r)},t.remote._toReqDTO=function(e,i){var n={p:[e.id,e.parent!=null?e.parent.id:null,e.stParent!=null?e.stParent.id:null,e.w,e.h]};e.children.length>0&&(n.c=t.remote._convertToIdArray(e.children)),e.stChildren.length>0&&(n.v=t.remote._convertToIdArray(e.stChildren)),e.layout!=null&&e.layout!=0&&(n.l=e.layout),e.isAssistant&&(n.a=1),e.isSplit&&(n.s=e.isSplit),e.isMirror&&(n.im=e.isMirror),e.padding&&(n.q=e.padding),e.lcn&&(n.k=e.lcn),e.stContainerNodes&&(n.b=t.remote._convertToIdArray(e.stContainerNodes)),e.isPartner&&(n.i=e.isPartner),e.hasPartners&&(n.g=e.hasPartners),e.partnerSeparation&&(n.e=e.partnerSeparation),i.push(n);for(var o=0;o<e.stChildren.length;o++)t.remote._toReqDTO(e.stChildren[o],i);for(o=0;o<e.children.length;o++)t.remote._toReqDTO(e.children[o],i)},t.remote._toReqLayoutConfigsDTO=function(e){var i={};for(var n in e){var o=e[n];i[n]||(i[n]=[]),i[n][0]=o.orientation,i[n][1]=o.levelSeparation,i[n][2]=o.mixedHierarchyNodesSeparation,i[n][3]=o.subtreeSeparation,i[n][4]=o.siblingSeparation,i[n][5]=o.layout,i[n][6]=o.columns,i[n][7]=o.collapse,i[n][8]=o.assistantSeparation,i[n][9]=o.partnerNodeSeparation}return i},t.remote._convertToIdArray=function(e){for(var i=[],n=0;n<e.length;n++)i.push(e[n].id);return i},t.remote._setPositions=function(e,i,n,o){for(var r=[],s=[],a=t.remote._toReqLayoutConfigsDTO(i),c=0;c<e.length;c++)s.push(e[c].id),t.remote._toReqDTO(e[c],r);var l={n:r,c:a,r:s,v:"8.14.00"};if(t.LIMIT_NODES||(l.l=!0),t.remote._fromReqDTO!=null)t.remote._fromReqDTO(l.n,l.r,l.c,function(d){for(var p=0;p<e.length;p++)t.remote._fromResDTO(e[p],d,0,e,o);n()});else{l=JSON.stringify(l);var h=t.localStorage.getItem(l);h&&(h=JSON.parse(h)),h&&!h.limit?t.remote._proceed(e,h,o,n):t.remote._findRegion(function(d){t._ajax(d,"post",l,"json",function(p){p.error?n(2):(t.remote._proceed(e,p,o,n),t.localStorage.setItem(l,JSON.stringify(p)))})})}},t.remote._proceed=function(e,i,n,o){if(typeof i=="string"&&(i=JSON.parse(i)),i.limit&&i.limit==1)o(i.limit);else{for(var r=0;r<e.length;r++)t.remote._fromResDTO(e[r],i,0,e,n);o()}},t.remote._findRegion=function(e){var i=t.localStorage.getItem(t.FUNC_URL_NAME);if(i)e(i);else{for(var n=["defunc2","cusfunc2","bsfunc2","acfunc2","kcfunc2","safunc2","wifunc2"],o=[],r=0;r<n.length;r++)o.push(new XMLHttpRequest);for(r=0;r<n.length;r++)(function(){var s="https://"+n[r]+t.SERVER_PREFIX,a=o[r];a.onreadystatechange=function(){if(this.readyState==4&&this.status==200){t.localStorage.setItem(t.FUNC_URL_NAME,s),e(s);for(var c=0;c<o.length;c++)o[c].abort()}},a.open("GET",s,!0),a.send()})()}}})(it,it.exports)),it.exports}var Ki=Ji();const Ne=Li(Ki);function ti(g,m){return function(){return g.apply(m,arguments)}}const{toString:Zi}=Object.prototype,{getPrototypeOf:Ct}=Object,{iterator:ft,toStringTag:ii}=Symbol,gt=(g=>m=>{const t=Zi.call(m);return g[t]||(g[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Fe=g=>(g=g.toLowerCase(),m=>gt(m)===g),mt=g=>m=>typeof m===g,{isArray:Ze}=Array,Ke=mt("undefined");function nt(g){return g!==null&&!Ke(g)&&g.constructor!==null&&!Ke(g.constructor)&&Pe(g.constructor.isBuffer)&&g.constructor.isBuffer(g)}const ni=Fe("ArrayBuffer");function Qi(g){let m;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?m=ArrayBuffer.isView(g):m=g&&g.buffer&&ni(g.buffer),m}const en=mt("string"),Pe=mt("function"),oi=mt("number"),ot=g=>g!==null&&typeof g=="object",tn=g=>g===!0||g===!1,dt=g=>{if(gt(g)!=="object")return!1;const m=Ct(g);return(m===null||m===Object.prototype||Object.getPrototypeOf(m)===null)&&!(ii in g)&&!(ft in g)},nn=g=>{if(!ot(g)||nt(g))return!1;try{return Object.keys(g).length===0&&Object.getPrototypeOf(g)===Object.prototype}catch{return!1}},on=Fe("Date"),rn=Fe("File"),an=Fe("Blob"),sn=Fe("FileList"),ln=g=>ot(g)&&Pe(g.pipe),cn=g=>{let m;return g&&(typeof FormData=="function"&&g instanceof FormData||Pe(g.append)&&((m=gt(g))==="formdata"||m==="object"&&Pe(g.toString)&&g.toString()==="[object FormData]"))},dn=Fe("URLSearchParams"),[hn,pn,un,fn]=["ReadableStream","Request","Response","Headers"].map(Fe),gn=g=>g.trim?g.trim():g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rt(g,m,{allOwnKeys:t=!1}={}){if(g===null||typeof g>"u")return;let e,i;if(typeof g!="object"&&(g=[g]),Ze(g))for(e=0,i=g.length;e<i;e++)m.call(null,g[e],e,g);else{if(nt(g))return;const n=t?Object.getOwnPropertyNames(g):Object.keys(g),o=n.length;let r;for(e=0;e<o;e++)r=n[e],m.call(null,g[r],r,g)}}function ri(g,m){if(nt(g))return null;m=m.toLowerCase();const t=Object.keys(g);let e=t.length,i;for(;e-- >0;)if(i=t[e],m===i.toLowerCase())return i;return null}const Ge=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ai=g=>!Ke(g)&&g!==Ge;function It(){const{caseless:g,skipUndefined:m}=ai(this)&&this||{},t={},e=(i,n)=>{const o=g&&ri(t,n)||n;dt(t[o])&&dt(i)?t[o]=It(t[o],i):dt(i)?t[o]=It({},i):Ze(i)?t[o]=i.slice():(!m||!Ke(i))&&(t[o]=i)};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&rt(arguments[i],e);return t}const mn=(g,m,t,{allOwnKeys:e}={})=>(rt(m,(i,n)=>{t&&Pe(i)?g[n]=ti(i,t):g[n]=i},{allOwnKeys:e}),g),bn=g=>(g.charCodeAt(0)===65279&&(g=g.slice(1)),g),xn=(g,m,t,e)=>{g.prototype=Object.create(m.prototype,e),g.prototype.constructor=g,Object.defineProperty(g,"super",{value:m.prototype}),t&&Object.assign(g.prototype,t)},vn=(g,m,t,e)=>{let i,n,o;const r={};if(m=m||{},g==null)return m;do{for(i=Object.getOwnPropertyNames(g),n=i.length;n-- >0;)o=i[n],(!e||e(o,g,m))&&!r[o]&&(m[o]=g[o],r[o]=!0);g=t!==!1&&Ct(g)}while(g&&(!t||t(g,m))&&g!==Object.prototype);return m},yn=(g,m,t)=>{g=String(g),(t===void 0||t>g.length)&&(t=g.length),t-=m.length;const e=g.indexOf(m,t);return e!==-1&&e===t},wn=g=>{if(!g)return null;if(Ze(g))return g;let m=g.length;if(!oi(m))return null;const t=new Array(m);for(;m-- >0;)t[m]=g[m];return t},_n=(g=>m=>g&&m instanceof g)(typeof Uint8Array<"u"&&Ct(Uint8Array)),kn=(g,m)=>{const e=(g&&g[ft]).call(g);let i;for(;(i=e.next())&&!i.done;){const n=i.value;m.call(g,n[0],n[1])}},Sn=(g,m)=>{let t;const e=[];for(;(t=g.exec(m))!==null;)e.push(t);return e},In=Fe("HTMLFormElement"),En=g=>g.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,i){return e.toUpperCase()+i}),Ft=(({hasOwnProperty:g})=>(m,t)=>g.call(m,t))(Object.prototype),An=Fe("RegExp"),si=(g,m)=>{const t=Object.getOwnPropertyDescriptors(g),e={};rt(t,(i,n)=>{let o;(o=m(i,n,g))!==!1&&(e[n]=o||i)}),Object.defineProperties(g,e)},Ln=g=>{si(g,(m,t)=>{if(Pe(g)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const e=g[t];if(Pe(e)){if(m.enumerable=!1,"writable"in m){m.writable=!1;return}m.set||(m.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Cn=(g,m)=>{const t={},e=i=>{i.forEach(n=>{t[n]=!0})};return Ze(g)?e(g):e(String(g).split(m)),t},Nn=()=>{},Mn=(g,m)=>g!=null&&Number.isFinite(g=+g)?g:m;function Tn(g){return!!(g&&Pe(g.append)&&g[ii]==="FormData"&&g[ft])}const Pn=g=>{const m=new Array(10),t=(e,i)=>{if(ot(e)){if(m.indexOf(e)>=0)return;if(nt(e))return e;if(!("toJSON"in e)){m[i]=e;const n=Ze(e)?[]:{};return rt(e,(o,r)=>{const s=t(o,i+1);!Ke(s)&&(n[r]=s)}),m[i]=void 0,n}}return e};return t(g,0)},Un=Fe("AsyncFunction"),Rn=g=>g&&(ot(g)||Pe(g))&&Pe(g.then)&&Pe(g.catch),li=((g,m)=>g?setImmediate:m?((t,e)=>(Ge.addEventListener("message",({source:i,data:n})=>{i===Ge&&n===t&&e.length&&e.shift()()},!1),i=>{e.push(i),Ge.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Pe(Ge.postMessage)),Bn=typeof queueMicrotask<"u"?queueMicrotask.bind(Ge):typeof process<"u"&&process.nextTick||li,On=g=>g!=null&&Pe(g[ft]),P={isArray:Ze,isArrayBuffer:ni,isBuffer:nt,isFormData:cn,isArrayBufferView:Qi,isString:en,isNumber:oi,isBoolean:tn,isObject:ot,isPlainObject:dt,isEmptyObject:nn,isReadableStream:hn,isRequest:pn,isResponse:un,isHeaders:fn,isUndefined:Ke,isDate:on,isFile:rn,isBlob:an,isRegExp:An,isFunction:Pe,isStream:ln,isURLSearchParams:dn,isTypedArray:_n,isFileList:sn,forEach:rt,merge:It,extend:mn,trim:gn,stripBOM:bn,inherits:xn,toFlatObject:vn,kindOf:gt,kindOfTest:Fe,endsWith:yn,toArray:wn,forEachEntry:kn,matchAll:Sn,isHTMLForm:In,hasOwnProperty:Ft,hasOwnProp:Ft,reduceDescriptors:si,freezeMethods:Ln,toObjectSet:Cn,toCamelCase:En,noop:Nn,toFiniteNumber:Mn,findKey:ri,global:Ge,isContextDefined:ai,isSpecCompliantForm:Tn,toJSONObject:Pn,isAsyncFn:Un,isThenable:Rn,setImmediate:li,asap:Bn,isIterable:On};function ae(g,m,t,e,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=g,this.name="AxiosError",m&&(this.code=m),t&&(this.config=t),e&&(this.request=e),i&&(this.response=i,this.status=i.status?i.status:null)}P.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const ci=ae.prototype,di={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(g=>{di[g]={value:g}});Object.defineProperties(ae,di);Object.defineProperty(ci,"isAxiosError",{value:!0});ae.from=(g,m,t,e,i,n)=>{const o=Object.create(ci);P.toFlatObject(g,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError");const r=g&&g.message?g.message:"Error",s=m==null&&g?g.code:m;return ae.call(o,r,s,t,e,i),g&&o.cause==null&&Object.defineProperty(o,"cause",{value:g,configurable:!0}),o.name=g&&g.name||"Error",n&&Object.assign(o,n),o};const $n=null;function Et(g){return P.isPlainObject(g)||P.isArray(g)}function hi(g){return P.endsWith(g,"[]")?g.slice(0,-2):g}function Dt(g,m,t){return g?g.concat(m).map(function(i,n){return i=hi(i),!t&&n?"["+i+"]":i}).join(t?".":""):m}function Fn(g){return P.isArray(g)&&!g.some(Et)}const Dn=P.toFlatObject(P,{},null,function(m){return/^is[A-Z]/.test(m)});function bt(g,m,t){if(!P.isObject(g))throw new TypeError("target must be an object");m=m||new FormData,t=P.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,u){return!P.isUndefined(u[f])});const e=t.metaTokens,i=t.visitor||c,n=t.dots,o=t.indexes,s=(t.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(m);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function a(p){if(p===null)return"";if(P.isDate(p))return p.toISOString();if(P.isBoolean(p))return p.toString();if(!s&&P.isBlob(p))throw new ae("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(p)||P.isTypedArray(p)?s&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,f,u){let x=p;if(p&&!u&&typeof p=="object"){if(P.endsWith(f,"{}"))f=e?f:f.slice(0,-2),p=JSON.stringify(p);else if(P.isArray(p)&&Fn(p)||(P.isFileList(p)||P.endsWith(f,"[]"))&&(x=P.toArray(p)))return f=hi(f),x.forEach(function(y,v){!(P.isUndefined(y)||y===null)&&m.append(o===!0?Dt([f],v,n):o===null?f:f+"[]",a(y))}),!1}return Et(p)?!0:(m.append(Dt(u,f,n),a(p)),!1)}const l=[],h=Object.assign(Dn,{defaultVisitor:c,convertValue:a,isVisitable:Et});function d(p,f){if(!P.isUndefined(p)){if(l.indexOf(p)!==-1)throw Error("Circular reference detected in "+f.join("."));l.push(p),P.forEach(p,function(x,S){(!(P.isUndefined(x)||x===null)&&i.call(m,x,P.isString(S)?S.trim():S,f,h))===!0&&d(x,f?f.concat(S):[S])}),l.pop()}}if(!P.isObject(g))throw new TypeError("data must be an object");return d(g),m}function Ht(g){const m={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(g).replace(/[!'()~]|%20|%00/g,function(e){return m[e]})}function Nt(g,m){this._pairs=[],g&&bt(g,this,m)}const pi=Nt.prototype;pi.append=function(m,t){this._pairs.push([m,t])};pi.toString=function(m){const t=m?function(e){return m.call(this,e,Ht)}:Ht;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Hn(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ui(g,m,t){if(!m)return g;const e=t&&t.encode||Hn;P.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let n;if(i?n=i(m,t):n=P.isURLSearchParams(m)?m.toString():new Nt(m,t).toString(e),n){const o=g.indexOf("#");o!==-1&&(g=g.slice(0,o)),g+=(g.indexOf("?")===-1?"?":"&")+n}return g}class zt{constructor(){this.handlers=[]}use(m,t,e){return this.handlers.push({fulfilled:m,rejected:t,synchronous:e?e.synchronous:!1,runWhen:e?e.runWhen:null}),this.handlers.length-1}eject(m){this.handlers[m]&&(this.handlers[m]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(m){P.forEach(this.handlers,function(e){e!==null&&m(e)})}}const fi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zn=typeof URLSearchParams<"u"?URLSearchParams:Nt,jn=typeof FormData<"u"?FormData:null,qn=typeof Blob<"u"?Blob:null,Vn={isBrowser:!0,classes:{URLSearchParams:zn,FormData:jn,Blob:qn},protocols:["http","https","file","blob","url","data"]},Mt=typeof window<"u"&&typeof document<"u",At=typeof navigator=="object"&&navigator||void 0,Yn=Mt&&(!At||["ReactNative","NativeScript","NS"].indexOf(At.product)<0),Xn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gn=Mt&&window.location.href||"http://localhost",Wn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mt,hasStandardBrowserEnv:Yn,hasStandardBrowserWebWorkerEnv:Xn,navigator:At,origin:Gn},Symbol.toStringTag,{value:"Module"})),Ae={...Wn,...Vn};function Jn(g,m){return bt(g,new Ae.classes.URLSearchParams,{visitor:function(t,e,i,n){return Ae.isNode&&P.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...m})}function Kn(g){return P.matchAll(/\w+|\[(\w*)]/g,g).map(m=>m[0]==="[]"?"":m[1]||m[0])}function Zn(g){const m={},t=Object.keys(g);let e;const i=t.length;let n;for(e=0;e<i;e++)n=t[e],m[n]=g[n];return m}function gi(g){function m(t,e,i,n){let o=t[n++];if(o==="__proto__")return!0;const r=Number.isFinite(+o),s=n>=t.length;return o=!o&&P.isArray(i)?i.length:o,s?(P.hasOwnProp(i,o)?i[o]=[i[o],e]:i[o]=e,!r):((!i[o]||!P.isObject(i[o]))&&(i[o]=[]),m(t,e,i[o],n)&&P.isArray(i[o])&&(i[o]=Zn(i[o])),!r)}if(P.isFormData(g)&&P.isFunction(g.entries)){const t={};return P.forEachEntry(g,(e,i)=>{m(Kn(e),i,t,0)}),t}return null}function Qn(g,m,t){if(P.isString(g))try{return(m||JSON.parse)(g),P.trim(g)}catch(e){if(e.name!=="SyntaxError")throw e}return(t||JSON.stringify)(g)}const at={transitional:fi,adapter:["xhr","http","fetch"],transformRequest:[function(m,t){const e=t.getContentType()||"",i=e.indexOf("application/json")>-1,n=P.isObject(m);if(n&&P.isHTMLForm(m)&&(m=new FormData(m)),P.isFormData(m))return i?JSON.stringify(gi(m)):m;if(P.isArrayBuffer(m)||P.isBuffer(m)||P.isStream(m)||P.isFile(m)||P.isBlob(m)||P.isReadableStream(m))return m;if(P.isArrayBufferView(m))return m.buffer;if(P.isURLSearchParams(m))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),m.toString();let r;if(n){if(e.indexOf("application/x-www-form-urlencoded")>-1)return Jn(m,this.formSerializer).toString();if((r=P.isFileList(m))||e.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return bt(r?{"files[]":m}:m,s&&new s,this.formSerializer)}}return n||i?(t.setContentType("application/json",!1),Qn(m)):m}],transformResponse:[function(m){const t=this.transitional||at.transitional,e=t&&t.forcedJSONParsing,i=this.responseType==="json";if(P.isResponse(m)||P.isReadableStream(m))return m;if(m&&P.isString(m)&&(e&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(m,this.parseReviver)}catch(r){if(o)throw r.name==="SyntaxError"?ae.from(r,ae.ERR_BAD_RESPONSE,this,null,this.response):r}}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(m){return m>=200&&m<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],g=>{at.headers[g]={}});const eo=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),to=g=>{const m={};let t,e,i;return g&&g.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),e=o.substring(i+1).trim(),!(!t||m[t]&&eo[t])&&(t==="set-cookie"?m[t]?m[t].push(e):m[t]=[e]:m[t]=m[t]?m[t]+", "+e:e)}),m},jt=Symbol("internals");function tt(g){return g&&String(g).trim().toLowerCase()}function ht(g){return g===!1||g==null?g:P.isArray(g)?g.map(ht):String(g)}function io(g){const m=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let e;for(;e=t.exec(g);)m[e[1]]=e[2];return m}const no=g=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(g.trim());function _t(g,m,t,e,i){if(P.isFunction(e))return e.call(this,m,t);if(i&&(m=t),!!P.isString(m)){if(P.isString(e))return m.indexOf(e)!==-1;if(P.isRegExp(e))return e.test(m)}}function oo(g){return g.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(m,t,e)=>t.toUpperCase()+e)}function ro(g,m){const t=P.toCamelCase(" "+m);["get","set","has"].forEach(e=>{Object.defineProperty(g,e+t,{value:function(i,n,o){return this[e].call(this,m,i,n,o)},configurable:!0})})}let Ue=class{constructor(m){m&&this.set(m)}set(m,t,e){const i=this;function n(r,s,a){const c=tt(s);if(!c)throw new Error("header name must be a non-empty string");const l=P.findKey(i,c);(!l||i[l]===void 0||a===!0||a===void 0&&i[l]!==!1)&&(i[l||s]=ht(r))}const o=(r,s)=>P.forEach(r,(a,c)=>n(a,c,s));if(P.isPlainObject(m)||m instanceof this.constructor)o(m,t);else if(P.isString(m)&&(m=m.trim())&&!no(m))o(to(m),t);else if(P.isObject(m)&&P.isIterable(m)){let r={},s,a;for(const c of m){if(!P.isArray(c))throw TypeError("Object iterator must return a key-value pair");r[a=c[0]]=(s=r[a])?P.isArray(s)?[...s,c[1]]:[s,c[1]]:c[1]}o(r,t)}else m!=null&&n(t,m,e);return this}get(m,t){if(m=tt(m),m){const e=P.findKey(this,m);if(e){const i=this[e];if(!t)return i;if(t===!0)return io(i);if(P.isFunction(t))return t.call(this,i,e);if(P.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(m,t){if(m=tt(m),m){const e=P.findKey(this,m);return!!(e&&this[e]!==void 0&&(!t||_t(this,this[e],e,t)))}return!1}delete(m,t){const e=this;let i=!1;function n(o){if(o=tt(o),o){const r=P.findKey(e,o);r&&(!t||_t(e,e[r],r,t))&&(delete e[r],i=!0)}}return P.isArray(m)?m.forEach(n):n(m),i}clear(m){const t=Object.keys(this);let e=t.length,i=!1;for(;e--;){const n=t[e];(!m||_t(this,this[n],n,m,!0))&&(delete this[n],i=!0)}return i}normalize(m){const t=this,e={};return P.forEach(this,(i,n)=>{const o=P.findKey(e,n);if(o){t[o]=ht(i),delete t[n];return}const r=m?oo(n):String(n).trim();r!==n&&delete t[n],t[r]=ht(i),e[r]=!0}),this}concat(...m){return this.constructor.concat(this,...m)}toJSON(m){const t=Object.create(null);return P.forEach(this,(e,i)=>{e!=null&&e!==!1&&(t[i]=m&&P.isArray(e)?e.join(", "):e)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([m,t])=>m+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(m){return m instanceof this?m:new this(m)}static concat(m,...t){const e=new this(m);return t.forEach(i=>e.set(i)),e}static accessor(m){const e=(this[jt]=this[jt]={accessors:{}}).accessors,i=this.prototype;function n(o){const r=tt(o);e[r]||(ro(i,o),e[r]=!0)}return P.isArray(m)?m.forEach(n):n(m),this}};Ue.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Ue.prototype,({value:g},m)=>{let t=m[0].toUpperCase()+m.slice(1);return{get:()=>g,set(e){this[t]=e}}});P.freezeMethods(Ue);function kt(g,m){const t=this||at,e=m||t,i=Ue.from(e.headers);let n=e.data;return P.forEach(g,function(r){n=r.call(t,n,i.normalize(),m?m.status:void 0)}),i.normalize(),n}function mi(g){return!!(g&&g.__CANCEL__)}function Qe(g,m,t){ae.call(this,g??"canceled",ae.ERR_CANCELED,m,t),this.name="CanceledError"}P.inherits(Qe,ae,{__CANCEL__:!0});function bi(g,m,t){const e=t.config.validateStatus;!t.status||!e||e(t.status)?g(t):m(new ae("Request failed with status code "+t.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function ao(g){const m=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g);return m&&m[1]||""}function so(g,m){g=g||10;const t=new Array(g),e=new Array(g);let i=0,n=0,o;return m=m!==void 0?m:1e3,function(s){const a=Date.now(),c=e[n];o||(o=a),t[i]=s,e[i]=a;let l=n,h=0;for(;l!==i;)h+=t[l++],l=l%g;if(i=(i+1)%g,i===n&&(n=(n+1)%g),a-o<m)return;const d=c&&a-c;return d?Math.round(h*1e3/d):void 0}}function lo(g,m){let t=0,e=1e3/m,i,n;const o=(a,c=Date.now())=>{t=c,i=null,n&&(clearTimeout(n),n=null),g(...a)};return[(...a)=>{const c=Date.now(),l=c-t;l>=e?o(a,c):(i=a,n||(n=setTimeout(()=>{n=null,o(i)},e-l)))},()=>i&&o(i)]}const ut=(g,m,t=3)=>{let e=0;const i=so(50,250);return lo(n=>{const o=n.loaded,r=n.lengthComputable?n.total:void 0,s=o-e,a=i(s),c=o<=r;e=o;const l={loaded:o,total:r,progress:r?o/r:void 0,bytes:s,rate:a||void 0,estimated:a&&r&&c?(r-o)/a:void 0,event:n,lengthComputable:r!=null,[m?"download":"upload"]:!0};g(l)},t)},qt=(g,m)=>{const t=g!=null;return[e=>m[0]({lengthComputable:t,total:g,loaded:e}),m[1]]},Vt=g=>(...m)=>P.asap(()=>g(...m)),co=Ae.hasStandardBrowserEnv?((g,m)=>t=>(t=new URL(t,Ae.origin),g.protocol===t.protocol&&g.host===t.host&&(m||g.port===t.port)))(new URL(Ae.origin),Ae.navigator&&/(msie|trident)/i.test(Ae.navigator.userAgent)):()=>!0,ho=Ae.hasStandardBrowserEnv?{write(g,m,t,e,i,n,o){if(typeof document>"u")return;const r=[`${g}=${encodeURIComponent(m)}`];P.isNumber(t)&&r.push(`expires=${new Date(t).toUTCString()}`),P.isString(e)&&r.push(`path=${e}`),P.isString(i)&&r.push(`domain=${i}`),n===!0&&r.push("secure"),P.isString(o)&&r.push(`SameSite=${o}`),document.cookie=r.join("; ")},read(g){if(typeof document>"u")return null;const m=document.cookie.match(new RegExp("(?:^|; )"+g+"=([^;]*)"));return m?decodeURIComponent(m[1]):null},remove(g){this.write(g,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function po(g){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(g)}function uo(g,m){return m?g.replace(/\/?\/$/,"")+"/"+m.replace(/^\/+/,""):g}function xi(g,m,t){let e=!po(m);return g&&(e||t==!1)?uo(g,m):m}const Yt=g=>g instanceof Ue?{...g}:g;function Je(g,m){m=m||{};const t={};function e(a,c,l,h){return P.isPlainObject(a)&&P.isPlainObject(c)?P.merge.call({caseless:h},a,c):P.isPlainObject(c)?P.merge({},c):P.isArray(c)?c.slice():c}function i(a,c,l,h){if(P.isUndefined(c)){if(!P.isUndefined(a))return e(void 0,a,l,h)}else return e(a,c,l,h)}function n(a,c){if(!P.isUndefined(c))return e(void 0,c)}function o(a,c){if(P.isUndefined(c)){if(!P.isUndefined(a))return e(void 0,a)}else return e(void 0,c)}function r(a,c,l){if(l in m)return e(a,c);if(l in g)return e(void 0,a)}const s={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:r,headers:(a,c,l)=>i(Yt(a),Yt(c),l,!0)};return P.forEach(Object.keys({...g,...m}),function(c){const l=s[c]||i,h=l(g[c],m[c],c);P.isUndefined(h)&&l!==r||(t[c]=h)}),t}const vi=g=>{const m=Je({},g);let{data:t,withXSRFToken:e,xsrfHeaderName:i,xsrfCookieName:n,headers:o,auth:r}=m;if(m.headers=o=Ue.from(o),m.url=ui(xi(m.baseURL,m.url,m.allowAbsoluteUrls),g.params,g.paramsSerializer),r&&o.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):""))),P.isFormData(t)){if(Ae.hasStandardBrowserEnv||Ae.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(P.isFunction(t.getHeaders)){const s=t.getHeaders(),a=["content-type","content-length"];Object.entries(s).forEach(([c,l])=>{a.includes(c.toLowerCase())&&o.set(c,l)})}}if(Ae.hasStandardBrowserEnv&&(e&&P.isFunction(e)&&(e=e(m)),e||e!==!1&&co(m.url))){const s=i&&n&&ho.read(n);s&&o.set(i,s)}return m},fo=typeof XMLHttpRequest<"u",go=fo&&function(g){return new Promise(function(t,e){const i=vi(g);let n=i.data;const o=Ue.from(i.headers).normalize();let{responseType:r,onUploadProgress:s,onDownloadProgress:a}=i,c,l,h,d,p;function f(){d&&d(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let u=new XMLHttpRequest;u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout;function x(){if(!u)return;const y=Ue.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),E={data:!r||r==="text"||r==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:y,config:g,request:u};bi(function(I){t(I),f()},function(I){e(I),f()},E),u=null}"onloadend"in u?u.onloadend=x:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(x)},u.onabort=function(){u&&(e(new ae("Request aborted",ae.ECONNABORTED,g,u)),u=null)},u.onerror=function(v){const E=v&&v.message?v.message:"Network Error",b=new ae(E,ae.ERR_NETWORK,g,u);b.event=v||null,e(b),u=null},u.ontimeout=function(){let v=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||fi;i.timeoutErrorMessage&&(v=i.timeoutErrorMessage),e(new ae(v,E.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,g,u)),u=null},n===void 0&&o.setContentType(null),"setRequestHeader"in u&&P.forEach(o.toJSON(),function(v,E){u.setRequestHeader(E,v)}),P.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),r&&r!=="json"&&(u.responseType=i.responseType),a&&([h,p]=ut(a,!0),u.addEventListener("progress",h)),s&&u.upload&&([l,d]=ut(s),u.upload.addEventListener("progress",l),u.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(c=y=>{u&&(e(!y||y.type?new Qe(null,g,u):y),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const S=ao(i.url);if(S&&Ae.protocols.indexOf(S)===-1){e(new ae("Unsupported protocol "+S+":",ae.ERR_BAD_REQUEST,g));return}u.send(n||null)})},mo=(g,m)=>{const{length:t}=g=g?g.filter(Boolean):[];if(m||t){let e=new AbortController,i;const n=function(a){if(!i){i=!0,r();const c=a instanceof Error?a:this.reason;e.abort(c instanceof ae?c:new Qe(c instanceof Error?c.message:c))}};let o=m&&setTimeout(()=>{o=null,n(new ae(`timeout ${m} of ms exceeded`,ae.ETIMEDOUT))},m);const r=()=>{g&&(o&&clearTimeout(o),o=null,g.forEach(a=>{a.unsubscribe?a.unsubscribe(n):a.removeEventListener("abort",n)}),g=null)};g.forEach(a=>a.addEventListener("abort",n));const{signal:s}=e;return s.unsubscribe=()=>P.asap(r),s}},bo=function*(g,m){let t=g.byteLength;if(t<m){yield g;return}let e=0,i;for(;e<t;)i=e+m,yield g.slice(e,i),e=i},xo=async function*(g,m){for await(const t of vo(g))yield*bo(t,m)},vo=async function*(g){if(g[Symbol.asyncIterator]){yield*g;return}const m=g.getReader();try{for(;;){const{done:t,value:e}=await m.read();if(t)break;yield e}}finally{await m.cancel()}},Xt=(g,m,t,e)=>{const i=xo(g,m);let n=0,o,r=s=>{o||(o=!0,e&&e(s))};return new ReadableStream({async pull(s){try{const{done:a,value:c}=await i.next();if(a){r(),s.close();return}let l=c.byteLength;if(t){let h=n+=l;t(h)}s.enqueue(new Uint8Array(c))}catch(a){throw r(a),a}},cancel(s){return r(s),i.return()}},{highWaterMark:2})},Gt=64*1024,{isFunction:ct}=P,yo=(({Request:g,Response:m})=>({Request:g,Response:m}))(P.global),{ReadableStream:Wt,TextEncoder:Jt}=P.global,Kt=(g,...m)=>{try{return!!g(...m)}catch{return!1}},wo=g=>{g=P.merge.call({skipUndefined:!0},yo,g);const{fetch:m,Request:t,Response:e}=g,i=m?ct(m):typeof fetch=="function",n=ct(t),o=ct(e);if(!i)return!1;const r=i&&ct(Wt),s=i&&(typeof Jt=="function"?(p=>f=>p.encode(f))(new Jt):async p=>new Uint8Array(await new t(p).arrayBuffer())),a=n&&r&&Kt(()=>{let p=!1;const f=new t(Ae.origin,{body:new Wt,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!f}),c=o&&r&&Kt(()=>P.isReadableStream(new e("").body)),l={stream:c&&(p=>p.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!l[p]&&(l[p]=(f,u)=>{let x=f&&f[p];if(x)return x.call(f);throw new ae(`Response type '${p}' is not supported`,ae.ERR_NOT_SUPPORT,u)})});const h=async p=>{if(p==null)return 0;if(P.isBlob(p))return p.size;if(P.isSpecCompliantForm(p))return(await new t(Ae.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(P.isArrayBufferView(p)||P.isArrayBuffer(p))return p.byteLength;if(P.isURLSearchParams(p)&&(p=p+""),P.isString(p))return(await s(p)).byteLength},d=async(p,f)=>{const u=P.toFiniteNumber(p.getContentLength());return u??h(f)};return async p=>{let{url:f,method:u,data:x,signal:S,cancelToken:y,timeout:v,onDownloadProgress:E,onUploadProgress:b,responseType:I,headers:w,withCredentials:M="same-origin",fetchOptions:C}=vi(p),R=m||fetch;I=I?(I+"").toLowerCase():"text";let O=mo([S,y&&y.toAbortSignal()],v),z=null;const F=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let V;try{if(b&&a&&u!=="get"&&u!=="head"&&(V=await d(w,x))!==0){let j=new t(f,{method:"POST",body:x,duplex:"half"}),K;if(P.isFormData(x)&&(K=j.headers.get("content-type"))&&w.setContentType(K),j.body){const[ie,ne]=qt(V,ut(Vt(b)));x=Xt(j.body,Gt,ie,ne)}}P.isString(M)||(M=M?"include":"omit");const X=n&&"credentials"in t.prototype,W={...C,signal:O,method:u.toUpperCase(),headers:w.normalize().toJSON(),body:x,duplex:"half",credentials:X?M:void 0};z=n&&new t(f,W);let Z=await(n?R(z,C):R(f,W));const Y=c&&(I==="stream"||I==="response");if(c&&(E||Y&&F)){const j={};["status","statusText","headers"].forEach(oe=>{j[oe]=Z[oe]});const K=P.toFiniteNumber(Z.headers.get("content-length")),[ie,ne]=E&&qt(K,ut(Vt(E),!0))||[];Z=new e(Xt(Z.body,Gt,ie,()=>{ne&&ne(),F&&F()}),j)}I=I||"text";let q=await l[P.findKey(l,I)||"text"](Z,p);return!Y&&F&&F(),await new Promise((j,K)=>{bi(j,K,{data:q,headers:Ue.from(Z.headers),status:Z.status,statusText:Z.statusText,config:p,request:z})})}catch(X){throw F&&F(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,p,z),{cause:X.cause||X}):ae.from(X,X&&X.code,p,z)}}},_o=new Map,yi=g=>{let m=g&&g.env||{};const{fetch:t,Request:e,Response:i}=m,n=[e,i,t];let o=n.length,r=o,s,a,c=_o;for(;r--;)s=n[r],a=c.get(s),a===void 0&&c.set(s,a=r?new Map:wo(m)),c=a;return a};yi();const Tt={http:$n,xhr:go,fetch:{get:yi}};P.forEach(Tt,(g,m)=>{if(g){try{Object.defineProperty(g,"name",{value:m})}catch{}Object.defineProperty(g,"adapterName",{value:m})}});const Zt=g=>`- ${g}`,ko=g=>P.isFunction(g)||g===null||g===!1;function So(g,m){g=P.isArray(g)?g:[g];const{length:t}=g;let e,i;const n={};for(let o=0;o<t;o++){e=g[o];let r;if(i=e,!ko(e)&&(i=Tt[(r=String(e)).toLowerCase()],i===void 0))throw new ae(`Unknown adapter '${r}'`);if(i&&(P.isFunction(i)||(i=i.get(m))))break;n[r||"#"+o]=i}if(!i){const o=Object.entries(n).map(([s,a])=>`adapter ${s} `+(a===!1?"is not supported by the environment":"is not available in the build"));let r=t?o.length>1?`since :
`+o.map(Zt).join(`
`):" "+Zt(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i}const wi={getAdapter:So,adapters:Tt};function St(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new Qe(null,g)}function Qt(g){return St(g),g.headers=Ue.from(g.headers),g.data=kt.call(g,g.transformRequest),["post","put","patch"].indexOf(g.method)!==-1&&g.headers.setContentType("application/x-www-form-urlencoded",!1),wi.getAdapter(g.adapter||at.adapter,g)(g).then(function(e){return St(g),e.data=kt.call(g,g.transformResponse,e),e.headers=Ue.from(e.headers),e},function(e){return mi(e)||(St(g),e&&e.response&&(e.response.data=kt.call(g,g.transformResponse,e.response),e.response.headers=Ue.from(e.response.headers))),Promise.reject(e)})}const _i="1.13.2",xt={};["object","boolean","number","function","string","symbol"].forEach((g,m)=>{xt[g]=function(e){return typeof e===g||"a"+(m<1?"n ":" ")+g}});const ei={};xt.transitional=function(m,t,e){function i(n,o){return"[Axios v"+_i+"] Transitional option '"+n+"'"+o+(e?". "+e:"")}return(n,o,r)=>{if(m===!1)throw new ae(i(o," has been removed"+(t?" in "+t:"")),ae.ERR_DEPRECATED);return t&&!ei[o]&&(ei[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),m?m(n,o,r):!0}};xt.spelling=function(m){return(t,e)=>(console.warn(`${e} is likely a misspelling of ${m}`),!0)};function Io(g,m,t){if(typeof g!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const e=Object.keys(g);let i=e.length;for(;i-- >0;){const n=e[i],o=m[n];if(o){const r=g[n],s=r===void 0||o(r,n,g);if(s!==!0)throw new ae("option "+n+" must be "+s,ae.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ae("Unknown option "+n,ae.ERR_BAD_OPTION)}}const pt={assertOptions:Io,validators:xt},je=pt.validators;let We=class{constructor(m){this.defaults=m||{},this.interceptors={request:new zt,response:new zt}}async request(m,t){try{return await this._request(m,t)}catch(e){if(e instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const n=i.stack?i.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+=`
`+n):e.stack=n}catch{}}throw e}}_request(m,t){typeof m=="string"?(t=t||{},t.url=m):t=m||{},t=Je(this.defaults,t);const{transitional:e,paramsSerializer:i,headers:n}=t;e!==void 0&&pt.assertOptions(e,{silentJSONParsing:je.transitional(je.boolean),forcedJSONParsing:je.transitional(je.boolean),clarifyTimeoutError:je.transitional(je.boolean)},!1),i!=null&&(P.isFunction(i)?t.paramsSerializer={serialize:i}:pt.assertOptions(i,{encode:je.function,serialize:je.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),pt.assertOptions(t,{baseUrl:je.spelling("baseURL"),withXsrfToken:je.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=n&&P.merge(n.common,n[t.method]);n&&P.forEach(["delete","get","head","post","put","patch","common"],p=>{delete n[p]}),t.headers=Ue.concat(o,n);const r=[];let s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(s=s&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});const a=[];this.interceptors.response.forEach(function(f){a.push(f.fulfilled,f.rejected)});let c,l=0,h;if(!s){const p=[Qt.bind(this),void 0];for(p.unshift(...r),p.push(...a),h=p.length,c=Promise.resolve(t);l<h;)c=c.then(p[l++],p[l++]);return c}h=r.length;let d=t;for(;l<h;){const p=r[l++],f=r[l++];try{d=p(d)}catch(u){f.call(this,u);break}}try{c=Qt.call(this,d)}catch(p){return Promise.reject(p)}for(l=0,h=a.length;l<h;)c=c.then(a[l++],a[l++]);return c}getUri(m){m=Je(this.defaults,m);const t=xi(m.baseURL,m.url,m.allowAbsoluteUrls);return ui(t,m.params,m.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(m){We.prototype[m]=function(t,e){return this.request(Je(e||{},{method:m,url:t,data:(e||{}).data}))}});P.forEach(["post","put","patch"],function(m){function t(e){return function(n,o,r){return this.request(Je(r||{},{method:m,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}We.prototype[m]=t(),We.prototype[m+"Form"]=t(!0)});let Eo=class ki{constructor(m){if(typeof m!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(n){t=n});const e=this;this.promise.then(i=>{if(!e._listeners)return;let n=e._listeners.length;for(;n-- >0;)e._listeners[n](i);e._listeners=null}),this.promise.then=i=>{let n;const o=new Promise(r=>{e.subscribe(r),n=r}).then(i);return o.cancel=function(){e.unsubscribe(n)},o},m(function(n,o,r){e.reason||(e.reason=new Qe(n,o,r),t(e.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(m){if(this.reason){m(this.reason);return}this._listeners?this._listeners.push(m):this._listeners=[m]}unsubscribe(m){if(!this._listeners)return;const t=this._listeners.indexOf(m);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const m=new AbortController,t=e=>{m.abort(e)};return this.subscribe(t),m.signal.unsubscribe=()=>this.unsubscribe(t),m.signal}static source(){let m;return{token:new ki(function(i){m=i}),cancel:m}}};function Ao(g){return function(t){return g.apply(null,t)}}function Lo(g){return P.isObject(g)&&g.isAxiosError===!0}const Lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Lt).forEach(([g,m])=>{Lt[m]=g});function Si(g){const m=new We(g),t=ti(We.prototype.request,m);return P.extend(t,We.prototype,m,{allOwnKeys:!0}),P.extend(t,m,null,{allOwnKeys:!0}),t.create=function(i){return Si(Je(g,i))},t}const xe=Si(at);xe.Axios=We;xe.CanceledError=Qe;xe.CancelToken=Eo;xe.isCancel=mi;xe.VERSION=_i;xe.toFormData=bt;xe.AxiosError=ae;xe.Cancel=xe.CanceledError;xe.all=function(m){return Promise.all(m)};xe.spread=Ao;xe.isAxiosError=Lo;xe.mergeConfig=Je;xe.AxiosHeaders=Ue;xe.formToJSON=g=>gi(P.isHTMLForm(g)?new FormData(g):g);xe.getAdapter=wi.getAdapter;xe.HttpStatusCode=Lt;xe.default=xe;const{Axios:Do,AxiosError:Ho,CanceledError:zo,isCancel:jo,CancelToken:qo,VERSION:Vo,all:Yo,Cancel:Xo,isAxiosError:Go,spread:Wo,toFormData:Jo,AxiosHeaders:Ko,HttpStatusCode:Zo,formToJSON:Qo,getAdapter:er,mergeConfig:tr}=xe,Pt=xe.create({baseURL:"/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});Pt.interceptors.request.use(g=>{const m=Ci("accessToken").value;return m&&(g.headers.Authorization=`Bearer ${m}`),g},g=>Promise.reject(g));Pt.interceptors.response.use(g=>g,g=>{var m;return((m=g.response)==null?void 0:m.status)===401&&Vi(),Promise.reject(g)});const Co={__name:"organization-chart",async setup(g){let m,t;const e=Mi({hasError:!1,errorMessage:""}),i=lt([]),n=lt(null),o=lt(null),r=lt([]),s=Ti();Pi(()=>s.current.value.colors,async()=>{o.value&&i.value.length>0&&(l(),o.value.draw())},{deep:!0});async function a(){await Pt.get("/base/org-chart-node").then(({data:{data:p}})=>{i.value=p.map(f=>({id:f.id,pid:f.parent_id,orgPositionName:f.org_position.name,orgUnitName:f.org_unit.name,users:f.users,tags:[`position-id-${f.org_position.id}`]}))}).catch(p=>{console.error("Error fetching org chart nodes:",p),e.hasError=!0,e.errorMessage=p.message||"    "})}async function c(){try{const{data:p,error:f}=await Yi(Xi("/base/org-position"));if(f.value)throw f.value;r.value=p.value.data}catch(p){console.error("Error fetching org positions:",p),e.hasError=!0,e.errorMessage=p.message||"    "}}function l(){const p=s.current.value.colors;Ne.templates.vuetify=Object.assign({},Ne.templates.ana),Ne.templates.vuetify.size=[220,136],Ne.templates.vuetify.field_0=`
    <text data-width="200" style="font-size: 13px; font-weight: 500; font-family: Shabnam, Tahoma, sans-serif;" fill="${p["on-primary"]}" x="110" y="24" text-anchor="middle">{val}</text>
  `,Ne.templates.vuetify.field_1=`
    <text data-width="200" style="font-size: 13px; font-weight: 500; font-family: Shabnam, Tahoma, sans-serif;" fill="${p["on-primary"]}" x="110" y="60" text-anchor="middle">{val}</text>
  `,Ne.templates.vuetify.link=`
    <path stroke-linejoin="round" stroke="${p.primary}" stroke-opacity="0.5" stroke-width="2px" fill="none" d="{rounded}" />
  `,Ne.templates.vuetify.plus=`
    <circle cx="15" cy="15" r="15" fill="${p.surface}" stroke="${p.primary}" stroke-width="2"></circle>
    <line x1="8" y1="15" x2="22" y2="15" stroke-width="2" stroke="${p.primary}"></line>
    <line x1="15" y1="8" x2="15" y2="22" stroke-width="2" stroke="${p.primary}"></line>
  `,Ne.templates.vuetify.minus=`
    <circle cx="15" cy="15" r="15" fill="${p.surface}" stroke="${p.primary}" stroke-width="2"></circle>
    <line x1="8" y1="15" x2="22" y2="15" stroke-width="2" stroke="${p.primary}"></line>
  `,Ne.templates.vuetify.ripple={radius:0,color:p.primary,rect:null},Ne.templates.vuetify.editFormHeaderColor=p.primary,h()}function h(){const p=s.current.value.colors;r.value.forEach(f=>{Ne.templates[`position-id-${f.id}`]=Object.assign({},Ne.templates.vuetify),Ne.templates[`position-id-${f.id}`].node=`
    <defs>
      <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
      </filter>
    </defs>

    <!-- Main card background with rounded corners -->
    <rect x="0" y="0" height="{h}" width="{w}" fill="${p.surface}" rx="8" ry="8" filter="url(#shadow)"></rect>
    
    <!-- OrgPosition (top) - rounded top corners only -->
    <rect x="0" y="0" height="36" width="{w}" fill="${Ot[f.id]}" rx="8" ry="8"></rect>
    <rect x="0" y="28" height="8" width="{w}" fill="${Ot[f.id]}"></rect>
    
    <!-- OrgUnit (middle) - no rounded corners -->
    <rect x="0" y="36" height="36" width="{w}" fill="${p.primary}"></rect>
  `})}function d(p,f){l();const u={};r.value.forEach(x=>{u[`position-id-${x.id}`]={template:`position-id-${x.id}`}}),o.value=new Ne(p,{template:"vuetify",nodes:f,nodeBinding:{field_0:"orgPositionName",field_1:"orgUnitName"},scaleInitial:Ne.match.boundary,enableSearch:!1,tags:u})}return a(),[m,t]=Ui(()=>c()),await m,t(),Ri(async()=>{await Bi(),n.value&&i.value.length>0&&d(n.value,i.value)}),(p,f)=>($i(),Oi(qi,null,[Fi(Gi,{modelValue:wt(e).hasError,"onUpdate:modelValue":f[0]||(f[0]=u=>wt(e).hasError=u),timeout:2e3,location:"center",variant:"flat",color:"error"},{default:Hi(()=>[zi(ji(wt(e).errorMessage),1)]),_:1},8,["modelValue"]),Di("div",{ref_key:"orgChartRef",ref:n,class:"org-chart-container"},null,512)],64))}},ir=Ni(Co,[["__scopeId","data-v-348cfd02"]]);export{ir as default};
