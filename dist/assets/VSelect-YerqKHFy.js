import{V as me,m as Ae}from"./VTextField-DIU9dfNS.js";import{av as se,a6 as X,aa as be,w as $,ab as ce,d as A,F as J,s as L,ad as Se,b7 as De,a7 as K,b5 as he,r as W,Y as M,cz as Re,b6 as ke,a8 as ue,c8 as Fe,au as Pe,cp as Te,b_ as Be,aS as _e,Z as Ie,b4 as Oe,H as Ee,b as T,a9 as ne,J as Le,y as Me,aZ as He,al as ze,aD as pe,bM as Ne,co as Ke,aO as re,aG as Ue,bE as qe,bz as $e,cs as ge,ct as ye,bF as je,a1 as Ve,cA as We,bw as Ye,cr as Ze,a2 as Ge,a$ as Je,v as Xe}from"./index-BjMeilJt.js";import{e as Qe,m as et,V as tt,a as we,c as lt}from"./VList-B5tnEd9a.js";import{V as nt}from"./dialog-transition-C60lMhrI.js";import{V as at}from"./VMenu-CSLZBcXK.js";import{g as ot}from"./VOverlay-DKwWkzvN.js";import{V as ut}from"./VDivider-CBQIC_Ha.js";import{V as rt}from"./VCheckboxBtn-Bs2oER8j.js";const it=X({renderless:Boolean,...Se()},"VVirtualScrollItem"),st=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:it(),emits:{"update:height":t=>!0},setup(t,d){let{attrs:l,emit:c,slots:o}=d;const{resizeRef:f,contentRect:m}=be(void 0,"border");$(()=>{var a;return(a=m.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ce(()=>{var a,s;return t.renderless?A(J,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):A("div",L({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},l),[(s=o.default)==null?void 0:s.call(o)])})}}),ct=-1,dt=1,ie=100,ft=X({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function vt(t,d){const l=De(),c=K(0);he(()=>{c.value=parseFloat(t.itemHeight||0)});const o=K(0),f=K(Math.ceil((parseInt(t.height)||l.height.value)/(c.value||16))||1),m=K(0),a=K(0),s=W(),S=W();let i=0;const{resizeRef:H,contentRect:D}=be();he(()=>{H.value=s.value});const k=M(()=>{var e;return s.value===document.documentElement?l.height.value:((e=D.value)==null?void 0:e.height)||parseInt(t.height)||0}),F=M(()=>!!(s.value&&S.value&&k.value&&c.value));let h=Array.from({length:d.value.length}),g=Array.from({length:d.value.length});const P=K(0);let w=-1;function z(e){return h[e]||c.value}const N=Re(()=>{const e=performance.now();g[0]=0;const n=d.value.length;for(let r=1;r<=n-1;r++)g[r]=(g[r-1]||0)+z(r-1);P.value=Math.max(P.value,performance.now()-e)},P),y=$(F,e=>{e&&(y(),i=S.value.offsetTop,N.immediate(),E(),~w&&Pe(()=>{Te&&window.requestAnimationFrame(()=>{le(w),w=-1})}))});ke(()=>{N.clear()});function Q(e,n){const r=h[e],p=c.value;c.value=p?Math.min(c.value,n):n,(r!==n||p!==c.value)&&(h[e]=n,N())}function _(e){e=ue(e,0,d.value.length-1);const n=Math.floor(e),r=e%1,p=n+1,I=g[n]||0,u=g[p]||I;return I+(u-I)*r}function O(e){return mt(g,e)}let j=0,U=0,Y=0;$(k,(e,n)=>{n&&(E(),e<n&&requestAnimationFrame(()=>{U=0,E()}))});let Z=-1;function ee(){if(!s.value||!S.value)return;const e=s.value.scrollTop,n=performance.now();n-Y>500?(U=Math.sign(e-j),i=S.value.offsetTop):U=e-j,j=e,Y=n,window.clearTimeout(Z),Z=window.setTimeout(q,500),E()}function q(){!s.value||!S.value||(U=0,Y=0,window.clearTimeout(Z),E())}let te=-1;function E(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!s.value||!k.value||!c.value)return;const e=j-i,n=Math.sign(U),r=Math.max(0,e-ie),p=ue(O(r),0,d.value.length),I=e+k.value+ie,u=ue(O(I)+1,p+1,d.value.length);if((n!==ct||p<o.value)&&(n!==dt||u>f.value)){const x=_(o.value)-_(p),C=_(u)-_(f.value);Math.max(x,C)>ie?(o.value=p,f.value=u):(p<=0&&(o.value=p),u>=d.value.length&&(f.value=u))}m.value=_(o.value),a.value=_(d.value.length)-_(f.value)}function le(e){const n=_(e);!s.value||e&&!n?w=e:s.value.scrollTop=n}const oe=M(()=>d.value.slice(o.value,f.value).map((e,n)=>{const r=n+o.value;return{raw:e,index:r,key:Fe(e,t.itemKey,r)}}));return $(d,()=>{h=Array.from({length:d.value.length}),g=Array.from({length:d.value.length}),N.immediate(),E()},{deep:1}),{calculateVisibleItems:E,containerRef:s,markerRef:S,computedItems:oe,paddingTop:m,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:q,handleItemResize:Q}}function mt(t,d){let l=t.length-1,c=0,o=0,f=null,m=-1;if(t[l]<d)return l;for(;c<=l;)if(o=c+l>>1,f=t[o],f>d)l=o-1;else if(f<d)m=o,c=o+1;else return f===d?o:c;return m}const ht=X({items:{type:Array,default:()=>[]},renderless:Boolean,...ft(),...Se(),...He()},"VVirtualScroll"),pt=se()({name:"VVirtualScroll",props:ht(),setup(t,d){let{slots:l}=d;const c=Be("VVirtualScroll"),{dimensionStyles:o}=_e(t),{calculateVisibleItems:f,containerRef:m,markerRef:a,handleScroll:s,handleScrollend:S,handleItemResize:i,scrollToIndex:H,paddingTop:D,paddingBottom:k,computedItems:F}=vt(t,Ie(()=>t.items));return Oe(()=>t.renderless,()=>{function h(){var w,z;const P=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[P]("scroll",s,{passive:!0}),document[P]("scrollend",S)):((w=m.value)==null||w[P]("scroll",s,{passive:!0}),(z=m.value)==null||z[P]("scrollend",S))}Ee(()=>{m.value=ot(c.vnode.el,!0),h(!0)}),ke(h)}),ce(()=>{const h=F.value.map(g=>T(st,{key:g.key,renderless:t.renderless,"onUpdate:height":P=>i(g.index,P)},{default:P=>{var w;return(w=l.default)==null?void 0:w.call(l,{item:g.raw,index:g.index,...P})}}));return t.renderless?A(J,null,[A("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(D.value)}},null),h,A("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(k.value)}},null)]):A("div",{ref:m,class:Me(["v-virtual-scroll",t.class]),onScrollPassive:s,onScrollend:S,style:Le([o.value,t.style])},[A("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(D.value),paddingBottom:ne(k.value)}},[h])])}),{calculateVisibleItems:f,scrollToIndex:H}}});function gt(t,d){const l=K(!1);let c;function o(a){cancelAnimationFrame(c),l.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{l.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(l.value){const s=$(l,()=>{s(),a()})}else a()})}async function m(a){var i,H;if(a.key==="Tab"&&((i=d.value)==null||i.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const s=(H=t.value)==null?void 0:H.$el;if(!s)return;(a.key==="Home"||a.key==="End")&&s.scrollTo({top:a.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await f();const S=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const D=s.getBoundingClientRect().top;for(const k of S)if(k.getBoundingClientRect().top>=D){k.focus();break}}else{const D=s.getBoundingClientRect().bottom;for(const k of[...S].reverse())if(k.getBoundingClientRect().bottom<=D){k.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const yt=X({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:je,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...et({itemChildren:!1})},"Select"),Vt=X({...yt(),...$e(Ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...qe({transition:{component:nt}})},"VSelect"),Ct=se()({name:"VSelect",props:Vt(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:l}=d;const{t:c}=ze(),o=W(),f=W(),m=W(),{items:a,transformIn:s,transformOut:S}=Qe(t),i=pe(t,"modelValue",[],e=>s(e===null?[null]:Ne(e)),e=>{const n=S(e);return t.multiple?n:n[0]??null}),H=M(()=>typeof t.counterValue=="function"?t.counterValue(i.value):typeof t.counterValue=="number"?t.counterValue:i.value.length),D=Ke(t),k=M(()=>i.value.map(e=>e.value)),F=K(!1);let h="",g=-1,P;const w=M(()=>t.hideSelected?a.value.filter(e=>!i.value.some(n=>(t.valueComparator||re)(n,e))):a.value),z=M(()=>t.hideNoData&&!w.value.length||D.isReadonly.value||D.isDisabled.value),N=pe(t,"menu"),y=M({get:()=>N.value,set:e=>{var n;N.value&&!e&&((n=f.value)!=null&&n.Î¨openChildren.size)||e&&z.value||(N.value=e)}}),Q=Ie(()=>y.value?t.closeText:t.openText),_=M(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),O=W(),j=gt(O,o);function U(e){t.openOnClear&&(y.value=!0)}function Y(){z.value||(y.value=!y.value)}function Z(e){ge(e)&&ee(e)}function ee(e){var v,R,b;if(!e.key||D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(y.value=!0),["Escape","Tab"].includes(e.key)&&(y.value=!1),e.key==="Home"?(v=O.value)==null||v.focus("first"):e.key==="End"&&((R=O.value)==null||R.focus("last"));const n=1e3;if(!ge(e))return;const r=performance.now();r-P>n&&(h="",g=-1),h+=e.key.toLowerCase(),P=r;const p=w.value;function I(){let V=u();return V||h.at(-1)===h.at(-2)&&(h=h.slice(0,-1),V=u(),V)||(g=-1,V=u(),V)?V:(h=e.key.toLowerCase(),u())}function u(){for(let V=g+1;V<p.length;V++){const G=p[V];if(G.title.toLowerCase().startsWith(h))return[G,V]}}const x=I();if(!x)return;const[C,B]=x;g=B,(b=O.value)==null||b.focus(B),t.multiple||(i.value=[C])}function q(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const r=i.value.findIndex(I=>(t.valueComparator||re)(I.value,e.value)),p=n??!~r;if(~r){const I=p?[...i.value,e]:[...i.value];I.splice(r,1),i.value=I}else p&&(i.value=[...i.value,e])}else{const r=n!==!1;i.value=r?[e]:[],Pe(()=>{y.value=!1})}}function te(e){var n;(n=O.value)!=null&&n.$el.contains(e.relatedTarget)||(y.value=!1)}function E(){var e;t.eager&&((e=m.value)==null||e.calculateVisibleItems())}function ae(){var e;F.value&&((e=o.value)==null||e.focus())}function le(e){F.value=!0}function oe(e){if(e==null)i.value=[];else if(ye(o.value,":autofill")||ye(o.value,":-webkit-autofill")){const n=a.value.find(r=>r.title===e);n&&q(n)}else o.value&&(o.value.value="")}return $(y,()=>{if(!t.hideSelected&&y.value&&i.value.length){const e=w.value.findIndex(n=>i.value.some(r=>(t.valueComparator||re)(r.value,n.value)));Te&&!t.noAutoScroll&&window.requestAnimationFrame(()=>{var n;e>=0&&((n=m.value)==null||n.scrollToIndex(e))})}}),$(()=>t.items,(e,n)=>{y.value||F.value&&t.hideNoData&&!n.length&&e.length&&(y.value=!0)}),ce(()=>{const e=!!(t.chips||l.chip),n=!!(!t.hideNoData||w.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),r=i.value.length>0,p=me.filterProps(t),I=r||!F.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return T(me,L({ref:o},p,{modelValue:i.value.map(u=>u.props.title).join(", "),"onUpdate:modelValue":oe,focused:F.value,"onUpdate:focused":u=>F.value=u,validationValue:i.externalValue,counterValue:H.value,dirty:r,class:["v-select",{"v-select--active-menu":y.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!l.selection},t.class],style:t.style,inputmode:"none",placeholder:I,"onClick:clear":U,"onMousedown:control":Y,onBlur:te,onKeydown:ee,"aria-label":c(Q.value),title:c(Q.value)}),{...l,default:()=>A(J,null,[T(at,L({ref:f,modelValue:y.value,"onUpdate:modelValue":u=>y.value=u,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:E,onAfterLeave:ae},_.value),{default:()=>[n&&T(tt,L({ref:O,selected:k.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:Z,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},j,t.listProps),{default:()=>{var u,x,C;return[(u=l["prepend-item"])==null?void 0:u.call(l),!w.value.length&&!t.hideNoData&&(((x=l["no-data"])==null?void 0:x.call(l))??T(we,{key:"no-data",title:c(t.noDataText)},null)),T(pt,{ref:m,renderless:!0,items:w.value,itemKey:"value"},{default:B=>{var de,fe,ve;let{item:v,index:R,itemRef:b}=B;const V=We(v.props),G=L(v.props,{ref:b,key:v.value,onClick:()=>q(v,null)});return v.type==="divider"?((de=l.divider)==null?void 0:de.call(l,{props:v.raw,index:R}))??T(ut,L(v.props,{key:`divider-${R}`}),null):v.type==="subheader"?((fe=l.subheader)==null?void 0:fe.call(l,{props:v.raw,index:R}))??T(lt,L(v.props,{key:`subheader-${R}`}),null):((ve=l.item)==null?void 0:ve.call(l,{item:v,index:R,props:G}))??T(we,L(G,{role:"option"}),{prepend:xe=>{let{isSelected:Ce}=xe;return A(J,null,[t.multiple&&!t.hideSelected?T(rt,{key:v.value,modelValue:Ce,ripple:!1,tabindex:"-1"},null):void 0,V.prependAvatar&&T(Ye,{image:V.prependAvatar},null),V.prependIcon&&T(Ve,{icon:V.prependIcon},null)])}})}}),(C=l["append-item"])==null?void 0:C.call(l)]}})]}),i.value.map((u,x)=>{function C(b){b.stopPropagation(),b.preventDefault(),q(u,!1)}const B={"onClick:close":C,onKeydown(b){b.key!=="Enter"&&b.key!==" "||(b.preventDefault(),b.stopPropagation(),C(b))},onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},v=e?!!l.chip:!!l.selection,R=v?Ze(e?l.chip({item:u,index:x,props:B}):l.selection({item:u,index:x})):void 0;if(!(v&&!R))return A("div",{key:u.value,class:"v-select__selection"},[e?l.chip?T(Je,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[R]}):T(Ge,L({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},B),null):R??A("span",{class:"v-select__selection-text"},[u.title,t.multiple&&x<i.value.length-1&&A("span",{class:"v-select__selection-comma"},[Xe(",")])])])})]),"append-inner":function(){var B,v;for(var u=arguments.length,x=new Array(u),C=0;C<u;C++)x[C]=arguments[C];return A(J,null,[(B=l["append-inner"])==null?void 0:B.call(l,...x),t.menuIcon?T(Ve,{class:"v-select__menu-icon",color:(v=o.value)==null?void 0:v.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),Ue({isFocused:F,menu:y,select:q},o)}});export{Ct as V,pt as a,yt as m,gt as u};
